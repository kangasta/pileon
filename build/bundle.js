var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}function l(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function u(t){return null==t?"":t}function s(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function d(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function p(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function h(t){return document.createTextNode(t)}function m(){return h(" ")}function $(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function v(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e,n,r){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}let S,k;function w(){if(void 0===S){S=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){S=!0}}return S}function C(t,e,n){t.classList[n?"add":"remove"](e)}function x(t){k=t}function O(){if(!k)throw new Error("Function called outside component initialization");return k}function A(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const T=[],D=[],j=[],U=[],_=Promise.resolve();let L=!1;function M(t){j.push(t)}const F=new Set;let E=0;function R(){const t=k;do{for(;E<T.length;){const t=T[E];E++,x(t),P(t.$$)}for(x(null),T.length=0,E=0;D.length;)D.pop()();for(let t=0;t<j.length;t+=1){const e=j[t];F.has(e)||(F.add(e),e())}j.length=0}while(T.length);for(;U.length;)U.pop()();L=!1,F.clear(),x(t)}function P(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(M)}}const N=new Set;let K;function H(){K={r:0,c:[],p:K}}function z(){K.r||r(K.c),K=K.p}function V(t,e){t&&t.i&&(N.delete(t),t.i(e))}function I(t,e,n,r){if(t&&t.o){if(N.has(t))return;N.add(t),K.c.push((()=>{N.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}function J(t){t&&t.c()}function q(t,n,i,a){const{fragment:l,on_mount:u,on_destroy:s,after_update:c}=t.$$;l&&l.m(n,i),a||M((()=>{const n=u.map(e).filter(o);s?s.push(...n):r(n),t.$$.on_mount=[]})),c.forEach(M)}function B(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function W(t,e){-1===t.$$.dirty[0]&&(T.push(t),L||(L=!0,_.then(R)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function G(e,o,i,a,l,u,s,c=[-1]){const d=k;x(e);const g=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(d?d.$$.context:[])),callbacks:n(),dirty:c,skip_bound:!1,root:o.target||d.$$.root};s&&s(g.root);let p=!1;if(g.ctx=i?i(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return g.ctx&&l(g.ctx[t],g.ctx[t]=o)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](o),p&&W(e,t)),n})):[],g.update(),p=!0,r(g.before_update),g.fragment=!!a&&a(g.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);g.fragment&&g.fragment.l(t),t.forEach(f)}else g.fragment&&g.fragment.c();o.intro&&V(e.$$.fragment),q(e,o.target,o.anchor,o.customElement),R()}x(d)}class Q{$destroy(){B(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const X=[];function Y(e,n=t){let r;const o=new Set;function a(t){if(i(e,t)&&(e=t,r)){const t=!X.length;for(const t of o)t[1](),X.push(t,e);if(t){for(let t=0;t<X.length;t+=2)X[t][0](X[t+1]);X.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(i,l=t){const u=[i,l];return o.add(u),1===o.size&&(r=n(a)||t),i(e),()=>{o.delete(u),0===o.size&&(r(),r=null)}}}}const Z="settings",tt=JSON.parse(localStorage.getItem(Z)),et=Y(null!=tt?tt:{game:"deck",colors:"default",size:"default"});et.subscribe((t=>localStorage.setItem(Z,JSON.stringify(t))));const nt=Y({}),rt="card-appearance",ot={bridge:!1,fourColor:!1},it=({size:t,colors:e})=>({bridge:"bridge"===t,fourColor:"four-color"===e}),at=t=>({subscribe:Y(ot,(e=>(et.subscribe((n=>e(t(n)))),()=>{}))).subscribe}),lt=t=>{const e=at(t);var n,r;n=rt,r=e,O().$$.context.set(n,r)},ut=()=>{const t=(e=rt,O().$$.context.get(e));var e;return null!=t?t:at(it)};var st={},ct={};!function(t){function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CardStringType=t.CardSuits=void 0,t.CardSuits=r,function(t){t[t.Hearts=0]="Hearts",t[t.Spades=1]="Spades",t[t.Diamonds=2]="Diamonds",t[t.Clubs=3]="Clubs"}(r||(t.CardSuits=r={})),t.CardStringType=o,function(t){t.Short="SHORT",t.Long="LONG",t.ShortEmoji="SHORT_EMOJI",t.ShortSuit="SHORT_SUIT",t.LongSuit="LONG_SUIT",t.EmojiSuit="EMOJI_SUIT",t.ShortValue="SHORT_VALUE",t.LongValue="LONG_VALUE"}(o||(t.CardStringType=o={}));var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n(this,"num",void 0),this.num=e}var r,o,i;return r=t,o=[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.StringType.Long;switch(e){case t.StringType.Short:return this.toString(t.StringType.ShortValue)+this.toString(t.StringType.ShortSuit);case t.StringType.ShortEmoji:return this.toString(t.StringType.ShortValue)+this.toString(t.StringType.EmojiSuit);case t.StringType.Long:return this.toString(t.StringType.LongValue)+" of "+this.toString(t.StringType.LongSuit);case t.StringType.ShortSuit:return t.shortSuits[this.suit];case t.StringType.LongSuit:return t.longSuits[this.suit];case t.StringType.EmojiSuit:return t.emojiSuits[this.suit];case t.StringType.ShortValue:return t.shortValues[13===this.value?0:this.value];case t.StringType.LongValue:return t.longValues[13===this.value?0:this.value]}throw new Error("Unsupported output type")}},{key:"suit",get:function(){return t.getSuit(this.num)}},{key:"value",get:function(){return t.getValue(this.num)}}],i=[{key:"fromJSON",value:function(e){return new t(e.num)}},{key:"getSuit",value:function(t){return Math.floor(t/13)%4}},{key:"getValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t%13||e?t%13:13}},{key:"compare",value:function(t,e){return e.value-t.value}}],o&&e(r.prototype,o),i&&e(r,i),t}();n(i,"Suits",r),n(i,"StringType",o),n(i,"emojiSuits",["♥","♠","♦","♣"]),n(i,"shortSuits",["h","s","d","c"]),n(i,"longSuits",["hearts","spades","diamonds","clubs"]),n(i,"shortValues",["A","2","3","4","5","6","7","8","9","T","J","Q","K"]),n(i,"longValues",["ace","two","three","four","five","six","seven","eight","nine","ten","jack","queen","king"]);var a=i;t.default=a}(ct);var ft={},dt={};Object.defineProperty(dt,"__esModule",{value:!0}),dt.uniqueFilter=dt.shuffle=dt.last=dt.isSorted=dt.getCombinations=dt.arraySubtraction=void 0;dt.arraySubtraction=function(t,e){return t.filter((function(t){return!e.includes(t)}))};var gt=function t(e,n,r,o,i){if(o.length>=n)i.push(o);else for(var a=r;a<e.length;a++)t(e,n,a+1,o.concat(e[a]),i)};dt.getCombinations=function(t,e){var n=[];return gt(t,e,0,[],n),n};dt.isSorted=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n?-1:1;try{return t.reduce((function(t,n){if(r*e(t,n)<=0)return n;throw new Error})),!0}catch(t){return!1}};dt.last=function(t){return t[t.length-1]};dt.shuffle=function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),r=[t[n],t[e]];t[e]=r[0],t[n]=r[1]}return t};dt.uniqueFilter=function(t,e,n){return n.indexOf(t)===e},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e,n=(e=ct)&&e.__esModule?e:{default:e},r=dt;function o(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=function(){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;i(this,t),l(this,"cards",void 0),this.cards=o(Array(52*r).keys()).map((function(t){return new n.default(t)})),e&&this.shuffle()}var e,u,s;return e=t,u=[{key:"shuffle",value:function(){(0,r.shuffle)(this.cards)}},{key:"isShuffled",value:function(){return!(0,r.isSorted)(this.cards,(function(t,e){return t.num-e.num}))}},{key:"pop",value:function(){return this.cards.pop()}},{key:"popN",value:function(t){for(var e,n=[],r=0;r<t&&(e=this.pop());r++)n.push(e);return n}},{key:"cardsRemaining",get:function(){return this.cards.length}}],s=[{key:"fromJSON",value:function(e){var r=e.cards,o=new t(!1,0);return o.cards=r.map((function(t){return n.default.fromJSON(t)})),o}}],u&&a(e.prototype,u),s&&a(e,s),t}(),s=u;t.default=s}(ft);var pt={},ht={};Object.defineProperty(ht,"__esModule",{value:!0}),ht.uuid4=void 0;var mt=function(t){var e;do{e=Math.random().toString(16).slice(2,t+2)}while(e.length<t&&t<=12);return e};function $t(e){let n,r;return{c(){n=p("svg"),r=p("path"),v(r,"d",e[1]),v(r,"fill","CurrentColor"),v(n,"viewBox","0 0 16 20"),v(n,"class","svelte-1jimf84"),C(n,"flip",e[0])},m(t,e){c(t,n,e),s(n,r)},p(t,[e]){2&e&&v(r,"d",t[1]),1&e&&C(n,"flip",t[0])},i:t,o:t,d(t){t&&f(n)}}}function vt(t,e,n){let r,{suit:o=null}=e,{flip:i=!1}=e;return t.$$set=t=>{"suit"in t&&n(2,o=t.suit),"flip"in t&&n(0,i=t.flip)},t.$$.update=()=>{4&t.$$.dirty&&n(1,r=(t=>{switch(t){case"hearts":return"M 8 2 C 9 0 11 0 12 0 C 13 0 16 1 16 6 C 16 8 15.5 10 14 12 L 8 20 L 2 12 C 0.5 10 0 8 0 6 C 0 1 3 0 4 0 C 5 0 7 0 8 2";case"spades":return"M 8 0 L 13 5 C 16 8 16 10 16 12 C 16 14 14 16 12 16 C 11 16 9 16 8 14 L 12 20 L 4 20 L 8 14 C 7 16 5 16 4 16 C 2 16 0 14 0 12 C 0 10 0 8 3 5 L 8 0";case"diamonds":return"M 8 0 L 16 10 L 8 20 L 0 10 L 8 0";case"clubs":return"M 8 0 C 10 0 12 2 12 4 C 12 6 11 8 8 10 C 9 8 10 7 12 7 C 14 7 16 9 16 12 C 16 14 14 16 12 16 C 11 16 9 16 8 14 L 12 20 L 4 20 L 8 14 C 7 16 5 16 4 16 C 2 16 0 14 0 12 C 0 9 2 7 4 7 C 6 7 7 8 8 10 C 5 8 4 6 4 4 C 4 2 6 0 8 0";default:return null}})(o))},[i,r,o]}ht.uuid4=function(){var t=[8,4,4,4,12].map(mt).join("-").split("");return t[14]="4",t[19]=(Math.floor(64*Math.random())%4+8).toString(16),t.join("")},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.HandRank=void 0;var e,n,r=(e=ct)&&e.__esModule?e:{default:e},o=ht,i=dt;function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t.HandRank=n,function(t){t[t.High=0]="High",t[t.Pair=5]="Pair",t[t.TwoPairs=10]="TwoPairs",t[t.ThreeOfAKind=15]="ThreeOfAKind",t[t.Straight=20]="Straight",t[t.Flush=25]="Flush",t[t.FullHouse=30]="FullHouse",t[t.FourOfAKind=35]="FourOfAKind",t[t.StraightFlush=40]="StraightFlush",t[t.FiveOfAKind=45]="FiveOfAKind"}(n||(t.HandRank=n={}));var c=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,"uuid",void 0),s(this,"rank",void 0),s(this,"cards",void 0),this.rank=e,this.cards=n,this.uuid=r||(0,o.uuid4)()}var e,n,c;return e=t,n=[{key:"getCardsString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.default.StringType.Short;return this.cards.map((function(e){return e.toString(t)})).join(", ")}},{key:"toString",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.default.StringType.Short,o=r.default.StringType.LongValue,i=function(t){return e.cards[t].toString(o)},a=this.getCardsString(n);switch(this.rank){case t.Rank.FiveOfAKind:return"Five of a kind, ".concat(i(0),"s (").concat(a,")");case t.Rank.StraightFlush:return"Straigth flush, ".concat(i(0)," high (").concat(a,")");case t.Rank.FourOfAKind:return"Four of a kind, ".concat(i(0),"s (").concat(a,")");case t.Rank.FullHouse:return"Full house, ".concat(i(0),"s over ").concat(i(3),"s (").concat(a,")");case t.Rank.Flush:return"Flush, ".concat(i(0)," high (").concat(a,")");case t.Rank.Straight:return"Straigth, ".concat(i(0)," high (").concat(a,")");case t.Rank.ThreeOfAKind:return"Three of a kind, ".concat(i(0),"s (").concat(a,")");case t.Rank.TwoPairs:return"Two pairs, ".concat(i(0),"s and ").concat(i(2),"s (").concat(a,")");case t.Rank.Pair:return"Pair, ".concat(i(0),"s (").concat(a,")");case t.Rank.High:return"".concat(i(0).replace(/^\w/,(function(t){return t.toUpperCase()}))," high (").concat(a,")")}throw new Error("Unsupported rank value")}}],c=[{key:"fromJSON",value:function(e){var n=e.rank,o=e.cards,i=e.uuid;return new t(n,o.map(r.default.fromJSON),i)}},{key:"solve",value:function(e){var n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return(n=t.isNumOfAKind(5,e))?r=t.Rank.FiveOfAKind:(n=t.isStraightFlush(e,o))?r=t.Rank.StraightFlush:(n=t.isNumOfAKind(4,e))?r=t.Rank.FourOfAKind:(n=t.isFullHouse(e))?r=t.Rank.FullHouse:(n=t.isFlush(e,o))?r=t.Rank.Flush:(n=t.isStraight(e,o))?r=t.Rank.Straight:(n=t.isNumOfAKind(3,e))?r=t.Rank.ThreeOfAKind:(n=t.isTwoPairs(e))?r=t.Rank.TwoPairs:(n=t.isNumOfAKind(2,e))?r=t.Rank.Pair:(n=[],r=t.Rank.High),n=t.fillWithKickers(n,e),new t(r,n)}},{key:"solveHoldEm",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===r)return t.solve([].concat(l(e),l(n)));for(var o=(0,i.getCombinations)(e,e.length-r),a=(0,i.getCombinations)(n,Math.min(n.length,r)),u=[],s=0;s<o.length;s++)for(var c=0;c<a.length;c++)u.push(t.solve([].concat(l(o[s]),l(a[c]))));return t.max.apply(t,u)}},{key:"compare",value:function(t,e){var n;if(t.cards.length!==e.cards.length)throw new Error("Comparing hands with different number of cards");if(0!=(n=e.rank-t.rank))return n;for(var o=0;o<t.cards.length;o++)if(0!==(n=r.default.compare(t.cards[o],e.cards[o])))return n;return 0}},{key:"winners",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=t.max.apply(t,n);return n.filter((function(e){return!t.compare(e,o)}))}},{key:"max",value:function(){for(var e=function(e,n){return t.compare(e,n)<0?e:n},n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return r.reduce((function(t,n){return e(t,n)}))}},{key:"fillWithKickers",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return e=(0,i.arraySubtraction)(e,t).sort(r.default.compare),[].concat(l(t),l(e)).slice(0,n)}},{key:"getUniqueValues",value:function(t){return t.map((function(t){return t.value})).filter(i.uniqueFilter).sort((function(t,e){return e-t}))}},{key:"isNumOfAKind",value:function(e,n){for(var r,o=t.getUniqueValues(n),i=function(t){if((r=n.filter((function(e){return e.value==o[t]}))).length>=e)return{v:r}},l=0;l<o.length;l++){var u=i(l);if("object"===a(u))return u.v}return!1}},{key:"isNumOfAKindCombination",value:function(e,n){for(var r=[],o=0;o<e.length;o++){var a=t.isNumOfAKind(e[o],(0,i.arraySubtraction)(n,r));if(!1===a)return!1;r.push.apply(r,l(a))}return r}},{key:"isStraightFlush",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,r=[],o=function(o){if((r=e.filter((function(t){return t.suit===o}))).length<n)return"continue";var i=t.isStraight(r,n);return i?{v:i}:void 0},i=0;i<4;i++){var l=o(i);if("continue"!==l&&"object"===a(l))return l.v}return!1}},{key:"isFullHouse",value:function(e){return t.isNumOfAKindCombination([3,2],e)}},{key:"isFlush",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=function(n){var o=t.filter((function(t){return t.suit==n}));if(o.length>=e)return{v:o.sort(r.default.compare).slice(0,e)}},o=0;o<4;o++){var i=n(o);if("object"===a(i))return i.v}return!1}},{key:"isStraight",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,r=t.getUniqueValues(e);if(r.length<n)return!1;r.includes(13)&&r.push(0);for(var o=[r[0]],a=1;a<r.length&&o.length<n;a++)(0,i.last)(o)-r[a]==1?o.push(r[a]):o=[r[a]];return o.length==n&&o.map((function(t){return e.find((function(e){return e.value===(t||13)}))}))}},{key:"isTwoPairs",value:function(e){return t.isNumOfAKindCombination([2,2],e)}}],n&&u(e.prototype,n),c&&u(e,c),t}();s(c,"Rank",n);var f=c;t.default=f}(pt),function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Card",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"Deck",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"Hand",{enumerable:!0,get:function(){return r.default}});var e=o(ct),n=o(ft),r=o(pt);function o(t){return t&&t.__esModule?t:{default:t}}}(st);class yt extends Q{constructor(t){super(),G(this,t,vt,$t,i,{suit:2,flip:0})}}function bt(t,e,n){const r=t.slice();return r[5]=e[n],r}function St(t,e,n){const r=t.slice();return r[8]=e[n],r}function kt(t){let e,n,r;return n=new yt({props:{suit:t[0],flip:"d"===t[8].toLowerCase()}}),{c(){e=g("span"),J(n.$$.fragment),v(e,"class","svelte-1sm49dl")},m(t,o){c(t,e,o),q(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.suit=t[0]),2&e&&(r.flip="d"===t[8].toLowerCase()),n.$set(r)},i(t){r||(V(n.$$.fragment,t),r=!0)},o(t){I(n.$$.fragment,t),r=!1},d(t){t&&f(e),B(n)}}}function wt(t){let e,n,r,o,i=t[5].split(""),a=[];for(let e=0;e<i.length;e+=1)a[e]=kt(St(t,i,e));const l=t=>I(a[t],1,1,(()=>{a[t]=null}));return{c(){e=g("div");for(let t=0;t<a.length;t+=1)a[t].c();n=m(),v(e,"class",r="row "+t[3](t[5])+" svelte-1sm49dl")},m(t,r){c(t,e,r);for(let t=0;t<a.length;t+=1)a[t].m(e,null);s(e,n),o=!0},p(t,u){if(7&u){let r;for(i=t[5].split(""),r=0;r<i.length;r+=1){const o=St(t,i,r);a[r]?(a[r].p(o,u),V(a[r],1)):(a[r]=kt(o),a[r].c(),V(a[r],1),a[r].m(e,n))}for(H(),r=i.length;r<a.length;r+=1)l(r);z()}(!o||2&u&&r!==(r="row "+t[3](t[5])+" svelte-1sm49dl"))&&v(e,"class",r)},i(t){if(!o){for(let t=0;t<i.length;t+=1)V(a[t]);o=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)I(a[t]);o=!1},d(t){t&&f(e),d(a,t)}}}function Ct(t){let e,n,r=t[2](t[1]),o=[];for(let e=0;e<r.length;e+=1)o[e]=wt(bt(t,r,e));const i=t=>I(o[t],1,1,(()=>{o[t]=null}));return{c(){e=g("div");for(let t=0;t<o.length;t+=1)o[t].c();v(e,"class","center-pattern svelte-1sm49dl")},m(t,r){c(t,e,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);n=!0},p(t,[n]){if(15&n){let a;for(r=t[2](t[1]),a=0;a<r.length;a+=1){const i=bt(t,r,a);o[a]?(o[a].p(i,n),V(o[a],1)):(o[a]=wt(i),o[a].c(),V(o[a],1),o[a].m(e,null))}for(H(),a=r.length;a<o.length;a+=1)i(a);z()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)V(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)I(o[t]);n=!1},d(t){t&&f(e),d(o,t)}}}function xt(t,e,n){let{suit:r}=e,{rank:o}=e;const i={A:["U"],2:["U","D"],3:["U","U","D"],4:["UU","DD"],5:["UU","U","DD"],6:["UU","UU","DD"],7:["UU","u","UU","DD"],8:["UU","UU","DD","DD"],9:["UU","u","UU","DD","DD"],10:["UU","u","UU","DD","d","DD"]};return t.$$set=t=>{"suit"in t&&n(0,r=t.suit),"rank"in t&&n(1,o=t.rank)},[r,o,t=>{var e;return null!==(e=i[t])&&void 0!==e?e:[]},t=>t.toUpperCase()===t?"grow":""]}class Ot extends Q{constructor(t){super(),G(this,t,xt,Ct,i,{suit:0,rank:1})}}function At(t){let e,n;const r=t[1].default,o=function(t,e,n,r){if(t){const o=l(t,e,n,r);return t[0](o)}}(r,t,t[0],null);return{c(){e=g("span"),o&&o.c(),v(e,"class","screen-reader-only svelte-3uotpv")},m(t,r){c(t,e,r),o&&o.m(e,null),n=!0},p(t,[e]){o&&o.p&&(!n||1&e)&&function(t,e,n,r,o,i){if(o){const a=l(e,n,r,i);t.p(a,o)}}(o,r,t,t[0],n?function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(r,t[0],e,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[0]),null)},i(t){n||(V(o,t),n=!0)},o(t){I(o,t),n=!1},d(t){t&&f(e),o&&o.d(t)}}}function Tt(t,e,n){let{$$slots:r={},$$scope:o}=e;return t.$$set=t=>{"$$scope"in t&&n(0,o=t.$$scope)},[o,r]}class Dt extends Q{constructor(t){super(),G(this,t,Tt,At,i,{})}}function jt(t,e,n){const r=t.slice();return r[15]=e[n],r}function Ut(t){let e,n;return e=new Dt({props:{$$slots:{default:[_t]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(t,r){q(e,t,r),n=!0},p(t,n){const r={};262176&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(V(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function _t(t){let e;return{c(){e=h(t[5])},m(t,n){c(t,e,n)},p(t,n){32&n&&y(e,t[5])},d(t){t&&f(e)}}}function Lt(t){let e,n,r,o,i,a,l,u,d,p,$;return l=new yt({props:{suit:t[7]}}),p=new Ot({props:{suit:t[7],rank:t[8]}}),{c(){e=g("div"),n=g("div"),r=h(t[8]),i=m(),a=g("div"),J(l.$$.fragment),u=m(),d=g("div"),J(p.$$.fragment),v(n,"class",o="rank rank-"+t[8]+" svelte-hy10he"),v(a,"class","suit svelte-hy10he"),v(e,"aria-hidden","true"),v(e,"class",t[15]+" label svelte-hy10he"),v(d,"class","center svelte-hy10he"),C(d,"face",t[6])},m(t,o){c(t,e,o),s(e,n),s(n,r),s(e,i),s(e,a),q(l,a,null),c(t,u,o),c(t,d,o),q(p,d,null),$=!0},p(t,e){(!$||256&e)&&y(r,t[8]),(!$||256&e&&o!==(o="rank rank-"+t[8]+" svelte-hy10he"))&&v(n,"class",o);const i={};128&e&&(i.suit=t[7]),l.$set(i);const a={};128&e&&(a.suit=t[7]),256&e&&(a.rank=t[8]),p.$set(a),(!$||64&e)&&C(d,"face",t[6])},i(t){$||(V(l.$$.fragment,t),V(p.$$.fragment,t),$=!0)},o(t){I(l.$$.fragment,t),I(p.$$.fragment,t),$=!1},d(t){t&&f(e),B(l),t&&f(u),t&&f(d),B(p)}}}function Mt(t){let e,n,r,o,i=t[3]&&Ut(t),a=t[12],l=[];for(let e=0;e<a.length;e+=1)l[e]=Lt(jt(t,a,e));const u=t=>I(l[t],1,1,(()=>{l[t]=null}));return{c(){e=g("div"),i&&i.c(),n=m();for(let t=0;t<l.length;t+=1)l[t].c();v(e,"class",r="card "+t[7]+" stack-"+t[2]+" svelte-hy10he"),C(e,"bridge",t[10]),C(e,"fourColor",t[9]),C(e,"empty",t[0]),C(e,"hidden",t[4]),C(e,"shadow",t[1]),C(e,"visible",t[3])},m(t,r){c(t,e,r),i&&i.m(e,null),s(e,n);for(let t=0;t<l.length;t+=1)l[t].m(e,null);o=!0},p(t,[s]){if(t[3]?i?(i.p(t,s),8&s&&V(i,1)):(i=Ut(t),i.c(),V(i,1),i.m(e,n)):i&&(H(),I(i,1,1,(()=>{i=null})),z()),4544&s){let n;for(a=t[12],n=0;n<a.length;n+=1){const r=jt(t,a,n);l[n]?(l[n].p(r,s),V(l[n],1)):(l[n]=Lt(r),l[n].c(),V(l[n],1),l[n].m(e,null))}for(H(),n=a.length;n<l.length;n+=1)u(n);z()}(!o||132&s&&r!==(r="card "+t[7]+" stack-"+t[2]+" svelte-hy10he"))&&v(e,"class",r),(!o||1156&s)&&C(e,"bridge",t[10]),(!o||644&s)&&C(e,"fourColor",t[9]),(!o||133&s)&&C(e,"empty",t[0]),(!o||148&s)&&C(e,"hidden",t[4]),(!o||134&s)&&C(e,"shadow",t[1]),(!o||140&s)&&C(e,"visible",t[3])},i(t){if(!o){V(i);for(let t=0;t<a.length;t+=1)V(l[t]);o=!0}},o(t){I(i),l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)I(l[t]);o=!1},d(t){t&&f(e),i&&i.d(),d(l,t)}}}function Ft(t,e,n){let r,o,i,l,u,s,c,f,d;const g=ut();a(t,g,(t=>n(14,d=t)));let{card:p=null}=e,{empty:h=!1}=e,{shadow:m=!1}=e,{stack:$}=e;return t.$$set=t=>{"card"in t&&n(13,p=t.card),"empty"in t&&n(0,h=t.empty),"shadow"in t&&n(1,m=t.shadow),"stack"in t&&n(2,$=t.stack)},t.$$.update=()=>{16384&t.$$.dirty&&n(10,r=d.bridge),16384&t.$$.dirty&&n(9,o=d.fourColor),8194&t.$$.dirty&&n(4,i=null===p&&!m),19&t.$$.dirty&&n(3,l=!(h||i||m)),8200&t.$$.dirty&&n(8,u=l&&p.toString(st.Card.StringType.ShortValue).replace("T","10")),8200&t.$$.dirty&&n(7,s=l&&p.toString(st.Card.StringType.LongSuit)),8200&t.$$.dirty&&n(6,c=l&&p.num%13>9),8200&t.$$.dirty&&n(5,f=l&&p.toString(st.Card.StringType.Long))},[h,m,$,l,i,f,c,s,u,o,r,g,["top","bottom"],p,d]}class Et extends Q{constructor(t){super(),G(this,t,Ft,Mt,i,{card:13,empty:0,shadow:1,stack:2})}}function Rt(t,e,n){const r=t.slice();return r[18]=e[n].card,r[19]=e[n].shadow,r[20]=e[n].transform,r}function Pt(t){let e,n;return e=new Et({props:{card:t[0],empty:void 0===t[0]}}),{c(){J(e.$$.fragment)},m(t,r){q(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.card=t[0]),1&n&&(r.empty=void 0===t[0]),e.$set(r)},i(t){n||(V(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Nt(t){let e,n,r,o;return n=new Et({props:{card:t[18],shadow:t[19]}}),{c(){e=g("div"),J(n.$$.fragment),r=m(),v(e,"class","shadow-container svelte-1sx04q5"),b(e,"transform",t[20])},m(t,i){c(t,e,i),q(n,e,null),s(e,r),o=!0},p(t,r){const i={};32&r&&(i.card=t[18]),32&r&&(i.shadow=t[19]),n.$set(i),(!o||32&r)&&b(e,"transform",t[20])},i(t){o||(V(n.$$.fragment,t),o=!0)},o(t){I(n.$$.fragment,t),o=!1},d(t){t&&f(e),B(n)}}}function Kt(t){let e,n,i,a,l,u,p=!t[2]&&Pt(t),h=t[5],y=[];for(let e=0;e<h.length;e+=1)y[e]=Nt(Rt(t,h,e));const b=t=>I(y[t],1,1,(()=>{y[t]=null}));return{c(){e=g("div"),n=g("div"),p&&p.c(),i=m();for(let t=0;t<y.length;t+=1)y[t].c();v(n,"aria-atomic","true"),v(n,"aria-live","polite"),v(e,"aria-label",t[3]),v(e,"class","deck svelte-1sx04q5"),v(e,"role","button"),v(e,"tabindex","0"),C(e,"bridge",t[6]),C(e,"shuffling",t[2])},m(r,f){c(r,e,f),s(e,n),p&&p.m(n,null),s(n,i);for(let t=0;t<y.length;t+=1)y[t].m(n,null);a=!0,l||(u=[$(e,"keydown",(function(){o(t[4])&&t[4].apply(this,arguments)})),$(e,"click",(function(){o(t[1])&&t[1].apply(this,arguments)}))],l=!0)},p(r,[o]){if((t=r)[2]?p&&(H(),I(p,1,1,(()=>{p=null})),z()):p?(p.p(t,o),4&o&&V(p,1)):(p=Pt(t),p.c(),V(p,1),p.m(n,i)),32&o){let e;for(h=t[5],e=0;e<h.length;e+=1){const r=Rt(t,h,e);y[e]?(y[e].p(r,o),V(y[e],1)):(y[e]=Nt(r),y[e].c(),V(y[e],1),y[e].m(n,null))}for(H(),e=h.length;e<y.length;e+=1)b(e);z()}(!a||8&o)&&v(e,"aria-label",t[3]),(!a||64&o)&&C(e,"bridge",t[6]),(!a||4&o)&&C(e,"shuffling",t[2])},i(t){if(!a){V(p);for(let t=0;t<h.length;t+=1)V(y[t]);a=!0}},o(t){I(p),y=y.filter(Boolean);for(let t=0;t<y.length;t+=1)I(y[t]);a=!1},d(t){t&&f(e),p&&p.d(),d(y,t),l=!1,r(u)}}}function Ht(t,e,n,r){const o=t/r*e;return`translate(${.5*o/(52*n)}em , ${1*o/(52*n)}em)`}function zt(t,e,n){let r,o,i,l,u,s;const c=ut();a(t,c,(t=>n(15,s=t)));let{numCards:f=52}=e,{numDecks:d=1}=e,{topCard:g=null}=e,{numShadows:p=10}=e,{shuffleAnimationSteps:h=4}=e,{shuffleAnimationMaxDistanceEm:m=.8}=e,{shuffleAnimationMaxRotateDeg:$=7}=e,{onClick:v=(()=>{})}=e,y=0;function b(t,e){const n=n=>[1,e+2].includes(t)?0:(2*Math.random()-1)*n;return`translate(${n(m)}em, ${n(m)}em) rotate(${n($)}deg)`}function S(){y>0&&setTimeout((()=>{n(14,y-=1),S()}),250)}return t.$$set=t=>{"numCards"in t&&n(8,f=t.numCards),"numDecks"in t&&n(9,d=t.numDecks),"topCard"in t&&n(0,g=t.topCard),"numShadows"in t&&n(10,p=t.numShadows),"shuffleAnimationSteps"in t&&n(11,h=t.shuffleAnimationSteps),"shuffleAnimationMaxDistanceEm"in t&&n(12,m=t.shuffleAnimationMaxDistanceEm),"shuffleAnimationMaxRotateDeg"in t&&n(13,$=t.shuffleAnimationMaxRotateDeg),"onClick"in t&&n(1,v=t.onClick)},t.$$.update=()=>{32768&t.$$.dirty&&n(6,r=s.bridge),2817&t.$$.dirty&&null===g&&f===52*d&&h>0&&(n(14,y=h+2),S()),16384&t.$$.dirty&&n(2,i=y>0),20229&t.$$.dirty&&n(5,o=void 0===g?[]:i?[...Array(p)].map(((t,e)=>({card:null,shadow:!1,transform:b(y,h)}))):[...Array(p)].map(((t,e)=>({card:void 0,shadow:!0,transform:Ht(e,f,d,p)})))),2&t.$$.dirty&&n(4,l=t=>{["Space","Enter"].includes(t.code)&&v()}),1&t.$$.dirty&&n(3,u=void 0===g?"Shuffle the deck":"Draw a card")},[g,v,i,u,l,o,r,c,f,d,p,h,m,$,y,s]}class Vt extends Q{constructor(t){super(),G(this,t,zt,Kt,i,{numCards:8,numDecks:9,topCard:0,numShadows:10,shuffleAnimationSteps:11,shuffleAnimationMaxDistanceEm:12,shuffleAnimationMaxRotateDeg:13,onClick:1})}}function It(t){let e,n,r;return n=new Vt({props:{onClick:t[2],topCard:t[1],numCards:t[0]}}),{c(){e=g("main"),J(n.$$.fragment),v(e,"class","svelte-1tag1lj")},m(t,o){c(t,e,o),q(n,e,null),r=!0},p(t,[e]){const r={};2&e&&(r.topCard=t[1]),1&e&&(r.numCards=t[0]),n.$set(r)},i(t){r||(V(n.$$.fragment,t),r=!0)},o(t){I(n.$$.fragment,t),r=!1},d(t){t&&f(e),B(n)}}}function Jt(t,e,n){lt(it);let r=new st.Deck,o=r.cardsRemaining,i=null;return[o,i,function(){void 0!==i?n(1,i=r.pop()):(r=new st.Deck,n(1,i=null)),n(0,o=r.cardsRemaining)}]}class qt extends Q{constructor(t){super(),G(this,t,Jt,It,i,{})}}const Bt=(t,e)=>(e?4.5:5)+1.125*(t-1);function Wt(t){let e,n;return e=new Et({props:{card:t[7]?null:t[0][0],stack:"left"}}),{c(){J(e.$$.fragment)},m(t,r){q(e,t,r),n=!0},p(t,n){const r={};129&n&&(r.card=t[7]?null:t[0][0]),e.$set(r)},i(t){n||(V(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Gt(e){let n,r;return n=new Et({props:{empty:!0}}),{c(){J(n.$$.fragment)},m(t,e){q(n,t,e),r=!0},p:t,i(t){r||(V(n.$$.fragment,t),r=!0)},o(t){I(n.$$.fragment,t),r=!1},d(t){B(n,t)}}}function Qt(t){let e,n,r;return n=new Zt({props:{cards:t[0].slice(1),capacity:t[1]-1,closed:t[2],index:t[3],isDraggableFn:t[4]}}),{c(){e=g("div"),J(n.$$.fragment),v(e,"class","nested svelte-12dmu1y")},m(t,o){c(t,e,o),q(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.cards=t[0].slice(1)),2&e&&(r.capacity=t[1]-1),4&e&&(r.closed=t[2]),8&e&&(r.index=t[3]),16&e&&(r.isDraggableFn=t[4]),n.$set(r)},i(t){r||(V(n.$$.fragment,t),r=!0)},o(t){I(n.$$.fragment,t),r=!1},d(t){t&&f(e),B(n)}}}function Xt(t){let e,n,i,a,l,u,d;const p=[Gt,Wt],h=[];function y(t,e){return 0===t[0].length?0:1}n=y(t),i=h[n]=p[n](t);let b=t[0].length>1&&Qt(t);return{c(){e=g("div"),i.c(),a=m(),b&&b.c(),v(e,"class","stack svelte-12dmu1y"),v(e,"style",t[9]),v(e,"draggable",t[8])},m(r,i){c(r,e,i),h[n].m(e,null),s(e,a),b&&b.m(e,null),l=!0,u||(d=[$(e,"dblclick",t[13]),$(e,"dragstart",(function(){o(t[6])&&t[6].apply(this,arguments)})),$(e,"dragover",(function(){o(t[5])&&t[5].apply(this,arguments)})),$(e,"drop",t[14])],u=!0)},p(r,[o]){let u=n;n=y(t=r),n===u?h[n].p(t,o):(H(),I(h[u],1,1,(()=>{h[u]=null})),z(),i=h[n],i?i.p(t,o):(i=h[n]=p[n](t),i.c()),V(i,1),i.m(e,a)),t[0].length>1?b?(b.p(t,o),1&o&&V(b,1)):(b=Qt(t),b.c(),V(b,1),b.m(e,null)):b&&(H(),I(b,1,1,(()=>{b=null})),z()),(!l||512&o)&&v(e,"style",t[9]),(!l||256&o)&&v(e,"draggable",t[8])},i(t){l||(V(i),V(b),l=!0)},o(t){I(i),I(b),l=!1},d(t){t&&f(e),h[n].d(),b&&b.d(),u=!1,r(d)}}}function Yt(t,e,n){let r,o,i,l,u,s,c;const f=ut();a(t,f,(t=>n(12,c=t)));let{cards:d=[]}=e,{capacity:g=4}=e,{closed:p=!1}=e,{index:h=0}=e,{isDraggableFn:m=(()=>!1)}=e;return t.$$set=t=>{"cards"in t&&n(0,d=t.cards),"capacity"in t&&n(1,g=t.capacity),"closed"in t&&n(2,p=t.closed),"index"in t&&n(3,h=t.index),"isDraggableFn"in t&&n(4,m=t.isDraggableFn)},t.$$.update=()=>{4096&t.$$.dirty&&n(11,r=c.bridge),2050&t.$$.dirty&&n(9,o=`width: ${Bt(g,r)}em`),21&t.$$.dirty&&n(8,i=!p&&m(d)),5&t.$$.dirty&&n(7,l=p&&1===d.length),9&t.$$.dirty&&n(6,u=t=>{t.stopPropagation(),((t,e,n)=>{const r={sourceStack:e,cards:n};t.dataTransfer.setData("application/json",JSON.stringify(r)),t.dataTransfer.effectAllowed="move"})(t,h,d)})},n(5,s=t=>{t.preventDefault()}),[d,g,p,h,m,s,u,l,i,o,f,r,c,function(e){A.call(this,t,e)},function(e){A.call(this,t,e)}]}class Zt extends Q{constructor(t){super(),G(this,t,Yt,Xt,i,{cards:0,capacity:1,closed:2,index:3,isDraggableFn:4})}}const te=()=>{const t=new st.Deck;return[...Array(13)].map((()=>t.popN(4))).concat([[],[]])},ee=t=>{const[e,...n]=t;return n.every((t=>t.value===e.value))},ne=t=>0!==t.length&&(1===t.length||ee(t)),re=(t,e)=>!(t.length+e.length>4)&&(0===e.length||e[e.length-1].value===t[0].value),oe=(t,e,n,r)=>{const o=t.map((t=>[...t]));if(!re(r,o[n]))throw new Error(`Can not move cards ${r.map((t=>t.toString(ct.CardStringType.ShortEmoji)))} from pile ${e} to pile ${n}`);return o[e]=o[e].slice(0,o[e].length-r.length),o[n]=[...o[n],...r],o},ie=t=>1===t.length||ee(t)?t:ie(t.slice(1)),ae=t=>4===t.length&&ee(t);function le(t,e,n){const r=t.slice();return r[15]=e[n],r[17]=n,r}function ue(t){let e,n,r,o;return n=new Zt({props:{cards:t[15],closed:t[4].includes(t[17]),index:t[17],isDraggableFn:ne}}),n.$on("drop",t[5](t[17])),n.$on("dblclick",t[6](t[17])),{c(){e=g("div"),J(n.$$.fragment),r=m(),v(e,"class","pile svelte-183fs0x")},m(t,i){c(t,e,i),q(n,e,null),s(e,r),o=!0},p(t,e){const r={};4&e&&(r.cards=t[15]),16&e&&(r.closed=t[4].includes(t[17])),n.$set(r)},i(t){o||(V(n.$$.fragment,t),o=!0)},o(t){I(n.$$.fragment,t),o=!1},d(t){t&&f(e),B(n)}}}function se(t){let e,n,r,o=t[2],i=[];for(let e=0;e<o.length;e+=1)i[e]=ue(le(t,o,e));const a=t=>I(i[t],1,1,(()=>{i[t]=null}));return{c(){e=g("main");for(let t=0;t<i.length;t+=1)i[t].c();v(e,"class","pileon svelte-183fs0x"),v(e,"style",t[3]),M((()=>t[13].call(e)))},m(o,a){c(o,e,a);for(let t=0;t<i.length;t+=1)i[t].m(e,null);n=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=g("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=w();let o;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=$(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{o=$(n.contentWindow,"resize",e)}),s(t,n),()=>{(r||o&&n.contentWindow)&&o(),f(n)}}(e,t[13].bind(e)),r=!0},p(t,[n]){if(116&n){let r;for(o=t[2],r=0;r<o.length;r+=1){const a=le(t,o,r);i[r]?(i[r].p(a,n),V(i[r],1)):(i[r]=ue(a),i[r].c(),V(i[r],1),i[r].m(e,null))}for(H(),r=o.length;r<i.length;r+=1)a(r);z()}(!r||8&n)&&v(e,"style",t[3])},i(t){if(!r){for(let t=0;t<o.length;t+=1)V(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)I(i[t]);r=!1},d(t){t&&f(e),d(i,t),n()}}}function ce(t,e,n){let r,o,i,l,u,s,c;lt((t=>({bridge:"poker"!==t.size,fourColor:"four-color"===t.colors})));let f=[te()];const d=t=>{t.stopPropagation(),f.length>1&&n(8,f=f.slice(0,f.length-1))},g=ut();let p,h;var m;return a(t,g,(t=>n(12,c=t))),m=()=>{nt.update((t=>Object.assign(Object.assign({},t),{undo:d})))},O().$$.on_mount.push(m),function(t){O().$$.on_destroy.push(t)}((()=>{nt.update((t=>Object.assign(Object.assign({},t),{undo:void 0})))})),t.$$.update=()=>{256&t.$$.dirty&&n(2,r=f[f.length-1]),4&t.$$.dirty&&n(4,o=(t=>t.reduce(((t,e,n)=>ae(e)?[...t,n]:t),[]))(r)),4096&t.$$.dirty&&n(11,i=c.bridge),2049&t.$$.dirty&&n(10,l=.95*p/(t=>5*Bt(4,t)+6.66)(i)),2&t.$$.dirty&&n(9,u=.95*h/24),1536&t.$$.dirty&&n(3,s=`font-size: ${Math.min(l,u)}px`)},[p,h,r,s,o,t=>e=>{e.preventDefault();const{sourceStack:r,cards:o}=(t=>{const{sourceStack:e,cards:n}=JSON.parse(t.dataTransfer.getData("application/json"));return{sourceStack:e,cards:n.map(st.Card.fromJSON)}})(e);if(r!==t)try{const e=oe(f[f.length-1],r,t,o);n(8,f=[...f,e])}catch(t){}},t=>e=>{e.preventDefault();try{const e=((t,e)=>{if(0===t[e].length)throw new Error("Cannot move cards from an empty pile.");if(ae(t[e]))throw new Error("Cannot move cards from a completed pile.");const n=ie(t[e]),r=t.reduce(((t,r,o)=>o!==e&&re(n,r)?[...t,o]:t),[]);if(0===r.length)throw new Error(`Cannot move cards from pile ${e} to any other pile`);const o=r.filter((e=>t[e].length>0)),i=o.length>0?o[0]:r[0];return oe(t,e,i,n)})(f[f.length-1],t);n(8,f=[...f,e])}catch(e){}},g,f,u,l,i,c,function(){p=this.clientWidth,h=this.clientHeight,n(0,p),n(1,h)}]}class fe extends Q{constructor(t){super(),G(this,t,ce,se,i,{})}}function de(e){let n,r,o,i=(e[1]||e[0])&&function(e){let n;return{c(){n=g("span"),n.textContent=`at ${e[0]}  ${e[1]}`},m(t,e){c(t,n,e)},p:t,d(t){t&&f(n)}}}(e);return{c(){n=g("footer"),r=g("a"),r.textContent="kangasta / pakka",o=m(),i&&i.c(),v(r,"href","https://github.com/kangasta/pakka.git"),v(r,"target","_blank"),v(n,"class","svelte-16t3ryr")},m(t,e){c(t,n,e),s(n,r),s(n,o),i&&i.m(n,null)},p(t,[e]){(t[1]||t[0])&&i.p(t,e)},i:t,o:t,d(t){t&&f(n),i&&i.d()}}}function ge(t){const e=t=>{var e,n;try{const{env:r}=null!==(e={env:{isProd:!0,PUBLIC_URL:"https://kangasta.github.io/pakka",COMMIT:"0b604b111bb157894eaa4d93b16f6e7d94c83af7"}})&&void 0!==e?e:{},o=null!==(n=r[t])&&void 0!==n?n:"";return String(o)}catch(t){return""}};return[e("TAG"),e("COMMIT").slice(0,8)]}class pe extends Q{constructor(t){super(),G(this,t,ge,de,i,{})}}function he(e){let n,i,a,l,d,b,S,k,w,x,O;return{c(){n=g("div"),i=g("button"),a=p("svg"),l=p("path"),S=m(),k=g("div"),w=h(e[1]),v(l,"fill","none"),v(l,"stroke","currentColor"),v(l,"stroke-linecap","round"),v(l,"stroke-linejoin","round"),v(l,"stroke-width","1"),v(l,"d",d=e[3][e[0]].path),v(a,"viewBox","0 0 16 16 "),v(a,"class",b=u(e[3][e[0]].class)+" svelte-173olzb"),v(i,"aria-labelledby",e[4]),v(i,"class","clickable svelte-173olzb"),C(i,"open",open),v(k,"class","label svelte-173olzb"),v(k,"id",e[4]),v(n,"class","icon-button clickable svelte-173olzb")},m(t,r){c(t,n,r),s(n,i),s(i,a),s(a,l),s(n,S),s(n,k),s(k,w),x||(O=[$(i,"click",(function(){o(e[2])&&e[2].apply(this,arguments)})),$(n,"click",(function(){o(e[2])&&e[2].apply(this,arguments)}))],x=!0)},p(t,[n]){e=t,1&n&&d!==(d=e[3][e[0]].path)&&v(l,"d",d),1&n&&b!==(b=u(e[3][e[0]].class)+" svelte-173olzb")&&v(a,"class",b),0&n&&C(i,"open",open),2&n&&y(w,e[1])},i:t,o:t,d(t){t&&f(n),x=!1,r(O)}}}function me(t,e,n){let{icon:r}=e,{label:o}=e,{onClick:i}=e;const a=`${(Math.random()+1).toString(36).substring(5)}-label`;return t.$$set=t=>{"icon"in t&&n(0,r=t.icon),"label"in t&&n(1,o=t.label),"onClick"in t&&n(2,i=t.onClick)},[r,o,i,{Undo:{path:"M 6 2 L 2 6 L 6 10 M 2 6 L 10 6 A 4 4 0 1 1 10 14 L 8 14"},ChevronDown:{path:"M 4 6 L 8 10 L 12 6",class:"transition-transform"},ChevronUp:{path:"M 4 6 L 8 10 L 12 6",class:"transition-transform mirror-y"}},a]}class $e extends Q{constructor(t){super(),G(this,t,me,he,i,{icon:0,label:1,onClick:2})}}function ve(e){let n,r,i,a,l;return{c(){n=g("button"),r=h(e[0]),v(n,"aria-pressed",i=e[1]?"true":"false"),n.disabled=e[1],v(n,"class","svelte-jc3xzr"),C(n,"pressed",e[1])},m(t,i){c(t,n,i),s(n,r),a||(l=$(n,"click",(function(){o(e[2])&&e[2].apply(this,arguments)})),a=!0)},p(t,[o]){e=t,1&o&&y(r,e[0]),2&o&&i!==(i=e[1]?"true":"false")&&v(n,"aria-pressed",i),2&o&&(n.disabled=e[1]),2&o&&C(n,"pressed",e[1])},i:t,o:t,d(t){t&&f(n),a=!1,l()}}}function ye(t,e,n){let r,o,i;a(t,et,(t=>n(4,i=t)));let{target:l}=e,{value:u}=e;const{update:s}=et,c=()=>{};return t.$$set=t=>{"target"in t&&n(3,l=t.target),"value"in t&&n(0,u=t.value)},t.$$.update=()=>{25&t.$$.dirty&&n(1,o=i[l]===u),11&t.$$.dirty&&n(2,r=o?c:()=>s((t=>Object.assign(Object.assign({},t),{[l]:u}))))},[u,o,r,l,i]}class be extends Q{constructor(t){super(),G(this,t,ye,ve,i,{target:3,value:0})}}function Se(t){let e,n;return e=new $e({props:{icon:"Undo",label:"Undo",onClick:t[2].undo}}),{c(){J(e.$$.fragment)},m(t,r){q(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.onClick=t[2].undo),e.$set(r)},i(t){n||(V(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function ke(t){let e,n,r,o,i,a,l,u,d,p,$,y,b,S,k,w,x,O,A,T,D,j,U,_,L,M,F,E,R,P,N,K,W,G;u=new be({props:{target:"game",value:"deck"}}),p=new be({props:{target:"game",value:"pileon"}}),w=new be({props:{target:"colors",value:"default"}}),O=new be({props:{target:"colors",value:"standard"}}),T=new be({props:{target:"colors",value:"four-color"}}),M=new be({props:{target:"size",value:"default"}}),E=new be({props:{target:"size",value:"bridge"}}),P=new be({props:{target:"size",value:"poker"}}),K=new $e({props:{icon:t[0]?"ChevronUp":"ChevronDown",label:t[1],onClick:t[3]}});let Q=void 0!==t[2].undo&&Se(t);return{c(){e=g("div"),n=g("div"),r=g("table"),o=g("tr"),i=g("th"),i.textContent="Game:",a=m(),l=g("td"),J(u.$$.fragment),d=h(" / "),J(p.$$.fragment),$=m(),y=g("tr"),b=g("th"),b.textContent="Colors:",S=m(),k=g("td"),J(w.$$.fragment),x=h(" / "),J(O.$$.fragment),A=h(" / "),J(T.$$.fragment),D=m(),j=g("tr"),U=g("th"),U.textContent="Size:",_=m(),L=g("td"),J(M.$$.fragment),F=h(" / "),J(E.$$.fragment),R=h(" / "),J(P.$$.fragment),N=m(),J(K.$$.fragment),W=m(),Q&&Q.c(),v(i,"class","svelte-eflwvb"),v(l,"class","svelte-eflwvb"),v(b,"class","svelte-eflwvb"),v(k,"class","svelte-eflwvb"),v(U,"class","svelte-eflwvb"),v(L,"class","svelte-eflwvb"),v(r,"class","svelte-eflwvb"),v(n,"class","content svelte-eflwvb"),C(n,"open",t[0]),v(e,"class","menu svelte-eflwvb")},m(t,f){c(t,e,f),s(e,n),s(n,r),s(r,o),s(o,i),s(o,a),s(o,l),q(u,l,null),s(l,d),q(p,l,null),s(r,$),s(r,y),s(y,b),s(y,S),s(y,k),q(w,k,null),s(k,x),q(O,k,null),s(k,A),q(T,k,null),s(r,D),s(r,j),s(j,U),s(j,_),s(j,L),q(M,L,null),s(L,F),q(E,L,null),s(L,R),q(P,L,null),s(e,N),q(K,e,null),s(e,W),Q&&Q.m(e,null),G=!0},p(t,[r]){(!G||1&r)&&C(n,"open",t[0]);const o={};1&r&&(o.icon=t[0]?"ChevronUp":"ChevronDown"),2&r&&(o.label=t[1]),K.$set(o),void 0!==t[2].undo?Q?(Q.p(t,r),4&r&&V(Q,1)):(Q=Se(t),Q.c(),V(Q,1),Q.m(e,null)):Q&&(H(),I(Q,1,1,(()=>{Q=null})),z())},i(t){G||(V(u.$$.fragment,t),V(p.$$.fragment,t),V(w.$$.fragment,t),V(O.$$.fragment,t),V(T.$$.fragment,t),V(M.$$.fragment,t),V(E.$$.fragment,t),V(P.$$.fragment,t),V(K.$$.fragment,t),V(Q),G=!0)},o(t){I(u.$$.fragment,t),I(p.$$.fragment,t),I(w.$$.fragment,t),I(O.$$.fragment,t),I(T.$$.fragment,t),I(M.$$.fragment,t),I(E.$$.fragment,t),I(P.$$.fragment,t),I(K.$$.fragment,t),I(Q),G=!1},d(t){t&&f(e),B(u),B(p),B(w),B(O),B(T),B(M),B(E),B(P),B(K),Q&&Q.d()}}}function we(t,e,n){let r,o;a(t,nt,(t=>n(2,o=t)));let i=!1;return t.$$.update=()=>{1&t.$$.dirty&&n(1,r=i?"Close menu":"Open menu")},[i,r,o,t=>{n(0,i=!i),t.stopPropagation()}]}class Ce extends Q{constructor(t){super(),G(this,t,we,ke,i,{})}}function xe(t){let e,n,r,o,i,a;e=new Ce({});var l=t[0];return l&&(r=new l({})),i=new pe({}),{c(){J(e.$$.fragment),n=m(),r&&J(r.$$.fragment),o=m(),J(i.$$.fragment)},m(t,l){q(e,t,l),c(t,n,l),r&&q(r,t,l),c(t,o,l),q(i,t,l),a=!0},p(t,[e]){if(l!==(l=t[0])){if(r){H();const t=r;I(t.$$.fragment,1,0,(()=>{B(t,1)})),z()}l?(r=new l({}),J(r.$$.fragment),V(r.$$.fragment,1),q(r,o.parentNode,o)):r=null}},i(t){a||(V(e.$$.fragment,t),r&&V(r.$$.fragment,t),V(i.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),r&&I(r.$$.fragment,t),I(i.$$.fragment,t),a=!1},d(t){B(e,t),t&&f(n),r&&B(r,t),t&&f(o),B(i,t)}}}function Oe(t,e,n){let r,o;return a(t,et,(t=>n(1,o=t))),t.$$.update=()=>{2&t.$$.dirty&&n(0,r="pileon"===o.game?fe:qt)},[r,o]}return new class extends Q{constructor(t){super(),G(this,t,Oe,xe,i,{})}}({target:document.body,props:{}})}();
