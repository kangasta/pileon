var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}function l(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function s(t){return null==t?"":t}function u(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function d(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function p(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function h(t){return document.createTextNode(t)}function m(){return h(" ")}function $(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function v(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e,n,r){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}let k,S;function w(){if(void 0===k){k=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){k=!0}}return k}function C(t,e,n){t.classList[n?"add":"remove"](e)}function x(t){S=t}function O(){if(!S)throw new Error("Function called outside component initialization");return S}function A(){const t=O();return(e,n,{cancelable:r=!1}={})=>{const o=t.$$.callbacks[e];if(o){const i=function(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,r,e),o}(e,n,{cancelable:r});return o.slice().forEach((e=>{e.call(t,i)})),!i.defaultPrevented}return!0}}function D(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const T=[],j=[],U=[],_=[],E=Promise.resolve();let L=!1;function M(t){U.push(t)}const F=new Set;let N=0;function R(){const t=S;do{for(;N<T.length;){const t=T[N];N++,x(t),P(t.$$)}for(x(null),T.length=0,N=0;j.length;)j.pop()();for(let t=0;t<U.length;t+=1){const e=U[t];F.has(e)||(F.add(e),e())}U.length=0}while(T.length);for(;_.length;)_.pop()();L=!1,F.clear(),x(t)}function P(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(M)}}const z=new Set;let K;function H(){K={r:0,c:[],p:K}}function V(){K.r||r(K.c),K=K.p}function I(t,e){t&&t.i&&(z.delete(t),t.i(e))}function J(t,e,n,r){if(t&&t.o){if(z.has(t))return;z.add(t),K.c.push((()=>{z.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}function q(t){t&&t.c()}function B(t,n,i,a){const{fragment:l,on_mount:s,on_destroy:u,after_update:c}=t.$$;l&&l.m(n,i),a||M((()=>{const n=s.map(e).filter(o);u?u.push(...n):r(n),t.$$.on_mount=[]})),c.forEach(M)}function W(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function G(t,e){-1===t.$$.dirty[0]&&(T.push(t),L||(L=!0,E.then(R)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Q(e,o,i,a,l,s,u,c=[-1]){const d=S;x(e);const g=e.$$={fragment:null,ctx:null,props:s,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(d?d.$$.context:[])),callbacks:n(),dirty:c,skip_bound:!1,root:o.target||d.$$.root};u&&u(g.root);let p=!1;if(g.ctx=i?i(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return g.ctx&&l(g.ctx[t],g.ctx[t]=o)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](o),p&&G(e,t)),n})):[],g.update(),p=!0,r(g.before_update),g.fragment=!!a&&a(g.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);g.fragment&&g.fragment.l(t),t.forEach(f)}else g.fragment&&g.fragment.c();o.intro&&I(e.$$.fragment),B(e,o.target,o.anchor,o.customElement),R()}x(d)}class X{$destroy(){W(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Y=[];function Z(e,n=t){let r;const o=new Set;function a(t){if(i(e,t)&&(e=t,r)){const t=!Y.length;for(const t of o)t[1](),Y.push(t,e);if(t){for(let t=0;t<Y.length;t+=2)Y[t][0](Y[t+1]);Y.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(i,l=t){const s=[i,l];return o.add(s),1===o.size&&(r=n(a)||t),i(e),()=>{o.delete(s),0===o.size&&(r(),r=null)}}}}const tt="settings",et=JSON.parse(localStorage.getItem(tt)),nt=Z(null!=et?et:{game:"deck",colors:"default",size:"default"});nt.subscribe((t=>localStorage.setItem(tt,JSON.stringify(t))));const rt=Z({}),ot="card-appearance",it={bridge:!1,fourColor:!1},at=({size:t,colors:e})=>({bridge:"bridge"===t,fourColor:"four-color"===e}),lt=t=>({subscribe:Z(it,(e=>(nt.subscribe((n=>e(t(n)))),()=>{}))).subscribe}),st=t=>{const e=lt(t);var n,r;n=ot,r=e,O().$$.context.set(n,r)},ut=()=>{const t=(e=ot,O().$$.context.get(e));var e;return null!=t?t:lt(at)},ct=(t,e,n={})=>r=>{(Array.isArray(t)?t:[t]).includes(r.code)&&void 0!==e&&(n.preventDefault&&r.preventDefault(),e())};var ft={},dt={};!function(t){function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CardStringType=t.CardSuits=void 0,t.CardSuits=r,function(t){t[t.Hearts=0]="Hearts",t[t.Spades=1]="Spades",t[t.Diamonds=2]="Diamonds",t[t.Clubs=3]="Clubs"}(r||(t.CardSuits=r={})),t.CardStringType=o,function(t){t.Short="SHORT",t.Long="LONG",t.ShortEmoji="SHORT_EMOJI",t.ShortSuit="SHORT_SUIT",t.LongSuit="LONG_SUIT",t.EmojiSuit="EMOJI_SUIT",t.ShortValue="SHORT_VALUE",t.LongValue="LONG_VALUE"}(o||(t.CardStringType=o={}));var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n(this,"num",void 0),this.num=e}var r,o,i;return r=t,o=[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.StringType.Long;switch(e){case t.StringType.Short:return this.toString(t.StringType.ShortValue)+this.toString(t.StringType.ShortSuit);case t.StringType.ShortEmoji:return this.toString(t.StringType.ShortValue)+this.toString(t.StringType.EmojiSuit);case t.StringType.Long:return this.toString(t.StringType.LongValue)+" of "+this.toString(t.StringType.LongSuit);case t.StringType.ShortSuit:return t.shortSuits[this.suit];case t.StringType.LongSuit:return t.longSuits[this.suit];case t.StringType.EmojiSuit:return t.emojiSuits[this.suit];case t.StringType.ShortValue:return t.shortValues[13===this.value?0:this.value];case t.StringType.LongValue:return t.longValues[13===this.value?0:this.value]}throw new Error("Unsupported output type")}},{key:"suit",get:function(){return t.getSuit(this.num)}},{key:"value",get:function(){return t.getValue(this.num)}}],i=[{key:"fromJSON",value:function(e){return new t(e.num)}},{key:"getSuit",value:function(t){return Math.floor(t/13)%4}},{key:"getValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t%13||e?t%13:13}},{key:"compare",value:function(t,e){return e.value-t.value}}],o&&e(r.prototype,o),i&&e(r,i),t}();n(i,"Suits",r),n(i,"StringType",o),n(i,"emojiSuits",["♥","♠","♦","♣"]),n(i,"shortSuits",["h","s","d","c"]),n(i,"longSuits",["hearts","spades","diamonds","clubs"]),n(i,"shortValues",["A","2","3","4","5","6","7","8","9","T","J","Q","K"]),n(i,"longValues",["ace","two","three","four","five","six","seven","eight","nine","ten","jack","queen","king"]);var a=i;t.default=a}(dt);var gt={},pt={};Object.defineProperty(pt,"__esModule",{value:!0}),pt.uniqueFilter=pt.shuffle=pt.last=pt.isSorted=pt.getCombinations=pt.arraySubtraction=void 0;pt.arraySubtraction=function(t,e){return t.filter((function(t){return!e.includes(t)}))};var ht=function t(e,n,r,o,i){if(o.length>=n)i.push(o);else for(var a=r;a<e.length;a++)t(e,n,a+1,o.concat(e[a]),i)};pt.getCombinations=function(t,e){var n=[];return ht(t,e,0,[],n),n};pt.isSorted=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n?-1:1;try{return t.reduce((function(t,n){if(r*e(t,n)<=0)return n;throw new Error})),!0}catch(t){return!1}};pt.last=function(t){return t[t.length-1]};pt.shuffle=function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),r=[t[n],t[e]];t[e]=r[0],t[n]=r[1]}return t};pt.uniqueFilter=function(t,e,n){return n.indexOf(t)===e},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e,n=(e=dt)&&e.__esModule?e:{default:e},r=pt;function o(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=function(){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;i(this,t),l(this,"cards",void 0),this.cards=o(Array(52*r).keys()).map((function(t){return new n.default(t)})),e&&this.shuffle()}var e,s,u;return e=t,s=[{key:"shuffle",value:function(){(0,r.shuffle)(this.cards)}},{key:"isShuffled",value:function(){return!(0,r.isSorted)(this.cards,(function(t,e){return t.num-e.num}))}},{key:"pop",value:function(){return this.cards.pop()}},{key:"popN",value:function(t){for(var e,n=[],r=0;r<t&&(e=this.pop());r++)n.push(e);return n}},{key:"cardsRemaining",get:function(){return this.cards.length}}],u=[{key:"fromJSON",value:function(e){var r=e.cards,o=new t(!1,0);return o.cards=r.map((function(t){return n.default.fromJSON(t)})),o}}],s&&a(e.prototype,s),u&&a(e,u),t}(),u=s;t.default=u}(gt);var mt={},$t={};Object.defineProperty($t,"__esModule",{value:!0}),$t.uuid4=void 0;var vt=function(t){var e;do{e=Math.random().toString(16).slice(2,t+2)}while(e.length<t&&t<=12);return e};function yt(e){let n,r;return{c(){n=p("svg"),r=p("path"),v(r,"d",e[1]),v(r,"fill","CurrentColor"),v(n,"viewBox","0 0 16 20"),v(n,"class","svelte-1jimf84"),C(n,"flip",e[0])},m(t,e){c(t,n,e),u(n,r)},p(t,[e]){2&e&&v(r,"d",t[1]),1&e&&C(n,"flip",t[0])},i:t,o:t,d(t){t&&f(n)}}}function bt(t,e,n){let r,{suit:o=null}=e,{flip:i=!1}=e;return t.$$set=t=>{"suit"in t&&n(2,o=t.suit),"flip"in t&&n(0,i=t.flip)},t.$$.update=()=>{4&t.$$.dirty&&n(1,r=(t=>{switch(t){case"hearts":return"M 8 2 C 9 0 11 0 12 0 C 13 0 16 1 16 6 C 16 8 15.5 10 14 12 L 8 20 L 2 12 C 0.5 10 0 8 0 6 C 0 1 3 0 4 0 C 5 0 7 0 8 2";case"spades":return"M 8 0 L 13 5 C 16 8 16 10 16 12 C 16 14 14 16 12 16 C 11 16 9 16 8 14 L 12 20 L 4 20 L 8 14 C 7 16 5 16 4 16 C 2 16 0 14 0 12 C 0 10 0 8 3 5 L 8 0";case"diamonds":return"M 8 0 L 16 10 L 8 20 L 0 10 L 8 0";case"clubs":return"M 8 0 C 10 0 12 2 12 4 C 12 6 11 8 8 10 C 9 8 10 7 12 7 C 14 7 16 9 16 12 C 16 14 14 16 12 16 C 11 16 9 16 8 14 L 12 20 L 4 20 L 8 14 C 7 16 5 16 4 16 C 2 16 0 14 0 12 C 0 9 2 7 4 7 C 6 7 7 8 8 10 C 5 8 4 6 4 4 C 4 2 6 0 8 0";default:return null}})(o))},[i,r,o]}$t.uuid4=function(){var t=[8,4,4,4,12].map(vt).join("-").split("");return t[14]="4",t[19]=(Math.floor(64*Math.random())%4+8).toString(16),t.join("")},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.HandRank=void 0;var e,n,r=(e=dt)&&e.__esModule?e:{default:e},o=$t,i=pt;function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t.HandRank=n,function(t){t[t.High=0]="High",t[t.Pair=5]="Pair",t[t.TwoPairs=10]="TwoPairs",t[t.ThreeOfAKind=15]="ThreeOfAKind",t[t.Straight=20]="Straight",t[t.Flush=25]="Flush",t[t.FullHouse=30]="FullHouse",t[t.FourOfAKind=35]="FourOfAKind",t[t.StraightFlush=40]="StraightFlush",t[t.FiveOfAKind=45]="FiveOfAKind"}(n||(t.HandRank=n={}));var c=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,"uuid",void 0),u(this,"rank",void 0),u(this,"cards",void 0),this.rank=e,this.cards=n,this.uuid=r||(0,o.uuid4)()}var e,n,c;return e=t,n=[{key:"getCardsString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.default.StringType.Short;return this.cards.map((function(e){return e.toString(t)})).join(", ")}},{key:"toString",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.default.StringType.Short,o=r.default.StringType.LongValue,i=function(t){return e.cards[t].toString(o)},a=this.getCardsString(n);switch(this.rank){case t.Rank.FiveOfAKind:return"Five of a kind, ".concat(i(0),"s (").concat(a,")");case t.Rank.StraightFlush:return"Straigth flush, ".concat(i(0)," high (").concat(a,")");case t.Rank.FourOfAKind:return"Four of a kind, ".concat(i(0),"s (").concat(a,")");case t.Rank.FullHouse:return"Full house, ".concat(i(0),"s over ").concat(i(3),"s (").concat(a,")");case t.Rank.Flush:return"Flush, ".concat(i(0)," high (").concat(a,")");case t.Rank.Straight:return"Straigth, ".concat(i(0)," high (").concat(a,")");case t.Rank.ThreeOfAKind:return"Three of a kind, ".concat(i(0),"s (").concat(a,")");case t.Rank.TwoPairs:return"Two pairs, ".concat(i(0),"s and ").concat(i(2),"s (").concat(a,")");case t.Rank.Pair:return"Pair, ".concat(i(0),"s (").concat(a,")");case t.Rank.High:return"".concat(i(0).replace(/^\w/,(function(t){return t.toUpperCase()}))," high (").concat(a,")")}throw new Error("Unsupported rank value")}}],c=[{key:"fromJSON",value:function(e){var n=e.rank,o=e.cards,i=e.uuid;return new t(n,o.map(r.default.fromJSON),i)}},{key:"solve",value:function(e){var n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return(n=t.isNumOfAKind(5,e))?r=t.Rank.FiveOfAKind:(n=t.isStraightFlush(e,o))?r=t.Rank.StraightFlush:(n=t.isNumOfAKind(4,e))?r=t.Rank.FourOfAKind:(n=t.isFullHouse(e))?r=t.Rank.FullHouse:(n=t.isFlush(e,o))?r=t.Rank.Flush:(n=t.isStraight(e,o))?r=t.Rank.Straight:(n=t.isNumOfAKind(3,e))?r=t.Rank.ThreeOfAKind:(n=t.isTwoPairs(e))?r=t.Rank.TwoPairs:(n=t.isNumOfAKind(2,e))?r=t.Rank.Pair:(n=[],r=t.Rank.High),n=t.fillWithKickers(n,e),new t(r,n)}},{key:"solveHoldEm",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===r)return t.solve([].concat(l(e),l(n)));for(var o=(0,i.getCombinations)(e,e.length-r),a=(0,i.getCombinations)(n,Math.min(n.length,r)),s=[],u=0;u<o.length;u++)for(var c=0;c<a.length;c++)s.push(t.solve([].concat(l(o[u]),l(a[c]))));return t.max.apply(t,s)}},{key:"compare",value:function(t,e){var n;if(t.cards.length!==e.cards.length)throw new Error("Comparing hands with different number of cards");if(0!=(n=e.rank-t.rank))return n;for(var o=0;o<t.cards.length;o++)if(0!==(n=r.default.compare(t.cards[o],e.cards[o])))return n;return 0}},{key:"winners",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=t.max.apply(t,n);return n.filter((function(e){return!t.compare(e,o)}))}},{key:"max",value:function(){for(var e=function(e,n){return t.compare(e,n)<0?e:n},n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return r.reduce((function(t,n){return e(t,n)}))}},{key:"fillWithKickers",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return e=(0,i.arraySubtraction)(e,t).sort(r.default.compare),[].concat(l(t),l(e)).slice(0,n)}},{key:"getUniqueValues",value:function(t){return t.map((function(t){return t.value})).filter(i.uniqueFilter).sort((function(t,e){return e-t}))}},{key:"isNumOfAKind",value:function(e,n){for(var r,o=t.getUniqueValues(n),i=function(t){if((r=n.filter((function(e){return e.value==o[t]}))).length>=e)return{v:r}},l=0;l<o.length;l++){var s=i(l);if("object"===a(s))return s.v}return!1}},{key:"isNumOfAKindCombination",value:function(e,n){for(var r=[],o=0;o<e.length;o++){var a=t.isNumOfAKind(e[o],(0,i.arraySubtraction)(n,r));if(!1===a)return!1;r.push.apply(r,l(a))}return r}},{key:"isStraightFlush",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,r=[],o=function(o){if((r=e.filter((function(t){return t.suit===o}))).length<n)return"continue";var i=t.isStraight(r,n);return i?{v:i}:void 0},i=0;i<4;i++){var l=o(i);if("continue"!==l&&"object"===a(l))return l.v}return!1}},{key:"isFullHouse",value:function(e){return t.isNumOfAKindCombination([3,2],e)}},{key:"isFlush",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=function(n){var o=t.filter((function(t){return t.suit==n}));if(o.length>=e)return{v:o.sort(r.default.compare).slice(0,e)}},o=0;o<4;o++){var i=n(o);if("object"===a(i))return i.v}return!1}},{key:"isStraight",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,r=t.getUniqueValues(e);if(r.length<n)return!1;r.includes(13)&&r.push(0);for(var o=[r[0]],a=1;a<r.length&&o.length<n;a++)(0,i.last)(o)-r[a]==1?o.push(r[a]):o=[r[a]];return o.length==n&&o.map((function(t){return e.find((function(e){return e.value===(t||13)}))}))}},{key:"isTwoPairs",value:function(e){return t.isNumOfAKindCombination([2,2],e)}}],n&&s(e.prototype,n),c&&s(e,c),t}();u(c,"Rank",n);var f=c;t.default=f}(mt),function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Card",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"Deck",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"Hand",{enumerable:!0,get:function(){return r.default}});var e=o(dt),n=o(gt),r=o(mt);function o(t){return t&&t.__esModule?t:{default:t}}}(ft);class kt extends X{constructor(t){super(),Q(this,t,bt,yt,i,{suit:2,flip:0})}}function St(t,e,n){const r=t.slice();return r[5]=e[n],r}function wt(t,e,n){const r=t.slice();return r[8]=e[n],r}function Ct(t){let e,n,r;return n=new kt({props:{suit:t[0],flip:"d"===t[8].toLowerCase()}}),{c(){e=g("span"),q(n.$$.fragment),v(e,"class","svelte-1sm49dl")},m(t,o){c(t,e,o),B(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.suit=t[0]),2&e&&(r.flip="d"===t[8].toLowerCase()),n.$set(r)},i(t){r||(I(n.$$.fragment,t),r=!0)},o(t){J(n.$$.fragment,t),r=!1},d(t){t&&f(e),W(n)}}}function xt(t){let e,n,r,o,i=t[5].split(""),a=[];for(let e=0;e<i.length;e+=1)a[e]=Ct(wt(t,i,e));const l=t=>J(a[t],1,1,(()=>{a[t]=null}));return{c(){e=g("div");for(let t=0;t<a.length;t+=1)a[t].c();n=m(),v(e,"class",r="row "+t[3](t[5])+" svelte-1sm49dl")},m(t,r){c(t,e,r);for(let t=0;t<a.length;t+=1)a[t].m(e,null);u(e,n),o=!0},p(t,s){if(7&s){let r;for(i=t[5].split(""),r=0;r<i.length;r+=1){const o=wt(t,i,r);a[r]?(a[r].p(o,s),I(a[r],1)):(a[r]=Ct(o),a[r].c(),I(a[r],1),a[r].m(e,n))}for(H(),r=i.length;r<a.length;r+=1)l(r);V()}(!o||2&s&&r!==(r="row "+t[3](t[5])+" svelte-1sm49dl"))&&v(e,"class",r)},i(t){if(!o){for(let t=0;t<i.length;t+=1)I(a[t]);o=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)J(a[t]);o=!1},d(t){t&&f(e),d(a,t)}}}function Ot(t){let e,n,r=t[2](t[1]),o=[];for(let e=0;e<r.length;e+=1)o[e]=xt(St(t,r,e));const i=t=>J(o[t],1,1,(()=>{o[t]=null}));return{c(){e=g("div");for(let t=0;t<o.length;t+=1)o[t].c();v(e,"class","center-pattern svelte-1sm49dl")},m(t,r){c(t,e,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);n=!0},p(t,[n]){if(15&n){let a;for(r=t[2](t[1]),a=0;a<r.length;a+=1){const i=St(t,r,a);o[a]?(o[a].p(i,n),I(o[a],1)):(o[a]=xt(i),o[a].c(),I(o[a],1),o[a].m(e,null))}for(H(),a=r.length;a<o.length;a+=1)i(a);V()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)I(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)J(o[t]);n=!1},d(t){t&&f(e),d(o,t)}}}function At(t,e,n){let{suit:r}=e,{rank:o}=e;const i={A:["U"],2:["U","D"],3:["U","U","D"],4:["UU","DD"],5:["UU","U","DD"],6:["UU","UU","DD"],7:["UU","u","UU","DD"],8:["UU","UU","DD","DD"],9:["UU","u","UU","DD","DD"],10:["UU","u","UU","DD","d","DD"]};return t.$$set=t=>{"suit"in t&&n(0,r=t.suit),"rank"in t&&n(1,o=t.rank)},[r,o,t=>{var e;return null!==(e=i[t])&&void 0!==e?e:[]},t=>t.toUpperCase()===t?"grow":""]}class Dt extends X{constructor(t){super(),Q(this,t,At,Ot,i,{suit:0,rank:1})}}function Tt(t){let e,n;const r=t[1].default,o=function(t,e,n,r){if(t){const o=l(t,e,n,r);return t[0](o)}}(r,t,t[0],null);return{c(){e=g("span"),o&&o.c(),v(e,"class","screen-reader-only svelte-3uotpv")},m(t,r){c(t,e,r),o&&o.m(e,null),n=!0},p(t,[e]){o&&o.p&&(!n||1&e)&&function(t,e,n,r,o,i){if(o){const a=l(e,n,r,i);t.p(a,o)}}(o,r,t,t[0],n?function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(r,t[0],e,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[0]),null)},i(t){n||(I(o,t),n=!0)},o(t){J(o,t),n=!1},d(t){t&&f(e),o&&o.d(t)}}}function jt(t,e,n){let{$$slots:r={},$$scope:o}=e;return t.$$set=t=>{"$$scope"in t&&n(0,o=t.$$scope)},[o,r]}class Ut extends X{constructor(t){super(),Q(this,t,jt,Tt,i,{})}}function _t(t,e,n){const r=t.slice();return r[15]=e[n],r}function Et(t){let e,n;return e=new Ut({props:{$$slots:{default:[Lt]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(t,r){B(e,t,r),n=!0},p(t,n){const r={};262176&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){W(e,t)}}}function Lt(t){let e;return{c(){e=h(t[5])},m(t,n){c(t,e,n)},p(t,n){32&n&&y(e,t[5])},d(t){t&&f(e)}}}function Mt(t){let e,n,r,o,i,a,l,s,d,p,$;return l=new kt({props:{suit:t[7]}}),p=new Dt({props:{suit:t[7],rank:t[8]}}),{c(){e=g("div"),n=g("div"),r=h(t[8]),i=m(),a=g("div"),q(l.$$.fragment),s=m(),d=g("div"),q(p.$$.fragment),v(n,"class",o="rank rank-"+t[8]+" svelte-zj0kcg"),v(a,"class","suit svelte-zj0kcg"),v(e,"aria-hidden","true"),v(e,"class",t[15]+" label svelte-zj0kcg"),v(d,"class","center svelte-zj0kcg"),C(d,"face",t[6])},m(t,o){c(t,e,o),u(e,n),u(n,r),u(e,i),u(e,a),B(l,a,null),c(t,s,o),c(t,d,o),B(p,d,null),$=!0},p(t,e){(!$||256&e)&&y(r,t[8]),(!$||256&e&&o!==(o="rank rank-"+t[8]+" svelte-zj0kcg"))&&v(n,"class",o);const i={};128&e&&(i.suit=t[7]),l.$set(i);const a={};128&e&&(a.suit=t[7]),256&e&&(a.rank=t[8]),p.$set(a),(!$||64&e)&&C(d,"face",t[6])},i(t){$||(I(l.$$.fragment,t),I(p.$$.fragment,t),$=!0)},o(t){J(l.$$.fragment,t),J(p.$$.fragment,t),$=!1},d(t){t&&f(e),W(l),t&&f(s),t&&f(d),W(p)}}}function Ft(t){let e,n,r,o,i=t[3]&&Et(t),a=t[12],l=[];for(let e=0;e<a.length;e+=1)l[e]=Mt(_t(t,a,e));const s=t=>J(l[t],1,1,(()=>{l[t]=null}));return{c(){e=g("div"),i&&i.c(),n=m();for(let t=0;t<l.length;t+=1)l[t].c();v(e,"class",r="card "+t[7]+" stack-"+t[2]+" svelte-zj0kcg"),C(e,"bridge",t[10]),C(e,"fourColor",t[9]),C(e,"empty",t[0]),C(e,"hidden",t[4]),C(e,"shadow",t[1]),C(e,"visible",t[3])},m(t,r){c(t,e,r),i&&i.m(e,null),u(e,n);for(let t=0;t<l.length;t+=1)l[t].m(e,null);o=!0},p(t,[u]){if(t[3]?i?(i.p(t,u),8&u&&I(i,1)):(i=Et(t),i.c(),I(i,1),i.m(e,n)):i&&(H(),J(i,1,1,(()=>{i=null})),V()),4544&u){let n;for(a=t[12],n=0;n<a.length;n+=1){const r=_t(t,a,n);l[n]?(l[n].p(r,u),I(l[n],1)):(l[n]=Mt(r),l[n].c(),I(l[n],1),l[n].m(e,null))}for(H(),n=a.length;n<l.length;n+=1)s(n);V()}(!o||132&u&&r!==(r="card "+t[7]+" stack-"+t[2]+" svelte-zj0kcg"))&&v(e,"class",r),(!o||1156&u)&&C(e,"bridge",t[10]),(!o||644&u)&&C(e,"fourColor",t[9]),(!o||133&u)&&C(e,"empty",t[0]),(!o||148&u)&&C(e,"hidden",t[4]),(!o||134&u)&&C(e,"shadow",t[1]),(!o||140&u)&&C(e,"visible",t[3])},i(t){if(!o){I(i);for(let t=0;t<a.length;t+=1)I(l[t]);o=!0}},o(t){J(i),l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)J(l[t]);o=!1},d(t){t&&f(e),i&&i.d(),d(l,t)}}}function Nt(t,e,n){let r,o,i,l,s,u,c,f,d;const g=ut();a(t,g,(t=>n(14,d=t)));let{card:p=null}=e,{empty:h=!1}=e,{shadow:m=!1}=e,{stack:$}=e;return t.$$set=t=>{"card"in t&&n(13,p=t.card),"empty"in t&&n(0,h=t.empty),"shadow"in t&&n(1,m=t.shadow),"stack"in t&&n(2,$=t.stack)},t.$$.update=()=>{16384&t.$$.dirty&&n(10,r=d.bridge),16384&t.$$.dirty&&n(9,o=d.fourColor),8194&t.$$.dirty&&n(4,i=null===p&&!m),19&t.$$.dirty&&n(3,l=!(h||i||m)),8200&t.$$.dirty&&n(8,s=l&&p.toString(ft.Card.StringType.ShortValue).replace("T","10")),8200&t.$$.dirty&&n(7,u=l&&p.toString(ft.Card.StringType.LongSuit)),8200&t.$$.dirty&&n(6,c=l&&p.num%13>9),8200&t.$$.dirty&&n(5,f=l&&p.toString(ft.Card.StringType.Long))},[h,m,$,l,i,f,c,u,s,o,r,g,["top","bottom"],p,d]}class Rt extends X{constructor(t){super(),Q(this,t,Nt,Ft,i,{card:13,empty:0,shadow:1,stack:2})}}function Pt(t,e,n){const r=t.slice();return r[17]=e[n].card,r[18]=e[n].shadow,r[19]=e[n].transform,r}function zt(t){let e,n;return e=new Rt({props:{card:t[0],empty:void 0===t[0]}}),{c(){q(e.$$.fragment)},m(t,r){B(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.card=t[0]),1&n&&(r.empty=void 0===t[0]),e.$set(r)},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){W(e,t)}}}function Kt(t){let e,n,r,o;return n=new Rt({props:{card:t[17],shadow:t[18]}}),{c(){e=g("div"),q(n.$$.fragment),r=m(),v(e,"class","shadow-container svelte-1sx04q5"),b(e,"transform",t[19])},m(t,i){c(t,e,i),B(n,e,null),u(e,r),o=!0},p(t,r){const i={};16&r&&(i.card=t[17]),16&r&&(i.shadow=t[18]),n.$set(i),(!o||16&r)&&b(e,"transform",t[19])},i(t){o||(I(n.$$.fragment,t),o=!0)},o(t){J(n.$$.fragment,t),o=!1},d(t){t&&f(e),W(n)}}}function Ht(t){let e,n,i,a,l,s,p=!t[2]&&zt(t),h=t[4],y=[];for(let e=0;e<h.length;e+=1)y[e]=Kt(Pt(t,h,e));const b=t=>J(y[t],1,1,(()=>{y[t]=null}));return{c(){e=g("div"),n=g("div"),p&&p.c(),i=m();for(let t=0;t<y.length;t+=1)y[t].c();v(n,"aria-atomic","true"),v(n,"aria-live","polite"),v(e,"aria-label",t[3]),v(e,"class","deck svelte-1sx04q5"),v(e,"role","button"),v(e,"tabindex","0"),C(e,"bridge",t[5]),C(e,"shuffling",t[2])},m(r,f){c(r,e,f),u(e,n),p&&p.m(n,null),u(n,i);for(let t=0;t<y.length;t+=1)y[t].m(n,null);a=!0,l||(s=[$(e,"keydown",(function(){o(ct(["Space","Enter"],t[1],{preventDefault:!0}))&&ct(["Space","Enter"],t[1],{preventDefault:!0}).apply(this,arguments)})),$(e,"click",(function(){o(t[1])&&t[1].apply(this,arguments)}))],l=!0)},p(r,[o]){if((t=r)[2]?p&&(H(),J(p,1,1,(()=>{p=null})),V()):p?(p.p(t,o),4&o&&I(p,1)):(p=zt(t),p.c(),I(p,1),p.m(n,i)),16&o){let e;for(h=t[4],e=0;e<h.length;e+=1){const r=Pt(t,h,e);y[e]?(y[e].p(r,o),I(y[e],1)):(y[e]=Kt(r),y[e].c(),I(y[e],1),y[e].m(n,null))}for(H(),e=h.length;e<y.length;e+=1)b(e);V()}(!a||8&o)&&v(e,"aria-label",t[3]),(!a||32&o)&&C(e,"bridge",t[5]),(!a||4&o)&&C(e,"shuffling",t[2])},i(t){if(!a){I(p);for(let t=0;t<h.length;t+=1)I(y[t]);a=!0}},o(t){J(p),y=y.filter(Boolean);for(let t=0;t<y.length;t+=1)J(y[t]);a=!1},d(t){t&&f(e),p&&p.d(),d(y,t),l=!1,r(s)}}}function Vt(t,e,n,r){const o=t/r*e;return`translate(${.5*o/(52*n)}em , ${1*o/(52*n)}em)`}function It(t,e,n){let r,o,i,l,s;const u=ut();a(t,u,(t=>n(14,s=t)));let{numCards:c=52}=e,{numDecks:f=1}=e,{topCard:d=null}=e,{numShadows:g=10}=e,{shuffleAnimationSteps:p=4}=e,{shuffleAnimationMaxDistanceEm:h=.8}=e,{shuffleAnimationMaxRotateDeg:m=7}=e,{onClick:$=(()=>{})}=e,v=0;function y(t,e){const n=n=>[1,e+2].includes(t)?0:(2*Math.random()-1)*n;return`translate(${n(h)}em, ${n(h)}em) rotate(${n(m)}deg)`}function b(){v>0&&setTimeout((()=>{n(13,v-=1),b()}),250)}return t.$$set=t=>{"numCards"in t&&n(7,c=t.numCards),"numDecks"in t&&n(8,f=t.numDecks),"topCard"in t&&n(0,d=t.topCard),"numShadows"in t&&n(9,g=t.numShadows),"shuffleAnimationSteps"in t&&n(10,p=t.shuffleAnimationSteps),"shuffleAnimationMaxDistanceEm"in t&&n(11,h=t.shuffleAnimationMaxDistanceEm),"shuffleAnimationMaxRotateDeg"in t&&n(12,m=t.shuffleAnimationMaxRotateDeg),"onClick"in t&&n(1,$=t.onClick)},t.$$.update=()=>{16384&t.$$.dirty&&n(5,r=s.bridge),1409&t.$$.dirty&&null===d&&c===52*f&&p>0&&(n(13,v=p+2),b()),8192&t.$$.dirty&&n(2,i=v>0),10117&t.$$.dirty&&n(4,o=void 0===d?[]:i?[...Array(g)].map(((t,e)=>({card:null,shadow:!1,transform:y(v,p)}))):[...Array(g)].map(((t,e)=>({card:void 0,shadow:!0,transform:Vt(e,c,f,g)})))),1&t.$$.dirty&&n(3,l=void 0===d?"Shuffle the deck":"Draw a card")},[d,$,i,l,o,r,u,c,f,g,p,h,m,v,s]}class Jt extends X{constructor(t){super(),Q(this,t,It,Ht,i,{numCards:7,numDecks:8,topCard:0,numShadows:9,shuffleAnimationSteps:10,shuffleAnimationMaxDistanceEm:11,shuffleAnimationMaxRotateDeg:12,onClick:1})}}function qt(t){let e,n,r;return n=new Jt({props:{onClick:t[2],topCard:t[1],numCards:t[0]}}),{c(){e=g("main"),q(n.$$.fragment),v(e,"class","svelte-1tag1lj")},m(t,o){c(t,e,o),B(n,e,null),r=!0},p(t,[e]){const r={};2&e&&(r.topCard=t[1]),1&e&&(r.numCards=t[0]),n.$set(r)},i(t){r||(I(n.$$.fragment,t),r=!0)},o(t){J(n.$$.fragment,t),r=!1},d(t){t&&f(e),W(n)}}}function Bt(t,e,n){st(at);let r=new ft.Deck,o=r.cardsRemaining,i=null;return[o,i,function(){void 0!==i?n(1,i=r.pop()):(r=new ft.Deck,n(1,i=null)),n(0,o=r.cardsRemaining)}]}class Wt extends X{constructor(t){super(),Q(this,t,Bt,qt,i,{})}}const Gt=(t,e)=>(e?4.5:5)+1.125*(t-1);function Qt(t){let e,n;return e=new Rt({props:{card:t[10]?null:t[0][0],stack:"left"}}),{c(){q(e.$$.fragment)},m(t,r){B(e,t,r),n=!0},p(t,n){const r={};1025&n&&(r.card=t[10]?null:t[0][0]),e.$set(r)},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){W(e,t)}}}function Xt(e){let n,r;return n=new Rt({props:{empty:!0}}),{c(){q(n.$$.fragment)},m(t,e){B(n,t,e),r=!0},p:t,i(t){r||(I(n.$$.fragment,t),r=!0)},o(t){J(n.$$.fragment,t),r=!1},d(t){W(n,t)}}}function Yt(t){let e,n,r;return n=new ee({props:{cards:t[0].slice(1),capacity:t[1]-1,nested:!0,closed:t[2],index:t[3],isDraggableFn:t[4],selectedCardsN:t[5]}}),{c(){e=g("div"),q(n.$$.fragment),v(e,"class","nested svelte-o50ay1")},m(t,o){c(t,e,o),B(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.cards=t[0].slice(1)),2&e&&(r.capacity=t[1]-1),4&e&&(r.closed=t[2]),8&e&&(r.index=t[3]),16&e&&(r.isDraggableFn=t[4]),32&e&&(r.selectedCardsN=t[5]),n.$set(r)},i(t){r||(I(n.$$.fragment,t),r=!0)},o(t){J(n.$$.fragment,t),r=!1},d(t){t&&f(e),W(n)}}}function Zt(t){let e,n,i,a,l,s,d,p;const h=[Xt,Qt],y=[];function b(t,e){return 0===t[0].length?0:1}n=b(t),i=y[n]=h[n](t);let k=t[0].length>1&&Yt(t);return{c(){e=g("div"),i.c(),a=m(),k&&k.c(),v(e,"class","stack svelte-o50ay1"),v(e,"style",t[13]),v(e,"draggable",t[12]),v(e,"tabindex",l=t[6]?void 0:0),C(e,"selected",t[11])},m(r,i){c(r,e,i),y[n].m(e,null),u(e,a),k&&k.m(e,null),s=!0,d||(p=[$(e,"dblclick",t[17]),$(e,"dragstart",(function(){o(t[9])&&t[9].apply(this,arguments)})),$(e,"dragover",(function(){o(t[8])&&t[8].apply(this,arguments)})),$(e,"drop",t[18]),$(e,"click",(function(){o(t[7])&&t[7].apply(this,arguments)})),$(e,"keydown",(function(){o(ct(["Enter","Space"],t[7],{preventDefault:!0}))&&ct(["Enter","Space"],t[7],{preventDefault:!0}).apply(this,arguments)}))],d=!0)},p(r,[o]){let u=n;n=b(t=r),n===u?y[n].p(t,o):(H(),J(y[u],1,1,(()=>{y[u]=null})),V(),i=y[n],i?i.p(t,o):(i=y[n]=h[n](t),i.c()),I(i,1),i.m(e,a)),t[0].length>1?k?(k.p(t,o),1&o&&I(k,1)):(k=Yt(t),k.c(),I(k,1),k.m(e,null)):k&&(H(),J(k,1,1,(()=>{k=null})),V()),(!s||8192&o)&&v(e,"style",t[13]),(!s||4096&o)&&v(e,"draggable",t[12]),(!s||64&o&&l!==(l=t[6]?void 0:0))&&v(e,"tabindex",l),(!s||2048&o)&&C(e,"selected",t[11])},i(t){s||(I(i),I(k),s=!0)},o(t){J(i),J(k),s=!1},d(t){t&&f(e),y[n].d(),k&&k.d(),d=!1,r(p)}}}function te(t,e,n){let r,o,i,l,s,u,c,f,d;const g=ut();a(t,g,(t=>n(16,d=t)));let{cards:p=[]}=e,{capacity:h=4}=e,{closed:m=!1}=e,{index:$=0}=e,{isDraggableFn:v=(()=>!1)}=e,{selectedCardsN:y=0}=e,{nested:b=!1}=e;const k=A();return t.$$set=t=>{"cards"in t&&n(0,p=t.cards),"capacity"in t&&n(1,h=t.capacity),"closed"in t&&n(2,m=t.closed),"index"in t&&n(3,$=t.index),"isDraggableFn"in t&&n(4,v=t.isDraggableFn),"selectedCardsN"in t&&n(5,y=t.selectedCardsN),"nested"in t&&n(6,b=t.nested)},t.$$.update=()=>{65536&t.$$.dirty&&n(15,r=d.bridge),32770&t.$$.dirty&&n(13,o=`width: ${Gt(h,r)}em`),21&t.$$.dirty&&n(12,i=!m&&v(p)),33&t.$$.dirty&&n(11,l=y>0&&y===p.length),5&t.$$.dirty&&n(10,s=m&&1===p.length),9&t.$$.dirty&&n(9,u=t=>{t.stopPropagation(),((t,e,n)=>{const r={sourceStack:e,cards:n};t.dataTransfer.setData("application/json",JSON.stringify(r)),t.dataTransfer.effectAllowed="move"})(t,$,p)}),72&t.$$.dirty&&n(7,f=()=>{b||k("select",{index:$})})},n(8,c=t=>{t.preventDefault()}),[p,h,m,$,v,y,b,f,c,u,s,l,i,o,g,r,d,function(e){D.call(this,t,e)},function(e){D.call(this,t,e)}]}class ee extends X{constructor(t){super(),Q(this,t,te,Zt,i,{cards:0,capacity:1,closed:2,index:3,isDraggableFn:4,selectedCardsN:5,nested:6})}}const ne=()=>{const t=new ft.Deck;return[...Array(13)].map((()=>t.popN(4))).concat([[],[]])},re=t=>{const[e,...n]=t;return n.every((t=>t.value===e.value))},oe=t=>0!==t.length&&(1===t.length||re(t)),ie=(t,e)=>!(t.length+e.length>4)&&(0===e.length||e[e.length-1].value===t[0].value),ae=(t,e,n,r)=>{const o=t.map((t=>[...t]));if(!ie(r,o[n]))throw new Error(`Can not move cards ${r.map((t=>t.toString(dt.CardStringType.ShortEmoji)))} from pile ${e} to pile ${n}`);return o[e]=o[e].slice(0,o[e].length-r.length),o[n]=[...o[n],...r],o},le=t=>1===t.length||re(t)?t:le(t.slice(1)),se=t=>4===t.length&&re(t);function ue(t,e,n){const r=t.slice();return r[20]=e[n],r[22]=n,r}function ce(t){let e,n,r,o;return n=new ee({props:{cards:t[20],closed:t[6].includes(t[22]),selectedCardsN:t[5]===t[22]?t[4].length:0,index:t[22],isDraggableFn:oe}}),n.$on("drop",t[8](t[22])),n.$on("dblclick",t[9](t[22])),n.$on("select",t[7]),{c(){e=g("div"),q(n.$$.fragment),r=m(),v(e,"class","pile svelte-183fs0x")},m(t,i){c(t,e,i),B(n,e,null),u(e,r),o=!0},p(t,e){const r={};4&e&&(r.cards=t[20]),64&e&&(r.closed=t[6].includes(t[22])),48&e&&(r.selectedCardsN=t[5]===t[22]?t[4].length:0),n.$set(r)},i(t){o||(I(n.$$.fragment,t),o=!0)},o(t){J(n.$$.fragment,t),o=!1},d(t){t&&f(e),W(n)}}}function fe(t){let e,n,r,o=t[2],i=[];for(let e=0;e<o.length;e+=1)i[e]=ce(ue(t,o,e));const a=t=>J(i[t],1,1,(()=>{i[t]=null}));return{c(){e=g("main");for(let t=0;t<i.length;t+=1)i[t].c();v(e,"class","pileon svelte-183fs0x"),v(e,"style",t[3]),M((()=>t[17].call(e)))},m(o,a){c(o,e,a);for(let t=0;t<i.length;t+=1)i[t].m(e,null);n=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=g("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=w();let o;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=$(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{o=$(n.contentWindow,"resize",e)}),u(t,n),()=>{(r||o&&n.contentWindow)&&o(),f(n)}}(e,t[17].bind(e)),r=!0},p(t,[n]){if(1012&n){let r;for(o=t[2],r=0;r<o.length;r+=1){const a=ue(t,o,r);i[r]?(i[r].p(a,n),I(i[r],1)):(i[r]=ce(a),i[r].c(),I(i[r],1),i[r].m(e,null))}for(H(),r=o.length;r<i.length;r+=1)a(r);V()}(!r||8&n)&&v(e,"style",t[3])},i(t){if(!r){for(let t=0;t<o.length;t+=1)I(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)J(i[t]);r=!1},d(t){t&&f(e),d(i,t),n()}}}function de(t,e,n){let r,o,i,l,s,u,c,f,d;st((t=>({bridge:"poker"!==t.size,fourColor:"four-color"===t.colors})));let g=[ne()];const p=t=>{t.stopPropagation(),g.length>1&&n(11,g=g.slice(0,g.length-1))};let h=[void 0,[]];const m=(t,e,r)=>{try{n(12,h=[void 0,[]]);const o=ae(g[g.length-1],t,e,r);n(11,g=[...g,o])}catch(t){}},$=ut();let v,y;var b;return a(t,$,(t=>n(16,d=t))),b=()=>{rt.update((t=>Object.assign(Object.assign({},t),{undo:p})))},O().$$.on_mount.push(b),function(t){O().$$.on_destroy.push(t)}((()=>{rt.update((t=>Object.assign(Object.assign({},t),{undo:void 0})))})),t.$$.update=()=>{2048&t.$$.dirty&&n(2,r=g[g.length-1]),4&t.$$.dirty&&n(6,o=(t=>t.reduce(((t,e,n)=>se(e)?[...t,n]:t),[]))(r)),4096&t.$$.dirty&&n(5,i=h[0]),4096&t.$$.dirty&&n(4,l=h[1]),65536&t.$$.dirty&&n(15,s=d.bridge),32769&t.$$.dirty&&n(14,u=.95*v/(t=>5*Gt(4,t)+6.66)(s)),2&t.$$.dirty&&n(13,c=.95*y/24),24576&t.$$.dirty&&n(3,f=`font-size: ${Math.min(u,c)}px`)},[v,y,r,f,l,i,o,t=>{const[e,i]=h,a=t.detail.index;o.includes(a)||(void 0===e||0===i.length?n(12,h=[a,le(r[a])]):e===a?n(12,h=[a,i.slice(1)]):e!==a&&(m(e,a,i),n(12,h=[void 0,[]])))},t=>e=>{e.preventDefault();const{sourceStack:n,cards:r}=(t=>{const{sourceStack:e,cards:n}=JSON.parse(t.dataTransfer.getData("application/json"));return{sourceStack:e,cards:n.map(ft.Card.fromJSON)}})(e);n!==t&&m(n,t,r)},t=>e=>{e.preventDefault();try{n(12,h=[void 0,[]]);const e=((t,e)=>{if(0===t[e].length)throw new Error("Cannot move cards from an empty pile.");if(se(t[e]))throw new Error("Cannot move cards from a completed pile.");const n=le(t[e]),r=t.reduce(((t,r,o)=>o!==e&&ie(n,r)?[...t,o]:t),[]);if(0===r.length)throw new Error(`Cannot move cards from pile ${e} to any other pile`);const o=r.filter((e=>t[e].length>0)),i=o.length>0?o[0]:r[0];return ae(t,e,i,n)})(g[g.length-1],t);n(11,g=[...g,e])}catch(e){}},$,g,h,c,u,s,d,function(){v=this.clientWidth,y=this.clientHeight,n(0,v),n(1,y)}]}class ge extends X{constructor(t){super(),Q(this,t,de,fe,i,{})}}function pe(e){let n,r,o,i=(e[1]||e[0])&&function(e){let n;return{c(){n=g("span"),n.textContent=`at ${e[0]}  ${e[1]}`},m(t,e){c(t,n,e)},p:t,d(t){t&&f(n)}}}(e);return{c(){n=g("footer"),r=g("a"),r.textContent="kangasta / pakka",o=m(),i&&i.c(),v(r,"href","https://github.com/kangasta/pakka.git"),v(r,"target","_blank"),v(n,"class","svelte-16t3ryr")},m(t,e){c(t,n,e),u(n,r),u(n,o),i&&i.m(n,null)},p(t,[e]){(t[1]||t[0])&&i.p(t,e)},i:t,o:t,d(t){t&&f(n),i&&i.d()}}}function he(t){const e=t=>{var e,n;try{const{env:r}=null!==(e={env:{isProd:!0,PUBLIC_URL:"https://kangasta.github.io/pakka",COMMIT:"3e8f8663f276513537dd7b2a7cd1cb3062a1eede"}})&&void 0!==e?e:{},o=null!==(n=r[t])&&void 0!==n?n:"";return String(o)}catch(t){return""}};return[e("TAG"),e("COMMIT").slice(0,8)]}class me extends X{constructor(t){super(),Q(this,t,he,pe,i,{})}}function $e(e){let n,i,a,l,d,b,k,S,w,x,O;return{c(){n=g("div"),i=g("button"),a=p("svg"),l=p("path"),k=m(),S=g("div"),w=h(e[1]),v(l,"fill","none"),v(l,"stroke","currentColor"),v(l,"stroke-linecap","round"),v(l,"stroke-linejoin","round"),v(l,"stroke-width","1"),v(l,"d",d=e[3][e[0]].path),v(a,"viewBox","0 0 16 16 "),v(a,"class",b=s(e[3][e[0]].class)+" svelte-173olzb"),v(i,"aria-labelledby",e[4]),v(i,"class","clickable svelte-173olzb"),C(i,"open",open),v(S,"class","label svelte-173olzb"),v(S,"id",e[4]),v(n,"class","icon-button clickable svelte-173olzb")},m(t,r){c(t,n,r),u(n,i),u(i,a),u(a,l),u(n,k),u(n,S),u(S,w),x||(O=[$(i,"click",(function(){o(e[2])&&e[2].apply(this,arguments)})),$(n,"click",(function(){o(e[2])&&e[2].apply(this,arguments)}))],x=!0)},p(t,[n]){e=t,1&n&&d!==(d=e[3][e[0]].path)&&v(l,"d",d),1&n&&b!==(b=s(e[3][e[0]].class)+" svelte-173olzb")&&v(a,"class",b),0&n&&C(i,"open",open),2&n&&y(w,e[1])},i:t,o:t,d(t){t&&f(n),x=!1,r(O)}}}function ve(t,e,n){let{icon:r}=e,{label:o}=e,{onClick:i}=e;const a=`${(Math.random()+1).toString(36).substring(5)}-label`;return t.$$set=t=>{"icon"in t&&n(0,r=t.icon),"label"in t&&n(1,o=t.label),"onClick"in t&&n(2,i=t.onClick)},[r,o,i,{Undo:{path:"M 6 2 L 2 6 L 6 10 M 2 6 L 10 6 A 4 4 0 1 1 10 14 L 8 14"},ChevronDown:{path:"M 4 6 L 8 10 L 12 6",class:"transition-transform"},ChevronUp:{path:"M 4 6 L 8 10 L 12 6",class:"transition-transform mirror-y"}},a]}class ye extends X{constructor(t){super(),Q(this,t,ve,$e,i,{icon:0,label:1,onClick:2})}}function be(e){let n,r,i,a,l;return{c(){n=g("button"),r=h(e[0]),v(n,"aria-pressed",i=e[1]?"true":"false"),n.disabled=e[1],v(n,"class","svelte-jc3xzr"),C(n,"pressed",e[1])},m(t,i){c(t,n,i),u(n,r),a||(l=$(n,"click",(function(){o(e[2])&&e[2].apply(this,arguments)})),a=!0)},p(t,[o]){e=t,1&o&&y(r,e[0]),2&o&&i!==(i=e[1]?"true":"false")&&v(n,"aria-pressed",i),2&o&&(n.disabled=e[1]),2&o&&C(n,"pressed",e[1])},i:t,o:t,d(t){t&&f(n),a=!1,l()}}}function ke(t,e,n){let r,o,i;a(t,nt,(t=>n(4,i=t)));let{target:l}=e,{value:s}=e;const{update:u}=nt,c=()=>{};return t.$$set=t=>{"target"in t&&n(3,l=t.target),"value"in t&&n(0,s=t.value)},t.$$.update=()=>{25&t.$$.dirty&&n(1,o=i[l]===s),11&t.$$.dirty&&n(2,r=o?c:()=>u((t=>Object.assign(Object.assign({},t),{[l]:s}))))},[s,o,r,l,i]}class Se extends X{constructor(t){super(),Q(this,t,ke,be,i,{target:3,value:0})}}function we(t){let e,n;return e=new ye({props:{icon:"Undo",label:"Undo",onClick:t[2].undo}}),{c(){q(e.$$.fragment)},m(t,r){B(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.onClick=t[2].undo),e.$set(r)},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){W(e,t)}}}function Ce(t){let e,n,r,o,i,a,l,s,d,p,$,y,b,k,S,w,x,O,A,D,T,j,U,_,E,L,M,F,N,R,P,z,K,G;s=new Se({props:{target:"game",value:"deck"}}),p=new Se({props:{target:"game",value:"pileon"}}),w=new Se({props:{target:"colors",value:"default"}}),O=new Se({props:{target:"colors",value:"standard"}}),D=new Se({props:{target:"colors",value:"four-color"}}),L=new Se({props:{target:"size",value:"default"}}),F=new Se({props:{target:"size",value:"bridge"}}),R=new Se({props:{target:"size",value:"poker"}}),z=new ye({props:{icon:t[0]?"ChevronUp":"ChevronDown",label:t[1],onClick:t[3]}});let Q=void 0!==t[2].undo&&we(t);return{c(){e=g("div"),n=g("div"),r=g("table"),o=g("tr"),i=g("th"),i.textContent="Game:",a=m(),l=g("td"),q(s.$$.fragment),d=h(" / "),q(p.$$.fragment),$=m(),y=g("tr"),b=g("th"),b.textContent="Colors:",k=m(),S=g("td"),q(w.$$.fragment),x=h(" / "),q(O.$$.fragment),A=h(" / "),q(D.$$.fragment),T=m(),j=g("tr"),U=g("th"),U.textContent="Size:",_=m(),E=g("td"),q(L.$$.fragment),M=h(" / "),q(F.$$.fragment),N=h(" / "),q(R.$$.fragment),P=m(),q(z.$$.fragment),K=m(),Q&&Q.c(),v(i,"class","svelte-eflwvb"),v(l,"class","svelte-eflwvb"),v(b,"class","svelte-eflwvb"),v(S,"class","svelte-eflwvb"),v(U,"class","svelte-eflwvb"),v(E,"class","svelte-eflwvb"),v(r,"class","svelte-eflwvb"),v(n,"class","content svelte-eflwvb"),C(n,"open",t[0]),v(e,"class","menu svelte-eflwvb")},m(t,f){c(t,e,f),u(e,n),u(n,r),u(r,o),u(o,i),u(o,a),u(o,l),B(s,l,null),u(l,d),B(p,l,null),u(r,$),u(r,y),u(y,b),u(y,k),u(y,S),B(w,S,null),u(S,x),B(O,S,null),u(S,A),B(D,S,null),u(r,T),u(r,j),u(j,U),u(j,_),u(j,E),B(L,E,null),u(E,M),B(F,E,null),u(E,N),B(R,E,null),u(e,P),B(z,e,null),u(e,K),Q&&Q.m(e,null),G=!0},p(t,[r]){(!G||1&r)&&C(n,"open",t[0]);const o={};1&r&&(o.icon=t[0]?"ChevronUp":"ChevronDown"),2&r&&(o.label=t[1]),z.$set(o),void 0!==t[2].undo?Q?(Q.p(t,r),4&r&&I(Q,1)):(Q=we(t),Q.c(),I(Q,1),Q.m(e,null)):Q&&(H(),J(Q,1,1,(()=>{Q=null})),V())},i(t){G||(I(s.$$.fragment,t),I(p.$$.fragment,t),I(w.$$.fragment,t),I(O.$$.fragment,t),I(D.$$.fragment,t),I(L.$$.fragment,t),I(F.$$.fragment,t),I(R.$$.fragment,t),I(z.$$.fragment,t),I(Q),G=!0)},o(t){J(s.$$.fragment,t),J(p.$$.fragment,t),J(w.$$.fragment,t),J(O.$$.fragment,t),J(D.$$.fragment,t),J(L.$$.fragment,t),J(F.$$.fragment,t),J(R.$$.fragment,t),J(z.$$.fragment,t),J(Q),G=!1},d(t){t&&f(e),W(s),W(p),W(w),W(O),W(D),W(L),W(F),W(R),W(z),Q&&Q.d()}}}function xe(t,e,n){let r,o;a(t,rt,(t=>n(2,o=t)));let i=!1;return t.$$.update=()=>{1&t.$$.dirty&&n(1,r=i?"Close menu":"Open menu")},[i,r,o,t=>{n(0,i=!i),t.stopPropagation()}]}class Oe extends X{constructor(t){super(),Q(this,t,xe,Ce,i,{})}}function Ae(t){let e,n,r,o,i,a,l,s,u;e=new Oe({});var d=t[0];return d&&(r=new d({})),a=new me({}),{c(){q(e.$$.fragment),n=m(),r&&q(r.$$.fragment),o=m(),i=m(),q(a.$$.fragment)},m(f,d){B(e,f,d),c(f,n,d),r&&B(r,f,d),c(f,o,d),c(f,i,d),B(a,f,d),l=!0,s||(u=$(document.body,"keydown",t[1]),s=!0)},p(t,[e]){if(d!==(d=t[0])){if(r){H();const t=r;J(t.$$.fragment,1,0,(()=>{W(t,1)})),V()}d?(r=new d({}),q(r.$$.fragment),I(r.$$.fragment,1),B(r,o.parentNode,o)):r=null}},i(t){l||(I(e.$$.fragment,t),r&&I(r.$$.fragment,t),I(a.$$.fragment,t),l=!0)},o(t){J(e.$$.fragment,t),r&&J(r.$$.fragment,t),J(a.$$.fragment,t),l=!1},d(t){W(e,t),t&&f(n),r&&W(r,t),t&&f(o),t&&f(i),W(a,t),s=!1,u()}}}function De(t,e,n){let r,o,i;a(t,rt,(t=>n(3,o=t))),a(t,nt,(t=>n(2,i=t)));return t.$$.update=()=>{4&t.$$.dirty&&n(0,r="pileon"===i.game?ge:Wt)},[r,t=>{"z"===t.key&&(t.ctrlKey||t.metaKey)&&void 0!==o.undo&&o.undo(t)},i]}return new class extends X{constructor(t){super(),Q(this,t,De,Ae,i,{})}}({target:document.body,props:{}})}();
