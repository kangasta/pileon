var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function l(t,e,n){t.$$.on_destroy.push(a(e,n))}function s(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function u(t){return null==t?"":t}function c(t,e){t.appendChild(e)}function f(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function g(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function p(t){return document.createElement(t)}function h(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function m(t){return document.createTextNode(t)}function $(){return m(" ")}function v(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function y(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function k(t,e,n,r){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function S(t,e,n){t.classList[n?"add":"remove"](e)}let w;function C(t){w=t}function O(){if(!w)throw new Error("Function called outside component initialization");return w}function x(){const t=O();return(e,n,{cancelable:r=!1}={})=>{const o=t.$$.callbacks[e];if(o){const i=function(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,r,e),o}(e,n,{cancelable:r});return o.slice().forEach((e=>{e.call(t,i)})),!i.defaultPrevented}return!0}}function A(t){return O().$$.context.get(t)}function D(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const T=[],j=[],U=[],_=[],E=Promise.resolve();let L=!1;function M(t){U.push(t)}const F=new Set;let N=0;function R(){const t=w;do{for(;N<T.length;){const t=T[N];N++,C(t),P(t.$$)}for(C(null),T.length=0,N=0;j.length;)j.pop()();for(let t=0;t<U.length;t+=1){const e=U[t];F.has(e)||(F.add(e),e())}U.length=0}while(T.length);for(;_.length;)_.pop()();L=!1,F.clear(),C(t)}function P(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(M)}}const z=new Set;let K;function H(){K={r:0,c:[],p:K}}function V(){K.r||r(K.c),K=K.p}function q(t,e){t&&t.i&&(z.delete(t),t.i(e))}function J(t,e,n,r){if(t&&t.o){if(z.has(t))return;z.add(t),K.c.push((()=>{z.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}function I(t){t&&t.c()}function B(t,n,i,a){const{fragment:l,on_mount:s,on_destroy:u,after_update:c}=t.$$;l&&l.m(n,i),a||M((()=>{const n=s.map(e).filter(o);u?u.push(...n):r(n),t.$$.on_mount=[]})),c.forEach(M)}function G(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function W(t,e){-1===t.$$.dirty[0]&&(T.push(t),L||(L=!0,E.then(R)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Q(e,o,i,a,l,s,u,c=[-1]){const f=w;C(e);const g=e.$$={fragment:null,ctx:null,props:s,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(f?f.$$.context:[])),callbacks:n(),dirty:c,skip_bound:!1,root:o.target||f.$$.root};u&&u(g.root);let p=!1;if(g.ctx=i?i(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return g.ctx&&l(g.ctx[t],g.ctx[t]=o)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](o),p&&W(e,t)),n})):[],g.update(),p=!0,r(g.before_update),g.fragment=!!a&&a(g.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);g.fragment&&g.fragment.l(t),t.forEach(d)}else g.fragment&&g.fragment.c();o.intro&&q(e.$$.fragment),B(e,o.target,o.anchor,o.customElement),R()}C(f)}class X{$destroy(){G(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Y=[];function Z(e,n=t){let r;const o=new Set;function a(t){if(i(e,t)&&(e=t,r)){const t=!Y.length;for(const t of o)t[1](),Y.push(t,e);if(t){for(let t=0;t<Y.length;t+=2)Y[t][0](Y[t+1]);Y.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(i,l=t){const s=[i,l];return o.add(s),1===o.size&&(r=n(a)||t),i(e),()=>{o.delete(s),0===o.size&&(r(),r=null)}}}}const tt="settings",et=JSON.parse(localStorage.getItem(tt)),nt=Z(null!=et?et:{game:"deck",colors:"default",size:"default"});nt.subscribe((t=>localStorage.setItem(tt,JSON.stringify(t))));const rt=Z({}),ot=t=>{switch(t){case"bridge":return{height:7,width:4.5};case"poker":return{height:7,width:5};case"small":return{height:5,width:3}}},it="card-appearance",at={size:"bridge",fourColor:!1},lt=({size:t,colors:e})=>({size:"default"===t?"poker":t,fourColor:"four-color"===e}),st=t=>{const e=Z(at,(e=>(nt.subscribe((n=>e(t(n)))),()=>{})));var n,r;return n=it,r=e,O().$$.context.set(n,r),e},ut=()=>A(it),ct=t=>{const e=A(it);if(e){const n=function(t){let e;return a(t,(t=>e=t))(),e}(nt);e.set(t(n))}},ft=(t,e,n={})=>r=>{(Array.isArray(t)?t:[t]).includes(r.code)&&void 0!==e&&(n.preventDefault&&r.preventDefault(),e())};var dt={},gt={};!function(t){function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CardStringType=t.CardSuits=void 0,t.CardSuits=r,function(t){t[t.Hearts=0]="Hearts",t[t.Spades=1]="Spades",t[t.Diamonds=2]="Diamonds",t[t.Clubs=3]="Clubs"}(r||(t.CardSuits=r={})),t.CardStringType=o,function(t){t.Short="SHORT",t.Long="LONG",t.ShortEmoji="SHORT_EMOJI",t.ShortSuit="SHORT_SUIT",t.LongSuit="LONG_SUIT",t.EmojiSuit="EMOJI_SUIT",t.ShortValue="SHORT_VALUE",t.LongValue="LONG_VALUE"}(o||(t.CardStringType=o={}));var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n(this,"num",void 0),this.num=e}var r,o,i;return r=t,o=[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.StringType.Long;switch(e){case t.StringType.Short:return this.toString(t.StringType.ShortValue)+this.toString(t.StringType.ShortSuit);case t.StringType.ShortEmoji:return this.toString(t.StringType.ShortValue)+this.toString(t.StringType.EmojiSuit);case t.StringType.Long:return this.toString(t.StringType.LongValue)+" of "+this.toString(t.StringType.LongSuit);case t.StringType.ShortSuit:return t.shortSuits[this.suit];case t.StringType.LongSuit:return t.longSuits[this.suit];case t.StringType.EmojiSuit:return t.emojiSuits[this.suit];case t.StringType.ShortValue:return t.shortValues[13===this.value?0:this.value];case t.StringType.LongValue:return t.longValues[13===this.value?0:this.value]}throw new Error("Unsupported output type")}},{key:"suit",get:function(){return t.getSuit(this.num)}},{key:"value",get:function(){return t.getValue(this.num)}}],i=[{key:"fromJSON",value:function(e){return new t(e.num)}},{key:"getSuit",value:function(t){return Math.floor(t/13)%4}},{key:"getValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t%13||e?t%13:13}},{key:"compare",value:function(t,e){return e.value-t.value}}],o&&e(r.prototype,o),i&&e(r,i),t}();n(i,"Suits",r),n(i,"StringType",o),n(i,"emojiSuits",["♥","♠","♦","♣"]),n(i,"shortSuits",["h","s","d","c"]),n(i,"longSuits",["hearts","spades","diamonds","clubs"]),n(i,"shortValues",["A","2","3","4","5","6","7","8","9","T","J","Q","K"]),n(i,"longValues",["ace","two","three","four","five","six","seven","eight","nine","ten","jack","queen","king"]);var a=i;t.default=a}(gt);var pt={},ht={};Object.defineProperty(ht,"__esModule",{value:!0}),ht.uniqueFilter=ht.shuffle=ht.last=ht.isSorted=ht.getCombinations=ht.arraySubtraction=void 0;ht.arraySubtraction=function(t,e){return t.filter((function(t){return!e.includes(t)}))};var mt=function t(e,n,r,o,i){if(o.length>=n)i.push(o);else for(var a=r;a<e.length;a++)t(e,n,a+1,o.concat(e[a]),i)};ht.getCombinations=function(t,e){var n=[];return mt(t,e,0,[],n),n};ht.isSorted=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n?-1:1;try{return t.reduce((function(t,n){if(r*e(t,n)<=0)return n;throw new Error})),!0}catch(t){return!1}};ht.last=function(t){return t[t.length-1]};ht.shuffle=function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),r=[t[n],t[e]];t[e]=r[0],t[n]=r[1]}return t};ht.uniqueFilter=function(t,e,n){return n.indexOf(t)===e},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e,n=(e=gt)&&e.__esModule?e:{default:e},r=ht;function o(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=function(){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;i(this,t),l(this,"cards",void 0),this.cards=o(Array(52*r).keys()).map((function(t){return new n.default(t)})),e&&this.shuffle()}var e,s,u;return e=t,s=[{key:"shuffle",value:function(){(0,r.shuffle)(this.cards)}},{key:"isShuffled",value:function(){return!(0,r.isSorted)(this.cards,(function(t,e){return t.num-e.num}))}},{key:"pop",value:function(){return this.cards.pop()}},{key:"popN",value:function(t){for(var e,n=[],r=0;r<t&&(e=this.pop());r++)n.push(e);return n}},{key:"cardsRemaining",get:function(){return this.cards.length}}],u=[{key:"fromJSON",value:function(e){var r=e.cards,o=new t(!1,0);return o.cards=r.map((function(t){return n.default.fromJSON(t)})),o}}],s&&a(e.prototype,s),u&&a(e,u),t}(),u=s;t.default=u}(pt);var $t={},vt={};Object.defineProperty(vt,"__esModule",{value:!0}),vt.uuid4=void 0;var yt=function(t){var e;do{e=Math.random().toString(16).slice(2,t+2)}while(e.length<t&&t<=12);return e};function bt(e){let n,r;return{c(){n=h("svg"),r=h("path"),y(r,"d",e[1]),y(r,"fill","CurrentColor"),y(n,"viewBox","0 0 16 20"),y(n,"class","svelte-1jimf84"),S(n,"flip",e[0])},m(t,e){f(t,n,e),c(n,r)},p(t,[e]){2&e&&y(r,"d",t[1]),1&e&&S(n,"flip",t[0])},i:t,o:t,d(t){t&&d(n)}}}function kt(t,e,n){let r,{suit:o=null}=e,{flip:i=!1}=e;return t.$$set=t=>{"suit"in t&&n(2,o=t.suit),"flip"in t&&n(0,i=t.flip)},t.$$.update=()=>{4&t.$$.dirty&&n(1,r=(t=>{switch(t){case"hearts":return"M 8 2 C 9 0 11 0 12 0 C 13 0 16 1 16 6 C 16 8 15.5 10 14 12 L 8 20 L 2 12 C 0.5 10 0 8 0 6 C 0 1 3 0 4 0 C 5 0 7 0 8 2";case"spades":return"M 8 0 L 13 5 C 16 8 16 10 16 12 C 16 14 14 16 12 16 C 11 16 9 16 8 14 L 12 20 L 4 20 L 8 14 C 7 16 5 16 4 16 C 2 16 0 14 0 12 C 0 10 0 8 3 5 L 8 0";case"diamonds":return"M 8 0 L 16 10 L 8 20 L 0 10 L 8 0";case"clubs":return"M 8 0 C 10 0 12 2 12 4 C 12 6 11 8 8 10 C 9 8 10 7 12 7 C 14 7 16 9 16 12 C 16 14 14 16 12 16 C 11 16 9 16 8 14 L 12 20 L 4 20 L 8 14 C 7 16 5 16 4 16 C 2 16 0 14 0 12 C 0 9 2 7 4 7 C 6 7 7 8 8 10 C 5 8 4 6 4 4 C 4 2 6 0 8 0";default:return null}})(o))},[i,r,o]}vt.uuid4=function(){var t=[8,4,4,4,12].map(yt).join("-").split("");return t[14]="4",t[19]=(Math.floor(64*Math.random())%4+8).toString(16),t.join("")},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.HandRank=void 0;var e,n,r=(e=gt)&&e.__esModule?e:{default:e},o=vt,i=ht;function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t.HandRank=n,function(t){t[t.High=0]="High",t[t.Pair=5]="Pair",t[t.TwoPairs=10]="TwoPairs",t[t.ThreeOfAKind=15]="ThreeOfAKind",t[t.Straight=20]="Straight",t[t.Flush=25]="Flush",t[t.FullHouse=30]="FullHouse",t[t.FourOfAKind=35]="FourOfAKind",t[t.StraightFlush=40]="StraightFlush",t[t.FiveOfAKind=45]="FiveOfAKind"}(n||(t.HandRank=n={}));var c=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,"uuid",void 0),u(this,"rank",void 0),u(this,"cards",void 0),this.rank=e,this.cards=n,this.uuid=r||(0,o.uuid4)()}var e,n,c;return e=t,n=[{key:"getCardsString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.default.StringType.Short;return this.cards.map((function(e){return e.toString(t)})).join(", ")}},{key:"toString",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.default.StringType.Short,o=r.default.StringType.LongValue,i=function(t){return e.cards[t].toString(o)},a=this.getCardsString(n);switch(this.rank){case t.Rank.FiveOfAKind:return"Five of a kind, ".concat(i(0),"s (").concat(a,")");case t.Rank.StraightFlush:return"Straigth flush, ".concat(i(0)," high (").concat(a,")");case t.Rank.FourOfAKind:return"Four of a kind, ".concat(i(0),"s (").concat(a,")");case t.Rank.FullHouse:return"Full house, ".concat(i(0),"s over ").concat(i(3),"s (").concat(a,")");case t.Rank.Flush:return"Flush, ".concat(i(0)," high (").concat(a,")");case t.Rank.Straight:return"Straigth, ".concat(i(0)," high (").concat(a,")");case t.Rank.ThreeOfAKind:return"Three of a kind, ".concat(i(0),"s (").concat(a,")");case t.Rank.TwoPairs:return"Two pairs, ".concat(i(0),"s and ").concat(i(2),"s (").concat(a,")");case t.Rank.Pair:return"Pair, ".concat(i(0),"s (").concat(a,")");case t.Rank.High:return"".concat(i(0).replace(/^\w/,(function(t){return t.toUpperCase()}))," high (").concat(a,")")}throw new Error("Unsupported rank value")}}],c=[{key:"fromJSON",value:function(e){var n=e.rank,o=e.cards,i=e.uuid;return new t(n,o.map(r.default.fromJSON),i)}},{key:"solve",value:function(e){var n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return(n=t.isNumOfAKind(5,e))?r=t.Rank.FiveOfAKind:(n=t.isStraightFlush(e,o))?r=t.Rank.StraightFlush:(n=t.isNumOfAKind(4,e))?r=t.Rank.FourOfAKind:(n=t.isFullHouse(e))?r=t.Rank.FullHouse:(n=t.isFlush(e,o))?r=t.Rank.Flush:(n=t.isStraight(e,o))?r=t.Rank.Straight:(n=t.isNumOfAKind(3,e))?r=t.Rank.ThreeOfAKind:(n=t.isTwoPairs(e))?r=t.Rank.TwoPairs:(n=t.isNumOfAKind(2,e))?r=t.Rank.Pair:(n=[],r=t.Rank.High),n=t.fillWithKickers(n,e),new t(r,n)}},{key:"solveHoldEm",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===r)return t.solve([].concat(l(e),l(n)));for(var o=(0,i.getCombinations)(e,e.length-r),a=(0,i.getCombinations)(n,Math.min(n.length,r)),s=[],u=0;u<o.length;u++)for(var c=0;c<a.length;c++)s.push(t.solve([].concat(l(o[u]),l(a[c]))));return t.max.apply(t,s)}},{key:"compare",value:function(t,e){var n;if(t.cards.length!==e.cards.length)throw new Error("Comparing hands with different number of cards");if(0!=(n=e.rank-t.rank))return n;for(var o=0;o<t.cards.length;o++)if(0!==(n=r.default.compare(t.cards[o],e.cards[o])))return n;return 0}},{key:"winners",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=t.max.apply(t,n);return n.filter((function(e){return!t.compare(e,o)}))}},{key:"max",value:function(){for(var e=function(e,n){return t.compare(e,n)<0?e:n},n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return r.reduce((function(t,n){return e(t,n)}))}},{key:"fillWithKickers",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return e=(0,i.arraySubtraction)(e,t).sort(r.default.compare),[].concat(l(t),l(e)).slice(0,n)}},{key:"getUniqueValues",value:function(t){return t.map((function(t){return t.value})).filter(i.uniqueFilter).sort((function(t,e){return e-t}))}},{key:"isNumOfAKind",value:function(e,n){for(var r,o=t.getUniqueValues(n),i=function(t){if((r=n.filter((function(e){return e.value==o[t]}))).length>=e)return{v:r}},l=0;l<o.length;l++){var s=i(l);if("object"===a(s))return s.v}return!1}},{key:"isNumOfAKindCombination",value:function(e,n){for(var r=[],o=0;o<e.length;o++){var a=t.isNumOfAKind(e[o],(0,i.arraySubtraction)(n,r));if(!1===a)return!1;r.push.apply(r,l(a))}return r}},{key:"isStraightFlush",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,r=[],o=function(o){if((r=e.filter((function(t){return t.suit===o}))).length<n)return"continue";var i=t.isStraight(r,n);return i?{v:i}:void 0},i=0;i<4;i++){var l=o(i);if("continue"!==l&&"object"===a(l))return l.v}return!1}},{key:"isFullHouse",value:function(e){return t.isNumOfAKindCombination([3,2],e)}},{key:"isFlush",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=function(n){var o=t.filter((function(t){return t.suit==n}));if(o.length>=e)return{v:o.sort(r.default.compare).slice(0,e)}},o=0;o<4;o++){var i=n(o);if("object"===a(i))return i.v}return!1}},{key:"isStraight",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,r=t.getUniqueValues(e);if(r.length<n)return!1;r.includes(13)&&r.push(0);for(var o=[r[0]],a=1;a<r.length&&o.length<n;a++)(0,i.last)(o)-r[a]==1?o.push(r[a]):o=[r[a]];return o.length==n&&o.map((function(t){return e.find((function(e){return e.value===(t||13)}))}))}},{key:"isTwoPairs",value:function(e){return t.isNumOfAKindCombination([2,2],e)}}],n&&s(e.prototype,n),c&&s(e,c),t}();u(c,"Rank",n);var f=c;t.default=f}($t),function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Card",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"Deck",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"Hand",{enumerable:!0,get:function(){return r.default}});var e=o(gt),n=o(pt),r=o($t);function o(t){return t&&t.__esModule?t:{default:t}}}(dt);class St extends X{constructor(t){super(),Q(this,t,kt,bt,i,{suit:2,flip:0})}}function wt(t,e,n){const r=t.slice();return r[5]=e[n],r}function Ct(t,e,n){const r=t.slice();return r[8]=e[n],r}function Ot(t){let e,n,r;return n=new St({props:{suit:t[0],flip:"d"===t[8].toLowerCase()}}),{c(){e=p("span"),I(n.$$.fragment),y(e,"class","svelte-1sm49dl")},m(t,o){f(t,e,o),B(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.suit=t[0]),2&e&&(r.flip="d"===t[8].toLowerCase()),n.$set(r)},i(t){r||(q(n.$$.fragment,t),r=!0)},o(t){J(n.$$.fragment,t),r=!1},d(t){t&&d(e),G(n)}}}function xt(t){let e,n,r,o,i=t[5].split(""),a=[];for(let e=0;e<i.length;e+=1)a[e]=Ot(Ct(t,i,e));const l=t=>J(a[t],1,1,(()=>{a[t]=null}));return{c(){e=p("div");for(let t=0;t<a.length;t+=1)a[t].c();n=$(),y(e,"class",r="row "+t[3](t[5])+" svelte-1sm49dl")},m(t,r){f(t,e,r);for(let t=0;t<a.length;t+=1)a[t].m(e,null);c(e,n),o=!0},p(t,s){if(7&s){let r;for(i=t[5].split(""),r=0;r<i.length;r+=1){const o=Ct(t,i,r);a[r]?(a[r].p(o,s),q(a[r],1)):(a[r]=Ot(o),a[r].c(),q(a[r],1),a[r].m(e,n))}for(H(),r=i.length;r<a.length;r+=1)l(r);V()}(!o||2&s&&r!==(r="row "+t[3](t[5])+" svelte-1sm49dl"))&&y(e,"class",r)},i(t){if(!o){for(let t=0;t<i.length;t+=1)q(a[t]);o=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)J(a[t]);o=!1},d(t){t&&d(e),g(a,t)}}}function At(t){let e,n,r=t[2](t[1]),o=[];for(let e=0;e<r.length;e+=1)o[e]=xt(wt(t,r,e));const i=t=>J(o[t],1,1,(()=>{o[t]=null}));return{c(){e=p("div");for(let t=0;t<o.length;t+=1)o[t].c();y(e,"class","center-pattern svelte-1sm49dl")},m(t,r){f(t,e,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);n=!0},p(t,[n]){if(15&n){let a;for(r=t[2](t[1]),a=0;a<r.length;a+=1){const i=wt(t,r,a);o[a]?(o[a].p(i,n),q(o[a],1)):(o[a]=xt(i),o[a].c(),q(o[a],1),o[a].m(e,null))}for(H(),a=r.length;a<o.length;a+=1)i(a);V()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)q(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)J(o[t]);n=!1},d(t){t&&d(e),g(o,t)}}}function Dt(t,e,n){let{suit:r}=e,{rank:o}=e;const i={A:["U"],2:["U","D"],3:["U","U","D"],4:["UU","DD"],5:["UU","U","DD"],6:["UU","UU","DD"],7:["UU","u","UU","DD"],8:["UU","UU","DD","DD"],9:["UU","u","UU","DD","DD"],10:["UU","u","UU","DD","d","DD"]};return t.$$set=t=>{"suit"in t&&n(0,r=t.suit),"rank"in t&&n(1,o=t.rank)},[r,o,t=>{var e;return null!==(e=i[t])&&void 0!==e?e:[]},t=>t.toUpperCase()===t?"grow":""]}class Tt extends X{constructor(t){super(),Q(this,t,Dt,At,i,{suit:0,rank:1})}}function jt(t){let e,n;const r=t[1].default,o=function(t,e,n,r){if(t){const o=s(t,e,n,r);return t[0](o)}}(r,t,t[0],null);return{c(){e=p("span"),o&&o.c(),y(e,"class","screen-reader-only svelte-3uotpv")},m(t,r){f(t,e,r),o&&o.m(e,null),n=!0},p(t,[e]){o&&o.p&&(!n||1&e)&&function(t,e,n,r,o,i){if(o){const a=s(e,n,r,i);t.p(a,o)}}(o,r,t,t[0],n?function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(r,t[0],e,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[0]),null)},i(t){n||(q(o,t),n=!0)},o(t){J(o,t),n=!1},d(t){t&&d(e),o&&o.d(t)}}}function Ut(t,e,n){let{$$slots:r={},$$scope:o}=e;return t.$$set=t=>{"$$scope"in t&&n(0,o=t.$$scope)},[o,r]}class _t extends X{constructor(t){super(),Q(this,t,Ut,jt,i,{})}}function Et(t,e,n){const r=t.slice();return r[16]=e[n],r}function Lt(t){let e,n;return e=new _t({props:{$$slots:{default:[Mt]},$$scope:{ctx:t}}}),{c(){I(e.$$.fragment)},m(t,r){B(e,t,r),n=!0},p(t,n){const r={};524320&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(q(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function Mt(t){let e;return{c(){e=m(t[5])},m(t,n){f(t,e,n)},p(t,n){32&n&&b(e,t[5])},d(t){t&&d(e)}}}function Ft(t){let e,n;return e=new Tt({props:{suit:t[7],rank:t[8]}}),{c(){I(e.$$.fragment)},m(t,r){B(e,t,r),n=!0},p(t,n){const r={};128&n&&(r.suit=t[7]),256&n&&(r.rank=t[8]),e.$set(r)},i(t){n||(q(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function Nt(t){let e,n,r,o,i,a,l,s,u,g,h;l=new St({props:{suit:t[7]}});let v=!t[10]&&Ft(t);return{c(){e=p("div"),n=p("div"),r=m(t[8]),i=$(),a=p("div"),I(l.$$.fragment),s=$(),u=p("div"),v&&v.c(),g=$(),y(n,"class",o="rank rank-"+t[8]+" svelte-t2vtqs"),y(a,"class","suit svelte-t2vtqs"),y(e,"aria-hidden","true"),y(e,"class",t[16]+" label svelte-t2vtqs"),y(u,"class","center svelte-t2vtqs"),S(u,"face",t[6])},m(t,o){f(t,e,o),c(e,n),c(n,r),c(e,i),c(e,a),B(l,a,null),f(t,s,o),f(t,u,o),v&&v.m(u,null),c(u,g),h=!0},p(t,e){(!h||256&e)&&b(r,t[8]),(!h||256&e&&o!==(o="rank rank-"+t[8]+" svelte-t2vtqs"))&&y(n,"class",o);const i={};128&e&&(i.suit=t[7]),l.$set(i),t[10]?v&&(H(),J(v,1,1,(()=>{v=null})),V()):v?(v.p(t,e),1024&e&&q(v,1)):(v=Ft(t),v.c(),q(v,1),v.m(u,g)),(!h||64&e)&&S(u,"face",t[6])},i(t){h||(q(l.$$.fragment,t),q(v),h=!0)},o(t){J(l.$$.fragment,t),J(v),h=!1},d(t){t&&d(e),G(l),t&&d(s),t&&d(u),v&&v.d()}}}function Rt(t){let e,n,r,o,i=t[3]&&Lt(t),a=t[13],l=[];for(let e=0;e<a.length;e+=1)l[e]=Nt(Et(t,a,e));const s=t=>J(l[t],1,1,(()=>{l[t]=null}));return{c(){e=p("div"),i&&i.c(),n=$();for(let t=0;t<l.length;t+=1)l[t].c();y(e,"class",r="card "+t[7]+" stack-"+t[2]+" svelte-t2vtqs"),S(e,"bridge",t[11]),S(e,"small",t[10]),S(e,"fourColor",t[9]),S(e,"empty",t[0]),S(e,"hidden",t[4]),S(e,"shadow",t[1]),S(e,"visible",t[3])},m(t,r){f(t,e,r),i&&i.m(e,null),c(e,n);for(let t=0;t<l.length;t+=1)l[t].m(e,null);o=!0},p(t,[u]){if(t[3]?i?(i.p(t,u),8&u&&q(i,1)):(i=Lt(t),i.c(),q(i,1),i.m(e,n)):i&&(H(),J(i,1,1,(()=>{i=null})),V()),9664&u){let n;for(a=t[13],n=0;n<a.length;n+=1){const r=Et(t,a,n);l[n]?(l[n].p(r,u),q(l[n],1)):(l[n]=Nt(r),l[n].c(),q(l[n],1),l[n].m(e,null))}for(H(),n=a.length;n<l.length;n+=1)s(n);V()}(!o||132&u&&r!==(r="card "+t[7]+" stack-"+t[2]+" svelte-t2vtqs"))&&y(e,"class",r),(!o||2180&u)&&S(e,"bridge",t[11]),(!o||1156&u)&&S(e,"small",t[10]),(!o||644&u)&&S(e,"fourColor",t[9]),(!o||133&u)&&S(e,"empty",t[0]),(!o||148&u)&&S(e,"hidden",t[4]),(!o||134&u)&&S(e,"shadow",t[1]),(!o||140&u)&&S(e,"visible",t[3])},i(t){if(!o){q(i);for(let t=0;t<a.length;t+=1)q(l[t]);o=!0}},o(t){J(i),l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)J(l[t]);o=!1},d(t){t&&d(e),i&&i.d(),g(l,t)}}}function Pt(t,e,n){let r,o,i,a,s,u,c,f,d,g;const p=ut();l(t,p,(t=>n(15,g=t)));let{card:h=null}=e,{empty:m=!1}=e,{shadow:$=!1}=e,{stack:v}=e;return t.$$set=t=>{"card"in t&&n(14,h=t.card),"empty"in t&&n(0,m=t.empty),"shadow"in t&&n(1,$=t.shadow),"stack"in t&&n(2,v=t.stack)},t.$$.update=()=>{32768&t.$$.dirty&&n(11,r="bridge"===g.size),32768&t.$$.dirty&&n(10,o="small"===g.size),32768&t.$$.dirty&&n(9,i=g.fourColor),16386&t.$$.dirty&&n(4,a=null===h&&!$),19&t.$$.dirty&&n(3,s=!(m||a||$)),16392&t.$$.dirty&&n(8,u=s&&h.toString(dt.Card.StringType.ShortValue).replace("T","10")),16392&t.$$.dirty&&n(7,c=s&&h.toString(dt.Card.StringType.LongSuit)),16392&t.$$.dirty&&n(6,f=s&&h.num%13>9),16392&t.$$.dirty&&n(5,d=s&&h.toString(dt.Card.StringType.Long))},[m,$,v,s,a,d,f,c,u,i,o,r,p,["top","bottom"],h,g]}class zt extends X{constructor(t){super(),Q(this,t,Pt,Rt,i,{card:14,empty:0,shadow:1,stack:2})}}function Kt(t,e,n){const r=t.slice();return r[18]=e[n].card,r[19]=e[n].shadow,r[20]=e[n].transform,r}function Ht(t){let e,n;return e=new zt({props:{card:t[0],empty:void 0===t[0]}}),{c(){I(e.$$.fragment)},m(t,r){B(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.card=t[0]),1&n&&(r.empty=void 0===t[0]),e.$set(r)},i(t){n||(q(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function Vt(t){let e,n,r,o;return n=new zt({props:{card:t[18],shadow:t[19]}}),{c(){e=p("div"),I(n.$$.fragment),r=$(),y(e,"class","shadow-container svelte-1ns87h6"),k(e,"transform",t[20])},m(t,i){f(t,e,i),B(n,e,null),c(e,r),o=!0},p(t,r){const i={};16&r&&(i.card=t[18]),16&r&&(i.shadow=t[19]),n.$set(i),(!o||16&r)&&k(e,"transform",t[20])},i(t){o||(q(n.$$.fragment,t),o=!0)},o(t){J(n.$$.fragment,t),o=!1},d(t){t&&d(e),G(n)}}}function qt(t){let e,n,i,a,l,s,u=!t[2]&&Ht(t),h=t[4],m=[];for(let e=0;e<h.length;e+=1)m[e]=Vt(Kt(t,h,e));const b=t=>J(m[t],1,1,(()=>{m[t]=null}));return{c(){e=p("div"),n=p("div"),u&&u.c(),i=$();for(let t=0;t<m.length;t+=1)m[t].c();y(n,"aria-atomic","true"),y(n,"aria-live","polite"),y(e,"aria-label",t[3]),y(e,"class","deck svelte-1ns87h6"),y(e,"role","button"),y(e,"tabindex","0"),S(e,"bridge",t[6]),S(e,"small",t[5]),S(e,"shuffling",t[2])},m(r,d){f(r,e,d),c(e,n),u&&u.m(n,null),c(n,i);for(let t=0;t<m.length;t+=1)m[t].m(n,null);a=!0,l||(s=[v(e,"keydown",(function(){o(ft(["Space","Enter"],t[1],{preventDefault:!0}))&&ft(["Space","Enter"],t[1],{preventDefault:!0}).apply(this,arguments)})),v(e,"click",(function(){o(t[1])&&t[1].apply(this,arguments)}))],l=!0)},p(r,[o]){if((t=r)[2]?u&&(H(),J(u,1,1,(()=>{u=null})),V()):u?(u.p(t,o),4&o&&q(u,1)):(u=Ht(t),u.c(),q(u,1),u.m(n,i)),16&o){let e;for(h=t[4],e=0;e<h.length;e+=1){const r=Kt(t,h,e);m[e]?(m[e].p(r,o),q(m[e],1)):(m[e]=Vt(r),m[e].c(),q(m[e],1),m[e].m(n,null))}for(H(),e=h.length;e<m.length;e+=1)b(e);V()}(!a||8&o)&&y(e,"aria-label",t[3]),(!a||64&o)&&S(e,"bridge",t[6]),(!a||32&o)&&S(e,"small",t[5]),(!a||4&o)&&S(e,"shuffling",t[2])},i(t){if(!a){q(u);for(let t=0;t<h.length;t+=1)q(m[t]);a=!0}},o(t){J(u),m=m.filter(Boolean);for(let t=0;t<m.length;t+=1)J(m[t]);a=!1},d(t){t&&d(e),u&&u.d(),g(m,t),l=!1,r(s)}}}function Jt(t,e,n,r){const o=t/r*e;return`translate(${.5*o/(52*n)}em , ${1*o/(52*n)}em)`}function It(t,e,n){let r,o,i,a,s,u;const c=ut();l(t,c,(t=>n(15,u=t)));let{numCards:f=52}=e,{numDecks:d=1}=e,{topCard:g=null}=e,{numShadows:p=10}=e,{shuffleAnimationSteps:h=4}=e,{shuffleAnimationMaxDistanceEm:m=.8}=e,{shuffleAnimationMaxRotateDeg:$=7}=e,{onClick:v=(()=>{})}=e,y=0;function b(t,e){const n=n=>[1,e+2].includes(t)?0:(2*Math.random()-1)*n;return`translate(${n(m)}em, ${n(m)}em) rotate(${n($)}deg)`}function k(){y>0&&setTimeout((()=>{n(14,y-=1),k()}),250)}return t.$$set=t=>{"numCards"in t&&n(8,f=t.numCards),"numDecks"in t&&n(9,d=t.numDecks),"topCard"in t&&n(0,g=t.topCard),"numShadows"in t&&n(10,p=t.numShadows),"shuffleAnimationSteps"in t&&n(11,h=t.shuffleAnimationSteps),"shuffleAnimationMaxDistanceEm"in t&&n(12,m=t.shuffleAnimationMaxDistanceEm),"shuffleAnimationMaxRotateDeg"in t&&n(13,$=t.shuffleAnimationMaxRotateDeg),"onClick"in t&&n(1,v=t.onClick)},t.$$.update=()=>{32768&t.$$.dirty&&n(6,r="bridge"===(null==u?void 0:u.size)),32768&t.$$.dirty&&n(5,o="small"===(null==u?void 0:u.size)),2817&t.$$.dirty&&null===g&&f===52*d&&h>0&&(n(14,y=h+2),k()),16384&t.$$.dirty&&n(2,a=y>0),20229&t.$$.dirty&&n(4,i=void 0===g?[]:a?[...Array(p)].map(((t,e)=>({card:null,shadow:!1,transform:b(y,h)}))):[...Array(p)].map(((t,e)=>({card:void 0,shadow:!0,transform:Jt(e,f,d,p)})))),1&t.$$.dirty&&n(3,s=void 0===g?"Shuffle the deck":"Draw a card")},[g,v,a,s,i,o,r,c,f,d,p,h,m,$,y,u]}class Bt extends X{constructor(t){super(),Q(this,t,It,qt,i,{numCards:8,numDecks:9,topCard:0,numShadows:10,shuffleAnimationSteps:11,shuffleAnimationMaxDistanceEm:12,shuffleAnimationMaxRotateDeg:13,onClick:1})}}function Gt(t){let e,n,r;return n=new Bt({props:{onClick:t[2],topCard:t[1],numCards:t[0]}}),{c(){e=p("main"),I(n.$$.fragment),y(e,"class","svelte-1tag1lj")},m(t,o){f(t,e,o),B(n,e,null),r=!0},p(t,[e]){const r={};2&e&&(r.topCard=t[1]),1&e&&(r.numCards=t[0]),n.$set(r)},i(t){r||(q(n.$$.fragment,t),r=!0)},o(t){J(n.$$.fragment,t),r=!1},d(t){t&&d(e),G(n)}}}function Wt(t,e,n){st(lt);let r=new dt.Deck,o=r.cardsRemaining,i=null;return[o,i,function(){void 0!==i?n(1,i=r.pop()):(r=new dt.Deck,n(1,i=null)),n(0,o=r.cardsRemaining)}]}class Qt extends X{constructor(t){super(),Q(this,t,Wt,Gt,i,{})}}const Xt=(t,e)=>ot(e).width+1.125*(t-1);function Yt(t){let e,n;return e=new zt({props:{card:t[10]?null:t[0][0],stack:"left"}}),{c(){I(e.$$.fragment)},m(t,r){B(e,t,r),n=!0},p(t,n){const r={};1025&n&&(r.card=t[10]?null:t[0][0]),e.$set(r)},i(t){n||(q(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function Zt(e){let n,r;return n=new zt({props:{empty:!0}}),{c(){I(n.$$.fragment)},m(t,e){B(n,t,e),r=!0},p:t,i(t){r||(q(n.$$.fragment,t),r=!0)},o(t){J(n.$$.fragment,t),r=!1},d(t){G(n,t)}}}function te(t){let e,n,r;return n=new re({props:{cards:t[0].slice(1),capacity:t[1]-1,nested:!0,closed:t[2],index:t[3],isDraggableFn:t[4],selectedCardsN:t[5]}}),{c(){e=p("div"),I(n.$$.fragment),y(e,"class","nested svelte-o50ay1")},m(t,o){f(t,e,o),B(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.cards=t[0].slice(1)),2&e&&(r.capacity=t[1]-1),4&e&&(r.closed=t[2]),8&e&&(r.index=t[3]),16&e&&(r.isDraggableFn=t[4]),32&e&&(r.selectedCardsN=t[5]),n.$set(r)},i(t){r||(q(n.$$.fragment,t),r=!0)},o(t){J(n.$$.fragment,t),r=!1},d(t){t&&d(e),G(n)}}}function ee(t){let e,n,i,a,l,s,u,g;const h=[Zt,Yt],m=[];function b(t,e){return 0===t[0].length?0:1}n=b(t),i=m[n]=h[n](t);let k=t[0].length>1&&te(t);return{c(){e=p("div"),i.c(),a=$(),k&&k.c(),y(e,"class","stack svelte-o50ay1"),y(e,"style",t[13]),y(e,"draggable",t[12]),y(e,"tabindex",l=t[6]?void 0:0),S(e,"selected",t[11])},m(r,i){f(r,e,i),m[n].m(e,null),c(e,a),k&&k.m(e,null),s=!0,u||(g=[v(e,"dblclick",t[17]),v(e,"dragstart",(function(){o(t[9])&&t[9].apply(this,arguments)})),v(e,"dragover",(function(){o(t[8])&&t[8].apply(this,arguments)})),v(e,"drop",t[18]),v(e,"click",(function(){o(t[7])&&t[7].apply(this,arguments)})),v(e,"keydown",(function(){o(ft(["Enter","Space"],t[7],{preventDefault:!0}))&&ft(["Enter","Space"],t[7],{preventDefault:!0}).apply(this,arguments)}))],u=!0)},p(r,[o]){let u=n;n=b(t=r),n===u?m[n].p(t,o):(H(),J(m[u],1,1,(()=>{m[u]=null})),V(),i=m[n],i?i.p(t,o):(i=m[n]=h[n](t),i.c()),q(i,1),i.m(e,a)),t[0].length>1?k?(k.p(t,o),1&o&&q(k,1)):(k=te(t),k.c(),q(k,1),k.m(e,null)):k&&(H(),J(k,1,1,(()=>{k=null})),V()),(!s||8192&o)&&y(e,"style",t[13]),(!s||4096&o)&&y(e,"draggable",t[12]),(!s||64&o&&l!==(l=t[6]?void 0:0))&&y(e,"tabindex",l),(!s||2048&o)&&S(e,"selected",t[11])},i(t){s||(q(i),q(k),s=!0)},o(t){J(i),J(k),s=!1},d(t){t&&d(e),m[n].d(),k&&k.d(),u=!1,r(g)}}}function ne(t,e,n){let r,o,i,a,s,u,c,f,d;const g=ut();l(t,g,(t=>n(16,d=t)));let{cards:p=[]}=e,{capacity:h=4}=e,{closed:m=!1}=e,{index:$=0}=e,{isDraggableFn:v=(()=>!1)}=e,{selectedCardsN:y=0}=e,{nested:b=!1}=e;const k=x();return t.$$set=t=>{"cards"in t&&n(0,p=t.cards),"capacity"in t&&n(1,h=t.capacity),"closed"in t&&n(2,m=t.closed),"index"in t&&n(3,$=t.index),"isDraggableFn"in t&&n(4,v=t.isDraggableFn),"selectedCardsN"in t&&n(5,y=t.selectedCardsN),"nested"in t&&n(6,b=t.nested)},t.$$.update=()=>{65536&t.$$.dirty&&n(15,r=d.size),32770&t.$$.dirty&&n(13,o=`width: ${Xt(h,r)}em`),21&t.$$.dirty&&n(12,i=!m&&v(p)),33&t.$$.dirty&&n(11,a=y>0&&y===p.length),5&t.$$.dirty&&n(10,s=m&&1===p.length),9&t.$$.dirty&&n(9,u=t=>{t.stopPropagation(),((t,e,n)=>{const r={sourceStack:e,cards:n};t.dataTransfer.setData("application/json",JSON.stringify(r)),t.dataTransfer.effectAllowed="move"})(t,$,p)}),72&t.$$.dirty&&n(7,f=()=>{b||k("select",{index:$})})},n(8,c=t=>{t.preventDefault()}),[p,h,m,$,v,y,b,f,c,u,s,a,i,o,g,r,d,function(e){D.call(this,t,e)},function(e){D.call(this,t,e)}]}class re extends X{constructor(t){super(),Q(this,t,ne,ee,i,{cards:0,capacity:1,closed:2,index:3,isDraggableFn:4,selectedCardsN:5,nested:6})}}const oe=()=>{const t=new dt.Deck;return[...Array(13)].map((()=>t.popN(4))).concat([[],[]])},ie=t=>{const[e,...n]=t;return n.every((t=>t.value===e.value))},ae=t=>0!==t.length&&(1===t.length||ie(t)),le=(t,e)=>!(t.length+e.length>4)&&(0===e.length||e[e.length-1].value===t[0].value),se=(t,e,n,r)=>{const o=t.map((t=>[...t]));if(!le(r,o[n]))throw new Error(`Can not move cards ${r.map((t=>t.toString(gt.CardStringType.ShortEmoji)))} from pile ${e} to pile ${n}`);return o[e]=o[e].slice(0,o[e].length-r.length),o[n]=[...o[n],...r],o},ue=t=>1===t.length||ie(t)?t:ue(t.slice(1)),ce=t=>4===t.length&&ie(t);function fe(t,e,n){const r=t.slice();return r[20]=e[n],r[22]=n,r}function de(t){let e,n,r,o;return n=new re({props:{cards:t[20],closed:t[7].includes(t[22]),selectedCardsN:t[6]===t[22]?t[5].length:0,index:t[22],isDraggableFn:ae}}),n.$on("drop",t[10](t[22])),n.$on("dblclick",t[11](t[22])),n.$on("select",t[9]),{c(){e=p("div"),I(n.$$.fragment),r=$(),y(e,"class","pile svelte-1nmr9wh"),S(e,"small","small"===t[2])},m(t,i){f(t,e,i),B(n,e,null),c(e,r),o=!0},p(t,r){const i={};8&r&&(i.cards=t[20]),128&r&&(i.closed=t[7].includes(t[22])),96&r&&(i.selectedCardsN=t[6]===t[22]?t[5].length:0),n.$set(i),(!o||4&r)&&S(e,"small","small"===t[2])},i(t){o||(q(n.$$.fragment,t),o=!0)},o(t){J(n.$$.fragment,t),o=!1},d(t){t&&d(e),G(n)}}}function ge(t){let e,n,r,o;M(t[17]);let i=t[3],a=[];for(let e=0;e<i.length;e+=1)a[e]=de(fe(t,i,e));const l=t=>J(a[t],1,1,(()=>{a[t]=null}));return{c(){e=p("main");for(let t=0;t<a.length;t+=1)a[t].c();y(e,"class","pileon svelte-1nmr9wh"),y(e,"style",t[4])},m(i,l){f(i,e,l);for(let t=0;t<a.length;t+=1)a[t].m(e,null);n=!0,r||(o=v(window,"resize",t[17]),r=!0)},p(t,[r]){if(3820&r){let n;for(i=t[3],n=0;n<i.length;n+=1){const o=fe(t,i,n);a[n]?(a[n].p(o,r),q(a[n],1)):(a[n]=de(o),a[n].c(),q(a[n],1),a[n].m(e,null))}for(H(),n=i.length;n<a.length;n+=1)l(n);V()}(!n||16&r)&&y(e,"style",t[4])},i(t){if(!n){for(let t=0;t<i.length;t+=1)q(a[t]);n=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)J(a[t]);n=!1},d(t){t&&d(e),g(a,t),r=!1,o()}}}function pe(t,e,n){let r,o,i,a,s,u,c,f,d,g,p,h=st((t=>({size:"default"===t.size?"bridge":t.size,fourColor:"four-color"===t.colors})));l(t,h,(t=>n(16,d=t)));let m=[oe()];const $=t=>{t.stopPropagation(),m.length>1&&n(12,m=m.slice(0,m.length-1))};let v=[void 0,[]];const y=(t,e,r)=>{try{n(13,v=[void 0,[]]);const o=se(m[m.length-1],t,e,r);n(12,m=[...m,o])}catch(t){}};var b;return b=()=>{rt.update((t=>Object.assign(Object.assign({},t),{undo:$})))},O().$$.on_mount.push(b),function(t){O().$$.on_destroy.push(t)}((()=>{rt.update((t=>Object.assign(Object.assign({},t),{undo:void 0})))})),t.$$.update=()=>{if(3&t.$$.dirty){const t=g<800||p<500?"small":"bridge";ct((e=>({size:"default"===e.size?t:e.size,fourColor:"four-color"===e.colors})))}4096&t.$$.dirty&&n(3,r=m[m.length-1]),8&t.$$.dirty&&n(7,o=(t=>t.reduce(((t,e,n)=>ce(e)?[...t,n]:t),[]))(r)),8192&t.$$.dirty&&n(6,i=v[0]),8192&t.$$.dirty&&n(5,a=v[1]),65536&t.$$.dirty&&n(2,s=d.size),5&t.$$.dirty&&n(15,u=.95*g/(t=>5*Xt(4,t)+10*("small"!==t?.666:.333))(s)),6&t.$$.dirty&&n(14,c=.95*p/(t=>3*ot(t).height+6*("small"!==t?.5:.25))(s)),49152&t.$$.dirty&&n(4,f=`font-size: ${Math.min(u,c)}px`)},[g,p,s,r,f,a,i,o,h,t=>{const[e,i]=v,a=t.detail.index;o.includes(a)||(void 0===e||0===i.length?n(13,v=[a,ue(r[a])]):e===a?n(13,v=[a,i.slice(1)]):e!==a&&(y(e,a,i),n(13,v=[void 0,[]])))},t=>e=>{e.preventDefault();const{sourceStack:n,cards:r}=(t=>{const{sourceStack:e,cards:n}=JSON.parse(t.dataTransfer.getData("application/json"));return{sourceStack:e,cards:n.map(dt.Card.fromJSON)}})(e);n!==t&&y(n,t,r)},t=>e=>{e.preventDefault();try{n(13,v=[void 0,[]]);const e=((t,e)=>{if(0===t[e].length)throw new Error("Cannot move cards from an empty pile.");if(ce(t[e]))throw new Error("Cannot move cards from a completed pile.");const n=ue(t[e]),r=t.reduce(((t,r,o)=>o!==e&&le(n,r)?[...t,o]:t),[]);if(0===r.length)throw new Error(`Cannot move cards from pile ${e} to any other pile`);const o=r.filter((e=>t[e].length>0)),i=o.length>0?o[0]:r[0];return se(t,e,i,n)})(m[m.length-1],t);n(12,m=[...m,e])}catch(e){}},m,v,c,u,d,function(){n(0,g=window.innerWidth),n(1,p=window.innerHeight)}]}class he extends X{constructor(t){super(),Q(this,t,pe,ge,i,{})}}function me(e){let n,r,o,i=(e[1]||e[0])&&function(e){let n;return{c(){n=p("span"),n.textContent=`at ${e[0]}  ${e[1]}`},m(t,e){f(t,n,e)},p:t,d(t){t&&d(n)}}}(e);return{c(){n=p("footer"),r=p("a"),r.textContent="kangasta / pakka",o=$(),i&&i.c(),y(r,"href","https://github.com/kangasta/pakka.git"),y(r,"target","_blank"),y(n,"class","svelte-16t3ryr")},m(t,e){f(t,n,e),c(n,r),c(n,o),i&&i.m(n,null)},p(t,[e]){(t[1]||t[0])&&i.p(t,e)},i:t,o:t,d(t){t&&d(n),i&&i.d()}}}function $e(t){const e=t=>{var e,n;try{const{env:r}=null!==(e={env:{isProd:!0,PUBLIC_URL:"https://kangasta.github.io/pakka",COMMIT:"51ec3f09f686b8b5bbc2da78ba2b65aa92b8b8bc"}})&&void 0!==e?e:{},o=null!==(n=r[t])&&void 0!==n?n:"";return String(o)}catch(t){return""}};return[e("TAG"),e("COMMIT").slice(0,8)]}class ve extends X{constructor(t){super(),Q(this,t,$e,me,i,{})}}function ye(e){let n,i,a,l,s,g,k,w,C,O,x;return{c(){n=p("div"),i=p("button"),a=h("svg"),l=h("path"),k=$(),w=p("div"),C=m(e[1]),y(l,"fill","none"),y(l,"stroke","currentColor"),y(l,"stroke-linecap","round"),y(l,"stroke-linejoin","round"),y(l,"stroke-width","1"),y(l,"d",s=e[3][e[0]].path),y(a,"viewBox","0 0 16 16 "),y(a,"class",g=u(e[3][e[0]].class)+" svelte-173olzb"),y(i,"aria-labelledby",e[4]),y(i,"class","clickable svelte-173olzb"),S(i,"open",open),y(w,"class","label svelte-173olzb"),y(w,"id",e[4]),y(n,"class","icon-button clickable svelte-173olzb")},m(t,r){f(t,n,r),c(n,i),c(i,a),c(a,l),c(n,k),c(n,w),c(w,C),O||(x=[v(i,"click",(function(){o(e[2])&&e[2].apply(this,arguments)})),v(n,"click",(function(){o(e[2])&&e[2].apply(this,arguments)}))],O=!0)},p(t,[n]){e=t,1&n&&s!==(s=e[3][e[0]].path)&&y(l,"d",s),1&n&&g!==(g=u(e[3][e[0]].class)+" svelte-173olzb")&&y(a,"class",g),0&n&&S(i,"open",open),2&n&&b(C,e[1])},i:t,o:t,d(t){t&&d(n),O=!1,r(x)}}}function be(t,e,n){let{icon:r}=e,{label:o}=e,{onClick:i}=e;const a=`${(Math.random()+1).toString(36).substring(5)}-label`;return t.$$set=t=>{"icon"in t&&n(0,r=t.icon),"label"in t&&n(1,o=t.label),"onClick"in t&&n(2,i=t.onClick)},[r,o,i,{Undo:{path:"M 6 2 L 2 6 L 6 10 M 2 6 L 10 6 A 4 4 0 1 1 10 14 L 8 14"},ChevronDown:{path:"M 4 6 L 8 10 L 12 6",class:"transition-transform"},ChevronUp:{path:"M 4 6 L 8 10 L 12 6",class:"transition-transform mirror-y"}},a]}class ke extends X{constructor(t){super(),Q(this,t,be,ye,i,{icon:0,label:1,onClick:2})}}function Se(e){let n,r,i,a,l;return{c(){n=p("button"),r=m(e[0]),y(n,"aria-pressed",i=e[1]?"true":"false"),n.disabled=e[1],y(n,"class","svelte-jc3xzr"),S(n,"pressed",e[1])},m(t,i){f(t,n,i),c(n,r),a||(l=v(n,"click",(function(){o(e[2])&&e[2].apply(this,arguments)})),a=!0)},p(t,[o]){e=t,1&o&&b(r,e[0]),2&o&&i!==(i=e[1]?"true":"false")&&y(n,"aria-pressed",i),2&o&&(n.disabled=e[1]),2&o&&S(n,"pressed",e[1])},i:t,o:t,d(t){t&&d(n),a=!1,l()}}}function we(t,e,n){let r,o,i;l(t,nt,(t=>n(4,i=t)));let{target:a}=e,{value:s}=e;const{update:u}=nt,c=()=>{};return t.$$set=t=>{"target"in t&&n(3,a=t.target),"value"in t&&n(0,s=t.value)},t.$$.update=()=>{25&t.$$.dirty&&n(1,o=i[a]===s),11&t.$$.dirty&&n(2,r=o?c:()=>u((t=>Object.assign(Object.assign({},t),{[a]:s}))))},[s,o,r,a,i]}class Ce extends X{constructor(t){super(),Q(this,t,we,Se,i,{target:3,value:0})}}function Oe(t){let e,n;return e=new ke({props:{icon:"Undo",label:"Undo",onClick:t[2].undo}}),{c(){I(e.$$.fragment)},m(t,r){B(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.onClick=t[2].undo),e.$set(r)},i(t){n||(q(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function xe(t){let e,n,r,o,i,a,l,s,u,g,h,v,b,k,w,C,O,x,A,D,T,j,U,_,E,L,M,F,N,R,P,z,K,W,Q,X;s=new Ce({props:{target:"game",value:"deck"}}),g=new Ce({props:{target:"game",value:"pileon"}}),C=new Ce({props:{target:"colors",value:"default"}}),x=new Ce({props:{target:"colors",value:"standard"}}),D=new Ce({props:{target:"colors",value:"four-color"}}),L=new Ce({props:{target:"size",value:"default"}}),F=new Ce({props:{target:"size",value:"bridge"}}),R=new Ce({props:{target:"size",value:"poker"}}),z=new Ce({props:{target:"size",value:"small"}}),W=new ke({props:{icon:t[0]?"ChevronUp":"ChevronDown",label:t[1],onClick:t[3]}});let Y=void 0!==t[2].undo&&Oe(t);return{c(){e=p("div"),n=p("div"),r=p("table"),o=p("tr"),i=p("th"),i.textContent="Game:",a=$(),l=p("td"),I(s.$$.fragment),u=m(" / "),I(g.$$.fragment),h=$(),v=p("tr"),b=p("th"),b.textContent="Colors:",k=$(),w=p("td"),I(C.$$.fragment),O=m(" / "),I(x.$$.fragment),A=m(" / "),I(D.$$.fragment),T=$(),j=p("tr"),U=p("th"),U.textContent="Size:",_=$(),E=p("td"),I(L.$$.fragment),M=m(" / "),I(F.$$.fragment),N=m(" / "),I(R.$$.fragment),P=m(" / "),I(z.$$.fragment),K=$(),I(W.$$.fragment),Q=$(),Y&&Y.c(),y(i,"class","svelte-eflwvb"),y(l,"class","svelte-eflwvb"),y(b,"class","svelte-eflwvb"),y(w,"class","svelte-eflwvb"),y(U,"class","svelte-eflwvb"),y(E,"class","svelte-eflwvb"),y(r,"class","svelte-eflwvb"),y(n,"class","content svelte-eflwvb"),S(n,"open",t[0]),y(e,"class","menu svelte-eflwvb")},m(t,d){f(t,e,d),c(e,n),c(n,r),c(r,o),c(o,i),c(o,a),c(o,l),B(s,l,null),c(l,u),B(g,l,null),c(r,h),c(r,v),c(v,b),c(v,k),c(v,w),B(C,w,null),c(w,O),B(x,w,null),c(w,A),B(D,w,null),c(r,T),c(r,j),c(j,U),c(j,_),c(j,E),B(L,E,null),c(E,M),B(F,E,null),c(E,N),B(R,E,null),c(E,P),B(z,E,null),c(e,K),B(W,e,null),c(e,Q),Y&&Y.m(e,null),X=!0},p(t,[r]){(!X||1&r)&&S(n,"open",t[0]);const o={};1&r&&(o.icon=t[0]?"ChevronUp":"ChevronDown"),2&r&&(o.label=t[1]),W.$set(o),void 0!==t[2].undo?Y?(Y.p(t,r),4&r&&q(Y,1)):(Y=Oe(t),Y.c(),q(Y,1),Y.m(e,null)):Y&&(H(),J(Y,1,1,(()=>{Y=null})),V())},i(t){X||(q(s.$$.fragment,t),q(g.$$.fragment,t),q(C.$$.fragment,t),q(x.$$.fragment,t),q(D.$$.fragment,t),q(L.$$.fragment,t),q(F.$$.fragment,t),q(R.$$.fragment,t),q(z.$$.fragment,t),q(W.$$.fragment,t),q(Y),X=!0)},o(t){J(s.$$.fragment,t),J(g.$$.fragment,t),J(C.$$.fragment,t),J(x.$$.fragment,t),J(D.$$.fragment,t),J(L.$$.fragment,t),J(F.$$.fragment,t),J(R.$$.fragment,t),J(z.$$.fragment,t),J(W.$$.fragment,t),J(Y),X=!1},d(t){t&&d(e),G(s),G(g),G(C),G(x),G(D),G(L),G(F),G(R),G(z),G(W),Y&&Y.d()}}}function Ae(t,e,n){let r,o;l(t,rt,(t=>n(2,o=t)));let i=!1;return t.$$.update=()=>{1&t.$$.dirty&&n(1,r=i?"Close menu":"Open menu")},[i,r,o,t=>{n(0,i=!i),t.stopPropagation()}]}class De extends X{constructor(t){super(),Q(this,t,Ae,xe,i,{})}}function Te(t){let e,n,r,o,i,a,l,s,u;e=new De({});var c=t[0];return c&&(r=new c({})),a=new ve({}),{c(){I(e.$$.fragment),n=$(),r&&I(r.$$.fragment),o=$(),i=$(),I(a.$$.fragment)},m(c,d){B(e,c,d),f(c,n,d),r&&B(r,c,d),f(c,o,d),f(c,i,d),B(a,c,d),l=!0,s||(u=v(document.body,"keydown",t[1]),s=!0)},p(t,[e]){if(c!==(c=t[0])){if(r){H();const t=r;J(t.$$.fragment,1,0,(()=>{G(t,1)})),V()}c?(r=new c({}),I(r.$$.fragment),q(r.$$.fragment,1),B(r,o.parentNode,o)):r=null}},i(t){l||(q(e.$$.fragment,t),r&&q(r.$$.fragment,t),q(a.$$.fragment,t),l=!0)},o(t){J(e.$$.fragment,t),r&&J(r.$$.fragment,t),J(a.$$.fragment,t),l=!1},d(t){G(e,t),t&&d(n),r&&G(r,t),t&&d(o),t&&d(i),G(a,t),s=!1,u()}}}function je(t,e,n){let r,o,i;l(t,rt,(t=>n(3,o=t))),l(t,nt,(t=>n(2,i=t)));return t.$$.update=()=>{4&t.$$.dirty&&n(0,r="pileon"===i.game?he:Qt)},[r,t=>{"z"===t.key&&(t.ctrlKey||t.metaKey)&&void 0!==o.undo&&o.undo(t)},i]}return new class extends X{constructor(t){super(),Q(this,t,je,Te,i,{})}}({target:document.body,props:{}})}();
