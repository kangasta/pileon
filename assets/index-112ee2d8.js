var ar=Object.defineProperty;var or=(t,e,n)=>e in t?ar(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ot=(t,e,n)=>(or(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function B(){}function lr(t,e){for(const n in e)t[n]=e[n];return t}function _n(t){return t()}function Dt(){return Object.create(null)}function me(t){t.forEach(_n)}function ue(t){return typeof t=="function"}function Y(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ur(t){return Object.keys(t).length===0}function wn(t,...e){if(t==null){for(const r of e)r(void 0);return B}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function sr(t){let e;return wn(t,n=>e=n)(),e}function ge(t,e,n){t.$$.on_destroy.push(wn(e,n))}function Sn(t,e,n,r){if(t){const i=kn(t,e,n,r);return t[0](i)}}function kn(t,e,n,r){return t[1]&&r?lr(n.ctx.slice(),t[1](r(e))):n.ctx}function Cn(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const a=[],o=Math.max(e.dirty.length,i.length);for(let l=0;l<o;l+=1)a[l]=e.dirty[l]|i[l];return a}return e.dirty|i}return e.dirty}function Tn(t,e,n,r,i,a){if(i){const o=kn(e,n,r,a);t.p(o,i)}}function Nn(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function T(t,e){t.appendChild(e)}function N(t,e,n){t.insertBefore(e,n||null)}function C(t){t.parentNode&&t.parentNode.removeChild(t)}function Oe(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function O(t){return document.createElement(t)}function Ye(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function re(t){return document.createTextNode(t)}function I(){return re(" ")}function On(){return re("")}function te(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function y(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function fr(t){return Array.from(t.childNodes)}function Be(t,e){e=""+e,t.data!==e&&(t.data=e)}function Et(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}let He;function cr(){if(He===void 0){He=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{He=!0}}return He}function dr(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const r=O("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const i=cr();let a;return i?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",a=te(window,"message",o=>{o.source===r.contentWindow&&e()})):(r.src="about:blank",r.onload=()=>{a=te(r.contentWindow,"resize",e),e()}),T(t,r),()=>{(i||a&&r.contentWindow)&&a(),C(r)}}function K(t,e,n){t.classList.toggle(e,!!n)}function gr(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}function Pt(t,e){return new t(e)}let je;function Ie(t){je=t}function Ve(){if(!je)throw new Error("Function called outside component initialization");return je}function pt(t){Ve().$$.on_mount.push(t)}function An(t){Ve().$$.on_destroy.push(t)}function bt(){const t=Ve();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const a=gr(e,n,{cancelable:r});return i.slice().forEach(o=>{o.call(t,a)}),!a.defaultPrevented}return!0}}function mr(t,e){return Ve().$$.context.set(t,e),e}function Dn(t){return Ve().$$.context.get(t)}function st(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const Te=[],Ft=[];let Ne=[];const $t=[],hr=Promise.resolve();let ft=!1;function vr(){ft||(ft=!0,hr.then(En))}function Ue(t){Ne.push(t)}const lt=new Set;let we=0;function En(){if(we!==0)return;const t=je;do{try{for(;we<Te.length;){const e=Te[we];we++,Ie(e),pr(e.$$)}}catch(e){throw Te.length=0,we=0,e}for(Ie(null),Te.length=0,we=0;Ft.length;)Ft.pop()();for(let e=0;e<Ne.length;e+=1){const n=Ne[e];lt.has(n)||(lt.add(n),n())}Ne.length=0}while(Te.length);for(;$t.length;)$t.pop()();ft=!1,lt.clear(),Ie(t)}function pr(t){if(t.fragment!==null){t.update(),me(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ue)}}function br(t){const e=[],n=[];Ne.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),Ne=e}const Je=new Set;let be;function G(){be={r:0,c:[],p:be}}function Q(){be.r||me(be.c),be=be.p}function b(t,e){t&&t.i&&(Je.delete(t),t.i(e))}function S(t,e,n,r){if(t&&t.o){if(Je.has(t))return;Je.add(t),be.c.push(()=>{Je.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function ie(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function R(t){t&&t.c()}function L(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),Ue(()=>{const a=t.$$.on_mount.map(_n).filter(ue);t.$$.on_destroy?t.$$.on_destroy.push(...a):me(a),t.$$.on_mount=[]}),i.forEach(Ue)}function M(t,e){const n=t.$$;n.fragment!==null&&(br(n.after_update),me(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function yr(t,e){t.$$.dirty[0]===-1&&(Te.push(t),vr(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function X(t,e,n,r,i,a,o,l=[-1]){const s=je;Ie(t);const u=t.$$={fragment:null,ctx:[],props:a,update:B,not_equal:i,bound:Dt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:Dt(),dirty:l,skip_bound:!1,root:e.target||s.$$.root};o&&o(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(f,d,...g)=>{const h=g.length?g[0]:d;return u.ctx&&i(u.ctx[f],u.ctx[f]=h)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](h),c&&yr(t,f)),d}):[],u.update(),c=!0,me(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const f=fr(e.target);u.fragment&&u.fragment.l(f),f.forEach(C)}else u.fragment&&u.fragment.c();e.intro&&b(t.$$.fragment),L(t,e.target,e.anchor),En()}Ie(s)}class x{constructor(){ot(this,"$$");ot(this,"$$set")}$destroy(){M(this,1),this.$destroy=B}$on(e,n){if(!ue(n))return B;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!ur(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const _r="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(_r);const Se=[];function yt(t,e=B){let n;const r=new Set;function i(l){if(Y(t,l)&&(t=l,n)){const s=!Se.length;for(const u of r)u[1](),Se.push(u,t);if(s){for(let u=0;u<Se.length;u+=2)Se[u][0](Se[u+1]);Se.length=0}}}function a(l){i(l(t))}function o(l,s=B){const u=[l,s];return r.add(u),r.size===1&&(n=e(i,a)||B),l(t),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:i,update:a,subscribe:o}}const Pn="settings",wr={game:"pileon",colors:"default",size:"default"},Sr=JSON.parse(localStorage.getItem(Pn)),Ae=yt(Sr??wr);Ae.subscribe(t=>localStorage.setItem(Pn,JSON.stringify(t)));const kr={},De=yt(kr),Cr=4.5,Tr=5,Nr=3,Lt=7,Or=5,Fn=t=>{switch(t){case"bridge":return{height:Lt,width:Cr};case"poker":return{height:Lt,width:Tr};case"small":return{height:Or,width:Nr}}},_t="card-appearance",Ar={size:"bridge",fourColor:!1},Dr=({size:t,colors:e})=>({size:t==="default"?"poker":t,fourColor:e==="four-color"}),$n=t=>{const e=yt(Ar,n=>(Ae.subscribe(r=>n(t(r))),()=>{}));return mr(_t,e),e},wt=()=>Dn(_t),Er=t=>{const e=Dn(_t);if(e){const n=sr(Ae);e.set(t(n))}},ct=(t,e,n={})=>r=>{(Array.isArray(t)?t:[t]).includes(r.code)&&e!==void 0&&(n.preventDefault&&r.preventDefault(),e())};var ne={},ae={};function Ee(t){"@babel/helpers - typeof";return Ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(t)}Object.defineProperty(ae,"__esModule",{value:!0});var dt=ae.Cards=ae.CardSuits=Kn=ae.CardStringType=ae.Card=void 0;function se(t,e,n){return e=In(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ln(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,In(r.key),r)}}function Mn(t,e,n){return e&&Mt(t.prototype,e),n&&Mt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function In(t){var e=Pr(t,"string");return Ee(e)==="symbol"?e:String(e)}function Pr(t,e){if(Ee(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ee(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ke(t,e)}function $r(t){var e=jn();return function(){var r=ze(t),i;if(e){var a=ze(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return Rn(this,i)}}function Rn(t,e){if(e&&(Ee(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lr(t)}function Lr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gt(t){var e=typeof Map=="function"?new Map:void 0;return gt=function(r){if(r===null||!Mr(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return Ge(r,arguments,ze(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Ke(i,r)},gt(t)}function Ge(t,e,n){return jn()?Ge=Reflect.construct.bind():Ge=function(i,a,o){var l=[null];l.push.apply(l,a);var s=Function.bind.apply(i,l),u=new s;return o&&Ke(u,o.prototype),u},Ge.apply(null,arguments)}function jn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Mr(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function Ke(t,e){return Ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ke(t,e)}function ze(t){return ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ze(t)}function Ir(t,e){return Kr(t)||Ur(t,e)||jr(t,e)||Rr()}function Rr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jr(t,e){if(t){if(typeof t=="string")return It(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return It(t,e)}}function It(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ur(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],s=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(c){u=!0,i=c}finally{try{if(!s&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function Kr(t){if(Array.isArray(t))return t}var Un=function(t){return t[t.Hearts=0]="Hearts",t[t.Spades=1]="Spades",t[t.Diamonds=2]="Diamonds",t[t.Clubs=3]="Clubs",t}({});ae.CardSuits=Un;var St=function(t){return t.Char="CHAR",t.Short="SHORT",t.Long="LONG",t.ShortEmoji="SHORT_EMOJI",t.ShortSuit="SHORT_SUIT",t.LongSuit="LONG_SUIT",t.EmojiSuit="EMOJI_SUIT",t.ShortValue="SHORT_VALUE",t.LongValue="LONG_VALUE",t}({}),Kn=ae.CardStringType=St,zr={"♥":0,"♠":1,"♦":2,"♣":3,h:0,s:1,d:2,c:3},qr={A:1,T:10,J:11,Q:12,K:13},Br=function(e){var n=/^([2-9ATJQK]{1}|10)([♥♠♦♣hsdc]{1})$/,r=e.match(n);if(!r)throw new Error('Could not parse card from "'.concat(e,'". Input should match ').concat(n,"."));var i=Ir(r,3);i[0];var a=i[1],o=i[2],l=Number(a),s=(Number.isNaN(l)?qr[a]:l)-1;return zr[o]*13+s},Vr=function(e){var n=/^_[a-z]+$/i;if(e.match(n)){var r=Array.from(e.slice(1));return r.map(function(i){var a=i.charCodeAt(0);return a<91?a-65:a-97+26})}return e.split(/[\s,]+/)},Hr=function(t){Fr(n,t);var e=$r(n);function n(r){var i;if(Ln(this,n),typeof r=="number")i=e.call(this,r);else{i=e.call(this);var a=Array.isArray(r)?r:Vr(r);a.forEach(function(o){return i.push(new oe(o))})}return Rn(i)}return Mn(n,[{key:"toString",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:oe.StringType.Short;return i===St.Char?"_"+this.map(function(a){return a.toString(i)}).join(""):this.map(function(a){return a.toString(i)}).join(", ")}}]),n}(gt(Array));dt=ae.Cards=Hr;var Wr=function(e){return typeof e=="string"?Br(e):e instanceof oe?e.num:e},oe=function(){function t(e){Ln(this,t),se(this,"num",void 0),this.num=Wr(e)}return Mn(t,[{key:"suit",get:function(){return t.getSuit(this.num)}},{key:"value",get:function(){return t.getValue(this.num)}},{key:"toString",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.StringType.Long;switch(n){case t.StringType.Short:return this.toString(t.StringType.ShortValue)+this.toString(t.StringType.ShortSuit);case t.StringType.ShortEmoji:return this.toString(t.StringType.ShortValue)+this.toString(t.StringType.EmojiSuit);case t.StringType.Long:return this.toString(t.StringType.LongValue)+" of "+this.toString(t.StringType.LongSuit);case t.StringType.Char:return t.chars[this.num];case t.StringType.ShortSuit:return t.shortSuits[this.suit];case t.StringType.LongSuit:return t.longSuits[this.suit];case t.StringType.EmojiSuit:return t.emojiSuits[this.suit];case t.StringType.ShortValue:return t.shortValues[this.value===13?0:this.value];case t.StringType.LongValue:return t.longValues[this.value===13?0:this.value]}throw new Error("Unsupported output type")}}],[{key:"fromJSON",value:function(n){var r=n.num;return new t(r)}},{key:"getSuit",value:function(n){return Math.floor(n/13)%4}},{key:"getValue",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return n%13||r?n%13:13}},{key:"compare",value:function(n,r){return r.value-n.value}}]),t}();ae.Card=oe;se(oe,"Suits",Un);se(oe,"StringType",St);se(oe,"chars","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz");se(oe,"emojiSuits",["♥","♠","♦","♣"]);se(oe,"shortSuits",["h","s","d","c"]);se(oe,"longSuits",["hearts","spades","diamonds","clubs"]);se(oe,"shortValues",["A","2","3","4","5","6","7","8","9","T","J","Q","K"]);se(oe,"longValues",["ace","two","three","four","five","six","seven","eight","nine","ten","jack","queen","king"]);var tt={},J={};Object.defineProperty(J,"__esModule",{value:!0});J.uniqueFilter=J.shuffle=J.last=J.isSorted=J.getCombinationsHelper=J.getCombinations=J.arraySubtraction=void 0;var Jr=function(e,n){return e.filter(function(r){return!n.includes(r)})};J.arraySubtraction=Jr;var zn=function t(e,n,r,i,a){if(i.length>=n)a.push(i);else for(var o=r;o<e.length;o++)t(e,n,o+1,i.concat(e[o]),a)};J.getCombinationsHelper=zn;var Gr=function(e,n){var r=[];return zn(e,n,0,[],r),r};J.getCombinations=Gr;var Qr=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=r?-1:1;try{return e.reduce(function(a,o){if(i*n(a,o)<=0)return o;throw new Error}),!0}catch{return!1}};J.isSorted=Qr;var Yr=function(e){return e[e.length-1]};J.last=Yr;var Zr=function(e){for(var n=e.length-1;n>0;n--){var r=Math.floor(Math.random()*(n+1)),i=[e[r],e[n]];e[n]=i[0],e[r]=i[1]}return e};J.shuffle=Zr;var Xr=function(e,n,r){return r.indexOf(e)===n};J.uniqueFilter=Xr;Object.defineProperty(tt,"__esModule",{value:!0});tt.Deck=void 0;var Rt=J,Le=ae;function qe(t){"@babel/helpers - typeof";return qe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe(t)}function xr(t){return ri(t)||ni(t)||ti(t)||ei()}function ei(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ti(t,e){if(t){if(typeof t=="string")return mt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mt(t,e)}}function ni(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ri(t){if(Array.isArray(t))return mt(t)}function mt(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ii(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qn(r.key),r)}}function ai(t,e,n){return e&&jt(t.prototype,e),n&&jt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function oi(t,e,n){return e=qn(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qn(t){var e=li(t,"string");return qe(e)==="symbol"?e:String(e)}function li(t,e){if(qe(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qe(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ui=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;ii(this,t),oi(this,"cards",void 0),this.cards=xr(Array(52*n).keys()).map(function(r){return new Le.Card(r)}),e&&this.shuffle()}return ai(t,[{key:"shuffle",value:function(){(0,Rt.shuffle)(this.cards)}},{key:"isShuffled",value:function(){return!(0,Rt.isSorted)(this.cards,function(n,r){return n.num-r.num})}},{key:"cardsRemaining",get:function(){return this.cards.length}},{key:"pop",value:function(){return this.cards.pop()}},{key:"popN",value:function(n){for(var r=[],i,a=0;a<n&&(i=this.pop());a++)r.push(i);return r}},{key:"toString",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Le.Card.StringType.Char;return new Le.Cards(this.cards).toString(n)}}],[{key:"fromJSON",value:function(n){var r=n.cards,i=new t(!1,0);return i.cards=r.map(function(a){return Le.Card.fromJSON(a)}),i}},{key:"fromString",value:function(n){var r=new t(!1,0);return r.cards=new Le.Cards(n),r}}]),t}();tt.Deck=ui;var Pe={},nt={};Object.defineProperty(nt,"__esModule",{value:!0});nt.uuid4=void 0;var si=function(e){var n;do n=Math.random().toString(16).slice(2,e+2);while(n.length<e&&e<=12);return n},fi=function(){var e=[8,4,4,4,12],n=e.map(si).join("-").split("");return n[14]="4",n[19]=(Math.floor(Math.random()*64)%4+8).toString(16),n.join("")};nt.uuid4=fi;Object.defineProperty(Pe,"__esModule",{value:!0});Pe.HandRank=Pe.Hand=void 0;var ke=J,ce=ae,ci=nt;function de(t){"@babel/helpers - typeof";return de=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(t)}function ve(t){return hi(t)||mi(t)||gi(t)||di()}function di(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gi(t,e){if(t){if(typeof t=="string")return ht(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ht(t,e)}}function mi(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hi(t){if(Array.isArray(t))return ht(t)}function ht(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bn(r.key),r)}}function pi(t,e,n){return e&&Ut(t.prototype,e),n&&Ut(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qe(t,e,n){return e=Bn(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bn(t){var e=bi(t,"string");return de(e)==="symbol"?e:String(e)}function bi(t,e){if(de(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(de(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vn=function(t){return t[t.High=0]="High",t[t.Pair=5]="Pair",t[t.TwoPairs=10]="TwoPairs",t[t.ThreeOfAKind=15]="ThreeOfAKind",t[t.Straight=20]="Straight",t[t.Flush=25]="Flush",t[t.FullHouse=30]="FullHouse",t[t.FourOfAKind=35]="FourOfAKind",t[t.StraightFlush=40]="StraightFlush",t[t.FiveOfAKind=45]="FiveOfAKind",t}({});Pe.HandRank=Vn;var Hn=function(){function t(e,n,r){vi(this,t),Qe(this,"uuid",void 0),Qe(this,"rank",void 0),Qe(this,"cards",void 0),this.rank=e,this.cards=n,this.uuid=r||(0,ci.uuid4)()}return pi(t,[{key:"getCardsString",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ce.Card.StringType.Short;return new ce.Cards(this.cards).toString(n)}},{key:"toString",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ce.Card.StringType.Short,i=ce.Card.StringType.LongValue,a=function(s){return n.cards[s].toString(i)},o=this.getCardsString(r);switch(this.rank){case t.Rank.FiveOfAKind:return"Five of a kind, ".concat(a(0),"s (").concat(o,")");case t.Rank.StraightFlush:return"Straigth flush, ".concat(a(0)," high (").concat(o,")");case t.Rank.FourOfAKind:return"Four of a kind, ".concat(a(0),"s (").concat(o,")");case t.Rank.FullHouse:return"Full house, ".concat(a(0),"s over ").concat(a(3),"s (").concat(o,")");case t.Rank.Flush:return"Flush, ".concat(a(0)," high (").concat(o,")");case t.Rank.Straight:return"Straigth, ".concat(a(0)," high (").concat(o,")");case t.Rank.ThreeOfAKind:return"Three of a kind, ".concat(a(0),"s (").concat(o,")");case t.Rank.TwoPairs:return"Two pairs, ".concat(a(0),"s and ").concat(a(2),"s (").concat(o,")");case t.Rank.Pair:return"Pair, ".concat(a(0),"s (").concat(o,")");case t.Rank.High:return"".concat(a(0).replace(/^\w/,function(l){return l.toUpperCase()})," high (").concat(o,")")}throw new Error("Unsupported rank value")}}],[{key:"fromJSON",value:function(n){var r=n.rank,i=n.cards,a=n.uuid;return new t(r,i.map(ce.Card.fromJSON),a)}},{key:"solve",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,i,a;return(i=t.isNumOfAKind(5,n))?a=t.Rank.FiveOfAKind:(i=t.isStraightFlush(n,r))?a=t.Rank.StraightFlush:(i=t.isNumOfAKind(4,n))?a=t.Rank.FourOfAKind:(i=t.isFullHouse(n))?a=t.Rank.FullHouse:(i=t.isFlush(n,r))?a=t.Rank.Flush:(i=t.isStraight(n,r))?a=t.Rank.Straight:(i=t.isNumOfAKind(3,n))?a=t.Rank.ThreeOfAKind:(i=t.isTwoPairs(n))?a=t.Rank.TwoPairs:(i=t.isNumOfAKind(2,n))?a=t.Rank.Pair:(i=[],a=t.Rank.High),i=t.fillWithKickers(i,n),new t(a,i)}},{key:"solveHoldEm",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(i===0)return t.solve([].concat(ve(n),ve(r)));for(var a=(0,ke.getCombinations)(n,n.length-i),o=(0,ke.getCombinations)(r,Math.min(r.length,i)),l=[],s=0;s<a.length;s++)for(var u=0;u<o.length;u++)l.push(t.solve([].concat(ve(a[s]),ve(o[u]))));return t.max.apply(t,l)}},{key:"compare",value:function(n,r){var i;if(n.cards.length!==r.cards.length)throw new Error("Comparing hands with different number of cards");if((i=r.rank-n.rank)!==0)return i;for(var a=0;a<n.cards.length;a++)if((i=ce.Card.compare(n.cards[a],r.cards[a]))!==0)return i;return 0}},{key:"winners",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=t.max.apply(t,r);return r.filter(function(o){return!t.compare(o,a)})}},{key:"max",value:function(){for(var n=function(l,s){return t.compare(l,s)<0?l:s},r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return i.reduce(function(o,l){return n(o,l)})}},{key:"fillWithKickers",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5;return r=(0,ke.arraySubtraction)(r,n).sort(ce.Card.compare),[].concat(ve(n),ve(r)).slice(0,i)}},{key:"getUniqueValues",value:function(n){return n.map(function(r){return r.value}).filter(ke.uniqueFilter).sort(function(r,i){return i-r})}},{key:"isNumOfAKind",value:function(n,r){for(var i=t.getUniqueValues(r),a,o=function(c){if(a=r.filter(function(f){return f.value==i[c]}),a.length>=n)return{v:a}},l=0;l<i.length;l++){var s=o(l);if(de(s)==="object")return s.v}return!1}},{key:"isNumOfAKindCombination",value:function(n,r){for(var i=[],a=0;a<n.length;a++){var o=t.isNumOfAKind(n[a],(0,ke.arraySubtraction)(r,i));if(o===!1)return!1;o=o,i.push.apply(i,ve(o))}return i}},{key:"isStraightFlush",value:function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,i=[],a=function(u){if(i=n.filter(function(f){return f.suit===u}),i.length<r)return"continue";var c=t.isStraight(i,r);if(c)return{v:c}},o=0;o<4;o++){var l=a(o);if(l!=="continue"&&de(l)==="object")return l.v}return!1}},{key:"isFullHouse",value:function(n){return t.isNumOfAKindCombination([3,2],n)}},{key:"isFlush",value:function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,i=function(s){var u=n.filter(function(c){return c.suit==s});if(u.length>=r)return{v:u.sort(ce.Card.compare).slice(0,r)}},a=0;a<4;a++){var o=i(a);if(de(o)==="object")return o.v}return!1}},{key:"isStraight",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,i=t.getUniqueValues(n);if(i.length<r)return!1;i.includes(13)&&i.push(0);for(var a=[i[0]],o=1;o<i.length&&a.length<r;o++)(0,ke.last)(a)-i[o]===1?a.push(i[o]):a=[i[o]];return a.length==r?a.map(function(l){return n.find(function(s){return s.value===(l||13)})}):!1}},{key:"isTwoPairs",value:function(n){return t.isNumOfAKindCombination([2,2],n)}}]),t}();Pe.Hand=Hn;Qe(Hn,"Rank",Vn);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Card",{enumerable:!0,get:function(){return e.Card}}),Object.defineProperty(t,"CardStringType",{enumerable:!0,get:function(){return e.CardStringType}}),Object.defineProperty(t,"Cards",{enumerable:!0,get:function(){return e.Cards}}),Object.defineProperty(t,"Deck",{enumerable:!0,get:function(){return n.Deck}}),Object.defineProperty(t,"Hand",{enumerable:!0,get:function(){return r.Hand}});var e=ae,n=tt,r=Pe})(ne);function yi(t){let e,n;return{c(){e=Ye("svg"),n=Ye("path"),y(n,"d",t[1]),y(n,"fill","CurrentColor"),y(e,"viewBox","0 0 16 20"),y(e,"class","svelte-1jimf84"),K(e,"flip",t[0])},m(r,i){N(r,e,i),T(e,n)},p(r,[i]){i&2&&y(n,"d",r[1]),i&1&&K(e,"flip",r[0])},i:B,o:B,d(r){r&&C(e)}}}function _i(t,e,n){let r,{suit:i=null}=e,{flip:a=!1}=e;const o=l=>{switch(l){case"hearts":return"M 8 2 C 9 0 11 0 12 0 C 13 0 16 1 16 6 C 16 8 15.5 10 14 12 L 8 20 L 2 12 C 0.5 10 0 8 0 6 C 0 1 3 0 4 0 C 5 0 7 0 8 2";case"spades":return"M 8 0 L 13 5 C 16 8 16 10 16 12 C 16 14 14 16 12 16 C 11 16 9 16 8 14 L 12 20 L 4 20 L 8 14 C 7 16 5 16 4 16 C 2 16 0 14 0 12 C 0 10 0 8 3 5 L 8 0";case"diamonds":return"M 8 0 L 16 10 L 8 20 L 0 10 L 8 0";case"clubs":return"M 8 0 C 10 0 12 2 12 4 C 12 6 11 8 8 10 C 9 8 10 7 12 7 C 14 7 16 9 16 12 C 16 14 14 16 12 16 C 11 16 9 16 8 14 L 12 20 L 4 20 L 8 14 C 7 16 5 16 4 16 C 2 16 0 14 0 12 C 0 9 2 7 4 7 C 6 7 7 8 8 10 C 5 8 4 6 4 4 C 4 2 6 0 8 0";default:return null}};return t.$$set=l=>{"suit"in l&&n(2,i=l.suit),"flip"in l&&n(0,a=l.flip)},t.$$.update=()=>{t.$$.dirty&4&&n(1,r=o(i))},[a,r,i]}class Wn extends x{constructor(e){super(),X(this,e,_i,yi,Y,{suit:2,flip:0})}}function Kt(t,e,n){const r=t.slice();return r[5]=e[n],r}function zt(t,e,n){const r=t.slice();return r[8]=e[n],r}function qt(t){let e,n,r;return n=new Wn({props:{suit:t[0],flip:t[8].toLowerCase()==="d"}}),{c(){e=O("span"),R(n.$$.fragment),y(e,"class","svelte-1sm49dl")},m(i,a){N(i,e,a),L(n,e,null),r=!0},p(i,a){const o={};a&1&&(o.suit=i[0]),a&2&&(o.flip=i[8].toLowerCase()==="d"),n.$set(o)},i(i){r||(b(n.$$.fragment,i),r=!0)},o(i){S(n.$$.fragment,i),r=!1},d(i){i&&C(e),M(n)}}}function Bt(t){let e,n,r,i,a=ie(t[5].split("")),o=[];for(let s=0;s<a.length;s+=1)o[s]=qt(zt(t,a,s));const l=s=>S(o[s],1,1,()=>{o[s]=null});return{c(){e=O("div");for(let s=0;s<o.length;s+=1)o[s].c();n=I(),y(e,"class",r="row "+t[3](t[5])+" svelte-1sm49dl")},m(s,u){N(s,e,u);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);T(e,n),i=!0},p(s,u){if(u&7){a=ie(s[5].split(""));let c;for(c=0;c<a.length;c+=1){const f=zt(s,a,c);o[c]?(o[c].p(f,u),b(o[c],1)):(o[c]=qt(f),o[c].c(),b(o[c],1),o[c].m(e,n))}for(G(),c=a.length;c<o.length;c+=1)l(c);Q()}(!i||u&2&&r!==(r="row "+s[3](s[5])+" svelte-1sm49dl"))&&y(e,"class",r)},i(s){if(!i){for(let u=0;u<a.length;u+=1)b(o[u]);i=!0}},o(s){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)S(o[u]);i=!1},d(s){s&&C(e),Oe(o,s)}}}function wi(t){let e,n,r=ie(t[2](t[1])),i=[];for(let o=0;o<r.length;o+=1)i[o]=Bt(Kt(t,r,o));const a=o=>S(i[o],1,1,()=>{i[o]=null});return{c(){e=O("div");for(let o=0;o<i.length;o+=1)i[o].c();y(e,"class","center-pattern svelte-1sm49dl")},m(o,l){N(o,e,l);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(e,null);n=!0},p(o,[l]){if(l&15){r=ie(o[2](o[1]));let s;for(s=0;s<r.length;s+=1){const u=Kt(o,r,s);i[s]?(i[s].p(u,l),b(i[s],1)):(i[s]=Bt(u),i[s].c(),b(i[s],1),i[s].m(e,null))}for(G(),s=r.length;s<i.length;s+=1)a(s);Q()}},i(o){if(!n){for(let l=0;l<r.length;l+=1)b(i[l]);n=!0}},o(o){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)S(i[l]);n=!1},d(o){o&&C(e),Oe(i,o)}}}function Si(t,e,n){let{suit:r}=e,{rank:i}=e;const a={A:["U"],2:["U","D"],3:["U","U","D"],4:["UU","DD"],5:["UU","U","DD"],6:["UU","UU","DD"],7:["UU","u","UU","DD"],8:["UU","UU","DD","DD"],9:["UU","u","UU","DD","DD"],10:["UU","u","UU","DD","d","DD"]},o=s=>a[s]??[],l=s=>s.toUpperCase()===s?"grow":"";return t.$$set=s=>{"suit"in s&&n(0,r=s.suit),"rank"in s&&n(1,i=s.rank)},[r,i,o,l]}class ki extends x{constructor(e){super(),X(this,e,Si,wi,Y,{suit:0,rank:1})}}function Ci(t){let e,n;const r=t[1].default,i=Sn(r,t,t[0],null);return{c(){e=O("span"),i&&i.c(),y(e,"class","screen-reader-only svelte-3uotpv")},m(a,o){N(a,e,o),i&&i.m(e,null),n=!0},p(a,[o]){i&&i.p&&(!n||o&1)&&Tn(i,r,a,a[0],n?Cn(r,a[0],o,null):Nn(a[0]),null)},i(a){n||(b(i,a),n=!0)},o(a){S(i,a),n=!1},d(a){a&&C(e),i&&i.d(a)}}}function Ti(t,e,n){let{$$slots:r={},$$scope:i}=e;return t.$$set=a=>{"$$scope"in a&&n(0,i=a.$$scope)},[i,r]}class Ni extends x{constructor(e){super(),X(this,e,Ti,Ci,Y,{})}}function Vt(t,e,n){const r=t.slice();return r[16]=e[n],r}function Ht(t){let e,n;return e=new Ni({props:{$$slots:{default:[Oi]},$$scope:{ctx:t}}}),{c(){R(e.$$.fragment)},m(r,i){L(e,r,i),n=!0},p(r,i){const a={};i&524320&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Oi(t){let e;return{c(){e=re(t[5])},m(n,r){N(n,e,r)},p(n,r){r&32&&Be(e,n[5])},d(n){n&&C(e)}}}function Wt(t){let e,n;return e=new ki({props:{suit:t[7],rank:t[8]}}),{c(){R(e.$$.fragment)},m(r,i){L(e,r,i),n=!0},p(r,i){const a={};i&128&&(a.suit=r[7]),i&256&&(a.rank=r[8]),e.$set(a)},i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Jt(t){let e,n,r,i,a,o,l,s,u,c,f;l=new Wn({props:{suit:t[7]}});let d=!t[10]&&Wt(t);return{c(){e=O("div"),n=O("div"),r=re(t[8]),a=I(),o=O("div"),R(l.$$.fragment),s=I(),u=O("div"),d&&d.c(),c=I(),y(n,"class",i="rank rank-"+t[8]+" svelte-t2vtqs"),y(o,"class","suit svelte-t2vtqs"),y(e,"aria-hidden","true"),y(e,"class",t[16]+" label svelte-t2vtqs"),y(u,"class","center svelte-t2vtqs"),K(u,"face",t[6])},m(g,h){N(g,e,h),T(e,n),T(n,r),T(e,a),T(e,o),L(l,o,null),N(g,s,h),N(g,u,h),d&&d.m(u,null),T(u,c),f=!0},p(g,h){(!f||h&256)&&Be(r,g[8]),(!f||h&256&&i!==(i="rank rank-"+g[8]+" svelte-t2vtqs"))&&y(n,"class",i);const _={};h&128&&(_.suit=g[7]),l.$set(_),g[10]?d&&(G(),S(d,1,1,()=>{d=null}),Q()):d?(d.p(g,h),h&1024&&b(d,1)):(d=Wt(g),d.c(),b(d,1),d.m(u,c)),(!f||h&64)&&K(u,"face",g[6])},i(g){f||(b(l.$$.fragment,g),b(d),f=!0)},o(g){S(l.$$.fragment,g),S(d),f=!1},d(g){g&&(C(e),C(s),C(u)),M(l),d&&d.d()}}}function Ai(t){let e,n,r,i,a=t[3]&&Ht(t),o=ie(t[13]),l=[];for(let u=0;u<o.length;u+=1)l[u]=Jt(Vt(t,o,u));const s=u=>S(l[u],1,1,()=>{l[u]=null});return{c(){e=O("div"),a&&a.c(),n=I();for(let u=0;u<l.length;u+=1)l[u].c();y(e,"class",r="card "+t[7]+" stack-"+t[2]+" svelte-t2vtqs"),K(e,"bridge",t[11]),K(e,"small",t[10]),K(e,"fourColor",t[9]),K(e,"empty",t[0]),K(e,"hidden",t[4]),K(e,"shadow",t[1]),K(e,"visible",t[3])},m(u,c){N(u,e,c),a&&a.m(e,null),T(e,n);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(e,null);i=!0},p(u,[c]){if(u[3]?a?(a.p(u,c),c&8&&b(a,1)):(a=Ht(u),a.c(),b(a,1),a.m(e,n)):a&&(G(),S(a,1,1,()=>{a=null}),Q()),c&9664){o=ie(u[13]);let f;for(f=0;f<o.length;f+=1){const d=Vt(u,o,f);l[f]?(l[f].p(d,c),b(l[f],1)):(l[f]=Jt(d),l[f].c(),b(l[f],1),l[f].m(e,null))}for(G(),f=o.length;f<l.length;f+=1)s(f);Q()}(!i||c&132&&r!==(r="card "+u[7]+" stack-"+u[2]+" svelte-t2vtqs"))&&y(e,"class",r),(!i||c&2180)&&K(e,"bridge",u[11]),(!i||c&1156)&&K(e,"small",u[10]),(!i||c&644)&&K(e,"fourColor",u[9]),(!i||c&133)&&K(e,"empty",u[0]),(!i||c&148)&&K(e,"hidden",u[4]),(!i||c&134)&&K(e,"shadow",u[1]),(!i||c&140)&&K(e,"visible",u[3])},i(u){if(!i){b(a);for(let c=0;c<o.length;c+=1)b(l[c]);i=!0}},o(u){S(a),l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)S(l[c]);i=!1},d(u){u&&C(e),a&&a.d(),Oe(l,u)}}}function Di(t,e,n){let r,i,a,o,l,s,u,c,f,d;const g=wt();ge(t,g,k=>n(15,d=k));let{card:h=null}=e,{empty:_=!1}=e,{shadow:p=!1}=e,{stack:A=void 0}=e;const $=["top","bottom"];return t.$$set=k=>{"card"in k&&n(14,h=k.card),"empty"in k&&n(0,_=k.empty),"shadow"in k&&n(1,p=k.shadow),"stack"in k&&n(2,A=k.stack)},t.$$.update=()=>{t.$$.dirty&32768&&n(11,r=d.size==="bridge"),t.$$.dirty&32768&&n(10,i=d.size==="small"),t.$$.dirty&32768&&n(9,a=d.fourColor),t.$$.dirty&16386&&n(4,o=h===null&&!p),t.$$.dirty&19&&n(3,l=!(_||o||p)),t.$$.dirty&16392&&n(8,s=l&&h.toString(ne.Card.StringType.ShortValue).replace("T","10")),t.$$.dirty&16392&&n(7,u=l&&h.toString(ne.Card.StringType.LongSuit)),t.$$.dirty&16392&&n(6,c=l&&h.num%13>9),t.$$.dirty&16392&&n(5,f=l&&h.toString(ne.Card.StringType.Long))},[_,p,A,l,o,f,c,u,s,a,i,r,g,$,h,d]}class rt extends x{constructor(e){super(),X(this,e,Di,Ai,Y,{card:14,empty:0,shadow:1,stack:2})}}function Gt(t,e,n){const r=t.slice();return r[19]=e[n].card,r[20]=e[n].shadow,r[21]=e[n].transform,r}function Qt(t){let e,n;return e=new rt({props:{card:t[0],empty:t[0]===void 0}}),{c(){R(e.$$.fragment)},m(r,i){L(e,r,i),n=!0},p(r,i){const a={};i&1&&(a.card=r[0]),i&1&&(a.empty=r[0]===void 0),e.$set(a)},i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Yt(t){let e,n,r,i;return n=new rt({props:{card:t[19],shadow:t[20]}}),{c(){e=O("div"),R(n.$$.fragment),r=I(),y(e,"class","shadow-container svelte-1ns87h6"),Et(e,"transform",t[21])},m(a,o){N(a,e,o),L(n,e,null),T(e,r),i=!0},p(a,o){const l={};o&8&&(l.card=a[19]),o&8&&(l.shadow=a[20]),n.$set(l),(!i||o&8)&&Et(e,"transform",a[21])},i(a){i||(b(n.$$.fragment,a),i=!0)},o(a){S(n.$$.fragment,a),i=!1},d(a){a&&C(e),M(n)}}}function Ei(t){let e,n,r,i,a,o,l=!t[1]&&Qt(t),s=ie(t[3]),u=[];for(let f=0;f<s.length;f+=1)u[f]=Yt(Gt(t,s,f));const c=f=>S(u[f],1,1,()=>{u[f]=null});return{c(){e=O("div"),n=O("div"),l&&l.c(),r=I();for(let f=0;f<u.length;f+=1)u[f].c();y(n,"aria-atomic","true"),y(n,"aria-live","polite"),y(e,"aria-label",t[2]),y(e,"aria-disabled",t[1]),y(e,"class","deck svelte-1ns87h6"),y(e,"role","button"),y(e,"tabindex","0"),K(e,"bridge",t[5]),K(e,"small",t[4]),K(e,"shuffling",t[1])},m(f,d){N(f,e,d),T(e,n),l&&l.m(n,null),T(n,r);for(let g=0;g<u.length;g+=1)u[g]&&u[g].m(n,null);i=!0,a||(o=[te(e,"keydown",ct(["Space","Enter"],t[7],{preventDefault:!0})),te(e,"click",t[7])],a=!0)},p(f,[d]){if(f[1]?l&&(G(),S(l,1,1,()=>{l=null}),Q()):l?(l.p(f,d),d&2&&b(l,1)):(l=Qt(f),l.c(),b(l,1),l.m(n,r)),d&8){s=ie(f[3]);let g;for(g=0;g<s.length;g+=1){const h=Gt(f,s,g);u[g]?(u[g].p(h,d),b(u[g],1)):(u[g]=Yt(h),u[g].c(),b(u[g],1),u[g].m(n,null))}for(G(),g=s.length;g<u.length;g+=1)c(g);Q()}(!i||d&4)&&y(e,"aria-label",f[2]),(!i||d&2)&&y(e,"aria-disabled",f[1]),(!i||d&32)&&K(e,"bridge",f[5]),(!i||d&16)&&K(e,"small",f[4]),(!i||d&2)&&K(e,"shuffling",f[1])},i(f){if(!i){b(l);for(let d=0;d<s.length;d+=1)b(u[d]);i=!0}},o(f){S(l),u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)S(u[d]);i=!1},d(f){f&&C(e),l&&l.d(),Oe(u,f),a=!1,me(o)}}}function Pi(t,e,n,r){const i=t/r*e,a=.5*i/(n*52),o=1*i/(n*52);return`translate(${a}em , ${o}em)`}function Fi(t,e,n){let r,i,a,o,l,s;const u=wt();ge(t,u,z=>n(16,s=z));let{numCards:c=52}=e,{numDecks:f=1}=e,{topCard:d=null}=e,{numShadows:g=10}=e,{shuffleAnimationSteps:h=4}=e,{shuffleAnimationMaxDistanceEm:_=.8}=e,{shuffleAnimationMaxRotateDeg:p=7}=e,{onClick:A=()=>{}}=e,$=0;function k(z,V){const H=m=>[1,V+2].includes(z)?0:(Math.random()*2-1)*m,F=H(_),U=H(_),v=H(p);return`translate(${F}em, ${U}em) rotate(${v}deg)`}function j(){$>0&&setTimeout(()=>{n(15,$-=1),j()},250)}function W(){if(!o)return A()}return t.$$set=z=>{"numCards"in z&&n(8,c=z.numCards),"numDecks"in z&&n(9,f=z.numDecks),"topCard"in z&&n(0,d=z.topCard),"numShadows"in z&&n(10,g=z.numShadows),"shuffleAnimationSteps"in z&&n(11,h=z.shuffleAnimationSteps),"shuffleAnimationMaxDistanceEm"in z&&n(12,_=z.shuffleAnimationMaxDistanceEm),"shuffleAnimationMaxRotateDeg"in z&&n(13,p=z.shuffleAnimationMaxRotateDeg),"onClick"in z&&n(14,A=z.onClick)},t.$$.update=()=>{t.$$.dirty&65536&&n(5,r=(s==null?void 0:s.size)==="bridge"),t.$$.dirty&65536&&n(4,i=(s==null?void 0:s.size)==="small"),t.$$.dirty&2817&&d===null&&c===52*f&&h>0&&(n(15,$=h+2),j()),t.$$.dirty&32768&&n(1,o=$>0),t.$$.dirty&36611&&n(3,a=d===void 0?[]:o?[...Array(g)].map(()=>({card:null,shadow:!1,transform:k($,h)})):[...Array(g)].map((z,V)=>({card:void 0,shadow:!0,transform:Pi(V,c,f,g)}))),t.$$.dirty&1&&n(2,l=d===void 0?"Shuffle the deck":"Draw a card")},[d,o,l,a,i,r,u,W,c,f,g,h,_,p,A,$,s]}class $i extends x{constructor(e){super(),X(this,e,Fi,Ei,Y,{numCards:8,numDecks:9,topCard:0,numShadows:10,shuffleAnimationSteps:11,shuffleAnimationMaxDistanceEm:12,shuffleAnimationMaxRotateDeg:13,onClick:14})}}function Li(t){let e,n,r;return n=new $i({props:{onClick:t[2],topCard:t[1],numCards:t[0]}}),{c(){e=O("main"),R(n.$$.fragment),y(e,"class","svelte-1tag1lj")},m(i,a){N(i,e,a),L(n,e,null),r=!0},p(i,[a]){const o={};a&2&&(o.topCard=i[1]),a&1&&(o.numCards=i[0]),n.$set(o)},i(i){r||(b(n.$$.fragment,i),r=!0)},o(i){S(n.$$.fragment,i),r=!1},d(i){i&&C(e),M(n)}}}function Mi(t,e,n){$n(Dr);let r=new ne.Deck,i=r.cardsRemaining,a=null;function o(){a!==void 0?n(1,a=r.pop()):(r=new ne.Deck,n(1,a=null)),n(0,i=r.cardsRemaining)}const l=s=>{s.stopPropagation(),r=new ne.Deck,n(1,a=null),n(0,i=r.cardsRemaining)};return pt(()=>{De.update(s=>({...s,shuffle:l}))}),An(()=>{De.update(s=>({...s,shuffle:void 0}))}),[i,a,o]}class Ii extends x{constructor(e){super(),X(this,e,Mi,Li,Y,{})}}const Jn=(t,e)=>Fn(e).width+(t-1)*1.125,Ri=(t,e,n)=>t.length===0?"empty":e?`closed${n==="rank"?`, ${t[0].toString(ne.CardStringType.LongValue)}s`:""}`:t.toString(ne.CardStringType.Long),ji=(t,e,n,r,i=!1)=>{const a=Ri(new ne.Cards(e),r,i),o=n>0?` ${n} cards selected: ${new ne.Cards(e.slice(e.length-n)).toString(ne.CardStringType.Long)}`:"";return`${t}: ${a}.${o}`},Ui=(t,e,n)=>{const r={sourceStack:e,cards:n};t.dataTransfer.setData("application/json",JSON.stringify(r)),t.dataTransfer.effectAllowed="move"},Ki=t=>{const{sourceStack:e,cards:n}=JSON.parse(t.dataTransfer.getData("application/json"));return{sourceStack:e,cards:n.map(ne.Card.fromJSON)}};function zi(t){let e,n;return e=new rt({props:{card:t[11]?null:t[0][0],stack:"left"}}),{c(){R(e.$$.fragment)},m(r,i){L(e,r,i),n=!0},p(r,i){const a={};i&2049&&(a.card=r[11]?null:r[0][0]),e.$set(a)},i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function qi(t){let e,n;return e=new rt({props:{empty:!0}}),{c(){R(e.$$.fragment)},m(r,i){L(e,r,i),n=!0},p:B,i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Zt(t){let e,n,r;return n=new Gn({props:{cards:t[0].slice(1),capacity:t[1]-1,nested:!0,closed:t[2],index:t[3],isDraggableFn:t[4],selectedCardsN:t[5]}}),{c(){e=O("div"),R(n.$$.fragment),y(e,"class","nested svelte-o50ay1")},m(i,a){N(i,e,a),L(n,e,null),r=!0},p(i,a){const o={};a&1&&(o.cards=i[0].slice(1)),a&2&&(o.capacity=i[1]-1),a&4&&(o.closed=i[2]),a&8&&(o.index=i[3]),a&16&&(o.isDraggableFn=i[4]),a&32&&(o.selectedCardsN=i[5]),n.$set(o)},i(i){r||(b(n.$$.fragment,i),r=!0)},o(i){S(n.$$.fragment,i),r=!1},d(i){i&&C(e),M(n)}}}function Bi(t){let e,n,r,i,a,o,l,s,u,c;const f=[qi,zi],d=[];function g(_,p){return _[0].length===0?0:1}r=g(t),i=d[r]=f[r](t);let h=t[0].length>1&&Zt(t);return{c(){e=O("div"),n=O("div"),i.c(),a=I(),h&&h.c(),y(n,"aria-hidden",o=t[6]?void 0:"true"),y(e,"aria-label",t[7]),y(e,"class","stack svelte-o50ay1"),y(e,"style",t[14]),y(e,"draggable",t[13]),y(e,"role","button"),y(e,"tabindex",l=t[6]?void 0:0),K(e,"selected",t[12])},m(_,p){N(_,e,p),T(e,n),d[r].m(n,null),T(n,a),h&&h.m(n,null),s=!0,u||(c=[te(e,"dblclick",t[19]),te(e,"dragstart",function(){ue(t[10])&&t[10].apply(this,arguments)}),te(e,"dragover",function(){ue(t[9])&&t[9].apply(this,arguments)}),te(e,"drop",t[20]),te(e,"click",function(){ue(t[8])&&t[8].apply(this,arguments)}),te(e,"keydown",function(){ue(ct(["Enter","Space"],t[8],{preventDefault:!0}))&&ct(["Enter","Space"],t[8],{preventDefault:!0}).apply(this,arguments)})],u=!0)},p(_,[p]){t=_;let A=r;r=g(t),r===A?d[r].p(t,p):(G(),S(d[A],1,1,()=>{d[A]=null}),Q(),i=d[r],i?i.p(t,p):(i=d[r]=f[r](t),i.c()),b(i,1),i.m(n,a)),t[0].length>1?h?(h.p(t,p),p&1&&b(h,1)):(h=Zt(t),h.c(),b(h,1),h.m(n,null)):h&&(G(),S(h,1,1,()=>{h=null}),Q()),(!s||p&64&&o!==(o=t[6]?void 0:"true"))&&y(n,"aria-hidden",o),(!s||p&128)&&y(e,"aria-label",t[7]),(!s||p&16384)&&y(e,"style",t[14]),(!s||p&8192)&&y(e,"draggable",t[13]),(!s||p&64&&l!==(l=t[6]?void 0:0))&&y(e,"tabindex",l),(!s||p&4096)&&K(e,"selected",t[12])},i(_){s||(b(i),b(h),s=!0)},o(_){S(i),S(h),s=!1},d(_){_&&C(e),d[r].d(),h&&h.d(),u=!1,me(c)}}}function Vi(t,e,n){let r,i,a,o,l,s,u,c,f,d;const g=wt();ge(t,g,F=>n(18,d=F));let{cards:h=[]}=e,{capacity:_=4}=e,{closed:p=!1}=e,{index:A=0}=e,{isDraggableFn:$=()=>!1}=e,{selectedCardsN:k=0}=e,{labelOptions:j={title:"Stack"}}=e,{nested:W=!1}=e;const z=bt();function V(F){st.call(this,t,F)}function H(F){st.call(this,t,F)}return t.$$set=F=>{"cards"in F&&n(0,h=F.cards),"capacity"in F&&n(1,_=F.capacity),"closed"in F&&n(2,p=F.closed),"index"in F&&n(3,A=F.index),"isDraggableFn"in F&&n(4,$=F.isDraggableFn),"selectedCardsN"in F&&n(5,k=F.selectedCardsN),"labelOptions"in F&&n(16,j=F.labelOptions),"nested"in F&&n(6,W=F.nested)},t.$$.update=()=>{t.$$.dirty&262144&&n(17,r=d.size),t.$$.dirty&131074&&n(14,i=`width: ${Jn(_,r)}em`),t.$$.dirty&21&&n(13,a=!p&&$(h)),t.$$.dirty&33&&n(12,o=k>0&&k===h.length),t.$$.dirty&5&&n(11,l=p&&h.length===1),t.$$.dirty&9&&n(10,s=F=>{F.stopPropagation(),Ui(F,A,h)}),t.$$.dirty&72&&n(8,c=()=>{W||z("select",{index:A})}),t.$$.dirty&65637&&n(7,f=W?void 0:ji(j.title,h,k,p,j.closed))},n(9,u=F=>{F.preventDefault()}),[h,_,p,A,$,k,W,f,c,u,s,l,o,a,i,g,j,r,d,V,H]}class Gn extends x{constructor(e){super(),X(this,e,Vi,Bi,Y,{cards:0,capacity:1,closed:2,index:3,isDraggableFn:4,selectedCardsN:5,labelOptions:16,nested:6})}}const Qn=(t,e)=>{const n=t/e;return n<3/4?[3,5]:n<4/3?[4,4]:[5,3]},Xt=(t,e)=>{const[n,r]=Qn(t,e);return{length:n*r-15}},Hi=(t,e,n,r)=>{const[i,a]=Qn(e,r),o=Jn(4,t)*i+(t!=="small"?.666:.333)*10,l=e*.95/o,s=Fn(t).height*a+(t!=="small"?.5:.25)*6,c=(n>600?n:r)*.95/s;return Math.min(l,c)},xt=()=>{const t=new ne.Deck;return[...Array(13)].map(()=>t.popN(4)).concat([[],[]])},kt=t=>{const[e,...n]=t;return n.every(r=>r.value===e.value)},Wi=t=>t.length===0?!1:t.length===1?!0:kt(t),Ct=(t,e)=>t.length+e.length>4?!1:e.length===0||e[e.length-1].value===t[0].value,Tt=(t,e,n,r)=>{const i=t.map(a=>[...a]);if(!Ct(r,i[n]))throw new Error(`Can not move cards ${r.map(a=>a.toString(Kn.ShortEmoji))} from pile ${e} to pile ${n}`);return i[e]=i[e].slice(0,i[e].length-r.length),i[n]=[...i[n],...r],i},Nt=t=>t.length===1||kt(t)?t:Nt(t.slice(1)),Ji=(t,e)=>{if(t[e].length===0)throw new Error("Cannot move cards from an empty pile.");if(Zn(t[e]))throw new Error("Cannot move cards from a completed pile.");const n=Nt(t[e]),r=t.reduce((o,l,s)=>s!==e&&Ct(n,l)?[...o,s]:o,[]);if(r.length===0)throw new Error(`Cannot move cards from pile ${e} to any other pile`);const i=r.filter(o=>t[o].length>0),a=i.length>0?i[0]:r[0];return Tt(t,e,a,n)},Gi=(t,e)=>{const n=t[e].slice(-1);return n.length===0?[[],n]:[t.reduce((i,a,o)=>o!==e&&Ct(n,a)?[...i,o]:i,[]),n]},Yn=t=>t.reduce((e,n,r)=>{const[i,a]=Gi(t,r);return i.length===0?e:[...e,[r,i,a]]},[]),Qi=(t,e)=>{if(console.log("source",t[0]!==e[0]),t[0]!==e[0]||t[1].length!==e[1].length)return!1;for(let n=0;n<t[1].length;n++)if(t[1][n]!==e[1][n])return!1;return new dt(t[2]).toString()===new dt(e[2]).toString()},Yi=t=>(e,n,r)=>{const[i,a,o]=e;if(a.length>1)return!1;const l=a[0],s=Tt(t,i,l,o),u=Yn(s),c=r.map(f=>f[0]===i?[l,[i],o]:f).sort((f,d)=>f[0]-d[0]);return u.length!==c.length?!1:c.every((f,d)=>Qi(f,u[d]))},Zi=t=>{const e=Yn(t);if(e.length===0)return"dead-end";const n=e.map(Yi(t));if(n.every(r=>r)){const r=n.length;if(r===1)return"infinite-loop";if(r>1)return"multi-infinite-loop"}return!1},Zn=t=>t.length===4&&kt(t),Xi=t=>t.reduce((e,n,r)=>Zn(n)?[...e,r]:e,[]);/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Xn=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ze=Xn.join(","),xn=typeof Element>"u",ye=xn?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Xe=!xn&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},xe=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),a=i===""||i==="true",o=a||n&&e&&t(e.parentNode);return o},xi=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},er=function(e,n,r){if(xe(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(Ze));return n&&ye.call(e,Ze)&&i.unshift(e),i=i.filter(r),i},tr=function t(e,n,r){for(var i=[],a=Array.from(e);a.length;){var o=a.shift();if(!xe(o,!1))if(o.tagName==="SLOT"){var l=o.assignedElements(),s=l.length?l:o.children,u=t(s,!0,r);r.flatten?i.push.apply(i,u):i.push({scopeParent:o,candidates:u})}else{var c=ye.call(o,Ze);c&&r.filter(o)&&(n||!e.includes(o))&&i.push(o);var f=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),d=!xe(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(f&&d){var g=t(f===!0?o.children:f.children,!0,r);r.flatten?i.push.apply(i,g):i.push({scopeParent:o,candidates:g})}else a.unshift.apply(a,o.children)}}return i},nr=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},pe=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||xi(e))&&!nr(e)?0:e.tabIndex},ea=function(e,n){var r=pe(e);return r<0&&n&&!nr(e)?0:r},ta=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},rr=function(e){return e.tagName==="INPUT"},na=function(e){return rr(e)&&e.type==="hidden"},ra=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},ia=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},aa=function(e){if(!e.name)return!0;var n=e.form||Xe(e),r=function(l){return n.querySelectorAll('input[type="radio"][name="'+l+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var a=ia(i,e.form);return!a||a===e},oa=function(e){return rr(e)&&e.type==="radio"},la=function(e){return oa(e)&&!aa(e)},ua=function(e){var n,r=e&&Xe(e),i=(n=r)===null||n===void 0?void 0:n.host,a=!1;if(r&&r!==e){var o,l,s;for(a=!!((o=i)!==null&&o!==void 0&&(l=o.ownerDocument)!==null&&l!==void 0&&l.contains(i)||e!=null&&(s=e.ownerDocument)!==null&&s!==void 0&&s.contains(e));!a&&i;){var u,c,f;r=Xe(i),i=(u=r)===null||u===void 0?void 0:u.host,a=!!((c=i)!==null&&c!==void 0&&(f=c.ownerDocument)!==null&&f!==void 0&&f.contains(i))}}return a},en=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},sa=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var a=ye.call(e,"details>summary:first-of-type"),o=a?e.parentElement:e;if(ye.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var l=e;e;){var s=e.parentElement,u=Xe(e);if(s&&!s.shadowRoot&&i(s)===!0)return en(e);e.assignedSlot?e=e.assignedSlot:!s&&u!==e.ownerDocument?e=u.host:e=s}e=l}if(ua(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return en(e);return!1},fa=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return ye.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},et=function(e,n){return!(n.disabled||xe(n)||na(n)||sa(n,e)||ra(n)||fa(n))},vt=function(e,n){return!(la(n)||pe(n)<0||!et(e,n))},ca=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},da=function t(e){var n=[],r=[];return e.forEach(function(i,a){var o=!!i.scopeParent,l=o?i.scopeParent:i,s=ea(l,o),u=o?t(i.candidates):l;s===0?o?n.push.apply(n,u):n.push(l):r.push({documentOrder:a,tabIndex:s,item:i,isScope:o,content:u})}),r.sort(ta).reduce(function(i,a){return a.isScope?i.push.apply(i,a.content):i.push(a.content),i},[]).concat(n)},ga=function(e,n){n=n||{};var r;return n.getShadowRoot?r=tr([e],n.includeContainer,{filter:vt.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:ca}):r=er(e,n.includeContainer,vt.bind(null,n)),da(r)},ma=function(e,n){n=n||{};var r;return n.getShadowRoot?r=tr([e],n.includeContainer,{filter:et.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=er(e,n.includeContainer,et.bind(null,n)),r},Ce=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ye.call(e,Ze)===!1?!1:vt(n,e)},ha=Xn.concat("iframe").join(","),ut=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ye.call(e,ha)===!1?!1:et(n,e)};/*!
* focus-trap 7.5.2
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function tn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tn(Object(n),!0).forEach(function(r){va(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tn(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function va(t,e,n){return e=ba(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pa(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ba(t){var e=pa(t,"string");return typeof e=="symbol"?e:String(e)}var rn={activateTrap:function(e,n){if(e.length>0){var r=e[e.length-1];r!==n&&r.pause()}var i=e.indexOf(n);i===-1||e.splice(i,1),e.push(n)},deactivateTrap:function(e,n){var r=e.indexOf(n);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},ya=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},_a=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},Re=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},wa=function(e){return Re(e)&&!e.shiftKey},Sa=function(e){return Re(e)&&e.shiftKey},an=function(e){return setTimeout(e,0)},on=function(e,n){var r=-1;return e.every(function(i,a){return n(i)?(r=a,!1):!0}),r},Me=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},We=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},ka=[],Ca=function(e,n){var r=(n==null?void 0:n.document)||document,i=(n==null?void 0:n.trapStack)||ka,a=nn({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:wa,isKeyBackward:Sa},n),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},l,s=function(v,m,w){return v&&v[m]!==void 0?v[m]:a[w||m]},u=function(v,m){var w=typeof(m==null?void 0:m.composedPath)=="function"?m.composedPath():void 0;return o.containerGroups.findIndex(function(D){var P=D.container,E=D.tabbableNodes;return P.contains(v)||(w==null?void 0:w.includes(P))||E.find(function(q){return q===v})})},c=function(v){var m=a[v];if(typeof m=="function"){for(var w=arguments.length,D=new Array(w>1?w-1:0),P=1;P<w;P++)D[P-1]=arguments[P];m=m.apply(void 0,D)}if(m===!0&&(m=void 0),!m){if(m===void 0||m===!1)return m;throw new Error("`".concat(v,"` was specified but was not a node, or did not return a node"))}var E=m;if(typeof m=="string"&&(E=r.querySelector(m),!E))throw new Error("`".concat(v,"` as selector refers to no known node"));return E},f=function(){var v=c("initialFocus");if(v===!1)return!1;if(v===void 0||!ut(v,a.tabbableOptions))if(u(r.activeElement)>=0)v=r.activeElement;else{var m=o.tabbableGroups[0],w=m&&m.firstTabbableNode;v=w||c("fallbackFocus")}if(!v)throw new Error("Your focus-trap needs to have at least one focusable element");return v},d=function(){if(o.containerGroups=o.containers.map(function(v){var m=ga(v,a.tabbableOptions),w=ma(v,a.tabbableOptions),D=m.length>0?m[0]:void 0,P=m.length>0?m[m.length-1]:void 0,E=w.find(function(Z){return Ce(Z)}),q=w.slice().reverse().find(function(Z){return Ce(Z)}),ee=!!m.find(function(Z){return pe(Z)>0});return{container:v,tabbableNodes:m,focusableNodes:w,posTabIndexesFound:ee,firstTabbableNode:D,lastTabbableNode:P,firstDomTabbableNode:E,lastDomTabbableNode:q,nextTabbableNode:function(he){var Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,fe=m.indexOf(he);return fe<0?Fe?w.slice(w.indexOf(he)+1).find(function($e){return Ce($e)}):w.slice(0,w.indexOf(he)).reverse().find(function($e){return Ce($e)}):m[fe+(Fe?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function(v){return v.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!c("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function(v){return v.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},g=function U(v){if(v!==!1&&v!==r.activeElement){if(!v||!v.focus){U(f());return}v.focus({preventScroll:!!a.preventScroll}),o.mostRecentlyFocusedNode=v,ya(v)&&v.select()}},h=function(v){var m=c("setReturnFocus",v);return m||(m===!1?!1:v)},_=function(v){var m=v.target,w=v.event,D=v.isBackward,P=D===void 0?!1:D;m=m||We(w),d();var E=null;if(o.tabbableGroups.length>0){var q=u(m,w),ee=q>=0?o.containerGroups[q]:void 0;if(q<0)P?E=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:E=o.tabbableGroups[0].firstTabbableNode;else if(P){var Z=on(o.tabbableGroups,function(it){var at=it.firstTabbableNode;return m===at});if(Z<0&&(ee.container===m||ut(m,a.tabbableOptions)&&!Ce(m,a.tabbableOptions)&&!ee.nextTabbableNode(m,!1))&&(Z=q),Z>=0){var he=Z===0?o.tabbableGroups.length-1:Z-1,Fe=o.tabbableGroups[he];E=pe(m)>=0?Fe.lastTabbableNode:Fe.lastDomTabbableNode}else Re(w)||(E=ee.nextTabbableNode(m,!1))}else{var fe=on(o.tabbableGroups,function(it){var at=it.lastTabbableNode;return m===at});if(fe<0&&(ee.container===m||ut(m,a.tabbableOptions)&&!Ce(m,a.tabbableOptions)&&!ee.nextTabbableNode(m))&&(fe=q),fe>=0){var $e=fe===o.tabbableGroups.length-1?0:fe+1,At=o.tabbableGroups[$e];E=pe(m)>=0?At.firstTabbableNode:At.firstDomTabbableNode}else Re(w)||(E=ee.nextTabbableNode(m))}}else E=c("fallbackFocus");return E},p=function(v){var m=We(v);if(!(u(m,v)>=0)){if(Me(a.clickOutsideDeactivates,v)){l.deactivate({returnFocus:a.returnFocusOnDeactivate});return}Me(a.allowOutsideClick,v)||v.preventDefault()}},A=function(v){var m=We(v),w=u(m,v)>=0;if(w||m instanceof Document)w&&(o.mostRecentlyFocusedNode=m);else{v.stopImmediatePropagation();var D,P=!0;if(o.mostRecentlyFocusedNode)if(pe(o.mostRecentlyFocusedNode)>0){var E=u(o.mostRecentlyFocusedNode),q=o.containerGroups[E].tabbableNodes;if(q.length>0){var ee=q.findIndex(function(Z){return Z===o.mostRecentlyFocusedNode});ee>=0&&(a.isKeyForward(o.recentNavEvent)?ee+1<q.length&&(D=q[ee+1],P=!1):ee-1>=0&&(D=q[ee-1],P=!1))}}else o.containerGroups.some(function(Z){return Z.tabbableNodes.some(function(he){return pe(he)>0})})||(P=!1);else P=!1;P&&(D=_({target:o.mostRecentlyFocusedNode,isBackward:a.isKeyBackward(o.recentNavEvent)})),g(D||o.mostRecentlyFocusedNode||f())}o.recentNavEvent=void 0},$=function(v){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=v;var w=_({event:v,isBackward:m});w&&(Re(v)&&v.preventDefault(),g(w))},k=function(v){if(_a(v)&&Me(a.escapeDeactivates,v)!==!1){v.preventDefault(),l.deactivate();return}(a.isKeyForward(v)||a.isKeyBackward(v))&&$(v,a.isKeyBackward(v))},j=function(v){var m=We(v);u(m,v)>=0||Me(a.clickOutsideDeactivates,v)||Me(a.allowOutsideClick,v)||(v.preventDefault(),v.stopImmediatePropagation())},W=function(){if(o.active)return rn.activateTrap(i,l),o.delayInitialFocusTimer=a.delayInitialFocus?an(function(){g(f())}):g(f()),r.addEventListener("focusin",A,!0),r.addEventListener("mousedown",p,{capture:!0,passive:!1}),r.addEventListener("touchstart",p,{capture:!0,passive:!1}),r.addEventListener("click",j,{capture:!0,passive:!1}),r.addEventListener("keydown",k,{capture:!0,passive:!1}),l},z=function(){if(o.active)return r.removeEventListener("focusin",A,!0),r.removeEventListener("mousedown",p,!0),r.removeEventListener("touchstart",p,!0),r.removeEventListener("click",j,!0),r.removeEventListener("keydown",k,!0),l},V=function(v){var m=v.some(function(w){var D=Array.from(w.removedNodes);return D.some(function(P){return P===o.mostRecentlyFocusedNode})});m&&g(f())},H=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(V):void 0,F=function(){H&&(H.disconnect(),o.active&&!o.paused&&o.containers.map(function(v){H.observe(v,{subtree:!0,childList:!0})}))};return l={get active(){return o.active},get paused(){return o.paused},activate:function(v){if(o.active)return this;var m=s(v,"onActivate"),w=s(v,"onPostActivate"),D=s(v,"checkCanFocusTrap");D||d(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=r.activeElement,m==null||m();var P=function(){D&&d(),W(),F(),w==null||w()};return D?(D(o.containers.concat()).then(P,P),this):(P(),this)},deactivate:function(v){if(!o.active)return this;var m=nn({onDeactivate:a.onDeactivate,onPostDeactivate:a.onPostDeactivate,checkCanReturnFocus:a.checkCanReturnFocus},v);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,z(),o.active=!1,o.paused=!1,F(),rn.deactivateTrap(i,l);var w=s(m,"onDeactivate"),D=s(m,"onPostDeactivate"),P=s(m,"checkCanReturnFocus"),E=s(m,"returnFocus","returnFocusOnDeactivate");w==null||w();var q=function(){an(function(){E&&g(h(o.nodeFocusedBeforeActivation)),D==null||D()})};return E&&P?(P(h(o.nodeFocusedBeforeActivation)).then(q,q),this):(q(),this)},pause:function(v){if(o.paused||!o.active)return this;var m=s(v,"onPause"),w=s(v,"onPostPause");return o.paused=!0,m==null||m(),z(),F(),w==null||w(),this},unpause:function(v){if(!o.paused||!o.active)return this;var m=s(v,"onUnpause"),w=s(v,"onPostUnpause");return o.paused=!1,m==null||m(),d(),W(),F(),w==null||w(),this},updateContainerElements:function(v){var m=[].concat(v).filter(Boolean);return o.containers=m.map(function(w){return typeof w=="string"?r.querySelector(w):w}),o.active&&d(),F(),this}},l.updateContainerElements(e),l};const ir=()=>(Math.random()+1).toString(36).substring(5);function Ta(t){let e,n,r,i,a,o,l,s,u,c;return{c(){e=O("div"),n=O("button"),r=Ye("svg"),i=Ye("path"),o=I(),l=O("div"),s=re(t[1]),y(i,"fill","none"),y(i,"stroke","currentColor"),y(i,"stroke-linecap","round"),y(i,"stroke-linejoin","round"),y(i,"stroke-width","1"),y(i,"d",a=t[3][t[0]].path),y(r,"viewBox","0 0 16 16"),y(r,"class","svelte-1nd3ako"),y(n,"aria-labelledby",t[4]),y(n,"class","clickable svelte-1nd3ako"),K(n,"open",open),y(l,"class","label svelte-1nd3ako"),y(l,"id",t[4]),y(e,"class","icon-button clickable svelte-1nd3ako")},m(f,d){N(f,e,d),T(e,n),T(n,r),T(r,i),T(e,o),T(e,l),T(l,s),u||(c=[te(n,"click",function(){ue(t[2])&&t[2].apply(this,arguments)}),te(e,"click",function(){ue(t[2])&&t[2].apply(this,arguments)})],u=!0)},p(f,[d]){t=f,d&1&&a!==(a=t[3][t[0]].path)&&y(i,"d",a),d&0&&K(n,"open",open),d&2&&Be(s,t[1])},i:B,o:B,d(f){f&&C(e),u=!1,me(c)}}}function Na(t,e,n){const r={Close:{path:"M 3 3 L 13 13 M 3 13 L 13 3"},Help:{path:"M 8 12 L 8 12 M 8 10 L 8 9 C 8 7 10 8 10 6 A 2 2 0 1 0 6 6 M 8 1.5 A 6.5 6.5 0 0 1 8 14.5 A 6.5 6.5 0 0 1 8 1.5"},Menu:{path:"M 2 4 L 14 4 M 2 8 L 14 8 M 2 12 L 14 12"},Shuffle:{path:"M 5 2 L 2 5 L 5 8 M 2 5 L 12 5 M 11 14 L 14 11 L 11 8 M 14 11 L 4 11"},Undo:{path:"M 5 3 L 2 6 L 5 9 M 2 6 L 10 6 A 3 3 0 1 1 10 13 L 8 13"}};let{icon:i}=e,{label:a}=e,{onClick:o}=e;const l=`${ir()}-label`;return t.$$set=s=>{"icon"in s&&n(0,i=s.icon),"label"in s&&n(1,a=s.label),"onClick"in s&&n(2,o=s.onClick)},[i,a,o,r,l]}class _e extends x{constructor(e){super(),X(this,e,Na,Ta,Y,{icon:0,label:1,onClick:2})}}function Oa(t){let e,n,r,i,a,o,l,s,u,c,f;s=new _e({props:{icon:"Close",label:"Close",onClick:t[3]}});const d=t[5].default,g=Sn(d,t,t[4],null);return{c(){e=O("div"),n=I(),r=O("div"),i=O("div"),a=O("h2"),o=re(t[0]),l=I(),R(s.$$.fragment),u=I(),c=O("div"),g&&g.c(),y(e,"class","backdrop svelte-kdw544"),y(a,"id",t[2]),y(a,"class","svelte-kdw544"),y(i,"class","header svelte-kdw544"),y(c,"class","content svelte-kdw544"),y(r,"class","modal svelte-kdw544"),y(r,"role","dialog"),y(r,"aria-labelledby",t[2]),y(r,"id",t[1])},m(h,_){N(h,e,_),N(h,n,_),N(h,r,_),T(r,i),T(i,a),T(a,o),T(i,l),L(s,i,null),T(r,u),T(r,c),g&&g.m(c,null),f=!0},p(h,[_]){(!f||_&1)&&Be(o,h[0]),g&&g.p&&(!f||_&16)&&Tn(g,d,h,h[4],f?Cn(d,h[4],_,null):Nn(h[4]),null)},i(h){f||(b(s.$$.fragment,h),b(g,h),f=!0)},o(h){S(s.$$.fragment,h),S(g,h),f=!1},d(h){h&&(C(e),C(n),C(r)),M(s),g&&g.d(h)}}}function Aa(t,e,n){let{$$slots:r={},$$scope:i}=e,{title:a}=e;const o=`modal-${ir()}`,l=`${o}-title`;pt(()=>{const c=Ca(`#${o}`,{clickOutsideDeactivates:!0,onDeactivate:()=>u()});c.activate();const f=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{c.deactivate(),document.body.style.overflow=f}});const s=bt(),u=()=>{s("close")};return t.$$set=c=>{"title"in c&&n(0,a=c.title),"$$scope"in c&&n(4,i=c.$$scope)},[a,o,l,u,i,r]}class Ot extends x{constructor(e){super(),X(this,e,Aa,Oa,Y,{title:0})}}function Da(t){let e,n,r,i,a,o,l,s,u,c,f;return{c(){e=O("p"),e.textContent=`The goal of the pileon solitaire is to rearrange a deck of cards into piles
    of equal ranks from thirteen random piles of four using fifteen piles.`,n=I(),r=O("h3"),r.textContent="Rules",i=I(),a=O("ul"),a.innerHTML=`<li>Each pile can contain up to four cards.</li> <li>Cards can be moved from top of the pile into a pile where the top card is
      of the same rank as the card that is moved.</li> <li>Cards of any rank can be moved into an empty pile.</li> <li>Multiple cards with the same rank can be moved at once.</li> <li>Pile is complete when it contains all four cards with the same rank.</li>`,o=I(),l=O("h3"),l.textContent="Moving cards",s=I(),u=O("ol"),u.innerHTML=`<li>Select the source pile by clicking a pile. Cards to be moved are
      highlighted. Click the source pile again to reduce the amount of selected
      cards.</li> <li>Move cards by clicking the target pile. If the move is valid, the cards
      are moved from the source pile into the target pile.</li>`,c=I(),f=O("p"),f.textContent=`If your device supports drag-and-drop, you can also drag the cards you want
    to move from the source pile into the target pile. Double-clicking the
    source pile automatically moves cards from the pile to an available target
    pile.`},m(d,g){N(d,e,g),N(d,n,g),N(d,r,g),N(d,i,g),N(d,a,g),N(d,o,g),N(d,l,g),N(d,s,g),N(d,u,g),N(d,c,g),N(d,f,g)},p:B,d(d){d&&(C(e),C(n),C(r),C(i),C(a),C(o),C(l),C(s),C(u),C(c),C(f))}}}function Ea(t){let e,n;return e=new Ot({props:{title:"How to play?",$$slots:{default:[Da]},$$scope:{ctx:t}}}),e.$on("close",t[0]),{c(){R(e.$$.fragment)},m(r,i){L(e,r,i),n=!0},p(r,[i]){const a={};i&2&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Pa(t){function e(n){st.call(this,t,n)}return[e]}class Fa extends x{constructor(e){super(),X(this,e,Pa,Ea,Y,{})}}function ln(t){let e,n;return e=new Ot({props:{title:"Dead end",$$slots:{default:[$a]},$$scope:{ctx:t}}}),e.$on("close",t[6]),{c(){R(e.$$.fragment)},m(r,i){L(e,r,i),n=!0},p(r,i){const a={};i&130&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function un(t){let e;return{c(){e=O("p"),e.textContent="No more possible moves. Undo the last move or start a new game."},m(n,r){N(n,e,r)},d(n){n&&C(e)}}}function sn(t){let e;return{c(){e=O("p"),e.textContent=`One card can be moved back and forth between two piles. There are no
        other possible moves. Undo the last move or start a new game.`},m(n,r){N(n,e,r)},d(n){n&&C(e)}}}function fn(t){let e;return{c(){e=O("p"),e.textContent=`Multiple cards can be moved back and forth between two piles. There are
        no other possible moves. Undo the last move or start a new game.`},m(n,r){N(n,e,r)},d(n){n&&C(e)}}}function $a(t){let e,n,r,i,a,o,l,s,u=t[1]==="dead-end"&&un(),c=t[1]==="infinite-loop"&&sn(),f=t[1]==="multi-infinite-loop"&&fn();return a=new _e({props:{icon:"Shuffle",label:"Shuffle",onClick:t[4]}}),l=new _e({props:{icon:"Undo",label:"Undo",onClick:t[5]}}),{c(){u&&u.c(),e=I(),c&&c.c(),n=I(),f&&f.c(),r=I(),i=O("div"),R(a.$$.fragment),o=I(),R(l.$$.fragment),y(i,"class","actions svelte-16kom67")},m(d,g){u&&u.m(d,g),N(d,e,g),c&&c.m(d,g),N(d,n,g),f&&f.m(d,g),N(d,r,g),N(d,i,g),L(a,i,null),T(i,o),L(l,i,null),s=!0},p(d,g){d[1]==="dead-end"?u||(u=un(),u.c(),u.m(e.parentNode,e)):u&&(u.d(1),u=null),d[1]==="infinite-loop"?c||(c=sn(),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null),d[1]==="multi-infinite-loop"?f||(f=fn(),f.c(),f.m(r.parentNode,r)):f&&(f.d(1),f=null)},i(d){s||(b(a.$$.fragment,d),b(l.$$.fragment,d),s=!0)},o(d){S(a.$$.fragment,d),S(l.$$.fragment,d),s=!1},d(d){d&&(C(e),C(n),C(r),C(i)),u&&u.d(d),c&&c.d(d),f&&f.d(d),M(a),M(l)}}}function La(t){let e,n,r=t[1]&&t[0]&&ln(t);return{c(){r&&r.c(),e=On()},m(i,a){r&&r.m(i,a),N(i,e,a),n=!0},p(i,[a]){i[1]&&i[0]?r?(r.p(i,a),a&3&&b(r,1)):(r=ln(i),r.c(),b(r,1),r.m(e.parentNode,e)):r&&(G(),S(r,1,1,()=>{r=null}),Q())},i(i){n||(b(r),n=!0)},o(i){S(r),n=!1},d(i){i&&C(e),r&&r.d(i)}}}function Ma(t,e,n){let r,{piles:i}=e,a=!0;const o=bt(),l=()=>o("shuffle"),s=()=>o("undo"),u=()=>{n(0,a=!1)};return t.$$set=c=>{"piles"in c&&n(3,i=c.piles)},t.$$.update=()=>{t.$$.dirty&8&&n(1,r=Zi(i)),t.$$.dirty&8&&n(0,a=!0)},[a,r,o,i,l,s,u]}class Ia extends x{constructor(e){super(),X(this,e,Ma,La,Y,{piles:3})}}function cn(t,e,n){const r=t.slice();return r[25]=e[n],r}function dn(t,e,n){const r=t.slice();return r[28]=e[n],r[30]=n,r}function gn(t){let e,n,r;return n=new Gn({props:{cards:t[28],closed:t[9].includes(t[30]),selectedCardsN:t[8]===t[30]?t[7].length:0,labelOptions:{title:`Stack ${t[30]+1}`,closed:"rank"},index:t[30],isDraggableFn:Wi}}),n.$on("drop",t[14](t[30])),n.$on("dblclick",t[15](t[30])),n.$on("select",t[13]),{c(){e=O("div"),R(n.$$.fragment),y(e,"class","pile svelte-1qdb0j4"),K(e,"small",t[3]==="small")},m(i,a){N(i,e,a),L(n,e,null),r=!0},p(i,a){const o={};a&16&&(o.cards=i[28]),a&512&&(o.closed=i[9].includes(i[30])),a&384&&(o.selectedCardsN=i[8]===i[30]?i[7].length:0),n.$set(o),(!r||a&8)&&K(e,"small",i[3]==="small")},i(i){r||(b(n.$$.fragment,i),r=!0)},o(i){S(n.$$.fragment,i),r=!1},d(i){i&&C(e),M(n)}}}function mn(t){let e;return{c(){e=O("div"),y(e,"class","pile svelte-1qdb0j4")},m(n,r){N(n,e,r)},p:B,d(n){n&&C(e)}}}function hn(t){let e,n;return e=new Fa({}),e.$on("close",t[22]),{c(){R(e.$$.fragment)},m(r,i){L(e,r,i),n=!0},p:B,i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Ra(t){let e,n,r,i,a,o,l,s,u;Ue(t[20]);let c=ie(t[4]),f=[];for(let p=0;p<c.length;p+=1)f[p]=gn(dn(t,c,p));const d=p=>S(f[p],1,1,()=>{f[p]=null});let g=ie(Xt(t[0],t[2])),h=[];for(let p=0;p<g.length;p+=1)h[p]=mn(cn(t,g,p));let _=t[5]&&hn(t);return o=new Ia({props:{piles:t[4]}}),o.$on("shuffle",t[11]),o.$on("undo",t[12]),{c(){e=O("main");for(let p=0;p<f.length;p+=1)f[p].c();n=I();for(let p=0;p<h.length;p+=1)h[p].c();i=I(),_&&_.c(),a=I(),R(o.$$.fragment),y(e,"class","pileon svelte-1qdb0j4"),y(e,"style",t[6]),Ue(()=>t[21].call(e))},m(p,A){N(p,e,A);for(let $=0;$<f.length;$+=1)f[$]&&f[$].m(e,null);T(e,n);for(let $=0;$<h.length;$+=1)h[$]&&h[$].m(e,null);r=dr(e,t[21].bind(e)),N(p,i,A),_&&_.m(p,A),N(p,a,A),L(o,p,A),l=!0,s||(u=te(window,"resize",t[20]),s=!0)},p(p,[A]){if(A&58264){c=ie(p[4]);let k;for(k=0;k<c.length;k+=1){const j=dn(p,c,k);f[k]?(f[k].p(j,A),b(f[k],1)):(f[k]=gn(j),f[k].c(),b(f[k],1),f[k].m(e,n))}for(G(),k=c.length;k<f.length;k+=1)d(k);Q()}if(A&5){g=ie(Xt(p[0],p[2]));let k;for(k=0;k<g.length;k+=1){const j=cn(p,g,k);h[k]?h[k].p(j,A):(h[k]=mn(),h[k].c(),h[k].m(e,null))}for(;k<h.length;k+=1)h[k].d(1);h.length=g.length}(!l||A&64)&&y(e,"style",p[6]),p[5]?_?(_.p(p,A),A&32&&b(_,1)):(_=hn(p),_.c(),b(_,1),_.m(a.parentNode,a)):_&&(G(),S(_,1,1,()=>{_=null}),Q());const $={};A&16&&($.piles=p[4]),o.$set($)},i(p){if(!l){for(let A=0;A<c.length;A+=1)b(f[A]);b(_),b(o.$$.fragment,p),l=!0}},o(p){f=f.filter(Boolean);for(let A=0;A<f.length;A+=1)S(f[A]);S(_),S(o.$$.fragment,p),l=!1},d(p){p&&(C(e),C(i),C(a)),Oe(f,p),Oe(h,p),r(),_&&_.d(p),M(o,p),s=!1,u()}}}function ja(t,e,n){let r,i,a,o,l,s,u,c,f,d,g,h=$n(m=>({size:m.size==="default"?"bridge":m.size,fourColor:m.colors==="four-color"}));ge(t,h,m=>n(19,c=m));let _=[xt()],p=!1;const A=m=>{m.stopPropagation(),n(5,p=!0)},$=m=>{m.stopPropagation(),n(17,j=[void 0,[]]),n(16,_=[xt()])},k=m=>{m.stopPropagation(),_.length>1&&(n(17,j=[void 0,[]]),n(16,_=_.slice(0,_.length-1)))};let j=[void 0,[]];const W=(m,w,D)=>{try{n(17,j=[void 0,[]]);const P=Tt(_[_.length-1],m,w,D);n(16,_=[..._,P])}catch{}},z=m=>{const[w,D]=j,P=m.detail.index;i.includes(P)||(w===void 0||D.length===0?n(17,j=[P,Nt(r[P])]):w===P?n(17,j=[P,D.slice(1)]):w!==P&&(W(w,P,D),n(17,j=[void 0,[]])))},V=m=>w=>{w.preventDefault();const{sourceStack:D,cards:P}=Ki(w);D!==m&&W(D,m,P)},H=m=>w=>{w.preventDefault();try{n(17,j=[void 0,[]]);const D=Ji(_[_.length-1],m);n(16,_=[..._,D])}catch{}};pt(()=>{De.update(m=>({...m,help:A,shuffle:$,undo:k}))}),An(()=>{De.update(m=>({...m,help:void 0,shuffle:void 0,undo:void 0}))});function F(){n(2,g=window.innerHeight)}function U(){d=this.clientHeight,f=this.clientWidth,n(1,d),n(0,f)}const v=()=>{n(5,p=!1)};return t.$$.update=()=>{if(t.$$.dirty&5){const m=f<800||g<500?"small":"bridge";Er(w=>({size:w.size==="default"?m:w.size,fourColor:w.colors==="four-color"}))}t.$$.dirty&65536&&n(4,r=_[_.length-1]),t.$$.dirty&16&&n(9,i=Xi(r)),t.$$.dirty&131072&&n(8,a=j[0]),t.$$.dirty&131072&&n(7,o=j[1]),t.$$.dirty&524288&&n(3,l=c.size),t.$$.dirty&15&&n(18,s=Hi(l,f,d,g)),t.$$.dirty&262144&&n(6,u=`font-size: ${s}px`)},[f,d,g,l,r,p,u,o,a,i,h,$,k,z,V,H,_,j,s,c,F,U,v]}class Ua extends x{constructor(e){super(),X(this,e,ja,Ra,Y,{})}}function Ka(t){let e;return{c(){e=O("span"),e.textContent=`at ${t[0]} ${t[1]}`},m(n,r){N(n,e,r)},p:B,d(n){n&&C(e)}}}function za(t){let e,n,r,i=(t[1]||t[0])&&Ka(t);return{c(){e=O("footer"),n=O("a"),n.textContent="kangasta / pileon",r=I(),i&&i.c(),y(n,"href","https://github.com/kangasta/pileon.git"),y(n,"target","_blank"),y(e,"class","svelte-16t3ryr")},m(a,o){N(a,e,o),T(e,n),T(e,r),i&&i.m(e,null)},p(a,[o]){(a[1]||a[0])&&i.p(a,o)},i:B,o:B,d(a){a&&C(e),i&&i.d()}}}function qa(t){const e={}.VITE_TAG??"",n="ac952dd63b912528eb6eccd54a360af96b269c8e".slice(0,8);return[e,n]}class Ba extends x{constructor(e){super(),X(this,e,qa,za,Y,{})}}function Va(t){let e,n,r,i,a;return{c(){e=O("button"),n=re(t[0]),y(e,"aria-pressed",r=t[1]?"true":"false"),e.disabled=t[1],y(e,"class","svelte-jc3xzr"),K(e,"pressed",t[1])},m(o,l){N(o,e,l),T(e,n),i||(a=te(e,"click",function(){ue(t[2])&&t[2].apply(this,arguments)}),i=!0)},p(o,[l]){t=o,l&1&&Be(n,t[0]),l&2&&r!==(r=t[1]?"true":"false")&&y(e,"aria-pressed",r),l&2&&(e.disabled=t[1]),l&2&&K(e,"pressed",t[1])},i:B,o:B,d(o){o&&C(e),i=!1,a()}}}function Ha(t,e,n){let r,i,a;ge(t,Ae,c=>n(4,a=c));let{target:o}=e,{value:l}=e;const{update:s}=Ae,u=()=>{};return t.$$set=c=>{"target"in c&&n(3,o=c.target),"value"in c&&n(0,l=c.value)},t.$$.update=()=>{t.$$.dirty&25&&n(1,i=a[o]===l),t.$$.dirty&11&&n(2,r=i?u:()=>s(c=>({...c,[o]:l})))},[l,i,r,o,a]}class le extends x{constructor(e){super(),X(this,e,Ha,Va,Y,{target:3,value:0})}}function vn(t){let e,n;return e=new _e({props:{icon:"Help",label:"Help",onClick:t[1].help}}),{c(){R(e.$$.fragment)},m(r,i){L(e,r,i),n=!0},p(r,i){const a={};i&2&&(a.onClick=r[1].help),e.$set(a)},i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function pn(t){let e,n;return e=new _e({props:{icon:"Shuffle",label:"Shuffle",onClick:t[1].shuffle}}),{c(){R(e.$$.fragment)},m(r,i){L(e,r,i),n=!0},p(r,i){const a={};i&2&&(a.onClick=r[1].shuffle),e.$set(a)},i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function bn(t){let e,n;return e=new _e({props:{icon:"Undo",label:"Undo",onClick:t[1].undo}}),{c(){R(e.$$.fragment)},m(r,i){L(e,r,i),n=!0},p(r,i){const a={};i&2&&(a.onClick=r[1].undo),e.$set(a)},i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function yn(t){let e,n;return e=new Ot({props:{title:"Settings",$$slots:{default:[Wa]},$$scope:{ctx:t}}}),e.$on("close",t[2]("close")),{c(){R(e.$$.fragment)},m(r,i){L(e,r,i),n=!0},p(r,i){const a={};i&8&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Wa(t){let e,n,r,i,a,o,l,s,u,c,f,d,g,h,_,p,A,$,k,j,W,z,V,H,F,U,v,m,w,D,P;return o=new le({props:{target:"game",value:"deck"}}),s=new le({props:{target:"game",value:"pileon"}}),h=new le({props:{target:"colors",value:"default"}}),p=new le({props:{target:"colors",value:"standard"}}),$=new le({props:{target:"colors",value:"four-color"}}),H=new le({props:{target:"size",value:"default"}}),U=new le({props:{target:"size",value:"bridge"}}),m=new le({props:{target:"size",value:"poker"}}),D=new le({props:{target:"size",value:"small"}}),{c(){e=O("table"),n=O("tr"),r=O("th"),r.textContent="Game:",i=I(),a=O("td"),R(o.$$.fragment),l=re(" / "),R(s.$$.fragment),u=I(),c=O("tr"),f=O("th"),f.textContent="Colors:",d=I(),g=O("td"),R(h.$$.fragment),_=re(" / "),R(p.$$.fragment),A=re(" / "),R($.$$.fragment),k=I(),j=O("tr"),W=O("th"),W.textContent="Size:",z=I(),V=O("td"),R(H.$$.fragment),F=re(" / "),R(U.$$.fragment),v=re(" / "),R(m.$$.fragment),w=re(" / "),R(D.$$.fragment),y(r,"class","svelte-uw79fp"),y(a,"class","svelte-uw79fp"),y(f,"class","svelte-uw79fp"),y(g,"class","svelte-uw79fp"),y(W,"class","svelte-uw79fp"),y(V,"class","svelte-uw79fp"),y(e,"class","svelte-uw79fp")},m(E,q){N(E,e,q),T(e,n),T(n,r),T(n,i),T(n,a),L(o,a,null),T(a,l),L(s,a,null),T(e,u),T(e,c),T(c,f),T(c,d),T(c,g),L(h,g,null),T(g,_),L(p,g,null),T(g,A),L($,g,null),T(e,k),T(e,j),T(j,W),T(j,z),T(j,V),L(H,V,null),T(V,F),L(U,V,null),T(V,v),L(m,V,null),T(V,w),L(D,V,null),P=!0},p:B,i(E){P||(b(o.$$.fragment,E),b(s.$$.fragment,E),b(h.$$.fragment,E),b(p.$$.fragment,E),b($.$$.fragment,E),b(H.$$.fragment,E),b(U.$$.fragment,E),b(m.$$.fragment,E),b(D.$$.fragment,E),P=!0)},o(E){S(o.$$.fragment,E),S(s.$$.fragment,E),S(h.$$.fragment,E),S(p.$$.fragment,E),S($.$$.fragment,E),S(H.$$.fragment,E),S(U.$$.fragment,E),S(m.$$.fragment,E),S(D.$$.fragment,E),P=!1},d(E){E&&C(e),M(o),M(s),M(h),M(p),M($),M(H),M(U),M(m),M(D)}}}function Ja(t){let e,n,r,i,a,o,l,s,u=t[1].help!==void 0&&vn(t),c=t[1].shuffle!==void 0&&pn(t);i=new _e({props:{icon:"Menu",label:"Settings",onClick:t[2]("open")}});let f=t[1].undo!==void 0&&bn(t),d=t[0]&&yn(t);return{c(){e=O("div"),u&&u.c(),n=I(),c&&c.c(),r=I(),R(i.$$.fragment),a=I(),f&&f.c(),o=I(),d&&d.c(),l=On(),y(e,"class","menu svelte-uw79fp")},m(g,h){N(g,e,h),u&&u.m(e,null),T(e,n),c&&c.m(e,null),T(e,r),L(i,e,null),T(e,a),f&&f.m(e,null),N(g,o,h),d&&d.m(g,h),N(g,l,h),s=!0},p(g,[h]){g[1].help!==void 0?u?(u.p(g,h),h&2&&b(u,1)):(u=vn(g),u.c(),b(u,1),u.m(e,n)):u&&(G(),S(u,1,1,()=>{u=null}),Q()),g[1].shuffle!==void 0?c?(c.p(g,h),h&2&&b(c,1)):(c=pn(g),c.c(),b(c,1),c.m(e,r)):c&&(G(),S(c,1,1,()=>{c=null}),Q()),g[1].undo!==void 0?f?(f.p(g,h),h&2&&b(f,1)):(f=bn(g),f.c(),b(f,1),f.m(e,null)):f&&(G(),S(f,1,1,()=>{f=null}),Q()),g[0]?d?(d.p(g,h),h&1&&b(d,1)):(d=yn(g),d.c(),b(d,1),d.m(l.parentNode,l)):d&&(G(),S(d,1,1,()=>{d=null}),Q())},i(g){s||(b(u),b(c),b(i.$$.fragment,g),b(f),b(d),s=!0)},o(g){S(u),S(c),S(i.$$.fragment,g),S(f),S(d),s=!1},d(g){g&&(C(e),C(o),C(l)),u&&u.d(),c&&c.d(),M(i),f&&f.d(),d&&d.d(g)}}}function Ga(t,e,n){let r;ge(t,De,o=>n(1,r=o));let i=!1;return[i,r,o=>l=>{n(0,i=o==="open"),l.stopPropagation()}]}class Qa extends x{constructor(e){super(),X(this,e,Ga,Ja,Y,{})}}function Ya(t){let e,n,r,i,a,o,l,s,u;e=new Qa({});var c=t[0];function f(d,g){return{}}return c&&(r=Pt(c,f())),o=new Ba({}),{c(){R(e.$$.fragment),n=I(),r&&R(r.$$.fragment),i=I(),a=I(),R(o.$$.fragment)},m(d,g){L(e,d,g),N(d,n,g),r&&L(r,d,g),N(d,i,g),N(d,a,g),L(o,d,g),l=!0,s||(u=te(document.body,"keydown",t[1]),s=!0)},p(d,[g]){if(g&1&&c!==(c=d[0])){if(r){G();const h=r;S(h.$$.fragment,1,0,()=>{M(h,1)}),Q()}c?(r=Pt(c,f()),R(r.$$.fragment),b(r.$$.fragment,1),L(r,i.parentNode,i)):r=null}},i(d){l||(b(e.$$.fragment,d),r&&b(r.$$.fragment,d),b(o.$$.fragment,d),l=!0)},o(d){S(e.$$.fragment,d),r&&S(r.$$.fragment,d),S(o.$$.fragment,d),l=!1},d(d){d&&(C(n),C(i),C(a)),M(e,d),r&&M(r,d),M(o,d),s=!1,u()}}}function Za(t,e,n){let r,i,a;ge(t,De,l=>n(3,i=l)),ge(t,Ae,l=>n(2,a=l));const o=l=>{l.key==="z"&&(l.ctrlKey||l.metaKey)&&i.undo!==void 0&&i.undo(l)};return t.$$.update=()=>{t.$$.dirty&4&&n(0,r=a.game==="deck"?Ii:Ua)},[r,o,a]}class Xa extends x{constructor(e){super(),X(this,e,Za,Ya,Y,{})}}new Xa({target:document.body});
