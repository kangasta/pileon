var ir=Object.defineProperty;var ar=(t,e,n)=>e in t?ir(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ut=(t,e,n)=>(ar(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function H(){}function or(t,e){for(const n in e)t[n]=e[n];return t}function _n(t){return t()}function Pt(){return Object.create(null)}function he(t){t.forEach(_n)}function ue(t){return typeof t=="function"}function Y(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function lr(t){return Object.keys(t).length===0}function wn(t,...e){if(t==null){for(const r of e)r(void 0);return H}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function ur(t){let e;return wn(t,n=>e=n)(),e}function ge(t,e,n){t.$$.on_destroy.push(wn(e,n))}function Sn(t,e,n,r){if(t){const i=kn(t,e,n,r);return t[0](i)}}function kn(t,e,n,r){return t[1]&&r?or(n.ctx.slice(),t[1](r(e))):n.ctx}function Cn(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const a=[],o=Math.max(e.dirty.length,i.length);for(let l=0;l<o;l+=1)a[l]=e.dirty[l]|i[l];return a}return e.dirty|i}return e.dirty}function Tn(t,e,n,r,i,a){if(i){const o=kn(e,n,r,a);t.p(o,i)}}function Nn(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function C(t,e){t.appendChild(e)}function A(t,e,n){t.insertBefore(e,n||null)}function T(t){t.parentNode&&t.parentNode.removeChild(t)}function Ae(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function O(t){return document.createElement(t)}function Ze(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function te(t){return document.createTextNode(t)}function j(){return te(" ")}function On(){return te("")}function ne(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function b(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function sr(t){return Array.from(t.childNodes)}function $e(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ne(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}let We;function fr(){if(We===void 0){We=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{We=!0}}return We}function cr(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const r=O("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const i=fr();let a;return i?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",a=ne(window,"message",o=>{o.source===r.contentWindow&&e()})):(r.src="about:blank",r.onload=()=>{a=ne(r.contentWindow,"resize",e),e()}),C(t,r),()=>{(i||a&&r.contentWindow)&&a(),T(r)}}function B(t,e,n){t.classList.toggle(e,!!n)}function dr(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}function Ft(t,e){return new t(e)}let Ke;function je(t){Ke=t}function He(){if(!Ke)throw new Error("Function called outside component initialization");return Ke}function yt(t){He().$$.on_mount.push(t)}function An(t){He().$$.on_destroy.push(t)}function _t(){const t=He();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const a=dr(e,n,{cancelable:r});return i.slice().forEach(o=>{o.call(t,a)}),!a.defaultPrevented}return!0}}function gr(t,e){return He().$$.context.set(t,e),e}function En(t){return He().$$.context.get(t)}function ct(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const Te=[],$t=[];let Oe=[];const Lt=[],hr=Promise.resolve();let dt=!1;function mr(){dt||(dt=!0,hr.then(Dn))}function ze(t){Oe.push(t)}const st=new Set;let we=0;function Dn(){if(we!==0)return;const t=Ke;do{try{for(;we<Te.length;){const e=Te[we];we++,je(e),pr(e.$$)}}catch(e){throw Te.length=0,we=0,e}for(je(null),Te.length=0,we=0;$t.length;)$t.pop()();for(let e=0;e<Oe.length;e+=1){const n=Oe[e];st.has(n)||(st.add(n),n())}Oe.length=0}while(Te.length);for(;Lt.length;)Lt.pop()();dt=!1,st.clear(),je(t)}function pr(t){if(t.fragment!==null){t.update(),he(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ze)}}function vr(t){const e=[],n=[];Oe.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),Oe=e}const Ge=new Set;let be;function G(){be={r:0,c:[],p:be}}function Q(){be.r||he(be.c),be=be.p}function v(t,e){t&&t.i&&(Ge.delete(t),t.i(e))}function _(t,e,n,r){if(t&&t.o){if(Ge.has(t))return;Ge.add(t),be.c.push(()=>{Ge.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function ie(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function R(t){t&&t.c()}function M(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),ze(()=>{const a=t.$$.on_mount.map(_n).filter(ue);t.$$.on_destroy?t.$$.on_destroy.push(...a):he(a),t.$$.on_mount=[]}),i.forEach(ze)}function I(t,e){const n=t.$$;n.fragment!==null&&(vr(n.after_update),he(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function br(t,e){t.$$.dirty[0]===-1&&(Te.push(t),mr(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function X(t,e,n,r,i,a,o,l=[-1]){const u=Ke;je(t);const s=t.$$={fragment:null,ctx:[],props:a,update:H,not_equal:i,bound:Pt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Pt(),dirty:l,skip_bound:!1,root:e.target||u.$$.root};o&&o(s.root);let f=!1;if(s.ctx=n?n(t,e.props||{},(c,g,...d)=>{const h=d.length?d[0]:g;return s.ctx&&i(s.ctx[c],s.ctx[c]=h)&&(!s.skip_bound&&s.bound[c]&&s.bound[c](h),f&&br(t,c)),g}):[],s.update(),f=!0,he(s.before_update),s.fragment=r?r(s.ctx):!1,e.target){if(e.hydrate){const c=sr(e.target);s.fragment&&s.fragment.l(c),c.forEach(T)}else s.fragment&&s.fragment.c();e.intro&&v(t.$$.fragment),M(t,e.target,e.anchor),Dn()}je(u)}class x{constructor(){ut(this,"$$");ut(this,"$$set")}$destroy(){I(this,1),this.$destroy=H}$on(e,n){if(!ue(n))return H;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!lr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const yr="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(yr);function _r(t){let e;return{c(){e=O("span"),e.textContent=`at ${t[0]} ${t[1]}`},m(n,r){A(n,e,r)},p:H,d(n){n&&T(e)}}}function wr(t){let e,n,r,i=(t[1]||t[0])&&_r(t);return{c(){e=O("footer"),n=O("a"),n.textContent="kangasta / pileon",r=j(),i&&i.c(),b(n,"href","https://github.com/kangasta/pileon.git"),b(n,"target","_blank"),b(e,"class","svelte-16t3ryr")},m(a,o){A(a,e,o),C(e,n),C(e,r),i&&i.m(e,null)},p(a,[o]){(a[1]||a[0])&&i.p(a,o)},i:H,o:H,d(a){a&&T(e),i&&i.d()}}}function Sr(t){const e={}.VITE_TAG??"",n="6f10ec08ca34008d5c8e985d6cb988e09610b49d".slice(0,8);return[e,n]}class kr extends x{constructor(e){super(),X(this,e,Sr,wr,Y,{})}}const Se=[];function wt(t,e=H){let n;const r=new Set;function i(l){if(Y(t,l)&&(t=l,n)){const u=!Se.length;for(const s of r)s[1](),Se.push(s,t);if(u){for(let s=0;s<Se.length;s+=2)Se[s][0](Se[s+1]);Se.length=0}}}function a(l){i(l(t))}function o(l,u=H){const s=[l,u];return r.add(s),r.size===1&&(n=e(i,a)||H),l(t),()=>{r.delete(s),r.size===0&&n&&(n(),n=null)}}return{set:i,update:a,subscribe:o}}const Pn="settings",Cr={game:"pileon",colors:"default",size:"default"},Tr=JSON.parse(localStorage.getItem(Pn)),Ee=wt(Tr??Cr);Ee.subscribe(t=>localStorage.setItem(Pn,JSON.stringify(t)));const Nr={},De=wt(Nr);/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Fn=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Xe=Fn.join(","),$n=typeof Element>"u",ye=$n?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,xe=!$n&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},et=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),a=i===""||i==="true",o=a||n&&e&&t(e.parentNode);return o},Or=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},Ln=function(e,n,r){if(et(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(Xe));return n&&ye.call(e,Xe)&&i.unshift(e),i=i.filter(r),i},Mn=function t(e,n,r){for(var i=[],a=Array.from(e);a.length;){var o=a.shift();if(!et(o,!1))if(o.tagName==="SLOT"){var l=o.assignedElements(),u=l.length?l:o.children,s=t(u,!0,r);r.flatten?i.push.apply(i,s):i.push({scopeParent:o,candidates:s})}else{var f=ye.call(o,Xe);f&&r.filter(o)&&(n||!e.includes(o))&&i.push(o);var c=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),g=!et(c,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(c&&g){var d=t(c===!0?o.children:c.children,!0,r);r.flatten?i.push.apply(i,d):i.push({scopeParent:o,candidates:d})}else a.unshift.apply(a,o.children)}}return i},In=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},ve=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Or(e))&&!In(e)?0:e.tabIndex},Ar=function(e,n){var r=ve(e);return r<0&&n&&!In(e)?0:r},Er=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},Rn=function(e){return e.tagName==="INPUT"},Dr=function(e){return Rn(e)&&e.type==="hidden"},Pr=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},Fr=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},$r=function(e){if(!e.name)return!0;var n=e.form||xe(e),r=function(l){return n.querySelectorAll('input[type="radio"][name="'+l+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var a=Fr(i,e.form);return!a||a===e},Lr=function(e){return Rn(e)&&e.type==="radio"},Mr=function(e){return Lr(e)&&!$r(e)},Ir=function(e){var n,r=e&&xe(e),i=(n=r)===null||n===void 0?void 0:n.host,a=!1;if(r&&r!==e){var o,l,u;for(a=!!((o=i)!==null&&o!==void 0&&(l=o.ownerDocument)!==null&&l!==void 0&&l.contains(i)||e!=null&&(u=e.ownerDocument)!==null&&u!==void 0&&u.contains(e));!a&&i;){var s,f,c;r=xe(i),i=(s=r)===null||s===void 0?void 0:s.host,a=!!((f=i)!==null&&f!==void 0&&(c=f.ownerDocument)!==null&&c!==void 0&&c.contains(i))}}return a},Mt=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},Rr=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var a=ye.call(e,"details>summary:first-of-type"),o=a?e.parentElement:e;if(ye.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var l=e;e;){var u=e.parentElement,s=xe(e);if(u&&!u.shadowRoot&&i(u)===!0)return Mt(e);e.assignedSlot?e=e.assignedSlot:!u&&s!==e.ownerDocument?e=s.host:e=u}e=l}if(Ir(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Mt(e);return!1},jr=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return ye.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},tt=function(e,n){return!(n.disabled||et(n)||Dr(n)||Rr(n,e)||Pr(n)||jr(n))},gt=function(e,n){return!(Mr(n)||ve(n)<0||!tt(e,n))},Ur=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},Kr=function t(e){var n=[],r=[];return e.forEach(function(i,a){var o=!!i.scopeParent,l=o?i.scopeParent:i,u=Ar(l,o),s=o?t(i.candidates):l;u===0?o?n.push.apply(n,s):n.push(l):r.push({documentOrder:a,tabIndex:u,item:i,isScope:o,content:s})}),r.sort(Er).reduce(function(i,a){return a.isScope?i.push.apply(i,a.content):i.push(a.content),i},[]).concat(n)},zr=function(e,n){n=n||{};var r;return n.getShadowRoot?r=Mn([e],n.includeContainer,{filter:gt.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:Ur}):r=Ln(e,n.includeContainer,gt.bind(null,n)),Kr(r)},Br=function(e,n){n=n||{};var r;return n.getShadowRoot?r=Mn([e],n.includeContainer,{filter:tt.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=Ln(e,n.includeContainer,tt.bind(null,n)),r},ke=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ye.call(e,Xe)===!1?!1:gt(n,e)},Vr=Fn.concat("iframe").join(","),ft=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ye.call(e,Vr)===!1?!1:tt(n,e)};/*!
* focus-trap 7.5.2
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function It(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?It(Object(n),!0).forEach(function(r){qr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qr(t,e,n){return e=Wr(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hr(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wr(t){var e=Hr(t,"string");return typeof e=="symbol"?e:String(e)}var jt={activateTrap:function(e,n){if(e.length>0){var r=e[e.length-1];r!==n&&r.pause()}var i=e.indexOf(n);i===-1||e.splice(i,1),e.push(n)},deactivateTrap:function(e,n){var r=e.indexOf(n);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},Jr=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Gr=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},Ue=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},Qr=function(e){return Ue(e)&&!e.shiftKey},Yr=function(e){return Ue(e)&&e.shiftKey},Ut=function(e){return setTimeout(e,0)},Kt=function(e,n){var r=-1;return e.every(function(i,a){return n(i)?(r=a,!1):!0}),r},Ie=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},Je=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Zr=[],Xr=function(e,n){var r=(n==null?void 0:n.document)||document,i=(n==null?void 0:n.trapStack)||Zr,a=Rt({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Qr,isKeyBackward:Yr},n),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},l,u=function(m,p,w){return m&&m[p]!==void 0?m[p]:a[w||p]},s=function(m,p){var w=typeof(p==null?void 0:p.composedPath)=="function"?p.composedPath():void 0;return o.containerGroups.findIndex(function(E){var z=E.container,D=E.tabbableNodes;return z.contains(m)||(w==null?void 0:w.includes(z))||D.find(function(V){return V===m})})},f=function(m){var p=a[m];if(typeof p=="function"){for(var w=arguments.length,E=new Array(w>1?w-1:0),z=1;z<w;z++)E[z-1]=arguments[z];p=p.apply(void 0,E)}if(p===!0&&(p=void 0),!p){if(p===void 0||p===!1)return p;throw new Error("`".concat(m,"` was specified but was not a node, or did not return a node"))}var D=p;if(typeof p=="string"&&(D=r.querySelector(p),!D))throw new Error("`".concat(m,"` as selector refers to no known node"));return D},c=function(){var m=f("initialFocus");if(m===!1)return!1;if(m===void 0||!ft(m,a.tabbableOptions))if(s(r.activeElement)>=0)m=r.activeElement;else{var p=o.tabbableGroups[0],w=p&&p.firstTabbableNode;m=w||f("fallbackFocus")}if(!m)throw new Error("Your focus-trap needs to have at least one focusable element");return m},g=function(){if(o.containerGroups=o.containers.map(function(m){var p=zr(m,a.tabbableOptions),w=Br(m,a.tabbableOptions),E=p.length>0?p[0]:void 0,z=p.length>0?p[p.length-1]:void 0,D=w.find(function(Z){return ke(Z)}),V=w.slice().reverse().find(function(Z){return ke(Z)}),ee=!!p.find(function(Z){return ve(Z)>0});return{container:m,tabbableNodes:p,focusableNodes:w,posTabIndexesFound:ee,firstTabbableNode:E,lastTabbableNode:z,firstDomTabbableNode:D,lastDomTabbableNode:V,nextTabbableNode:function(me){var Le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,fe=p.indexOf(me);return fe<0?Le?w.slice(w.indexOf(me)+1).find(function(Me){return ke(Me)}):w.slice(0,w.indexOf(me)).reverse().find(function(Me){return ke(Me)}):p[fe+(Le?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function(m){return m.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!f("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function(m){return m.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},d=function U(m){if(m!==!1&&m!==r.activeElement){if(!m||!m.focus){U(c());return}m.focus({preventScroll:!!a.preventScroll}),o.mostRecentlyFocusedNode=m,Jr(m)&&m.select()}},h=function(m){var p=f("setReturnFocus",m);return p||(p===!1?!1:m)},N=function(m){var p=m.target,w=m.event,E=m.isBackward,z=E===void 0?!1:E;p=p||Je(w),g();var D=null;if(o.tabbableGroups.length>0){var V=s(p,w),ee=V>=0?o.containerGroups[V]:void 0;if(V<0)z?D=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:D=o.tabbableGroups[0].firstTabbableNode;else if(z){var Z=Kt(o.tabbableGroups,function(ot){var lt=ot.firstTabbableNode;return p===lt});if(Z<0&&(ee.container===p||ft(p,a.tabbableOptions)&&!ke(p,a.tabbableOptions)&&!ee.nextTabbableNode(p,!1))&&(Z=V),Z>=0){var me=Z===0?o.tabbableGroups.length-1:Z-1,Le=o.tabbableGroups[me];D=ve(p)>=0?Le.lastTabbableNode:Le.lastDomTabbableNode}else Ue(w)||(D=ee.nextTabbableNode(p,!1))}else{var fe=Kt(o.tabbableGroups,function(ot){var lt=ot.lastTabbableNode;return p===lt});if(fe<0&&(ee.container===p||ft(p,a.tabbableOptions)&&!ke(p,a.tabbableOptions)&&!ee.nextTabbableNode(p))&&(fe=V),fe>=0){var Me=fe===o.tabbableGroups.length-1?0:fe+1,Dt=o.tabbableGroups[Me];D=ve(p)>=0?Dt.firstTabbableNode:Dt.firstDomTabbableNode}else Ue(w)||(D=ee.nextTabbableNode(p))}}else D=f("fallbackFocus");return D},k=function(m){var p=Je(m);if(!(s(p,m)>=0)){if(Ie(a.clickOutsideDeactivates,m)){l.deactivate({returnFocus:a.returnFocusOnDeactivate});return}Ie(a.allowOutsideClick,m)||m.preventDefault()}},F=function(m){var p=Je(m),w=s(p,m)>=0;if(w||p instanceof Document)w&&(o.mostRecentlyFocusedNode=p);else{m.stopImmediatePropagation();var E,z=!0;if(o.mostRecentlyFocusedNode)if(ve(o.mostRecentlyFocusedNode)>0){var D=s(o.mostRecentlyFocusedNode),V=o.containerGroups[D].tabbableNodes;if(V.length>0){var ee=V.findIndex(function(Z){return Z===o.mostRecentlyFocusedNode});ee>=0&&(a.isKeyForward(o.recentNavEvent)?ee+1<V.length&&(E=V[ee+1],z=!1):ee-1>=0&&(E=V[ee-1],z=!1))}}else o.containerGroups.some(function(Z){return Z.tabbableNodes.some(function(me){return ve(me)>0})})||(z=!1);else z=!1;z&&(E=N({target:o.mostRecentlyFocusedNode,isBackward:a.isKeyBackward(o.recentNavEvent)})),d(E||o.mostRecentlyFocusedNode||c())}o.recentNavEvent=void 0},y=function(m){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=m;var w=N({event:m,isBackward:p});w&&(Ue(m)&&m.preventDefault(),d(w))},S=function(m){if(Gr(m)&&Ie(a.escapeDeactivates,m)!==!1){m.preventDefault(),l.deactivate();return}(a.isKeyForward(m)||a.isKeyBackward(m))&&y(m,a.isKeyBackward(m))},K=function(m){var p=Je(m);s(p,m)>=0||Ie(a.clickOutsideDeactivates,m)||Ie(a.allowOutsideClick,m)||(m.preventDefault(),m.stopImmediatePropagation())},P=function(){if(o.active)return jt.activateTrap(i,l),o.delayInitialFocusTimer=a.delayInitialFocus?Ut(function(){d(c())}):d(c()),r.addEventListener("focusin",F,!0),r.addEventListener("mousedown",k,{capture:!0,passive:!1}),r.addEventListener("touchstart",k,{capture:!0,passive:!1}),r.addEventListener("click",K,{capture:!0,passive:!1}),r.addEventListener("keydown",S,{capture:!0,passive:!1}),l},L=function(){if(o.active)return r.removeEventListener("focusin",F,!0),r.removeEventListener("mousedown",k,!0),r.removeEventListener("touchstart",k,!0),r.removeEventListener("click",K,!0),r.removeEventListener("keydown",S,!0),l},q=function(m){var p=m.some(function(w){var E=Array.from(w.removedNodes);return E.some(function(z){return z===o.mostRecentlyFocusedNode})});p&&d(c())},W=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(q):void 0,$=function(){W&&(W.disconnect(),o.active&&!o.paused&&o.containers.map(function(m){W.observe(m,{subtree:!0,childList:!0})}))};return l={get active(){return o.active},get paused(){return o.paused},activate:function(m){if(o.active)return this;var p=u(m,"onActivate"),w=u(m,"onPostActivate"),E=u(m,"checkCanFocusTrap");E||g(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=r.activeElement,p==null||p();var z=function(){E&&g(),P(),$(),w==null||w()};return E?(E(o.containers.concat()).then(z,z),this):(z(),this)},deactivate:function(m){if(!o.active)return this;var p=Rt({onDeactivate:a.onDeactivate,onPostDeactivate:a.onPostDeactivate,checkCanReturnFocus:a.checkCanReturnFocus},m);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,L(),o.active=!1,o.paused=!1,$(),jt.deactivateTrap(i,l);var w=u(p,"onDeactivate"),E=u(p,"onPostDeactivate"),z=u(p,"checkCanReturnFocus"),D=u(p,"returnFocus","returnFocusOnDeactivate");w==null||w();var V=function(){Ut(function(){D&&d(h(o.nodeFocusedBeforeActivation)),E==null||E()})};return D&&z?(z(h(o.nodeFocusedBeforeActivation)).then(V,V),this):(V(),this)},pause:function(m){if(o.paused||!o.active)return this;var p=u(m,"onPause"),w=u(m,"onPostPause");return o.paused=!0,p==null||p(),L(),$(),w==null||w(),this},unpause:function(m){if(!o.paused||!o.active)return this;var p=u(m,"onUnpause"),w=u(m,"onPostUnpause");return o.paused=!1,p==null||p(),g(),P(),$(),w==null||w(),this},updateContainerElements:function(m){var p=[].concat(m).filter(Boolean);return o.containers=p.map(function(w){return typeof w=="string"?r.querySelector(w):w}),o.active&&g(),$(),this}},l.updateContainerElements(e),l};const jn=()=>(Math.random()+1).toString(36).substring(5);function xr(t){let e,n,r,i,a,o,l,u,s,f;return{c(){e=O("div"),n=O("button"),r=Ze("svg"),i=Ze("path"),o=j(),l=O("div"),u=te(t[1]),b(i,"fill","none"),b(i,"stroke","currentColor"),b(i,"stroke-linecap","round"),b(i,"stroke-linejoin","round"),b(i,"stroke-width","1"),b(i,"d",a=t[3][t[0]].path),b(r,"viewBox","0 0 16 16"),b(r,"class","svelte-1nd3ako"),b(n,"aria-labelledby",t[4]),b(n,"class","clickable svelte-1nd3ako"),B(n,"open",open),b(l,"class","label svelte-1nd3ako"),b(l,"id",t[4]),b(e,"class","icon-button clickable svelte-1nd3ako")},m(c,g){A(c,e,g),C(e,n),C(n,r),C(r,i),C(e,o),C(e,l),C(l,u),s||(f=[ne(n,"click",function(){ue(t[2])&&t[2].apply(this,arguments)}),ne(e,"click",function(){ue(t[2])&&t[2].apply(this,arguments)})],s=!0)},p(c,[g]){t=c,g&1&&a!==(a=t[3][t[0]].path)&&b(i,"d",a),g&0&&B(n,"open",open),g&2&&$e(u,t[1])},i:H,o:H,d(c){c&&T(e),s=!1,he(f)}}}function ei(t,e,n){const r={Close:{path:"M 3 3 L 13 13 M 3 13 L 13 3"},Help:{path:"M 8 12 L 8 12 M 8 10 L 8 9 C 8 7 10 8 10 6 A 2 2 0 1 0 6 6 M 8 1.5 A 6.5 6.5 0 0 1 8 14.5 A 6.5 6.5 0 0 1 8 1.5"},Menu:{path:"M 2 4 L 14 4 M 2 8 L 14 8 M 2 12 L 14 12"},Shuffle:{path:"M 5 2 L 2 5 L 5 8 M 2 5 L 12 5 M 11 14 L 14 11 L 11 8 M 14 11 L 4 11"},Undo:{path:"M 5 3 L 2 6 L 5 9 M 2 6 L 10 6 A 3 3 0 1 1 10 13 L 8 13"}};let{icon:i}=e,{label:a}=e,{onClick:o}=e;const l=`${jn()}-label`;return t.$$set=u=>{"icon"in u&&n(0,i=u.icon),"label"in u&&n(1,a=u.label),"onClick"in u&&n(2,o=u.onClick)},[i,a,o,r,l]}class _e extends x{constructor(e){super(),X(this,e,ei,xr,Y,{icon:0,label:1,onClick:2})}}function ti(t){let e,n,r,i,a,o,l,u,s,f,c;u=new _e({props:{icon:"Close",label:"Close",onClick:t[3]}});const g=t[5].default,d=Sn(g,t,t[4],null);return{c(){e=O("div"),n=j(),r=O("div"),i=O("div"),a=O("h2"),o=te(t[0]),l=j(),R(u.$$.fragment),s=j(),f=O("div"),d&&d.c(),b(e,"class","backdrop svelte-kdw544"),b(a,"id",t[2]),b(a,"class","svelte-kdw544"),b(i,"class","header svelte-kdw544"),b(f,"class","content svelte-kdw544"),b(r,"class","modal svelte-kdw544"),b(r,"role","dialog"),b(r,"aria-labelledby",t[2]),b(r,"id",t[1])},m(h,N){A(h,e,N),A(h,n,N),A(h,r,N),C(r,i),C(i,a),C(a,o),C(i,l),M(u,i,null),C(r,s),C(r,f),d&&d.m(f,null),c=!0},p(h,[N]){(!c||N&1)&&$e(o,h[0]),d&&d.p&&(!c||N&16)&&Tn(d,g,h,h[4],c?Cn(g,h[4],N,null):Nn(h[4]),null)},i(h){c||(v(u.$$.fragment,h),v(d,h),c=!0)},o(h){_(u.$$.fragment,h),_(d,h),c=!1},d(h){h&&(T(e),T(n),T(r)),I(u),d&&d.d(h)}}}function ni(t,e,n){let{$$slots:r={},$$scope:i}=e,{title:a}=e;const o=`modal-${jn()}`,l=`${o}-title`;yt(()=>{const f=Xr(`#${o}`,{clickOutsideDeactivates:!0,onDeactivate:()=>s()});f.activate();const c=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{f.deactivate(),document.body.style.overflow=c}});const u=_t(),s=()=>{u("close")};return t.$$set=f=>{"title"in f&&n(0,a=f.title),"$$scope"in f&&n(4,i=f.$$scope)},[a,o,l,s,i,r]}class St extends x{constructor(e){super(),X(this,e,ni,ti,Y,{title:0})}}function ri(t){let e,n,r,i,a;return{c(){e=O("button"),n=te(t[0]),b(e,"aria-pressed",r=t[1]?"true":"false"),e.disabled=t[1],b(e,"class","svelte-jc3xzr"),B(e,"pressed",t[1])},m(o,l){A(o,e,l),C(e,n),i||(a=ne(e,"click",function(){ue(t[2])&&t[2].apply(this,arguments)}),i=!0)},p(o,[l]){t=o,l&1&&$e(n,t[0]),l&2&&r!==(r=t[1]?"true":"false")&&b(e,"aria-pressed",r),l&2&&(e.disabled=t[1]),l&2&&B(e,"pressed",t[1])},i:H,o:H,d(o){o&&T(e),i=!1,a()}}}function ii(t,e,n){let r,i,a;ge(t,Ee,f=>n(4,a=f));let{target:o}=e,{value:l}=e;const{update:u}=Ee,s=()=>{};return t.$$set=f=>{"target"in f&&n(3,o=f.target),"value"in f&&n(0,l=f.value)},t.$$.update=()=>{t.$$.dirty&25&&n(1,i=a[o]===l),t.$$.dirty&11&&n(2,r=i?s:()=>u(f=>({...f,[o]:l})))},[l,i,r,o,a]}class le extends x{constructor(e){super(),X(this,e,ii,ri,Y,{target:3,value:0})}}function zt(t){let e,n;return e=new _e({props:{icon:"Help",label:"Help",onClick:t[1].help}}),{c(){R(e.$$.fragment)},m(r,i){M(e,r,i),n=!0},p(r,i){const a={};i&2&&(a.onClick=r[1].help),e.$set(a)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){I(e,r)}}}function Bt(t){let e,n;return e=new _e({props:{icon:"Shuffle",label:"Shuffle",onClick:t[1].shuffle}}),{c(){R(e.$$.fragment)},m(r,i){M(e,r,i),n=!0},p(r,i){const a={};i&2&&(a.onClick=r[1].shuffle),e.$set(a)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){I(e,r)}}}function Vt(t){let e,n;return e=new _e({props:{icon:"Undo",label:"Undo",onClick:t[1].undo}}),{c(){R(e.$$.fragment)},m(r,i){M(e,r,i),n=!0},p(r,i){const a={};i&2&&(a.onClick=r[1].undo),e.$set(a)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){I(e,r)}}}function qt(t){let e,n;return e=new St({props:{title:"Settings",$$slots:{default:[ai]},$$scope:{ctx:t}}}),e.$on("close",t[2]("close")),{c(){R(e.$$.fragment)},m(r,i){M(e,r,i),n=!0},p(r,i){const a={};i&8&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){I(e,r)}}}function ai(t){let e,n,r,i,a,o,l,u,s,f,c,g,d,h,N,k,F,y,S,K,P,L,q,W,$,U,m,p,w,E,z;return o=new le({props:{target:"game",value:"deck"}}),u=new le({props:{target:"game",value:"pileon"}}),h=new le({props:{target:"colors",value:"default"}}),k=new le({props:{target:"colors",value:"standard"}}),y=new le({props:{target:"colors",value:"four-color"}}),W=new le({props:{target:"size",value:"default"}}),U=new le({props:{target:"size",value:"bridge"}}),p=new le({props:{target:"size",value:"poker"}}),E=new le({props:{target:"size",value:"small"}}),{c(){e=O("table"),n=O("tr"),r=O("th"),r.textContent="Game:",i=j(),a=O("td"),R(o.$$.fragment),l=te(" / "),R(u.$$.fragment),s=j(),f=O("tr"),c=O("th"),c.textContent="Colors:",g=j(),d=O("td"),R(h.$$.fragment),N=te(" / "),R(k.$$.fragment),F=te(" / "),R(y.$$.fragment),S=j(),K=O("tr"),P=O("th"),P.textContent="Size:",L=j(),q=O("td"),R(W.$$.fragment),$=te(" / "),R(U.$$.fragment),m=te(" / "),R(p.$$.fragment),w=te(" / "),R(E.$$.fragment),b(r,"class","svelte-uw79fp"),b(a,"class","svelte-uw79fp"),b(c,"class","svelte-uw79fp"),b(d,"class","svelte-uw79fp"),b(P,"class","svelte-uw79fp"),b(q,"class","svelte-uw79fp"),b(e,"class","svelte-uw79fp")},m(D,V){A(D,e,V),C(e,n),C(n,r),C(n,i),C(n,a),M(o,a,null),C(a,l),M(u,a,null),C(e,s),C(e,f),C(f,c),C(f,g),C(f,d),M(h,d,null),C(d,N),M(k,d,null),C(d,F),M(y,d,null),C(e,S),C(e,K),C(K,P),C(K,L),C(K,q),M(W,q,null),C(q,$),M(U,q,null),C(q,m),M(p,q,null),C(q,w),M(E,q,null),z=!0},p:H,i(D){z||(v(o.$$.fragment,D),v(u.$$.fragment,D),v(h.$$.fragment,D),v(k.$$.fragment,D),v(y.$$.fragment,D),v(W.$$.fragment,D),v(U.$$.fragment,D),v(p.$$.fragment,D),v(E.$$.fragment,D),z=!0)},o(D){_(o.$$.fragment,D),_(u.$$.fragment,D),_(h.$$.fragment,D),_(k.$$.fragment,D),_(y.$$.fragment,D),_(W.$$.fragment,D),_(U.$$.fragment,D),_(p.$$.fragment,D),_(E.$$.fragment,D),z=!1},d(D){D&&T(e),I(o),I(u),I(h),I(k),I(y),I(W),I(U),I(p),I(E)}}}function oi(t){let e,n,r,i,a,o,l,u,s=t[1].help!==void 0&&zt(t),f=t[1].shuffle!==void 0&&Bt(t);i=new _e({props:{icon:"Menu",label:"Settings",onClick:t[2]("open")}});let c=t[1].undo!==void 0&&Vt(t),g=t[0]&&qt(t);return{c(){e=O("div"),s&&s.c(),n=j(),f&&f.c(),r=j(),R(i.$$.fragment),a=j(),c&&c.c(),o=j(),g&&g.c(),l=On(),b(e,"class","menu svelte-uw79fp")},m(d,h){A(d,e,h),s&&s.m(e,null),C(e,n),f&&f.m(e,null),C(e,r),M(i,e,null),C(e,a),c&&c.m(e,null),A(d,o,h),g&&g.m(d,h),A(d,l,h),u=!0},p(d,[h]){d[1].help!==void 0?s?(s.p(d,h),h&2&&v(s,1)):(s=zt(d),s.c(),v(s,1),s.m(e,n)):s&&(G(),_(s,1,1,()=>{s=null}),Q()),d[1].shuffle!==void 0?f?(f.p(d,h),h&2&&v(f,1)):(f=Bt(d),f.c(),v(f,1),f.m(e,r)):f&&(G(),_(f,1,1,()=>{f=null}),Q()),d[1].undo!==void 0?c?(c.p(d,h),h&2&&v(c,1)):(c=Vt(d),c.c(),v(c,1),c.m(e,null)):c&&(G(),_(c,1,1,()=>{c=null}),Q()),d[0]?g?(g.p(d,h),h&1&&v(g,1)):(g=qt(d),g.c(),v(g,1),g.m(l.parentNode,l)):g&&(G(),_(g,1,1,()=>{g=null}),Q())},i(d){u||(v(s),v(f),v(i.$$.fragment,d),v(c),v(g),u=!0)},o(d){_(s),_(f),_(i.$$.fragment,d),_(c),_(g),u=!1},d(d){d&&(T(e),T(o),T(l)),s&&s.d(),f&&f.d(),I(i),c&&c.d(),g&&g.d(d)}}}function li(t,e,n){let r;ge(t,De,o=>n(1,r=o));let i=!1;return[i,r,o=>l=>{n(0,i=o==="open"),l.stopPropagation()}]}class ui extends x{constructor(e){super(),X(this,e,li,oi,Y,{})}}var re={},ae={};function Pe(t){"@babel/helpers - typeof";return Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pe(t)}Object.defineProperty(ae,"__esModule",{value:!0});var ht=ae.Cards=ae.CardSuits=Hn=ae.CardStringType=ae.Card=void 0;function se(t,e,n){return e=zn(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Un(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zn(r.key),r)}}function Kn(t,e,n){return e&&Ht(t.prototype,e),n&&Ht(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function zn(t){var e=si(t,"string");return Pe(e)==="symbol"?e:String(e)}function si(t,e){if(Pe(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Pe(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fi(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Be(t,e)}function ci(t){var e=Vn();return function(){var r=Ve(t),i;if(e){var a=Ve(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return Bn(this,i)}}function Bn(t,e){if(e&&(Pe(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return di(t)}function di(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mt(t){var e=typeof Map=="function"?new Map:void 0;return mt=function(r){if(r===null||!gi(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return Qe(r,arguments,Ve(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Be(i,r)},mt(t)}function Qe(t,e,n){return Vn()?Qe=Reflect.construct.bind():Qe=function(i,a,o){var l=[null];l.push.apply(l,a);var u=Function.bind.apply(i,l),s=new u;return o&&Be(s,o.prototype),s},Qe.apply(null,arguments)}function Vn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gi(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function Be(t,e){return Be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Be(t,e)}function Ve(t){return Ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ve(t)}function hi(t,e){return bi(t)||vi(t,e)||pi(t,e)||mi()}function mi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pi(t,e){if(t){if(typeof t=="string")return Wt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wt(t,e)}}function Wt(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vi(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],u=!0,s=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(f){s=!0,i=f}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw i}}return l}}function bi(t){if(Array.isArray(t))return t}var qn=function(t){return t[t.Hearts=0]="Hearts",t[t.Spades=1]="Spades",t[t.Diamonds=2]="Diamonds",t[t.Clubs=3]="Clubs",t}({});ae.CardSuits=qn;var kt=function(t){return t.Char="CHAR",t.Short="SHORT",t.Long="LONG",t.ShortEmoji="SHORT_EMOJI",t.ShortSuit="SHORT_SUIT",t.LongSuit="LONG_SUIT",t.EmojiSuit="EMOJI_SUIT",t.ShortValue="SHORT_VALUE",t.LongValue="LONG_VALUE",t}({}),Hn=ae.CardStringType=kt,yi={"♥":0,"♠":1,"♦":2,"♣":3,h:0,s:1,d:2,c:3},_i={A:1,T:10,J:11,Q:12,K:13},wi=function(e){var n=/^([2-9ATJQK]{1}|10)([♥♠♦♣hsdc]{1})$/,r=e.match(n);if(!r)throw new Error('Could not parse card from "'.concat(e,'". Input should match ').concat(n,"."));var i=hi(r,3);i[0];var a=i[1],o=i[2],l=Number(a),u=(Number.isNaN(l)?_i[a]:l)-1;return yi[o]*13+u},Si=function(e){var n=/^_[a-z]+$/i;if(e.match(n)){var r=Array.from(e.slice(1));return r.map(function(i){var a=i.charCodeAt(0);return a<91?a-65:a-97+26})}return e.split(/[\s,]+/)},ki=function(t){fi(n,t);var e=ci(n);function n(r){var i;if(Un(this,n),typeof r=="number")i=e.call(this,r);else{i=e.call(this);var a=Array.isArray(r)?r:Si(r);a.forEach(function(o){return i.push(new oe(o))})}return Bn(i)}return Kn(n,[{key:"toString",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:oe.StringType.Short;return i===kt.Char?"_"+this.map(function(a){return a.toString(i)}).join(""):this.map(function(a){return a.toString(i)}).join(", ")}}]),n}(mt(Array));ht=ae.Cards=ki;var Ci=function(e){return typeof e=="string"?wi(e):e instanceof oe?e.num:e},oe=function(){function t(e){Un(this,t),se(this,"num",void 0),this.num=Ci(e)}return Kn(t,[{key:"suit",get:function(){return t.getSuit(this.num)}},{key:"value",get:function(){return t.getValue(this.num)}},{key:"toString",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.StringType.Long;switch(n){case t.StringType.Short:return this.toString(t.StringType.ShortValue)+this.toString(t.StringType.ShortSuit);case t.StringType.ShortEmoji:return this.toString(t.StringType.ShortValue)+this.toString(t.StringType.EmojiSuit);case t.StringType.Long:return this.toString(t.StringType.LongValue)+" of "+this.toString(t.StringType.LongSuit);case t.StringType.Char:return t.chars[this.num];case t.StringType.ShortSuit:return t.shortSuits[this.suit];case t.StringType.LongSuit:return t.longSuits[this.suit];case t.StringType.EmojiSuit:return t.emojiSuits[this.suit];case t.StringType.ShortValue:return t.shortValues[this.value===13?0:this.value];case t.StringType.LongValue:return t.longValues[this.value===13?0:this.value]}throw new Error("Unsupported output type")}}],[{key:"fromJSON",value:function(n){var r=n.num;return new t(r)}},{key:"getSuit",value:function(n){return Math.floor(n/13)%4}},{key:"getValue",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return n%13||r?n%13:13}},{key:"compare",value:function(n,r){return r.value-n.value}}]),t}();ae.Card=oe;se(oe,"Suits",qn);se(oe,"StringType",kt);se(oe,"chars","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz");se(oe,"emojiSuits",["♥","♠","♦","♣"]);se(oe,"shortSuits",["h","s","d","c"]);se(oe,"longSuits",["hearts","spades","diamonds","clubs"]);se(oe,"shortValues",["A","2","3","4","5","6","7","8","9","T","J","Q","K"]);se(oe,"longValues",["ace","two","three","four","five","six","seven","eight","nine","ten","jack","queen","king"]);var rt={},J={};Object.defineProperty(J,"__esModule",{value:!0});J.uniqueFilter=J.shuffle=J.last=J.isSorted=J.getCombinationsHelper=J.getCombinations=J.arraySubtraction=void 0;var Ti=function(e,n){return e.filter(function(r){return!n.includes(r)})};J.arraySubtraction=Ti;var Wn=function t(e,n,r,i,a){if(i.length>=n)a.push(i);else for(var o=r;o<e.length;o++)t(e,n,o+1,i.concat(e[o]),a)};J.getCombinationsHelper=Wn;var Ni=function(e,n){var r=[];return Wn(e,n,0,[],r),r};J.getCombinations=Ni;var Oi=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=r?-1:1;try{return e.reduce(function(a,o){if(i*n(a,o)<=0)return o;throw new Error}),!0}catch{return!1}};J.isSorted=Oi;var Ai=function(e){return e[e.length-1]};J.last=Ai;var Ei=function(e){for(var n=e.length-1;n>0;n--){var r=Math.floor(Math.random()*(n+1)),i=[e[r],e[n]];e[n]=i[0],e[r]=i[1]}return e};J.shuffle=Ei;var Di=function(e,n,r){return r.indexOf(e)===n};J.uniqueFilter=Di;Object.defineProperty(rt,"__esModule",{value:!0});rt.Deck=void 0;var Jt=J,Re=ae;function qe(t){"@babel/helpers - typeof";return qe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe(t)}function Pi(t){return Mi(t)||Li(t)||$i(t)||Fi()}function Fi(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $i(t,e){if(t){if(typeof t=="string")return pt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pt(t,e)}}function Li(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Mi(t){if(Array.isArray(t))return pt(t)}function pt(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ii(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Jn(r.key),r)}}function Ri(t,e,n){return e&&Gt(t.prototype,e),n&&Gt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ji(t,e,n){return e=Jn(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jn(t){var e=Ui(t,"string");return qe(e)==="symbol"?e:String(e)}function Ui(t,e){if(qe(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qe(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ki=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;Ii(this,t),ji(this,"cards",void 0),this.cards=Pi(Array(52*n).keys()).map(function(r){return new Re.Card(r)}),e&&this.shuffle()}return Ri(t,[{key:"shuffle",value:function(){(0,Jt.shuffle)(this.cards)}},{key:"isShuffled",value:function(){return!(0,Jt.isSorted)(this.cards,function(n,r){return n.num-r.num})}},{key:"cardsRemaining",get:function(){return this.cards.length}},{key:"pop",value:function(){return this.cards.pop()}},{key:"popN",value:function(n){for(var r=[],i,a=0;a<n&&(i=this.pop());a++)r.push(i);return r}},{key:"toString",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Re.Card.StringType.Char;return new Re.Cards(this.cards).toString(n)}}],[{key:"fromJSON",value:function(n){var r=n.cards,i=new t(!1,0);return i.cards=r.map(function(a){return Re.Card.fromJSON(a)}),i}},{key:"fromString",value:function(n){var r=new t(!1,0);return r.cards=new Re.Cards(n),r}}]),t}();rt.Deck=Ki;var Fe={},it={};Object.defineProperty(it,"__esModule",{value:!0});it.uuid4=void 0;var zi=function(e){var n;do n=Math.random().toString(16).slice(2,e+2);while(n.length<e&&e<=12);return n},Bi=function(){var e=[8,4,4,4,12],n=e.map(zi).join("-").split("");return n[14]="4",n[19]=(Math.floor(Math.random()*64)%4+8).toString(16),n.join("")};it.uuid4=Bi;Object.defineProperty(Fe,"__esModule",{value:!0});Fe.HandRank=Fe.Hand=void 0;var Ce=J,ce=ae,Vi=it;function de(t){"@babel/helpers - typeof";return de=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(t)}function pe(t){return Ji(t)||Wi(t)||Hi(t)||qi()}function qi(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hi(t,e){if(t){if(typeof t=="string")return vt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vt(t,e)}}function Wi(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ji(t){if(Array.isArray(t))return vt(t)}function vt(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Gi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gn(r.key),r)}}function Qi(t,e,n){return e&&Qt(t.prototype,e),n&&Qt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ye(t,e,n){return e=Gn(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gn(t){var e=Yi(t,"string");return de(e)==="symbol"?e:String(e)}function Yi(t,e){if(de(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(de(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qn=function(t){return t[t.High=0]="High",t[t.Pair=5]="Pair",t[t.TwoPairs=10]="TwoPairs",t[t.ThreeOfAKind=15]="ThreeOfAKind",t[t.Straight=20]="Straight",t[t.Flush=25]="Flush",t[t.FullHouse=30]="FullHouse",t[t.FourOfAKind=35]="FourOfAKind",t[t.StraightFlush=40]="StraightFlush",t[t.FiveOfAKind=45]="FiveOfAKind",t}({});Fe.HandRank=Qn;var Yn=function(){function t(e,n,r){Gi(this,t),Ye(this,"uuid",void 0),Ye(this,"rank",void 0),Ye(this,"cards",void 0),this.rank=e,this.cards=n,this.uuid=r||(0,Vi.uuid4)()}return Qi(t,[{key:"getCardsString",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ce.Card.StringType.Short;return new ce.Cards(this.cards).toString(n)}},{key:"toString",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ce.Card.StringType.Short,i=ce.Card.StringType.LongValue,a=function(u){return n.cards[u].toString(i)},o=this.getCardsString(r);switch(this.rank){case t.Rank.FiveOfAKind:return"Five of a kind, ".concat(a(0),"s (").concat(o,")");case t.Rank.StraightFlush:return"Straigth flush, ".concat(a(0)," high (").concat(o,")");case t.Rank.FourOfAKind:return"Four of a kind, ".concat(a(0),"s (").concat(o,")");case t.Rank.FullHouse:return"Full house, ".concat(a(0),"s over ").concat(a(3),"s (").concat(o,")");case t.Rank.Flush:return"Flush, ".concat(a(0)," high (").concat(o,")");case t.Rank.Straight:return"Straigth, ".concat(a(0)," high (").concat(o,")");case t.Rank.ThreeOfAKind:return"Three of a kind, ".concat(a(0),"s (").concat(o,")");case t.Rank.TwoPairs:return"Two pairs, ".concat(a(0),"s and ").concat(a(2),"s (").concat(o,")");case t.Rank.Pair:return"Pair, ".concat(a(0),"s (").concat(o,")");case t.Rank.High:return"".concat(a(0).replace(/^\w/,function(l){return l.toUpperCase()})," high (").concat(o,")")}throw new Error("Unsupported rank value")}}],[{key:"fromJSON",value:function(n){var r=n.rank,i=n.cards,a=n.uuid;return new t(r,i.map(ce.Card.fromJSON),a)}},{key:"solve",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,i,a;return(i=t.isNumOfAKind(5,n))?a=t.Rank.FiveOfAKind:(i=t.isStraightFlush(n,r))?a=t.Rank.StraightFlush:(i=t.isNumOfAKind(4,n))?a=t.Rank.FourOfAKind:(i=t.isFullHouse(n))?a=t.Rank.FullHouse:(i=t.isFlush(n,r))?a=t.Rank.Flush:(i=t.isStraight(n,r))?a=t.Rank.Straight:(i=t.isNumOfAKind(3,n))?a=t.Rank.ThreeOfAKind:(i=t.isTwoPairs(n))?a=t.Rank.TwoPairs:(i=t.isNumOfAKind(2,n))?a=t.Rank.Pair:(i=[],a=t.Rank.High),i=t.fillWithKickers(i,n),new t(a,i)}},{key:"solveHoldEm",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(i===0)return t.solve([].concat(pe(n),pe(r)));for(var a=(0,Ce.getCombinations)(n,n.length-i),o=(0,Ce.getCombinations)(r,Math.min(r.length,i)),l=[],u=0;u<a.length;u++)for(var s=0;s<o.length;s++)l.push(t.solve([].concat(pe(a[u]),pe(o[s]))));return t.max.apply(t,l)}},{key:"compare",value:function(n,r){var i;if(n.cards.length!==r.cards.length)throw new Error("Comparing hands with different number of cards");if((i=r.rank-n.rank)!==0)return i;for(var a=0;a<n.cards.length;a++)if((i=ce.Card.compare(n.cards[a],r.cards[a]))!==0)return i;return 0}},{key:"winners",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=t.max.apply(t,r);return r.filter(function(o){return!t.compare(o,a)})}},{key:"max",value:function(){for(var n=function(l,u){return t.compare(l,u)<0?l:u},r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return i.reduce(function(o,l){return n(o,l)})}},{key:"fillWithKickers",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5;return r=(0,Ce.arraySubtraction)(r,n).sort(ce.Card.compare),[].concat(pe(n),pe(r)).slice(0,i)}},{key:"getUniqueValues",value:function(n){return n.map(function(r){return r.value}).filter(Ce.uniqueFilter).sort(function(r,i){return i-r})}},{key:"isNumOfAKind",value:function(n,r){for(var i=t.getUniqueValues(r),a,o=function(f){if(a=r.filter(function(c){return c.value==i[f]}),a.length>=n)return{v:a}},l=0;l<i.length;l++){var u=o(l);if(de(u)==="object")return u.v}return!1}},{key:"isNumOfAKindCombination",value:function(n,r){for(var i=[],a=0;a<n.length;a++){var o=t.isNumOfAKind(n[a],(0,Ce.arraySubtraction)(r,i));if(o===!1)return!1;o=o,i.push.apply(i,pe(o))}return i}},{key:"isStraightFlush",value:function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,i=[],a=function(s){if(i=n.filter(function(c){return c.suit===s}),i.length<r)return"continue";var f=t.isStraight(i,r);if(f)return{v:f}},o=0;o<4;o++){var l=a(o);if(l!=="continue"&&de(l)==="object")return l.v}return!1}},{key:"isFullHouse",value:function(n){return t.isNumOfAKindCombination([3,2],n)}},{key:"isFlush",value:function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,i=function(u){var s=n.filter(function(f){return f.suit==u});if(s.length>=r)return{v:s.sort(ce.Card.compare).slice(0,r)}},a=0;a<4;a++){var o=i(a);if(de(o)==="object")return o.v}return!1}},{key:"isStraight",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,i=t.getUniqueValues(n);if(i.length<r)return!1;i.includes(13)&&i.push(0);for(var a=[i[0]],o=1;o<i.length&&a.length<r;o++)(0,Ce.last)(a)-i[o]===1?a.push(i[o]):a=[i[o]];return a.length==r?a.map(function(l){return n.find(function(u){return u.value===(l||13)})}):!1}},{key:"isTwoPairs",value:function(n){return t.isNumOfAKindCombination([2,2],n)}}]),t}();Fe.Hand=Yn;Ye(Yn,"Rank",Qn);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Card",{enumerable:!0,get:function(){return e.Card}}),Object.defineProperty(t,"CardStringType",{enumerable:!0,get:function(){return e.CardStringType}}),Object.defineProperty(t,"Cards",{enumerable:!0,get:function(){return e.Cards}}),Object.defineProperty(t,"Deck",{enumerable:!0,get:function(){return n.Deck}}),Object.defineProperty(t,"Hand",{enumerable:!0,get:function(){return r.Hand}});var e=ae,n=rt,r=Fe})(re);const Zi=4.5,Xi=5,xi=3,Yt=7,ea=5,Zn=t=>{switch(t){case"bridge":return{height:Yt,width:Zi};case"poker":return{height:Yt,width:Xi};case"small":return{height:ea,width:xi}}},Ct="card-appearance",ta={size:"bridge",fourColor:!1},na=({size:t,colors:e})=>({size:t==="default"?"poker":t,fourColor:e==="four-color"}),Xn=t=>{const e=wt(ta,n=>(Ee.subscribe(r=>n(t(r))),()=>{}));return gr(Ct,e),e},Tt=()=>En(Ct),ra=t=>{const e=En(Ct);if(e){const n=ur(Ee);e.set(t(n))}},bt=(t,e,n={})=>r=>{(Array.isArray(t)?t:[t]).includes(r.code)&&e!==void 0&&(n.preventDefault&&r.preventDefault(),e())};function ia(t){let e,n;return{c(){e=Ze("svg"),n=Ze("path"),b(n,"d",t[1]),b(n,"fill","CurrentColor"),b(e,"viewBox","0 0 16 20"),b(e,"class","svelte-1jimf84"),B(e,"flip",t[0])},m(r,i){A(r,e,i),C(e,n)},p(r,[i]){i&2&&b(n,"d",r[1]),i&1&&B(e,"flip",r[0])},i:H,o:H,d(r){r&&T(e)}}}function aa(t,e,n){let r,{suit:i=null}=e,{flip:a=!1}=e;const o=l=>{switch(l){case"hearts":return"M 8 2 C 9 0 11 0 12 0 C 13 0 16 1 16 6 C 16 8 15.5 10 14 12 L 8 20 L 2 12 C 0.5 10 0 8 0 6 C 0 1 3 0 4 0 C 5 0 7 0 8 2";case"spades":return"M 8 0 L 13 5 C 16 8 16 10 16 12 C 16 14 14 16 12 16 C 11 16 9 16 8 14 L 12 20 L 4 20 L 8 14 C 7 16 5 16 4 16 C 2 16 0 14 0 12 C 0 10 0 8 3 5 L 8 0";case"diamonds":return"M 8 0 L 16 10 L 8 20 L 0 10 L 8 0";case"clubs":return"M 8 0 C 10 0 12 2 12 4 C 12 6 11 8 8 10 C 9 8 10 7 12 7 C 14 7 16 9 16 12 C 16 14 14 16 12 16 C 11 16 9 16 8 14 L 12 20 L 4 20 L 8 14 C 7 16 5 16 4 16 C 2 16 0 14 0 12 C 0 9 2 7 4 7 C 6 7 7 8 8 10 C 5 8 4 6 4 4 C 4 2 6 0 8 0";default:return null}};return t.$$set=l=>{"suit"in l&&n(2,i=l.suit),"flip"in l&&n(0,a=l.flip)},t.$$.update=()=>{t.$$.dirty&4&&n(1,r=o(i))},[a,r,i]}class xn extends x{constructor(e){super(),X(this,e,aa,ia,Y,{suit:2,flip:0})}}function Zt(t,e,n){const r=t.slice();return r[5]=e[n],r}function Xt(t,e,n){const r=t.slice();return r[8]=e[n],r}function xt(t){let e,n,r;return n=new xn({props:{suit:t[0],flip:t[8].toLowerCase()==="d"}}),{c(){e=O("span"),R(n.$$.fragment),b(e,"class","svelte-1sm49dl")},m(i,a){A(i,e,a),M(n,e,null),r=!0},p(i,a){const o={};a&1&&(o.suit=i[0]),a&2&&(o.flip=i[8].toLowerCase()==="d"),n.$set(o)},i(i){r||(v(n.$$.fragment,i),r=!0)},o(i){_(n.$$.fragment,i),r=!1},d(i){i&&T(e),I(n)}}}function en(t){let e,n,r,i,a=ie(t[5].split("")),o=[];for(let u=0;u<a.length;u+=1)o[u]=xt(Xt(t,a,u));const l=u=>_(o[u],1,1,()=>{o[u]=null});return{c(){e=O("div");for(let u=0;u<o.length;u+=1)o[u].c();n=j(),b(e,"class",r="row "+t[3](t[5])+" svelte-1sm49dl")},m(u,s){A(u,e,s);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);C(e,n),i=!0},p(u,s){if(s&7){a=ie(u[5].split(""));let f;for(f=0;f<a.length;f+=1){const c=Xt(u,a,f);o[f]?(o[f].p(c,s),v(o[f],1)):(o[f]=xt(c),o[f].c(),v(o[f],1),o[f].m(e,n))}for(G(),f=a.length;f<o.length;f+=1)l(f);Q()}(!i||s&2&&r!==(r="row "+u[3](u[5])+" svelte-1sm49dl"))&&b(e,"class",r)},i(u){if(!i){for(let s=0;s<a.length;s+=1)v(o[s]);i=!0}},o(u){o=o.filter(Boolean);for(let s=0;s<o.length;s+=1)_(o[s]);i=!1},d(u){u&&T(e),Ae(o,u)}}}function oa(t){let e,n,r=ie(t[2](t[1])),i=[];for(let o=0;o<r.length;o+=1)i[o]=en(Zt(t,r,o));const a=o=>_(i[o],1,1,()=>{i[o]=null});return{c(){e=O("div");for(let o=0;o<i.length;o+=1)i[o].c();b(e,"class","center-pattern svelte-1sm49dl")},m(o,l){A(o,e,l);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(e,null);n=!0},p(o,[l]){if(l&15){r=ie(o[2](o[1]));let u;for(u=0;u<r.length;u+=1){const s=Zt(o,r,u);i[u]?(i[u].p(s,l),v(i[u],1)):(i[u]=en(s),i[u].c(),v(i[u],1),i[u].m(e,null))}for(G(),u=r.length;u<i.length;u+=1)a(u);Q()}},i(o){if(!n){for(let l=0;l<r.length;l+=1)v(i[l]);n=!0}},o(o){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)_(i[l]);n=!1},d(o){o&&T(e),Ae(i,o)}}}function la(t,e,n){let{suit:r}=e,{rank:i}=e;const a={A:["U"],2:["U","D"],3:["U","U","D"],4:["UU","DD"],5:["UU","U","DD"],6:["UU","UU","DD"],7:["UU","u","UU","DD"],8:["UU","UU","DD","DD"],9:["UU","u","UU","DD","DD"],10:["UU","u","UU","DD","d","DD"]},o=u=>a[u]??[],l=u=>u.toUpperCase()===u?"grow":"";return t.$$set=u=>{"suit"in u&&n(0,r=u.suit),"rank"in u&&n(1,i=u.rank)},[r,i,o,l]}class ua extends x{constructor(e){super(),X(this,e,la,oa,Y,{suit:0,rank:1})}}function sa(t){let e,n;const r=t[1].default,i=Sn(r,t,t[0],null);return{c(){e=O("span"),i&&i.c(),b(e,"class","screen-reader-only svelte-3uotpv")},m(a,o){A(a,e,o),i&&i.m(e,null),n=!0},p(a,[o]){i&&i.p&&(!n||o&1)&&Tn(i,r,a,a[0],n?Cn(r,a[0],o,null):Nn(a[0]),null)},i(a){n||(v(i,a),n=!0)},o(a){_(i,a),n=!1},d(a){a&&T(e),i&&i.d(a)}}}function fa(t,e,n){let{$$slots:r={},$$scope:i}=e;return t.$$set=a=>{"$$scope"in a&&n(0,i=a.$$scope)},[i,r]}class ca extends x{constructor(e){super(),X(this,e,fa,sa,Y,{})}}function tn(t,e,n){const r=t.slice();return r[16]=e[n],r}function nn(t){let e,n;return e=new ca({props:{$$slots:{default:[da]},$$scope:{ctx:t}}}),{c(){R(e.$$.fragment)},m(r,i){M(e,r,i),n=!0},p(r,i){const a={};i&524320&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){I(e,r)}}}function da(t){let e;return{c(){e=te(t[5])},m(n,r){A(n,e,r)},p(n,r){r&32&&$e(e,n[5])},d(n){n&&T(e)}}}function rn(t){let e,n;return e=new ua({props:{suit:t[7],rank:t[8]}}),{c(){R(e.$$.fragment)},m(r,i){M(e,r,i),n=!0},p(r,i){const a={};i&128&&(a.suit=r[7]),i&256&&(a.rank=r[8]),e.$set(a)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){I(e,r)}}}function an(t){let e,n,r,i,a,o,l,u,s,f,c;l=new xn({props:{suit:t[7]}});let g=!t[10]&&rn(t);return{c(){e=O("div"),n=O("div"),r=te(t[8]),a=j(),o=O("div"),R(l.$$.fragment),u=j(),s=O("div"),g&&g.c(),f=j(),b(n,"class",i="rank rank-"+t[8]+" svelte-t2vtqs"),b(o,"class","suit svelte-t2vtqs"),b(e,"aria-hidden","true"),b(e,"class",t[16]+" label svelte-t2vtqs"),b(s,"class","center svelte-t2vtqs"),B(s,"face",t[6])},m(d,h){A(d,e,h),C(e,n),C(n,r),C(e,a),C(e,o),M(l,o,null),A(d,u,h),A(d,s,h),g&&g.m(s,null),C(s,f),c=!0},p(d,h){(!c||h&256)&&$e(r,d[8]),(!c||h&256&&i!==(i="rank rank-"+d[8]+" svelte-t2vtqs"))&&b(n,"class",i);const N={};h&128&&(N.suit=d[7]),l.$set(N),d[10]?g&&(G(),_(g,1,1,()=>{g=null}),Q()):g?(g.p(d,h),h&1024&&v(g,1)):(g=rn(d),g.c(),v(g,1),g.m(s,f)),(!c||h&64)&&B(s,"face",d[6])},i(d){c||(v(l.$$.fragment,d),v(g),c=!0)},o(d){_(l.$$.fragment,d),_(g),c=!1},d(d){d&&(T(e),T(u),T(s)),I(l),g&&g.d()}}}function ga(t){let e,n,r,i,a=t[3]&&nn(t),o=ie(t[13]),l=[];for(let s=0;s<o.length;s+=1)l[s]=an(tn(t,o,s));const u=s=>_(l[s],1,1,()=>{l[s]=null});return{c(){e=O("div"),a&&a.c(),n=j();for(let s=0;s<l.length;s+=1)l[s].c();b(e,"class",r="card "+t[7]+" stack-"+t[2]+" svelte-t2vtqs"),B(e,"bridge",t[11]),B(e,"small",t[10]),B(e,"fourColor",t[9]),B(e,"empty",t[0]),B(e,"hidden",t[4]),B(e,"shadow",t[1]),B(e,"visible",t[3])},m(s,f){A(s,e,f),a&&a.m(e,null),C(e,n);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);i=!0},p(s,[f]){if(s[3]?a?(a.p(s,f),f&8&&v(a,1)):(a=nn(s),a.c(),v(a,1),a.m(e,n)):a&&(G(),_(a,1,1,()=>{a=null}),Q()),f&9664){o=ie(s[13]);let c;for(c=0;c<o.length;c+=1){const g=tn(s,o,c);l[c]?(l[c].p(g,f),v(l[c],1)):(l[c]=an(g),l[c].c(),v(l[c],1),l[c].m(e,null))}for(G(),c=o.length;c<l.length;c+=1)u(c);Q()}(!i||f&132&&r!==(r="card "+s[7]+" stack-"+s[2]+" svelte-t2vtqs"))&&b(e,"class",r),(!i||f&2180)&&B(e,"bridge",s[11]),(!i||f&1156)&&B(e,"small",s[10]),(!i||f&644)&&B(e,"fourColor",s[9]),(!i||f&133)&&B(e,"empty",s[0]),(!i||f&148)&&B(e,"hidden",s[4]),(!i||f&134)&&B(e,"shadow",s[1]),(!i||f&140)&&B(e,"visible",s[3])},i(s){if(!i){v(a);for(let f=0;f<o.length;f+=1)v(l[f]);i=!0}},o(s){_(a),l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)_(l[f]);i=!1},d(s){s&&T(e),a&&a.d(),Ae(l,s)}}}function ha(t,e,n){let r,i,a,o,l,u,s,f,c,g;const d=Tt();ge(t,d,S=>n(15,g=S));let{card:h=null}=e,{empty:N=!1}=e,{shadow:k=!1}=e,{stack:F=void 0}=e;const y=["top","bottom"];return t.$$set=S=>{"card"in S&&n(14,h=S.card),"empty"in S&&n(0,N=S.empty),"shadow"in S&&n(1,k=S.shadow),"stack"in S&&n(2,F=S.stack)},t.$$.update=()=>{t.$$.dirty&32768&&n(11,r=g.size==="bridge"),t.$$.dirty&32768&&n(10,i=g.size==="small"),t.$$.dirty&32768&&n(9,a=g.fourColor),t.$$.dirty&16386&&n(4,o=h===null&&!k),t.$$.dirty&19&&n(3,l=!(N||o||k)),t.$$.dirty&16392&&n(8,u=l&&h.toString(re.Card.StringType.ShortValue).replace("T","10")),t.$$.dirty&16392&&n(7,s=l&&h.toString(re.Card.StringType.LongSuit)),t.$$.dirty&16392&&n(6,f=l&&h.num%13>9),t.$$.dirty&16392&&n(5,c=l&&h.toString(re.Card.StringType.Long))},[N,k,F,l,o,c,f,s,u,a,i,r,d,y,h,g]}class at extends x{constructor(e){super(),X(this,e,ha,ga,Y,{card:14,empty:0,shadow:1,stack:2})}}function on(t,e,n){const r=t.slice();return r[19]=e[n].card,r[20]=e[n].shadow,r[21]=e[n].transform,r}function ln(t){let e,n;return e=new at({props:{card:t[0],empty:t[0]===void 0}}),{c(){R(e.$$.fragment)},m(r,i){M(e,r,i),n=!0},p(r,i){const a={};i&1&&(a.card=r[0]),i&1&&(a.empty=r[0]===void 0),e.$set(a)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){I(e,r)}}}function un(t){let e,n,r,i;return n=new at({props:{card:t[19],shadow:t[20]}}),{c(){e=O("div"),R(n.$$.fragment),r=j(),b(e,"class","shadow-container svelte-1ns87h6"),Ne(e,"transform",t[21])},m(a,o){A(a,e,o),M(n,e,null),C(e,r),i=!0},p(a,o){const l={};o&8&&(l.card=a[19]),o&8&&(l.shadow=a[20]),n.$set(l),(!i||o&8)&&Ne(e,"transform",a[21])},i(a){i||(v(n.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),i=!1},d(a){a&&T(e),I(n)}}}function ma(t){let e,n,r,i,a,o,l=!t[1]&&ln(t),u=ie(t[3]),s=[];for(let c=0;c<u.length;c+=1)s[c]=un(on(t,u,c));const f=c=>_(s[c],1,1,()=>{s[c]=null});return{c(){e=O("div"),n=O("div"),l&&l.c(),r=j();for(let c=0;c<s.length;c+=1)s[c].c();b(n,"aria-atomic","true"),b(n,"aria-live","polite"),b(e,"aria-label",t[2]),b(e,"aria-disabled",t[1]),b(e,"class","deck svelte-1ns87h6"),b(e,"role","button"),b(e,"tabindex","0"),B(e,"bridge",t[5]),B(e,"small",t[4]),B(e,"shuffling",t[1])},m(c,g){A(c,e,g),C(e,n),l&&l.m(n,null),C(n,r);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(n,null);i=!0,a||(o=[ne(e,"keydown",bt(["Space","Enter"],t[7],{preventDefault:!0})),ne(e,"click",t[7])],a=!0)},p(c,[g]){if(c[1]?l&&(G(),_(l,1,1,()=>{l=null}),Q()):l?(l.p(c,g),g&2&&v(l,1)):(l=ln(c),l.c(),v(l,1),l.m(n,r)),g&8){u=ie(c[3]);let d;for(d=0;d<u.length;d+=1){const h=on(c,u,d);s[d]?(s[d].p(h,g),v(s[d],1)):(s[d]=un(h),s[d].c(),v(s[d],1),s[d].m(n,null))}for(G(),d=u.length;d<s.length;d+=1)f(d);Q()}(!i||g&4)&&b(e,"aria-label",c[2]),(!i||g&2)&&b(e,"aria-disabled",c[1]),(!i||g&32)&&B(e,"bridge",c[5]),(!i||g&16)&&B(e,"small",c[4]),(!i||g&2)&&B(e,"shuffling",c[1])},i(c){if(!i){v(l);for(let g=0;g<u.length;g+=1)v(s[g]);i=!0}},o(c){_(l),s=s.filter(Boolean);for(let g=0;g<s.length;g+=1)_(s[g]);i=!1},d(c){c&&T(e),l&&l.d(),Ae(s,c),a=!1,he(o)}}}function pa(t,e,n,r){const i=t/r*e,a=.5*i/(n*52),o=1*i/(n*52);return`translate(${a}em , ${o}em)`}function va(t,e,n){let r,i,a,o,l,u;const s=Tt();ge(t,s,L=>n(16,u=L));let{numCards:f=52}=e,{numDecks:c=1}=e,{topCard:g=null}=e,{numShadows:d=10}=e,{shuffleAnimationSteps:h=4}=e,{shuffleAnimationMaxDistanceEm:N=.8}=e,{shuffleAnimationMaxRotateDeg:k=7}=e,{onClick:F=()=>{}}=e,y=0;function S(L,q){const W=p=>[1,q+2].includes(L)?0:(Math.random()*2-1)*p,$=W(N),U=W(N),m=W(k);return`translate(${$}em, ${U}em) rotate(${m}deg)`}function K(){y>0&&setTimeout(()=>{n(15,y-=1),K()},250)}function P(){if(!o)return F()}return t.$$set=L=>{"numCards"in L&&n(8,f=L.numCards),"numDecks"in L&&n(9,c=L.numDecks),"topCard"in L&&n(0,g=L.topCard),"numShadows"in L&&n(10,d=L.numShadows),"shuffleAnimationSteps"in L&&n(11,h=L.shuffleAnimationSteps),"shuffleAnimationMaxDistanceEm"in L&&n(12,N=L.shuffleAnimationMaxDistanceEm),"shuffleAnimationMaxRotateDeg"in L&&n(13,k=L.shuffleAnimationMaxRotateDeg),"onClick"in L&&n(14,F=L.onClick)},t.$$.update=()=>{t.$$.dirty&65536&&n(5,r=(u==null?void 0:u.size)==="bridge"),t.$$.dirty&65536&&n(4,i=(u==null?void 0:u.size)==="small"),t.$$.dirty&2817&&g===null&&f===52*c&&h>0&&(n(15,y=h+2),K()),t.$$.dirty&32768&&n(1,o=y>0),t.$$.dirty&36611&&n(3,a=g===void 0?[]:o?[...Array(d)].map(()=>({card:null,shadow:!1,transform:S(y,h)})):[...Array(d)].map((L,q)=>({card:void 0,shadow:!0,transform:pa(q,f,c,d)}))),t.$$.dirty&1&&n(2,l=g===void 0?"Shuffle the deck":"Draw a card")},[g,o,l,a,i,r,s,P,f,c,d,h,N,k,F,y,u]}class ba extends x{constructor(e){super(),X(this,e,va,ma,Y,{numCards:8,numDecks:9,topCard:0,numShadows:10,shuffleAnimationSteps:11,shuffleAnimationMaxDistanceEm:12,shuffleAnimationMaxRotateDeg:13,onClick:14})}}function ya(t){let e,n,r;return n=new ba({props:{onClick:t[2],topCard:t[1],numCards:t[0]}}),{c(){e=O("main"),R(n.$$.fragment),b(e,"class","svelte-1tag1lj")},m(i,a){A(i,e,a),M(n,e,null),r=!0},p(i,[a]){const o={};a&2&&(o.topCard=i[1]),a&1&&(o.numCards=i[0]),n.$set(o)},i(i){r||(v(n.$$.fragment,i),r=!0)},o(i){_(n.$$.fragment,i),r=!1},d(i){i&&T(e),I(n)}}}function _a(t,e,n){Xn(na);let r=new re.Deck,i=r.cardsRemaining,a=null;function o(){a!==void 0?n(1,a=r.pop()):(r=new re.Deck,n(1,a=null)),n(0,i=r.cardsRemaining)}const l=u=>{u.stopPropagation(),r=new re.Deck,n(1,a=null),n(0,i=r.cardsRemaining)};return yt(()=>{De.update(u=>({...u,shuffle:l}))}),An(()=>{De.update(u=>({...u,shuffle:void 0}))}),[i,a,o]}class wa extends x{constructor(e){super(),X(this,e,_a,ya,Y,{})}}const nt=(t,e)=>Zn(e).width+(t-1)*1.125,Sa=(t,e,n)=>t.length===0?"empty":e?`closed${n==="rank"?`, ${t[0].toString(re.CardStringType.LongValue)}s`:""}`:t.toString(re.CardStringType.Long),ka=(t,e,n,r,i=!1)=>{const a=Sa(new re.Cards(e),r,i),o=n>0?` ${n} cards selected: ${new re.Cards(e.slice(e.length-n)).toString(re.CardStringType.Long)}`:"";return`${t}: ${a}.${o}`},Ca=(t,e,n)=>{const r={sourceStack:e,cards:n};t.dataTransfer.setData("application/json",JSON.stringify(r)),t.dataTransfer.effectAllowed="move"},Ta=t=>{const{sourceStack:e,cards:n}=JSON.parse(t.dataTransfer.getData("application/json"));return{sourceStack:e,cards:n.map(re.Card.fromJSON)}};function Na(t){let e,n;return e=new at({props:{card:t[11]?null:t[0][0],stack:"left"}}),{c(){R(e.$$.fragment)},m(r,i){M(e,r,i),n=!0},p(r,i){const a={};i&2049&&(a.card=r[11]?null:r[0][0]),e.$set(a)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){I(e,r)}}}function Oa(t){let e,n;return e=new at({props:{empty:!0}}),{c(){R(e.$$.fragment)},m(r,i){M(e,r,i),n=!0},p:H,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){I(e,r)}}}function sn(t){let e,n,r;return n=new er({props:{cards:t[0].slice(1),capacity:t[1]-1,nested:!0,closed:t[2],index:t[3],isDraggableFn:t[4],selectedCardsN:t[5]}}),{c(){e=O("div"),R(n.$$.fragment),b(e,"class","nested svelte-o50ay1")},m(i,a){A(i,e,a),M(n,e,null),r=!0},p(i,a){const o={};a&1&&(o.cards=i[0].slice(1)),a&2&&(o.capacity=i[1]-1),a&4&&(o.closed=i[2]),a&8&&(o.index=i[3]),a&16&&(o.isDraggableFn=i[4]),a&32&&(o.selectedCardsN=i[5]),n.$set(o)},i(i){r||(v(n.$$.fragment,i),r=!0)},o(i){_(n.$$.fragment,i),r=!1},d(i){i&&T(e),I(n)}}}function Aa(t){let e,n,r,i,a,o,l,u,s,f;const c=[Oa,Na],g=[];function d(N,k){return N[0].length===0?0:1}r=d(t),i=g[r]=c[r](t);let h=t[0].length>1&&sn(t);return{c(){e=O("div"),n=O("div"),i.c(),a=j(),h&&h.c(),b(n,"aria-hidden",o=t[6]?void 0:"true"),b(e,"aria-label",t[7]),b(e,"class","stack svelte-o50ay1"),b(e,"style",t[14]),b(e,"draggable",t[13]),b(e,"role","button"),b(e,"tabindex",l=t[6]?void 0:0),B(e,"selected",t[12])},m(N,k){A(N,e,k),C(e,n),g[r].m(n,null),C(n,a),h&&h.m(n,null),u=!0,s||(f=[ne(e,"dblclick",t[19]),ne(e,"dragstart",function(){ue(t[10])&&t[10].apply(this,arguments)}),ne(e,"dragover",function(){ue(t[9])&&t[9].apply(this,arguments)}),ne(e,"drop",t[20]),ne(e,"click",function(){ue(t[8])&&t[8].apply(this,arguments)}),ne(e,"keydown",function(){ue(bt(["Enter","Space"],t[8],{preventDefault:!0}))&&bt(["Enter","Space"],t[8],{preventDefault:!0}).apply(this,arguments)})],s=!0)},p(N,[k]){t=N;let F=r;r=d(t),r===F?g[r].p(t,k):(G(),_(g[F],1,1,()=>{g[F]=null}),Q(),i=g[r],i?i.p(t,k):(i=g[r]=c[r](t),i.c()),v(i,1),i.m(n,a)),t[0].length>1?h?(h.p(t,k),k&1&&v(h,1)):(h=sn(t),h.c(),v(h,1),h.m(n,null)):h&&(G(),_(h,1,1,()=>{h=null}),Q()),(!u||k&64&&o!==(o=t[6]?void 0:"true"))&&b(n,"aria-hidden",o),(!u||k&128)&&b(e,"aria-label",t[7]),(!u||k&16384)&&b(e,"style",t[14]),(!u||k&8192)&&b(e,"draggable",t[13]),(!u||k&64&&l!==(l=t[6]?void 0:0))&&b(e,"tabindex",l),(!u||k&4096)&&B(e,"selected",t[12])},i(N){u||(v(i),v(h),u=!0)},o(N){_(i),_(h),u=!1},d(N){N&&T(e),g[r].d(),h&&h.d(),s=!1,he(f)}}}function Ea(t,e,n){let r,i,a,o,l,u,s,f,c,g;const d=Tt();ge(t,d,$=>n(18,g=$));let{cards:h=[]}=e,{capacity:N=4}=e,{closed:k=!1}=e,{index:F=0}=e,{isDraggableFn:y=()=>!1}=e,{selectedCardsN:S=0}=e,{labelOptions:K={title:"Stack"}}=e,{nested:P=!1}=e;const L=_t();function q($){ct.call(this,t,$)}function W($){ct.call(this,t,$)}return t.$$set=$=>{"cards"in $&&n(0,h=$.cards),"capacity"in $&&n(1,N=$.capacity),"closed"in $&&n(2,k=$.closed),"index"in $&&n(3,F=$.index),"isDraggableFn"in $&&n(4,y=$.isDraggableFn),"selectedCardsN"in $&&n(5,S=$.selectedCardsN),"labelOptions"in $&&n(16,K=$.labelOptions),"nested"in $&&n(6,P=$.nested)},t.$$.update=()=>{t.$$.dirty&262144&&n(17,r=g.size),t.$$.dirty&131074&&n(14,i=`width: ${nt(N,r)}em`),t.$$.dirty&21&&n(13,a=!k&&y(h)),t.$$.dirty&33&&n(12,o=S>0&&S===h.length),t.$$.dirty&5&&n(11,l=k&&h.length===1),t.$$.dirty&9&&n(10,u=$=>{$.stopPropagation(),Ca($,F,h)}),t.$$.dirty&72&&n(8,f=()=>{P||L("select",{index:F})}),t.$$.dirty&65637&&n(7,c=P?void 0:ka(K.title,h,S,k,K.closed))},n(9,s=$=>{$.preventDefault()}),[h,N,k,F,y,S,P,c,f,s,u,l,o,a,i,d,K,r,g,q,W]}class er extends x{constructor(e){super(),X(this,e,Ea,Aa,Y,{cards:0,capacity:1,closed:2,index:3,isDraggableFn:4,selectedCardsN:5,labelOptions:16,nested:6})}}const tr=(t,e)=>{const n=t/e;return n<3/4?[3,5]:n<4/3?[4,4]:[5,3]},fn=(t,e)=>{const[n,r]=tr(t,e);return{length:n*r-15}},Da=(t,e,n)=>{const r=nt(4,t)*e+(t!=="small"?.666:.333)*e*2,i=Zn(t).height*n+(t!=="small"?.5:.25)*n*2;return[r,i]},Pa=(t,e,n,r)=>{const i=n>600?n:r,a=Math.min(e,i*(16/9)),[o,l]=tr(e,r),[u,s]=Da(t,o,l),f=a*.95/u,c=i*.95/s;return{fontSize:Math.min(f,c),columns:o,rows:l,tableWidthEm:u,tableHeightEm:s}},cn=()=>{const t=new re.Deck;return[...Array(13)].map(()=>t.popN(4)).concat([[],[]])},Nt=t=>{const[e,...n]=t;return n.every(r=>r.value===e.value)},Fa=t=>t.length===0?!1:t.length===1?!0:Nt(t),Ot=(t,e)=>t.length+e.length>4?!1:e.length===0||e[e.length-1].value===t[0].value,At=(t,e,n,r)=>{const i=t.map(a=>[...a]);if(!Ot(r,i[n]))throw new Error(`Can not move cards ${r.map(a=>a.toString(Hn.ShortEmoji))} from pile ${e} to pile ${n}`);return i[e]=i[e].slice(0,i[e].length-r.length),i[n]=[...i[n],...r],i},Et=t=>t.length===1||Nt(t)?t:Et(t.slice(1)),$a=(t,e)=>{if(t[e].length===0)throw new Error("Cannot move cards from an empty pile.");if(rr(t[e]))throw new Error("Cannot move cards from a completed pile.");const n=Et(t[e]),r=t.reduce((o,l,u)=>u!==e&&Ot(n,l)?[...o,u]:o,[]);if(r.length===0)throw new Error(`Cannot move cards from pile ${e} to any other pile`);const i=r.filter(o=>t[o].length>0),a=i.length>0?i[0]:r[0];return At(t,e,a,n)},La=(t,e)=>{const n=t[e].slice(-1);return n.length===0?[[],n]:[t.reduce((i,a,o)=>o!==e&&Ot(n,a)?[...i,o]:i,[]),n]},nr=t=>t.reduce((e,n,r)=>{const[i,a]=La(t,r);return i.length===0?e:[...e,[r,i,a]]},[]),Ma=(t,e)=>{if(t[0]!==e[0]||t[1].length!==e[1].length)return!1;for(let n=0;n<t[1].length;n++)if(t[1][n]!==e[1][n])return!1;return new ht(t[2]).toString()===new ht(e[2]).toString()},Ia=t=>(e,n,r)=>{var g;const[i,a,o]=e,l=[...o];if(a.length>1)return[!1,[]];const u=a[0],s=At(t,i,u,o),f=nr(s),c=r.filter(([d])=>d!==u).map(d=>d[0]===i?[u,[i],o]:d).sort((d,h)=>d[0]-h[0]);if(f.length-c.length===1){const d=s[i].slice(-2);if(((g=s[u][0])==null?void 0:g.value)!==o[0].value&&d.length===2&&d.every(h=>h.value===o[0].value))c.push([i,a,[d[1]]]),c.sort((h,N)=>h[0]-N[0]),l.push(d[1]);else return[!1,[]]}return f.length!==c.length?[!1,[]]:[c.every((d,h)=>Ma(d,f[h])),l]},Ra=t=>{const e=nr(t);if(e.length===0)return["dead-end",[]];const n=e.map(Ia(t));return n.every(([r])=>r)&&n.length>0?["infinite-loop",n.reduce((i,a)=>[...i,...a[1]],[])]:[!1,[]]},rr=t=>t.length===4&&Nt(t),ja=t=>t.reduce((e,n,r)=>rr(n)?[...e,r]:e,[]),Ua=(t,e=re.CardStringType.Long)=>{const n=t.map(i=>i.toString(e)),r=[n.slice(0,-1).join(", "),...n.slice(-1)].filter(i=>i).join(" and ");return r.charAt(0).toUpperCase()+r.slice(1)};function dn(t){let e,n;return e=new St({props:{title:"Dead end",$$slots:{default:[Ka]},$$scope:{ctx:t}}}),e.$on("close",t[8]),{c(){R(e.$$.fragment)},m(r,i){M(e,r,i),n=!0},p(r,i){const a={};i&518&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){I(e,r)}}}function gn(t){let e;return{c(){e=O("p"),e.textContent="No more possible moves. Undo the last move or start a new game."},m(n,r){A(n,e,r)},d(n){n&&T(e)}}}function hn(t){let e,n,r;return{c(){e=O("p"),n=te(t[1]),r=te(` can be moved back and forth between two piles. There are no
        other possible moves. Undo the last move or start a new game.`)},m(i,a){A(i,e,a),C(e,n),C(e,r)},p(i,a){a&2&&$e(n,i[1])},d(i){i&&T(e)}}}function Ka(t){let e,n,r,i,a,o,l,u=t[2]==="dead-end"&&gn(),s=t[2]==="infinite-loop"&&hn(t);return i=new _e({props:{icon:"Shuffle",label:"Shuffle",onClick:t[6]}}),o=new _e({props:{icon:"Undo",label:"Undo",onClick:t[7]}}),{c(){u&&u.c(),e=j(),s&&s.c(),n=j(),r=O("div"),R(i.$$.fragment),a=j(),R(o.$$.fragment),b(r,"class","actions svelte-16kom67")},m(f,c){u&&u.m(f,c),A(f,e,c),s&&s.m(f,c),A(f,n,c),A(f,r,c),M(i,r,null),C(r,a),M(o,r,null),l=!0},p(f,c){f[2]==="dead-end"?u||(u=gn(),u.c(),u.m(e.parentNode,e)):u&&(u.d(1),u=null),f[2]==="infinite-loop"?s?s.p(f,c):(s=hn(f),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i(f){l||(v(i.$$.fragment,f),v(o.$$.fragment,f),l=!0)},o(f){_(i.$$.fragment,f),_(o.$$.fragment,f),l=!1},d(f){f&&(T(e),T(n),T(r)),u&&u.d(f),s&&s.d(f),I(i),I(o)}}}function za(t){let e,n,r=t[2]&&t[0]&&dn(t);return{c(){r&&r.c(),e=On()},m(i,a){r&&r.m(i,a),A(i,e,a),n=!0},p(i,[a]){i[2]&&i[0]?r?(r.p(i,a),a&5&&v(r,1)):(r=dn(i),r.c(),v(r,1),r.m(e.parentNode,e)):r&&(G(),_(r,1,1,()=>{r=null}),Q())},i(i){n||(v(r),n=!0)},o(i){_(r),n=!1},d(i){i&&T(e),r&&r.d(i)}}}function Ba(t,e,n){let r,i,a,{piles:o}=e,l=!0;const u=_t(),s=()=>u("shuffle"),f=()=>u("undo"),c=()=>{n(0,l=!1)};return t.$$set=g=>{"piles"in g&&n(4,o=g.piles)},t.$$.update=()=>{t.$$.dirty&16&&n(2,[r,i]=Ra(o),r,(n(5,i),n(4,o))),t.$$.dirty&32&&n(1,a=Ua(i)),t.$$.dirty&16&&n(0,l=!0)},[l,a,r,u,o,i,s,f,c]}class Va extends x{constructor(e){super(),X(this,e,Ba,za,Y,{piles:4})}}function qa(t){let e,n,r,i,a,o,l,u,s,f,c;return{c(){e=O("p"),e.textContent=`The goal of the pileon solitaire is to rearrange a deck of cards into piles
    of equal ranks from thirteen random piles of four using fifteen piles.`,n=j(),r=O("h3"),r.textContent="Rules",i=j(),a=O("ul"),a.innerHTML=`<li>Each pile can contain up to four cards.</li> <li>Cards can be moved from top of the pile into a pile where the top card is
      of the same rank as the card that is moved.</li> <li>Cards of any rank can be moved into an empty pile.</li> <li>Multiple cards with the same rank can be moved at once.</li> <li>Pile is complete when it contains all four cards with the same rank.</li>`,o=j(),l=O("h3"),l.textContent="Moving cards",u=j(),s=O("ol"),s.innerHTML=`<li>Select the source pile by clicking a pile. Cards to be moved are
      highlighted. Click the source pile again to reduce the amount of selected
      cards.</li> <li>Move cards by clicking the target pile. If the move is valid, the cards
      are moved from the source pile into the target pile.</li>`,f=j(),c=O("p"),c.textContent=`If your device supports drag-and-drop, you can also drag the cards you want
    to move from the source pile into the target pile. Double-clicking the
    source pile automatically moves cards from the pile to an available target
    pile.`},m(g,d){A(g,e,d),A(g,n,d),A(g,r,d),A(g,i,d),A(g,a,d),A(g,o,d),A(g,l,d),A(g,u,d),A(g,s,d),A(g,f,d),A(g,c,d)},p:H,d(g){g&&(T(e),T(n),T(r),T(i),T(a),T(o),T(l),T(u),T(s),T(f),T(c))}}}function Ha(t){let e,n;return e=new St({props:{title:"How to play?",$$slots:{default:[qa]},$$scope:{ctx:t}}}),e.$on("close",t[0]),{c(){R(e.$$.fragment)},m(r,i){M(e,r,i),n=!0},p(r,[i]){const a={};i&2&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){I(e,r)}}}function Wa(t){function e(n){ct.call(this,t,n)}return[e]}class Ja extends x{constructor(e){super(),X(this,e,Wa,Ha,Y,{})}}function mn(t,e,n){const r=t.slice();return r[24]=e[n],r}function pn(t,e,n){const r=t.slice();return r[27]=e[n],r[29]=n,r}function vn(t){let e,n,r;return n=new er({props:{cards:t[27],closed:t[9].includes(t[29]),selectedCardsN:t[8]===t[29]?t[7].length:0,labelOptions:{title:`Stack ${t[29]+1}`,closed:"rank"},index:t[29],isDraggableFn:Fa}}),n.$on("drop",t[14](t[29])),n.$on("dblclick",t[15](t[29])),n.$on("select",t[13]),{c(){e=O("div"),R(n.$$.fragment),b(e,"class","pile svelte-4p00up")},m(i,a){A(i,e,a),M(n,e,null),r=!0},p(i,a){const o={};a&16&&(o.cards=i[27]),a&512&&(o.closed=i[9].includes(i[29])),a&384&&(o.selectedCardsN=i[8]===i[29]?i[7].length:0),n.$set(o)},i(i){r||(v(n.$$.fragment,i),r=!0)},o(i){_(n.$$.fragment,i),r=!1},d(i){i&&T(e),I(n)}}}function bn(t){let e,n;return{c(){e=O("div"),b(e,"class","pile svelte-4p00up"),b(e,"style",n=`min-width: ${nt(4,t[3])}em`)},m(r,i){A(r,e,i)},p(r,i){i&8&&n!==(n=`min-width: ${nt(4,r[3])}em`)&&b(e,"style",n)},d(r){r&&T(e)}}}function yn(t){let e,n;return e=new Ja({}),e.$on("close",t[21]),{c(){R(e.$$.fragment)},m(r,i){M(e,r,i),n=!0},p:H,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){I(e,r)}}}function Ga(t){let e,n,r,i=`${t[6].fontSize}px`,a=`${t[6].tableWidthEm*1.25}em`,o,l,u,s,f,c;ze(t[19]);let g=ie(t[4]),d=[];for(let y=0;y<g.length;y+=1)d[y]=vn(pn(t,g,y));const h=y=>_(d[y],1,1,()=>{d[y]=null});let N=ie(fn(t[0],t[2])),k=[];for(let y=0;y<N.length;y+=1)k[y]=bn(mn(t,N,y));let F=t[5]&&yn(t);return u=new Va({props:{piles:t[4]}}),u.$on("shuffle",t[11]),u.$on("undo",t[12]),{c(){e=O("main");for(let y=0;y<d.length;y+=1)d[y].c();n=j();for(let y=0;y<k.length;y+=1)k[y].c();o=j(),F&&F.c(),l=j(),R(u.$$.fragment),b(e,"class","pileon svelte-4p00up"),ze(()=>t[20].call(e)),Ne(e,"font-size",i),Ne(e,"width",a)},m(y,S){A(y,e,S);for(let K=0;K<d.length;K+=1)d[K]&&d[K].m(e,null);C(e,n);for(let K=0;K<k.length;K+=1)k[K]&&k[K].m(e,null);r=cr(e,t[20].bind(e)),A(y,o,S),F&&F.m(y,S),A(y,l,S),M(u,y,S),s=!0,f||(c=ne(window,"resize",t[19]),f=!0)},p(y,[S]){if(S&58256){g=ie(y[4]);let P;for(P=0;P<g.length;P+=1){const L=pn(y,g,P);d[P]?(d[P].p(L,S),v(d[P],1)):(d[P]=vn(L),d[P].c(),v(d[P],1),d[P].m(e,n))}for(G(),P=g.length;P<d.length;P+=1)h(P);Q()}if(S&13){N=ie(fn(y[0],y[2]));let P;for(P=0;P<N.length;P+=1){const L=mn(y,N,P);k[P]?k[P].p(L,S):(k[P]=bn(L),k[P].c(),k[P].m(e,null))}for(;P<k.length;P+=1)k[P].d(1);k.length=N.length}S&64&&i!==(i=`${y[6].fontSize}px`)&&Ne(e,"font-size",i),S&64&&a!==(a=`${y[6].tableWidthEm*1.25}em`)&&Ne(e,"width",a),y[5]?F?(F.p(y,S),S&32&&v(F,1)):(F=yn(y),F.c(),v(F,1),F.m(l.parentNode,l)):F&&(G(),_(F,1,1,()=>{F=null}),Q());const K={};S&16&&(K.piles=y[4]),u.$set(K)},i(y){if(!s){for(let S=0;S<g.length;S+=1)v(d[S]);v(F),v(u.$$.fragment,y),s=!0}},o(y){d=d.filter(Boolean);for(let S=0;S<d.length;S+=1)_(d[S]);_(F),_(u.$$.fragment,y),s=!1},d(y){y&&(T(e),T(o),T(l)),Ae(d,y),Ae(k,y),r(),F&&F.d(y),I(u,y),f=!1,c()}}}function Qa(t,e,n){let r,i,a,o,l,u,s,f,c,g,d=Xn(m=>({size:m.size==="default"?"bridge":m.size,fourColor:m.colors==="four-color"}));ge(t,d,m=>n(18,s=m));let h=[cn()],N=!1;const k=m=>{m.stopPropagation(),n(5,N=!0)},F=m=>{m.stopPropagation(),n(17,S=[void 0,[]]),n(16,h=[cn()])},y=m=>{m.stopPropagation(),h.length>1&&(n(17,S=[void 0,[]]),n(16,h=h.slice(0,h.length-1)))};let S=[void 0,[]];const K=(m,p,w)=>{try{n(17,S=[void 0,[]]);const E=At(h[h.length-1],m,p,w);n(16,h=[...h,E])}catch{}},P=m=>{const[p,w]=S,E=m.detail.index;i.includes(E)||(p===void 0||w.length===0?n(17,S=[E,Et(r[E])]):p===E?n(17,S=[E,w.slice(1)]):p!==E&&(K(p,E,w),n(17,S=[void 0,[]])))},L=m=>p=>{p.preventDefault();const{sourceStack:w,cards:E}=Ta(p);w!==m&&K(w,m,E)},q=m=>p=>{p.preventDefault();try{n(17,S=[void 0,[]]);const w=$a(h[h.length-1],m);n(16,h=[...h,w])}catch{}};yt(()=>{De.update(m=>({...m,help:k,shuffle:F,undo:y}))}),An(()=>{De.update(m=>({...m,help:void 0,shuffle:void 0,undo:void 0}))});function W(){n(2,g=window.innerHeight)}function $(){c=this.clientHeight,f=this.clientWidth,n(1,c),n(0,f)}const U=()=>{n(5,N=!1)};return t.$$.update=()=>{if(t.$$.dirty&5){const m=f<800||g<500?"small":"bridge";ra(p=>({size:p.size==="default"?m:p.size,fourColor:p.colors==="four-color"}))}t.$$.dirty&65536&&n(4,r=h[h.length-1]),t.$$.dirty&16&&n(9,i=ja(r)),t.$$.dirty&131072&&n(8,a=S[0]),t.$$.dirty&131072&&n(7,o=S[1]),t.$$.dirty&262144&&n(3,l=s.size),t.$$.dirty&15&&n(6,u=Pa(l,f,c,g))},[f,c,g,l,r,N,u,o,a,i,d,F,y,P,L,q,h,S,s,W,$,U]}class Ya extends x{constructor(e){super(),X(this,e,Qa,Ga,Y,{})}}function Za(t){let e,n,r,i,a,o,l,u,s;e=new ui({});var f=t[0];function c(g,d){return{}}return f&&(r=Ft(f,c())),o=new kr({}),{c(){R(e.$$.fragment),n=j(),r&&R(r.$$.fragment),i=j(),a=j(),R(o.$$.fragment)},m(g,d){M(e,g,d),A(g,n,d),r&&M(r,g,d),A(g,i,d),A(g,a,d),M(o,g,d),l=!0,u||(s=ne(document.body,"keydown",t[1]),u=!0)},p(g,[d]){if(d&1&&f!==(f=g[0])){if(r){G();const h=r;_(h.$$.fragment,1,0,()=>{I(h,1)}),Q()}f?(r=Ft(f,c()),R(r.$$.fragment),v(r.$$.fragment,1),M(r,i.parentNode,i)):r=null}},i(g){l||(v(e.$$.fragment,g),r&&v(r.$$.fragment,g),v(o.$$.fragment,g),l=!0)},o(g){_(e.$$.fragment,g),r&&_(r.$$.fragment,g),_(o.$$.fragment,g),l=!1},d(g){g&&(T(n),T(i),T(a)),I(e,g),r&&I(r,g),I(o,g),u=!1,s()}}}function Xa(t,e,n){let r,i,a;ge(t,De,l=>n(3,i=l)),ge(t,Ee,l=>n(2,a=l));const o=l=>{l.key==="z"&&(l.ctrlKey||l.metaKey)&&i.undo!==void 0&&i.undo(l),l.key==="F1"&&i.help!==void 0&&i.help(l)};return t.$$.update=()=>{t.$$.dirty&4&&n(0,r=a.game==="deck"?wa:Ya)},[r,o,a]}class xa extends x{constructor(e){super(),X(this,e,Xa,Za,Y,{})}}new xa({target:document.body});
