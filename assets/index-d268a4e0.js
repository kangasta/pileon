var vn=Object.defineProperty;var mn=(t,e,n)=>e in t?vn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var He=(t,e,n)=>(mn(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}})();function W(){}function pn(t,e){for(const n in e)t[n]=e[n];return t}function Kt(t){return t()}function it(){return Object.create(null)}function se(t){t.forEach(Kt)}function ae(t){return typeof t=="function"}function Q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function bn(t){return Object.keys(t).length===0}function zt(t,...e){if(t==null){for(const r of e)r(void 0);return W}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function yn(t){let e;return zt(t,n=>e=n)(),e}function ue(t,e,n){t.$$.on_destroy.push(zt(e,n))}function jt(t,e,n,r){if(t){const i=qt(t,e,n,r);return t[0](i)}}function qt(t,e,n,r){return t[1]&&r?pn(n.ctx.slice(),t[1](r(e))):n.ctx}function Bt(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const l=[],a=Math.max(e.dirty.length,i.length);for(let s=0;s<a;s+=1)l[s]=e.dirty[s]|i[s];return l}return e.dirty|i}return e.dirty}function Vt(t,e,n,r,i,l){if(i){const a=qt(e,n,r,l);t.p(a,i)}}function $t(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function P(t,e){t.appendChild(e)}function j(t,e,n){t.insertBefore(e,n||null)}function U(t){t.parentNode&&t.parentNode.removeChild(t)}function ye(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function R(t){return document.createElement(t)}function Me(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ne(t){return document.createTextNode(t)}function $(){return ne(" ")}function _n(){return ne("")}function Y(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function C(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function wn(t){return Array.from(t.childNodes)}function Fe(t,e){e=""+e,t.data!==e&&(t.data=e)}function at(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}let Pe;function Sn(){if(Pe===void 0){Pe=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Pe=!0}}return Pe}function kn(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const r=R("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const i=Sn();let l;return i?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",l=Y(window,"message",a=>{a.source===r.contentWindow&&e()})):(r.src="about:blank",r.onload=()=>{l=Y(r.contentWindow,"resize",e),e()}),P(t,r),()=>{(i||l&&r.contentWindow)&&l(),U(r)}}function z(t,e,n){t.classList.toggle(e,!!n)}function Cn(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}function lt(t,e){return new t(e)}let De;function Te(t){De=t}function Oe(){if(!De)throw new Error("Function called outside component initialization");return De}function Qe(t){Oe().$$.on_mount.push(t)}function Ht(t){Oe().$$.on_destroy.push(t)}function Wt(){const t=Oe();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const l=Cn(e,n,{cancelable:r});return i.slice().forEach(a=>{a.call(t,l)}),!l.defaultPrevented}return!0}}function Tn(t,e){return Oe().$$.context.set(t,e),e}function Jt(t){return Oe().$$.context.get(t)}function ot(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const pe=[],ut=[];let be=[];const st=[],Nn=Promise.resolve();let Ge=!1;function Dn(){Ge||(Ge=!0,Nn.then(Gt))}function Ee(t){be.push(t)}const We=new Set;let he=0;function Gt(){if(he!==0)return;const t=De;do{try{for(;he<pe.length;){const e=pe[he];he++,Te(e),En(e.$$)}}catch(e){throw pe.length=0,he=0,e}for(Te(null),pe.length=0,he=0;ut.length;)ut.pop()();for(let e=0;e<be.length;e+=1){const n=be[e];We.has(n)||(We.add(n),n())}be.length=0}while(pe.length);for(;st.length;)st.pop()();Ge=!1,We.clear(),Te(t)}function En(t){if(t.fragment!==null){t.update(),se(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ee)}}function Fn(t){const e=[],n=[];be.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),be=e}const Re=new Set;let de;function X(){de={r:0,c:[],p:de}}function x(){de.r||se(de.c),de=de.p}function N(t,e){t&&t.i&&(Re.delete(t),t.i(e))}function E(t,e,n,r){if(t&&t.o){if(Re.has(t))return;Re.add(t),de.c.push(()=>{Re.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function re(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function V(t){t&&t.c()}function q(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),Ee(()=>{const l=t.$$.on_mount.map(Kt).filter(ae);t.$$.on_destroy?t.$$.on_destroy.push(...l):se(l),t.$$.on_mount=[]}),i.forEach(Ee)}function B(t,e){const n=t.$$;n.fragment!==null&&(Fn(n.after_update),se(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function On(t,e){t.$$.dirty[0]===-1&&(pe.push(t),Dn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ee(t,e,n,r,i,l,a,s=[-1]){const u=De;Te(t);const o=t.$$={fragment:null,ctx:[],props:l,update:W,not_equal:i,bound:it(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:it(),dirty:s,skip_bound:!1,root:e.target||u.$$.root};a&&a(o.root);let d=!1;if(o.ctx=n?n(t,e.props||{},(c,f,...h)=>{const g=h.length?h[0]:f;return o.ctx&&i(o.ctx[c],o.ctx[c]=g)&&(!o.skip_bound&&o.bound[c]&&o.bound[c](g),d&&On(t,c)),f}):[],o.update(),d=!0,se(o.before_update),o.fragment=r?r(o.ctx):!1,e.target){if(e.hydrate){const c=wn(e.target);o.fragment&&o.fragment.l(c),c.forEach(U)}else o.fragment&&o.fragment.c();e.intro&&N(t.$$.fragment),q(t,e.target,e.anchor),Gt()}Te(u)}class te{constructor(){He(this,"$$");He(this,"$$set")}$destroy(){B(this,1),this.$destroy=W}$on(e,n){if(!ae(n))return W;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!bn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const An="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(An);const ve=[];function Xe(t,e=W){let n;const r=new Set;function i(s){if(Q(t,s)&&(t=s,n)){const u=!ve.length;for(const o of r)o[1](),ve.push(o,t);if(u){for(let o=0;o<ve.length;o+=2)ve[o][0](ve[o+1]);ve.length=0}}}function l(s){i(s(t))}function a(s,u=W){const o=[s,u];return r.add(o),r.size===1&&(n=e(i,l)||W),s(t),()=>{r.delete(o),r.size===0&&n&&(n(),n=null)}}return{set:i,update:l,subscribe:a}}const Yt="settings",Pn={game:"pileon",colors:"default",size:"default"},Ln=JSON.parse(localStorage.getItem(Yt)),_e=Xe(Ln??Pn);_e.subscribe(t=>localStorage.setItem(Yt,JSON.stringify(t)));const Rn={},we=Xe(Rn),Mn=4.5,In=5,Un=3,ft=7,Kn=5,Zt=t=>{switch(t){case"bridge":return{height:ft,width:Mn};case"poker":return{height:ft,width:In};case"small":return{height:Kn,width:Un}}},xe="card-appearance",zn={size:"bridge",fourColor:!1},jn=({size:t,colors:e})=>({size:t==="default"?"poker":t,fourColor:e==="four-color"}),Qt=t=>{const e=Xe(zn,n=>(_e.subscribe(r=>n(t(r))),()=>{}));return Tn(xe,e),e},et=()=>Jt(xe),qn=t=>{const e=Jt(xe);if(e){const n=yn(_e);e.set(t(n))}},Ye=(t,e,n={})=>r=>{(Array.isArray(t)?t:[t]).includes(r.code)&&e!==void 0&&(n.preventDefault&&r.preventDefault(),e())};var le={},Ae={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CardStringType=t.CardSuits=void 0;function e(o,d){if(!(o instanceof d))throw new TypeError("Cannot call a class as a function")}function n(o,d){for(var c=0;c<d.length;c++){var f=d[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(o,f.key,f)}}function r(o,d,c){return d&&n(o.prototype,d),c&&n(o,c),o}function i(o,d,c){return d in o?Object.defineProperty(o,d,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[d]=c,o}var l;t.CardSuits=l,function(o){o[o.Hearts=0]="Hearts",o[o.Spades=1]="Spades",o[o.Diamonds=2]="Diamonds",o[o.Clubs=3]="Clubs"}(l||(t.CardSuits=l={}));var a;t.CardStringType=a,function(o){o.Short="SHORT",o.Long="LONG",o.ShortEmoji="SHORT_EMOJI",o.ShortSuit="SHORT_SUIT",o.LongSuit="LONG_SUIT",o.EmojiSuit="EMOJI_SUIT",o.ShortValue="SHORT_VALUE",o.LongValue="LONG_VALUE"}(a||(t.CardStringType=a={}));var s=function(){function o(d){e(this,o),i(this,"num",void 0),this.num=d}return r(o,[{key:"toString",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o.StringType.Long;switch(c){case o.StringType.Short:return this.toString(o.StringType.ShortValue)+this.toString(o.StringType.ShortSuit);case o.StringType.ShortEmoji:return this.toString(o.StringType.ShortValue)+this.toString(o.StringType.EmojiSuit);case o.StringType.Long:return this.toString(o.StringType.LongValue)+" of "+this.toString(o.StringType.LongSuit);case o.StringType.ShortSuit:return o.shortSuits[this.suit];case o.StringType.LongSuit:return o.longSuits[this.suit];case o.StringType.EmojiSuit:return o.emojiSuits[this.suit];case o.StringType.ShortValue:return o.shortValues[this.value===13?0:this.value];case o.StringType.LongValue:return o.longValues[this.value===13?0:this.value]}throw new Error("Unsupported output type")}},{key:"suit",get:function(){return o.getSuit(this.num)}},{key:"value",get:function(){return o.getValue(this.num)}}],[{key:"fromJSON",value:function(c){var f=c.num;return new o(f)}},{key:"getSuit",value:function(c){return Math.floor(c/13)%4}},{key:"getValue",value:function(c){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return c%13||f?c%13:13}},{key:"compare",value:function(c,f){return f.value-c.value}}]),o}();i(s,"Suits",l),i(s,"StringType",a),i(s,"emojiSuits",["♥","♠","♦","♣"]),i(s,"shortSuits",["h","s","d","c"]),i(s,"longSuits",["hearts","spades","diamonds","clubs"]),i(s,"shortValues",["A","2","3","4","5","6","7","8","9","T","J","Q","K"]),i(s,"longValues",["ace","two","three","four","five","six","seven","eight","nine","ten","jack","queen","king"]);var u=s;t.default=u})(Ae);var Xt={},Z={};Object.defineProperty(Z,"__esModule",{value:!0});Z.uniqueFilter=Z.shuffle=Z.last=Z.isSorted=Z.getCombinations=Z.arraySubtraction=void 0;var Bn=function(e,n){return e.filter(function(r){return!n.includes(r)})};Z.arraySubtraction=Bn;var Vn=function t(e,n,r,i,l){if(i.length>=n)l.push(i);else for(var a=r;a<e.length;a++)t(e,n,a+1,i.concat(e[a]),l)},$n=function(e,n){var r=[];return Vn(e,n,0,[],r),r};Z.getCombinations=$n;var Hn=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=r?-1:1;try{return e.reduce(function(l,a){if(i*n(l,a)<=0)return a;throw new Error}),!0}catch{return!1}};Z.isSorted=Hn;var Wn=function(e){return e[e.length-1]};Z.last=Wn;var Jn=function(e){for(var n=e.length-1;n>0;n--){var r=Math.floor(Math.random()*(n+1)),i=[e[r],e[n]];e[n]=i[0],e[r]=i[1]}return e};Z.shuffle=Jn;var Gn=function(e,n,r){return r.indexOf(e)===n};Z.uniqueFilter=Gn;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=r(Ae),n=Z;function r(g){return g&&g.__esModule?g:{default:g}}function i(g){return s(g)||a(g)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}function s(g){if(Array.isArray(g)){for(var w=0,A=new Array(g.length);w<g.length;w++)A[w]=g[w];return A}}function u(g,w){if(!(g instanceof w))throw new TypeError("Cannot call a class as a function")}function o(g,w){for(var A=0;A<w.length;A++){var v=w[A];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}function d(g,w,A){return w&&o(g.prototype,w),A&&o(g,A),g}function c(g,w,A){return w in g?Object.defineProperty(g,w,{value:A,enumerable:!0,configurable:!0,writable:!0}):g[w]=A,g}var f=function(){function g(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;u(this,g),c(this,"cards",void 0),this.cards=i(Array(52*A).keys()).map(function(v){return new e.default(v)}),w&&this.shuffle()}return d(g,[{key:"shuffle",value:function(){(0,n.shuffle)(this.cards)}},{key:"isShuffled",value:function(){return!(0,n.isSorted)(this.cards,function(A,v){return A.num-v.num})}},{key:"pop",value:function(){return this.cards.pop()}},{key:"popN",value:function(A){for(var v=[],S,b=0;b<A&&(S=this.pop());b++)v.push(S);return v}},{key:"cardsRemaining",get:function(){return this.cards.length}}],[{key:"fromJSON",value:function(A){var v=A.cards,S=new g(!1,0);return S.cards=v.map(function(b){return e.default.fromJSON(b)}),S}}]),g}(),h=f;t.default=h})(Xt);var xt={},je={};Object.defineProperty(je,"__esModule",{value:!0});je.uuid4=void 0;var Yn=function(e){var n;do n=Math.random().toString(16).slice(2,e+2);while(n.length<e&&e<=12);return n},Zn=function(){var e=[8,4,4,4,12],n=e.map(Yn).join("-").split("");return n[14]="4",n[19]=(Math.floor(Math.random()*64)%4+8).toString(16),n.join("")};je.uuid4=Zn;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.HandRank=void 0;var e=i(Ae),n=je,r=Z;function i(v){return v&&v.__esModule?v:{default:v}}function l(v){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?l=function(b){return typeof b}:l=function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},l(v)}function a(v){return o(v)||u(v)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(v){if(Symbol.iterator in Object(v)||Object.prototype.toString.call(v)==="[object Arguments]")return Array.from(v)}function o(v){if(Array.isArray(v)){for(var S=0,b=new Array(v.length);S<v.length;S++)b[S]=v[S];return b}}function d(v,S){if(!(v instanceof S))throw new TypeError("Cannot call a class as a function")}function c(v,S){for(var b=0;b<S.length;b++){var T=S[b];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(v,T.key,T)}}function f(v,S,b){return S&&c(v.prototype,S),b&&c(v,b),v}function h(v,S,b){return S in v?Object.defineProperty(v,S,{value:b,enumerable:!0,configurable:!0,writable:!0}):v[S]=b,v}var g;t.HandRank=g,function(v){v[v.High=0]="High",v[v.Pair=5]="Pair",v[v.TwoPairs=10]="TwoPairs",v[v.ThreeOfAKind=15]="ThreeOfAKind",v[v.Straight=20]="Straight",v[v.Flush=25]="Flush",v[v.FullHouse=30]="FullHouse",v[v.FourOfAKind=35]="FourOfAKind",v[v.StraightFlush=40]="StraightFlush",v[v.FiveOfAKind=45]="FiveOfAKind"}(g||(t.HandRank=g={}));var w=function(){function v(S,b,T){d(this,v),h(this,"uuid",void 0),h(this,"rank",void 0),h(this,"cards",void 0),this.rank=S,this.cards=b,this.uuid=T||(0,n.uuid4)()}return f(v,[{key:"getCardsString",value:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.default.StringType.Short;return this.cards.map(function(T){return T.toString(b)}).join(", ")}},{key:"toString",value:function(){var b=this,T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.default.StringType.Short,k=e.default.StringType.LongValue,y=function(O){return b.cards[O].toString(k)},_=this.getCardsString(T);switch(this.rank){case v.Rank.FiveOfAKind:return"Five of a kind, ".concat(y(0),"s (").concat(_,")");case v.Rank.StraightFlush:return"Straigth flush, ".concat(y(0)," high (").concat(_,")");case v.Rank.FourOfAKind:return"Four of a kind, ".concat(y(0),"s (").concat(_,")");case v.Rank.FullHouse:return"Full house, ".concat(y(0),"s over ").concat(y(3),"s (").concat(_,")");case v.Rank.Flush:return"Flush, ".concat(y(0)," high (").concat(_,")");case v.Rank.Straight:return"Straigth, ".concat(y(0)," high (").concat(_,")");case v.Rank.ThreeOfAKind:return"Three of a kind, ".concat(y(0),"s (").concat(_,")");case v.Rank.TwoPairs:return"Two pairs, ".concat(y(0),"s and ").concat(y(2),"s (").concat(_,")");case v.Rank.Pair:return"Pair, ".concat(y(0),"s (").concat(_,")");case v.Rank.High:return"".concat(y(0).replace(/^\w/,function(M){return M.toUpperCase()})," high (").concat(_,")")}throw new Error("Unsupported rank value")}}],[{key:"fromJSON",value:function(b){var T=b.rank,k=b.cards,y=b.uuid;return new v(T,k.map(e.default.fromJSON),y)}},{key:"solve",value:function(b){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,k,y;return(k=v.isNumOfAKind(5,b))?y=v.Rank.FiveOfAKind:(k=v.isStraightFlush(b,T))?y=v.Rank.StraightFlush:(k=v.isNumOfAKind(4,b))?y=v.Rank.FourOfAKind:(k=v.isFullHouse(b))?y=v.Rank.FullHouse:(k=v.isFlush(b,T))?y=v.Rank.Flush:(k=v.isStraight(b,T))?y=v.Rank.Straight:(k=v.isNumOfAKind(3,b))?y=v.Rank.ThreeOfAKind:(k=v.isTwoPairs(b))?y=v.Rank.TwoPairs:(k=v.isNumOfAKind(2,b))?y=v.Rank.Pair:(k=[],y=v.Rank.High),k=v.fillWithKickers(k,b),new v(y,k)}},{key:"solveHoldEm",value:function(b,T){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(k===0)return v.solve([].concat(a(b),a(T)));for(var y=(0,r.getCombinations)(b,b.length-k),_=(0,r.getCombinations)(T,Math.min(T.length,k)),M=[],O=0;O<y.length;O++)for(var D=0;D<_.length;D++)M.push(v.solve([].concat(a(y[O]),a(_[D]))));return v.max.apply(v,M)}},{key:"compare",value:function(b,T){var k;if(b.cards.length!==T.cards.length)throw new Error("Comparing hands with different number of cards");if((k=T.rank-b.rank)!==0)return k;for(var y=0;y<b.cards.length;y++)if((k=e.default.compare(b.cards[y],T.cards[y]))!==0)return k;return 0}},{key:"winners",value:function(){for(var b=arguments.length,T=new Array(b),k=0;k<b;k++)T[k]=arguments[k];var y=v.max.apply(v,T);return T.filter(function(_){return!v.compare(_,y)})}},{key:"max",value:function(){for(var b=function(M,O){return v.compare(M,O)<0?M:O},T=arguments.length,k=new Array(T),y=0;y<T;y++)k[y]=arguments[y];return k.reduce(function(_,M){return b(_,M)})}},{key:"fillWithKickers",value:function(b,T){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5;return T=(0,r.arraySubtraction)(T,b).sort(e.default.compare),[].concat(a(b),a(T)).slice(0,k)}},{key:"getUniqueValues",value:function(b){return b.map(function(T){return T.value}).filter(r.uniqueFilter).sort(function(T,k){return k-T})}},{key:"isNumOfAKind",value:function(b,T){for(var k=v.getUniqueValues(T),y,_=function(m){if(y=T.filter(function(p){return p.value==k[m]}),y.length>=b)return{v:y}},M=0;M<k.length;M++){var O=_(M);if(l(O)==="object")return O.v}return!1}},{key:"isNumOfAKindCombination",value:function(b,T){for(var k=[],y=0;y<b.length;y++){var _=v.isNumOfAKind(b[y],(0,r.arraySubtraction)(T,k));if(_===!1)return!1;_=_,k.push.apply(k,a(_))}return k}},{key:"isStraightFlush",value:function(b){for(var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,k=[],y=function(D){if(k=b.filter(function(p){return p.suit===D}),k.length<T)return"continue";var m=v.isStraight(k,T);if(m)return{v:m}},_=0;_<4;_++){var M=y(_);switch(M){case"continue":continue;default:if(l(M)==="object")return M.v}}return!1}},{key:"isFullHouse",value:function(b){return v.isNumOfAKindCombination([3,2],b)}},{key:"isFlush",value:function(b){for(var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,k=function(O){var D=b.filter(function(m){return m.suit==O});if(D.length>=T)return{v:D.sort(e.default.compare).slice(0,T)}},y=0;y<4;y++){var _=k(y);if(l(_)==="object")return _.v}return!1}},{key:"isStraight",value:function(b){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,k=v.getUniqueValues(b);if(k.length<T)return!1;k.includes(13)&&k.push(0);for(var y=[k[0]],_=1;_<k.length&&y.length<T;_++)(0,r.last)(y)-k[_]===1?y.push(k[_]):y=[k[_]];return y.length==T?y.map(function(M){return b.find(function(O){return O.value===(M||13)})}):!1}},{key:"isTwoPairs",value:function(b){return v.isNumOfAKindCombination([2,2],b)}}]),v}();h(w,"Rank",g);var A=w;t.default=A})(xt);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Card",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"Deck",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"Hand",{enumerable:!0,get:function(){return r.default}});var e=i(Ae),n=i(Xt),r=i(xt);function i(l){return l&&l.__esModule?l:{default:l}}})(le);function Qn(t){let e,n;return{c(){e=Me("svg"),n=Me("path"),C(n,"d",t[1]),C(n,"fill","CurrentColor"),C(e,"viewBox","0 0 16 20"),C(e,"class","svelte-1jimf84"),z(e,"flip",t[0])},m(r,i){j(r,e,i),P(e,n)},p(r,[i]){i&2&&C(n,"d",r[1]),i&1&&z(e,"flip",r[0])},i:W,o:W,d(r){r&&U(e)}}}function Xn(t,e,n){let r,{suit:i=null}=e,{flip:l=!1}=e;const a=s=>{switch(s){case"hearts":return"M 8 2 C 9 0 11 0 12 0 C 13 0 16 1 16 6 C 16 8 15.5 10 14 12 L 8 20 L 2 12 C 0.5 10 0 8 0 6 C 0 1 3 0 4 0 C 5 0 7 0 8 2";case"spades":return"M 8 0 L 13 5 C 16 8 16 10 16 12 C 16 14 14 16 12 16 C 11 16 9 16 8 14 L 12 20 L 4 20 L 8 14 C 7 16 5 16 4 16 C 2 16 0 14 0 12 C 0 10 0 8 3 5 L 8 0";case"diamonds":return"M 8 0 L 16 10 L 8 20 L 0 10 L 8 0";case"clubs":return"M 8 0 C 10 0 12 2 12 4 C 12 6 11 8 8 10 C 9 8 10 7 12 7 C 14 7 16 9 16 12 C 16 14 14 16 12 16 C 11 16 9 16 8 14 L 12 20 L 4 20 L 8 14 C 7 16 5 16 4 16 C 2 16 0 14 0 12 C 0 9 2 7 4 7 C 6 7 7 8 8 10 C 5 8 4 6 4 4 C 4 2 6 0 8 0";default:return null}};return t.$$set=s=>{"suit"in s&&n(2,i=s.suit),"flip"in s&&n(0,l=s.flip)},t.$$.update=()=>{t.$$.dirty&4&&n(1,r=a(i))},[l,r,i]}class en extends te{constructor(e){super(),ee(this,e,Xn,Qn,Q,{suit:2,flip:0})}}function ct(t,e,n){const r=t.slice();return r[5]=e[n],r}function dt(t,e,n){const r=t.slice();return r[8]=e[n],r}function gt(t){let e,n,r;return n=new en({props:{suit:t[0],flip:t[8].toLowerCase()==="d"}}),{c(){e=R("span"),V(n.$$.fragment),C(e,"class","svelte-1sm49dl")},m(i,l){j(i,e,l),q(n,e,null),r=!0},p(i,l){const a={};l&1&&(a.suit=i[0]),l&2&&(a.flip=i[8].toLowerCase()==="d"),n.$set(a)},i(i){r||(N(n.$$.fragment,i),r=!0)},o(i){E(n.$$.fragment,i),r=!1},d(i){i&&U(e),B(n)}}}function ht(t){let e,n,r,i,l=re(t[5].split("")),a=[];for(let u=0;u<l.length;u+=1)a[u]=gt(dt(t,l,u));const s=u=>E(a[u],1,1,()=>{a[u]=null});return{c(){e=R("div");for(let u=0;u<a.length;u+=1)a[u].c();n=$(),C(e,"class",r="row "+t[3](t[5])+" svelte-1sm49dl")},m(u,o){j(u,e,o);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(e,null);P(e,n),i=!0},p(u,o){if(o&7){l=re(u[5].split(""));let d;for(d=0;d<l.length;d+=1){const c=dt(u,l,d);a[d]?(a[d].p(c,o),N(a[d],1)):(a[d]=gt(c),a[d].c(),N(a[d],1),a[d].m(e,n))}for(X(),d=l.length;d<a.length;d+=1)s(d);x()}(!i||o&2&&r!==(r="row "+u[3](u[5])+" svelte-1sm49dl"))&&C(e,"class",r)},i(u){if(!i){for(let o=0;o<l.length;o+=1)N(a[o]);i=!0}},o(u){a=a.filter(Boolean);for(let o=0;o<a.length;o+=1)E(a[o]);i=!1},d(u){u&&U(e),ye(a,u)}}}function xn(t){let e,n,r=re(t[2](t[1])),i=[];for(let a=0;a<r.length;a+=1)i[a]=ht(ct(t,r,a));const l=a=>E(i[a],1,1,()=>{i[a]=null});return{c(){e=R("div");for(let a=0;a<i.length;a+=1)i[a].c();C(e,"class","center-pattern svelte-1sm49dl")},m(a,s){j(a,e,s);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(e,null);n=!0},p(a,[s]){if(s&15){r=re(a[2](a[1]));let u;for(u=0;u<r.length;u+=1){const o=ct(a,r,u);i[u]?(i[u].p(o,s),N(i[u],1)):(i[u]=ht(o),i[u].c(),N(i[u],1),i[u].m(e,null))}for(X(),u=r.length;u<i.length;u+=1)l(u);x()}},i(a){if(!n){for(let s=0;s<r.length;s+=1)N(i[s]);n=!0}},o(a){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)E(i[s]);n=!1},d(a){a&&U(e),ye(i,a)}}}function er(t,e,n){let{suit:r}=e,{rank:i}=e;const l={A:["U"],2:["U","D"],3:["U","U","D"],4:["UU","DD"],5:["UU","U","DD"],6:["UU","UU","DD"],7:["UU","u","UU","DD"],8:["UU","UU","DD","DD"],9:["UU","u","UU","DD","DD"],10:["UU","u","UU","DD","d","DD"]},a=u=>l[u]??[],s=u=>u.toUpperCase()===u?"grow":"";return t.$$set=u=>{"suit"in u&&n(0,r=u.suit),"rank"in u&&n(1,i=u.rank)},[r,i,a,s]}class tr extends te{constructor(e){super(),ee(this,e,er,xn,Q,{suit:0,rank:1})}}function nr(t){let e,n;const r=t[1].default,i=jt(r,t,t[0],null);return{c(){e=R("span"),i&&i.c(),C(e,"class","screen-reader-only svelte-3uotpv")},m(l,a){j(l,e,a),i&&i.m(e,null),n=!0},p(l,[a]){i&&i.p&&(!n||a&1)&&Vt(i,r,l,l[0],n?Bt(r,l[0],a,null):$t(l[0]),null)},i(l){n||(N(i,l),n=!0)},o(l){E(i,l),n=!1},d(l){l&&U(e),i&&i.d(l)}}}function rr(t,e,n){let{$$slots:r={},$$scope:i}=e;return t.$$set=l=>{"$$scope"in l&&n(0,i=l.$$scope)},[i,r]}class ir extends te{constructor(e){super(),ee(this,e,rr,nr,Q,{})}}function vt(t,e,n){const r=t.slice();return r[16]=e[n],r}function mt(t){let e,n;return e=new ir({props:{$$slots:{default:[ar]},$$scope:{ctx:t}}}),{c(){V(e.$$.fragment)},m(r,i){q(e,r,i),n=!0},p(r,i){const l={};i&524320&&(l.$$scope={dirty:i,ctx:r}),e.$set(l)},i(r){n||(N(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function ar(t){let e;return{c(){e=ne(t[5])},m(n,r){j(n,e,r)},p(n,r){r&32&&Fe(e,n[5])},d(n){n&&U(e)}}}function pt(t){let e,n;return e=new tr({props:{suit:t[7],rank:t[8]}}),{c(){V(e.$$.fragment)},m(r,i){q(e,r,i),n=!0},p(r,i){const l={};i&128&&(l.suit=r[7]),i&256&&(l.rank=r[8]),e.$set(l)},i(r){n||(N(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function bt(t){let e,n,r,i,l,a,s,u,o,d,c;s=new en({props:{suit:t[7]}});let f=!t[10]&&pt(t);return{c(){e=R("div"),n=R("div"),r=ne(t[8]),l=$(),a=R("div"),V(s.$$.fragment),u=$(),o=R("div"),f&&f.c(),d=$(),C(n,"class",i="rank rank-"+t[8]+" svelte-t2vtqs"),C(a,"class","suit svelte-t2vtqs"),C(e,"aria-hidden","true"),C(e,"class",t[16]+" label svelte-t2vtqs"),C(o,"class","center svelte-t2vtqs"),z(o,"face",t[6])},m(h,g){j(h,e,g),P(e,n),P(n,r),P(e,l),P(e,a),q(s,a,null),j(h,u,g),j(h,o,g),f&&f.m(o,null),P(o,d),c=!0},p(h,g){(!c||g&256)&&Fe(r,h[8]),(!c||g&256&&i!==(i="rank rank-"+h[8]+" svelte-t2vtqs"))&&C(n,"class",i);const w={};g&128&&(w.suit=h[7]),s.$set(w),h[10]?f&&(X(),E(f,1,1,()=>{f=null}),x()):f?(f.p(h,g),g&1024&&N(f,1)):(f=pt(h),f.c(),N(f,1),f.m(o,d)),(!c||g&64)&&z(o,"face",h[6])},i(h){c||(N(s.$$.fragment,h),N(f),c=!0)},o(h){E(s.$$.fragment,h),E(f),c=!1},d(h){h&&(U(e),U(u),U(o)),B(s),f&&f.d()}}}function lr(t){let e,n,r,i,l=t[3]&&mt(t),a=re(t[13]),s=[];for(let o=0;o<a.length;o+=1)s[o]=bt(vt(t,a,o));const u=o=>E(s[o],1,1,()=>{s[o]=null});return{c(){e=R("div"),l&&l.c(),n=$();for(let o=0;o<s.length;o+=1)s[o].c();C(e,"class",r="card "+t[7]+" stack-"+t[2]+" svelte-t2vtqs"),z(e,"bridge",t[11]),z(e,"small",t[10]),z(e,"fourColor",t[9]),z(e,"empty",t[0]),z(e,"hidden",t[4]),z(e,"shadow",t[1]),z(e,"visible",t[3])},m(o,d){j(o,e,d),l&&l.m(e,null),P(e,n);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);i=!0},p(o,[d]){if(o[3]?l?(l.p(o,d),d&8&&N(l,1)):(l=mt(o),l.c(),N(l,1),l.m(e,n)):l&&(X(),E(l,1,1,()=>{l=null}),x()),d&9664){a=re(o[13]);let c;for(c=0;c<a.length;c+=1){const f=vt(o,a,c);s[c]?(s[c].p(f,d),N(s[c],1)):(s[c]=bt(f),s[c].c(),N(s[c],1),s[c].m(e,null))}for(X(),c=a.length;c<s.length;c+=1)u(c);x()}(!i||d&132&&r!==(r="card "+o[7]+" stack-"+o[2]+" svelte-t2vtqs"))&&C(e,"class",r),(!i||d&2180)&&z(e,"bridge",o[11]),(!i||d&1156)&&z(e,"small",o[10]),(!i||d&644)&&z(e,"fourColor",o[9]),(!i||d&133)&&z(e,"empty",o[0]),(!i||d&148)&&z(e,"hidden",o[4]),(!i||d&134)&&z(e,"shadow",o[1]),(!i||d&140)&&z(e,"visible",o[3])},i(o){if(!i){N(l);for(let d=0;d<a.length;d+=1)N(s[d]);i=!0}},o(o){E(l),s=s.filter(Boolean);for(let d=0;d<s.length;d+=1)E(s[d]);i=!1},d(o){o&&U(e),l&&l.d(),ye(s,o)}}}function or(t,e,n){let r,i,l,a,s,u,o,d,c,f;const h=et();ue(t,h,b=>n(15,f=b));let{card:g=null}=e,{empty:w=!1}=e,{shadow:A=!1}=e,{stack:v=void 0}=e;const S=["top","bottom"];return t.$$set=b=>{"card"in b&&n(14,g=b.card),"empty"in b&&n(0,w=b.empty),"shadow"in b&&n(1,A=b.shadow),"stack"in b&&n(2,v=b.stack)},t.$$.update=()=>{t.$$.dirty&32768&&n(11,r=f.size==="bridge"),t.$$.dirty&32768&&n(10,i=f.size==="small"),t.$$.dirty&32768&&n(9,l=f.fourColor),t.$$.dirty&16386&&n(4,a=g===null&&!A),t.$$.dirty&19&&n(3,s=!(w||a||A)),t.$$.dirty&16392&&n(8,u=s&&g.toString(le.Card.StringType.ShortValue).replace("T","10")),t.$$.dirty&16392&&n(7,o=s&&g.toString(le.Card.StringType.LongSuit)),t.$$.dirty&16392&&n(6,d=s&&g.num%13>9),t.$$.dirty&16392&&n(5,c=s&&g.toString(le.Card.StringType.Long))},[w,A,v,s,a,c,d,o,u,l,i,r,h,S,g,f]}class qe extends te{constructor(e){super(),ee(this,e,or,lr,Q,{card:14,empty:0,shadow:1,stack:2})}}function yt(t,e,n){const r=t.slice();return r[19]=e[n].card,r[20]=e[n].shadow,r[21]=e[n].transform,r}function _t(t){let e,n;return e=new qe({props:{card:t[0],empty:t[0]===void 0}}),{c(){V(e.$$.fragment)},m(r,i){q(e,r,i),n=!0},p(r,i){const l={};i&1&&(l.card=r[0]),i&1&&(l.empty=r[0]===void 0),e.$set(l)},i(r){n||(N(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function wt(t){let e,n,r,i;return n=new qe({props:{card:t[19],shadow:t[20]}}),{c(){e=R("div"),V(n.$$.fragment),r=$(),C(e,"class","shadow-container svelte-1ns87h6"),at(e,"transform",t[21])},m(l,a){j(l,e,a),q(n,e,null),P(e,r),i=!0},p(l,a){const s={};a&8&&(s.card=l[19]),a&8&&(s.shadow=l[20]),n.$set(s),(!i||a&8)&&at(e,"transform",l[21])},i(l){i||(N(n.$$.fragment,l),i=!0)},o(l){E(n.$$.fragment,l),i=!1},d(l){l&&U(e),B(n)}}}function ur(t){let e,n,r,i,l,a,s=!t[1]&&_t(t),u=re(t[3]),o=[];for(let c=0;c<u.length;c+=1)o[c]=wt(yt(t,u,c));const d=c=>E(o[c],1,1,()=>{o[c]=null});return{c(){e=R("div"),n=R("div"),s&&s.c(),r=$();for(let c=0;c<o.length;c+=1)o[c].c();C(n,"aria-atomic","true"),C(n,"aria-live","polite"),C(e,"aria-label",t[2]),C(e,"aria-disabled",t[1]),C(e,"class","deck svelte-1ns87h6"),C(e,"role","button"),C(e,"tabindex","0"),z(e,"bridge",t[5]),z(e,"small",t[4]),z(e,"shuffling",t[1])},m(c,f){j(c,e,f),P(e,n),s&&s.m(n,null),P(n,r);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(n,null);i=!0,l||(a=[Y(e,"keydown",Ye(["Space","Enter"],t[7],{preventDefault:!0})),Y(e,"click",t[7])],l=!0)},p(c,[f]){if(c[1]?s&&(X(),E(s,1,1,()=>{s=null}),x()):s?(s.p(c,f),f&2&&N(s,1)):(s=_t(c),s.c(),N(s,1),s.m(n,r)),f&8){u=re(c[3]);let h;for(h=0;h<u.length;h+=1){const g=yt(c,u,h);o[h]?(o[h].p(g,f),N(o[h],1)):(o[h]=wt(g),o[h].c(),N(o[h],1),o[h].m(n,null))}for(X(),h=u.length;h<o.length;h+=1)d(h);x()}(!i||f&4)&&C(e,"aria-label",c[2]),(!i||f&2)&&C(e,"aria-disabled",c[1]),(!i||f&32)&&z(e,"bridge",c[5]),(!i||f&16)&&z(e,"small",c[4]),(!i||f&2)&&z(e,"shuffling",c[1])},i(c){if(!i){N(s);for(let f=0;f<u.length;f+=1)N(o[f]);i=!0}},o(c){E(s),o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)E(o[f]);i=!1},d(c){c&&U(e),s&&s.d(),ye(o,c),l=!1,se(a)}}}function sr(t,e,n,r){const i=t/r*e,l=.5*i/(n*52),a=1*i/(n*52);return`translate(${l}em , ${a}em)`}function fr(t,e,n){let r,i,l,a,s,u;const o=et();ue(t,o,y=>n(16,u=y));let{numCards:d=52}=e,{numDecks:c=1}=e,{topCard:f=null}=e,{numShadows:h=10}=e,{shuffleAnimationSteps:g=4}=e,{shuffleAnimationMaxDistanceEm:w=.8}=e,{shuffleAnimationMaxRotateDeg:A=7}=e,{onClick:v=()=>{}}=e,S=0;function b(y,_){const M=p=>[1,_+2].includes(y)?0:(Math.random()*2-1)*p,O=M(w),D=M(w),m=M(A);return`translate(${O}em, ${D}em) rotate(${m}deg)`}function T(){S>0&&setTimeout(()=>{n(15,S-=1),T()},250)}function k(){if(!a)return v()}return t.$$set=y=>{"numCards"in y&&n(8,d=y.numCards),"numDecks"in y&&n(9,c=y.numDecks),"topCard"in y&&n(0,f=y.topCard),"numShadows"in y&&n(10,h=y.numShadows),"shuffleAnimationSteps"in y&&n(11,g=y.shuffleAnimationSteps),"shuffleAnimationMaxDistanceEm"in y&&n(12,w=y.shuffleAnimationMaxDistanceEm),"shuffleAnimationMaxRotateDeg"in y&&n(13,A=y.shuffleAnimationMaxRotateDeg),"onClick"in y&&n(14,v=y.onClick)},t.$$.update=()=>{t.$$.dirty&65536&&n(5,r=(u==null?void 0:u.size)==="bridge"),t.$$.dirty&65536&&n(4,i=(u==null?void 0:u.size)==="small"),t.$$.dirty&2817&&f===null&&d===52*c&&g>0&&(n(15,S=g+2),T()),t.$$.dirty&32768&&n(1,a=S>0),t.$$.dirty&36611&&n(3,l=f===void 0?[]:a?[...Array(h)].map((y,_)=>({card:null,shadow:!1,transform:b(S,g)})):[...Array(h)].map((y,_)=>({card:void 0,shadow:!0,transform:sr(_,d,c,h)}))),t.$$.dirty&1&&n(2,s=f===void 0?"Shuffle the deck":"Draw a card")},[f,a,s,l,i,r,o,k,d,c,h,g,w,A,v,S,u]}class cr extends te{constructor(e){super(),ee(this,e,fr,ur,Q,{numCards:8,numDecks:9,topCard:0,numShadows:10,shuffleAnimationSteps:11,shuffleAnimationMaxDistanceEm:12,shuffleAnimationMaxRotateDeg:13,onClick:14})}}function dr(t){let e,n,r;return n=new cr({props:{onClick:t[2],topCard:t[1],numCards:t[0]}}),{c(){e=R("main"),V(n.$$.fragment),C(e,"class","svelte-1tag1lj")},m(i,l){j(i,e,l),q(n,e,null),r=!0},p(i,[l]){const a={};l&2&&(a.topCard=i[1]),l&1&&(a.numCards=i[0]),n.$set(a)},i(i){r||(N(n.$$.fragment,i),r=!0)},o(i){E(n.$$.fragment,i),r=!1},d(i){i&&U(e),B(n)}}}function gr(t,e,n){Qt(jn);let r=new le.Deck,i=r.cardsRemaining,l=null;function a(){l!==void 0?n(1,l=r.pop()):(r=new le.Deck,n(1,l=null)),n(0,i=r.cardsRemaining)}const s=u=>{u.stopPropagation(),r=new le.Deck,n(1,l=null),n(0,i=r.cardsRemaining)};return Qe(()=>{we.update(u=>({...u,shuffle:s}))}),Ht(()=>{we.update(u=>({...u,shuffle:void 0}))}),[i,l,a]}class hr extends te{constructor(e){super(),ee(this,e,gr,dr,Q,{})}}const tn=(t,e)=>Zt(e).width+(t-1)*1.125,vr=(t,e,n)=>{const r={sourceStack:e,cards:n};t.dataTransfer.setData("application/json",JSON.stringify(r)),t.dataTransfer.effectAllowed="move"},mr=t=>{const{sourceStack:e,cards:n}=JSON.parse(t.dataTransfer.getData("application/json"));return{sourceStack:e,cards:n.map(le.Card.fromJSON)}};function pr(t){let e,n;return e=new qe({props:{card:t[10]?null:t[0][0],stack:"left"}}),{c(){V(e.$$.fragment)},m(r,i){q(e,r,i),n=!0},p(r,i){const l={};i&1025&&(l.card=r[10]?null:r[0][0]),e.$set(l)},i(r){n||(N(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function br(t){let e,n;return e=new qe({props:{empty:!0}}),{c(){V(e.$$.fragment)},m(r,i){q(e,r,i),n=!0},p:W,i(r){n||(N(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function St(t){let e,n,r;return n=new nn({props:{cards:t[0].slice(1),capacity:t[1]-1,nested:!0,closed:t[2],index:t[3],isDraggableFn:t[4],selectedCardsN:t[5]}}),{c(){e=R("div"),V(n.$$.fragment),C(e,"class","nested svelte-o50ay1")},m(i,l){j(i,e,l),q(n,e,null),r=!0},p(i,l){const a={};l&1&&(a.cards=i[0].slice(1)),l&2&&(a.capacity=i[1]-1),l&4&&(a.closed=i[2]),l&8&&(a.index=i[3]),l&16&&(a.isDraggableFn=i[4]),l&32&&(a.selectedCardsN=i[5]),n.$set(a)},i(i){r||(N(n.$$.fragment,i),r=!0)},o(i){E(n.$$.fragment,i),r=!1},d(i){i&&U(e),B(n)}}}function yr(t){let e,n,r,i,l,a,s,u;const o=[br,pr],d=[];function c(h,g){return h[0].length===0?0:1}n=c(t),r=d[n]=o[n](t);let f=t[0].length>1&&St(t);return{c(){e=R("div"),r.c(),i=$(),f&&f.c(),C(e,"class","stack svelte-o50ay1"),C(e,"style",t[13]),C(e,"draggable",t[12]),C(e,"tabindex",l=t[6]?void 0:0),z(e,"selected",t[11])},m(h,g){j(h,e,g),d[n].m(e,null),P(e,i),f&&f.m(e,null),a=!0,s||(u=[Y(e,"dblclick",t[17]),Y(e,"dragstart",function(){ae(t[9])&&t[9].apply(this,arguments)}),Y(e,"dragover",function(){ae(t[8])&&t[8].apply(this,arguments)}),Y(e,"drop",t[18]),Y(e,"click",function(){ae(t[7])&&t[7].apply(this,arguments)}),Y(e,"keydown",function(){ae(Ye(["Enter","Space"],t[7],{preventDefault:!0}))&&Ye(["Enter","Space"],t[7],{preventDefault:!0}).apply(this,arguments)})],s=!0)},p(h,[g]){t=h;let w=n;n=c(t),n===w?d[n].p(t,g):(X(),E(d[w],1,1,()=>{d[w]=null}),x(),r=d[n],r?r.p(t,g):(r=d[n]=o[n](t),r.c()),N(r,1),r.m(e,i)),t[0].length>1?f?(f.p(t,g),g&1&&N(f,1)):(f=St(t),f.c(),N(f,1),f.m(e,null)):f&&(X(),E(f,1,1,()=>{f=null}),x()),(!a||g&8192)&&C(e,"style",t[13]),(!a||g&4096)&&C(e,"draggable",t[12]),(!a||g&64&&l!==(l=t[6]?void 0:0))&&C(e,"tabindex",l),(!a||g&2048)&&z(e,"selected",t[11])},i(h){a||(N(r),N(f),a=!0)},o(h){E(r),E(f),a=!1},d(h){h&&U(e),d[n].d(),f&&f.d(),s=!1,se(u)}}}function _r(t,e,n){let r,i,l,a,s,u,o,d,c;const f=et();ue(t,f,_=>n(16,c=_));let{cards:h=[]}=e,{capacity:g=4}=e,{closed:w=!1}=e,{index:A=0}=e,{isDraggableFn:v=()=>!1}=e,{selectedCardsN:S=0}=e,{nested:b=!1}=e;const T=Wt();function k(_){ot.call(this,t,_)}function y(_){ot.call(this,t,_)}return t.$$set=_=>{"cards"in _&&n(0,h=_.cards),"capacity"in _&&n(1,g=_.capacity),"closed"in _&&n(2,w=_.closed),"index"in _&&n(3,A=_.index),"isDraggableFn"in _&&n(4,v=_.isDraggableFn),"selectedCardsN"in _&&n(5,S=_.selectedCardsN),"nested"in _&&n(6,b=_.nested)},t.$$.update=()=>{t.$$.dirty&65536&&n(15,r=c.size),t.$$.dirty&32770&&n(13,i=`width: ${tn(g,r)}em`),t.$$.dirty&21&&n(12,l=!w&&v(h)),t.$$.dirty&33&&n(11,a=S>0&&S===h.length),t.$$.dirty&5&&n(10,s=w&&h.length===1),t.$$.dirty&9&&n(9,u=_=>{_.stopPropagation(),vr(_,A,h)}),t.$$.dirty&72&&n(7,d=()=>{b||T("select",{index:A})})},n(8,o=_=>{_.preventDefault()}),[h,g,w,A,v,S,b,d,o,u,s,a,l,i,f,r,c,k,y]}class nn extends te{constructor(e){super(),ee(this,e,_r,yr,Q,{cards:0,capacity:1,closed:2,index:3,isDraggableFn:4,selectedCardsN:5,nested:6})}}const rn=(t,e)=>{const n=t/e;return n<3/4?[3,5]:n<4/3?[4,4]:[5,3]},kt=(t,e)=>{const[n,r]=rn(t,e);return{length:n*r-15}},wr=(t,e,n,r)=>{const[i,l]=rn(e,r),a=tn(4,t)*i+(t!=="small"?.666:.333)*10,s=e*.95/a,u=Zt(t).height*l+(t!=="small"?.5:.25)*6,d=(n>600?n:r)*.95/u;return Math.min(s,d)},Ct=()=>{const t=new le.Deck;return[...Array(13)].map(()=>t.popN(4)).concat([[],[]])},tt=t=>{const[e,...n]=t;return n.every(r=>r.value===e.value)},Sr=t=>t.length===0?!1:t.length===1?!0:tt(t),an=(t,e)=>t.length+e.length>4?!1:e.length===0||e[e.length-1].value===t[0].value,ln=(t,e,n,r)=>{const i=t.map(l=>[...l]);if(!an(r,i[n]))throw new Error(`Can not move cards ${r.map(l=>l.toString(Ae.CardStringType.ShortEmoji))} from pile ${e} to pile ${n}`);return i[e]=i[e].slice(0,i[e].length-r.length),i[n]=[...i[n],...r],i},nt=t=>t.length===1||tt(t)?t:nt(t.slice(1)),kr=(t,e)=>{if(t[e].length===0)throw new Error("Cannot move cards from an empty pile.");if(on(t[e]))throw new Error("Cannot move cards from a completed pile.");const n=nt(t[e]),r=t.reduce((a,s,u)=>u!==e&&an(n,s)?[...a,u]:a,[]);if(r.length===0)throw new Error(`Cannot move cards from pile ${e} to any other pile`);const i=r.filter(a=>t[a].length>0),l=i.length>0?i[0]:r[0];return ln(t,e,l,n)},on=t=>t.length===4&&tt(t),Cr=t=>t.reduce((e,n,r)=>on(n)?[...e,r]:e,[]);function Tt(t,e,n){const r=t.slice();return r[22]=e[n],r}function Nt(t,e,n){const r=t.slice();return r[25]=e[n],r[27]=n,r}function Dt(t){let e,n,r;return n=new nn({props:{cards:t[25],closed:t[8].includes(t[27]),selectedCardsN:t[7]===t[27]?t[6].length:0,index:t[27],isDraggableFn:Sr}}),n.$on("drop",t[11](t[27])),n.$on("dblclick",t[12](t[27])),n.$on("select",t[10]),{c(){e=R("div"),V(n.$$.fragment),C(e,"class","pile svelte-1qdb0j4"),z(e,"small",t[3]==="small")},m(i,l){j(i,e,l),q(n,e,null),r=!0},p(i,l){const a={};l&16&&(a.cards=i[25]),l&256&&(a.closed=i[8].includes(i[27])),l&192&&(a.selectedCardsN=i[7]===i[27]?i[6].length:0),n.$set(a),(!r||l&8)&&z(e,"small",i[3]==="small")},i(i){r||(N(n.$$.fragment,i),r=!0)},o(i){E(n.$$.fragment,i),r=!1},d(i){i&&U(e),B(n)}}}function Et(t){let e;return{c(){e=R("div"),C(e,"class","pile svelte-1qdb0j4")},m(n,r){j(n,e,r)},p:W,d(n){n&&U(e)}}}function Tr(t){let e,n,r,i,l,a;Ee(t[17]);let s=re(t[4]),u=[];for(let f=0;f<s.length;f+=1)u[f]=Dt(Nt(t,s,f));const o=f=>E(u[f],1,1,()=>{u[f]=null});let d=re(kt(t[0],t[2])),c=[];for(let f=0;f<d.length;f+=1)c[f]=Et(Tt(t,d,f));return{c(){e=R("main");for(let f=0;f<u.length;f+=1)u[f].c();n=$();for(let f=0;f<c.length;f+=1)c[f].c();C(e,"class","pileon svelte-1qdb0j4"),C(e,"style",t[5]),Ee(()=>t[18].call(e))},m(f,h){j(f,e,h);for(let g=0;g<u.length;g+=1)u[g]&&u[g].m(e,null);P(e,n);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(e,null);r=kn(e,t[18].bind(e)),i=!0,l||(a=Y(window,"resize",t[17]),l=!0)},p(f,[h]){if(h&7640){s=re(f[4]);let g;for(g=0;g<s.length;g+=1){const w=Nt(f,s,g);u[g]?(u[g].p(w,h),N(u[g],1)):(u[g]=Dt(w),u[g].c(),N(u[g],1),u[g].m(e,n))}for(X(),g=s.length;g<u.length;g+=1)o(g);x()}if(h&5){d=re(kt(f[0],f[2]));let g;for(g=0;g<d.length;g+=1){const w=Tt(f,d,g);c[g]?c[g].p(w,h):(c[g]=Et(),c[g].c(),c[g].m(e,null))}for(;g<c.length;g+=1)c[g].d(1);c.length=d.length}(!i||h&32)&&C(e,"style",f[5])},i(f){if(!i){for(let h=0;h<s.length;h+=1)N(u[h]);i=!0}},o(f){u=u.filter(Boolean);for(let h=0;h<u.length;h+=1)E(u[h]);i=!1},d(f){f&&U(e),ye(u,f),ye(c,f),r(),l=!1,a()}}}function Nr(t,e,n){let r,i,l,a,s,u,o,d,c,f,h,g=Qt(O=>({size:O.size==="default"?"bridge":O.size,fourColor:O.colors==="four-color"}));ue(t,g,O=>n(16,d=O));let w=[Ct()];const A=O=>{O.stopPropagation(),w.length>1&&n(13,w=w.slice(0,w.length-1))},v=O=>{O.stopPropagation(),n(13,w=[Ct()])};let S=[void 0,[]];const b=(O,D,m)=>{try{n(14,S=[void 0,[]]);const p=ln(w[w.length-1],O,D,m);n(13,w=[...w,p])}catch{}},T=O=>{const[D,m]=S,p=O.detail.index;i.includes(p)||(D===void 0||m.length===0?n(14,S=[p,nt(r[p])]):D===p?n(14,S=[p,m.slice(1)]):D!==p&&(b(D,p,m),n(14,S=[void 0,[]])))},k=O=>D=>{D.preventDefault();const{sourceStack:m,cards:p}=mr(D);m!==O&&b(m,O,p)},y=O=>D=>{D.preventDefault();try{n(14,S=[void 0,[]]);const m=kr(w[w.length-1],O);n(13,w=[...w,m])}catch{}};Qe(()=>{we.update(O=>({...O,shuffle:v,undo:A}))}),Ht(()=>{we.update(O=>({...O,shuffle:void 0,undo:void 0}))});function _(){n(2,h=window.innerHeight)}function M(){f=this.clientHeight,c=this.clientWidth,n(1,f),n(0,c)}return t.$$.update=()=>{if(t.$$.dirty&5){const O=c<800||h<500?"small":"bridge";qn(D=>({size:D.size==="default"?O:D.size,fourColor:D.colors==="four-color"}))}t.$$.dirty&8192&&n(4,r=w[w.length-1]),t.$$.dirty&16&&n(8,i=Cr(r)),t.$$.dirty&16384&&n(7,l=S[0]),t.$$.dirty&16384&&n(6,a=S[1]),t.$$.dirty&65536&&n(3,s=d.size),t.$$.dirty&15&&n(15,u=wr(s,c,f,h)),t.$$.dirty&32768&&n(5,o=`font-size: ${u}px`)},[c,f,h,s,r,o,a,l,i,g,T,k,y,w,S,u,d,_,M]}class Dr extends te{constructor(e){super(),ee(this,e,Nr,Tr,Q,{})}}function Er(t){let e;return{c(){e=R("span"),e.textContent=`at ${t[0]} ${t[1]}`},m(n,r){j(n,e,r)},p:W,d(n){n&&U(e)}}}function Fr(t){let e,n,r,i=(t[1]||t[0])&&Er(t);return{c(){e=R("footer"),n=R("a"),n.textContent="kangasta / pileon",r=$(),i&&i.c(),C(n,"href","https://github.com/kangasta/pileon.git"),C(n,"target","_blank"),C(e,"class","svelte-16t3ryr")},m(l,a){j(l,e,a),P(e,n),P(e,r),i&&i.m(e,null)},p(l,[a]){(l[1]||l[0])&&i.p(l,a)},i:W,o:W,d(l){l&&U(e),i&&i.d()}}}function Or(t){const e={}.VITE_TAG??"",n="a07c0fd2703199e2824ccbe04c7d8308b6fc50d4".slice(0,8);return[e,n]}class Ar extends te{constructor(e){super(),ee(this,e,Or,Fr,Q,{})}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var un=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ie=un.join(","),sn=typeof Element>"u",ge=sn?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Ue=!sn&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},Ke=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),l=i===""||i==="true",a=l||n&&e&&t(e.parentNode);return a},Pr=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},fn=function(e,n,r){if(Ke(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(Ie));return n&&ge.call(e,Ie)&&i.unshift(e),i=i.filter(r),i},cn=function t(e,n,r){for(var i=[],l=Array.from(e);l.length;){var a=l.shift();if(!Ke(a,!1))if(a.tagName==="SLOT"){var s=a.assignedElements(),u=s.length?s:a.children,o=t(u,!0,r);r.flatten?i.push.apply(i,o):i.push({scopeParent:a,candidates:o})}else{var d=ge.call(a,Ie);d&&r.filter(a)&&(n||!e.includes(a))&&i.push(a);var c=a.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(a),f=!Ke(c,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(a));if(c&&f){var h=t(c===!0?a.children:c.children,!0,r);r.flatten?i.push.apply(i,h):i.push({scopeParent:a,candidates:h})}else l.unshift.apply(l,a.children)}}return i},dn=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},ce=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Pr(e))&&!dn(e)?0:e.tabIndex},Lr=function(e,n){var r=ce(e);return r<0&&n&&!dn(e)?0:r},Rr=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},gn=function(e){return e.tagName==="INPUT"},Mr=function(e){return gn(e)&&e.type==="hidden"},Ir=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},Ur=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},Kr=function(e){if(!e.name)return!0;var n=e.form||Ue(e),r=function(s){return n.querySelectorAll('input[type="radio"][name="'+s+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var l=Ur(i,e.form);return!l||l===e},zr=function(e){return gn(e)&&e.type==="radio"},jr=function(e){return zr(e)&&!Kr(e)},qr=function(e){var n,r=e&&Ue(e),i=(n=r)===null||n===void 0?void 0:n.host,l=!1;if(r&&r!==e){var a,s,u;for(l=!!((a=i)!==null&&a!==void 0&&(s=a.ownerDocument)!==null&&s!==void 0&&s.contains(i)||e!=null&&(u=e.ownerDocument)!==null&&u!==void 0&&u.contains(e));!l&&i;){var o,d,c;r=Ue(i),i=(o=r)===null||o===void 0?void 0:o.host,l=!!((d=i)!==null&&d!==void 0&&(c=d.ownerDocument)!==null&&c!==void 0&&c.contains(i))}}return l},Ft=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},Br=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var l=ge.call(e,"details>summary:first-of-type"),a=l?e.parentElement:e;if(ge.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var s=e;e;){var u=e.parentElement,o=Ue(e);if(u&&!u.shadowRoot&&i(u)===!0)return Ft(e);e.assignedSlot?e=e.assignedSlot:!u&&o!==e.ownerDocument?e=o.host:e=u}e=s}if(qr(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Ft(e);return!1},Vr=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return ge.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},ze=function(e,n){return!(n.disabled||Ke(n)||Mr(n)||Br(n,e)||Ir(n)||Vr(n))},Ze=function(e,n){return!(jr(n)||ce(n)<0||!ze(e,n))},$r=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},Hr=function t(e){var n=[],r=[];return e.forEach(function(i,l){var a=!!i.scopeParent,s=a?i.scopeParent:i,u=Lr(s,a),o=a?t(i.candidates):s;u===0?a?n.push.apply(n,o):n.push(s):r.push({documentOrder:l,tabIndex:u,item:i,isScope:a,content:o})}),r.sort(Rr).reduce(function(i,l){return l.isScope?i.push.apply(i,l.content):i.push(l.content),i},[]).concat(n)},Wr=function(e,n){n=n||{};var r;return n.getShadowRoot?r=cn([e],n.includeContainer,{filter:Ze.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:$r}):r=fn(e,n.includeContainer,Ze.bind(null,n)),Hr(r)},Jr=function(e,n){n=n||{};var r;return n.getShadowRoot?r=cn([e],n.includeContainer,{filter:ze.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=fn(e,n.includeContainer,ze.bind(null,n)),r},me=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ge.call(e,Ie)===!1?!1:Ze(n,e)},Gr=un.concat("iframe").join(","),Je=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ge.call(e,Gr)===!1?!1:ze(n,e)};/*!
* focus-trap 7.5.2
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function At(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ot(Object(n),!0).forEach(function(r){Yr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yr(t,e,n){return e=Qr(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zr(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qr(t){var e=Zr(t,"string");return typeof e=="symbol"?e:String(e)}var Pt={activateTrap:function(e,n){if(e.length>0){var r=e[e.length-1];r!==n&&r.pause()}var i=e.indexOf(n);i===-1||e.splice(i,1),e.push(n)},deactivateTrap:function(e,n){var r=e.indexOf(n);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},Xr=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},xr=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},Ne=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},ei=function(e){return Ne(e)&&!e.shiftKey},ti=function(e){return Ne(e)&&e.shiftKey},Lt=function(e){return setTimeout(e,0)},Rt=function(e,n){var r=-1;return e.every(function(i,l){return n(i)?(r=l,!1):!0}),r},Ce=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},Le=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},ni=[],ri=function(e,n){var r=(n==null?void 0:n.document)||document,i=(n==null?void 0:n.trapStack)||ni,l=At({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:ei,isKeyBackward:ti},n),a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},s,u=function(m,p,F){return m&&m[p]!==void 0?m[p]:l[F||p]},o=function(m,p){var F=typeof(p==null?void 0:p.composedPath)=="function"?p.composedPath():void 0;return a.containerGroups.findIndex(function(I){var K=I.container,L=I.tabbableNodes;return K.contains(m)||(F==null?void 0:F.includes(K))||L.find(function(H){return H===m})})},d=function(m){var p=l[m];if(typeof p=="function"){for(var F=arguments.length,I=new Array(F>1?F-1:0),K=1;K<F;K++)I[K-1]=arguments[K];p=p.apply(void 0,I)}if(p===!0&&(p=void 0),!p){if(p===void 0||p===!1)return p;throw new Error("`".concat(m,"` was specified but was not a node, or did not return a node"))}var L=p;if(typeof p=="string"&&(L=r.querySelector(p),!L))throw new Error("`".concat(m,"` as selector refers to no known node"));return L},c=function(){var m=d("initialFocus");if(m===!1)return!1;if(m===void 0||!Je(m,l.tabbableOptions))if(o(r.activeElement)>=0)m=r.activeElement;else{var p=a.tabbableGroups[0],F=p&&p.firstTabbableNode;m=F||d("fallbackFocus")}if(!m)throw new Error("Your focus-trap needs to have at least one focusable element");return m},f=function(){if(a.containerGroups=a.containers.map(function(m){var p=Wr(m,l.tabbableOptions),F=Jr(m,l.tabbableOptions),I=p.length>0?p[0]:void 0,K=p.length>0?p[p.length-1]:void 0,L=F.find(function(J){return me(J)}),H=F.slice().reverse().find(function(J){return me(J)}),G=!!p.find(function(J){return ce(J)>0});return{container:m,tabbableNodes:p,focusableNodes:F,posTabIndexesFound:G,firstTabbableNode:I,lastTabbableNode:K,firstDomTabbableNode:L,lastDomTabbableNode:H,nextTabbableNode:function(fe){var Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,oe=p.indexOf(fe);return oe<0?Se?F.slice(F.indexOf(fe)+1).find(function(ke){return me(ke)}):F.slice(0,F.indexOf(fe)).reverse().find(function(ke){return me(ke)}):p[oe+(Se?1:-1)]}}}),a.tabbableGroups=a.containerGroups.filter(function(m){return m.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!d("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(a.containerGroups.find(function(m){return m.posTabIndexesFound})&&a.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},h=function D(m){if(m!==!1&&m!==r.activeElement){if(!m||!m.focus){D(c());return}m.focus({preventScroll:!!l.preventScroll}),a.mostRecentlyFocusedNode=m,Xr(m)&&m.select()}},g=function(m){var p=d("setReturnFocus",m);return p||(p===!1?!1:m)},w=function(m){var p=m.target,F=m.event,I=m.isBackward,K=I===void 0?!1:I;p=p||Le(F),f();var L=null;if(a.tabbableGroups.length>0){var H=o(p,F),G=H>=0?a.containerGroups[H]:void 0;if(H<0)K?L=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:L=a.tabbableGroups[0].firstTabbableNode;else if(K){var J=Rt(a.tabbableGroups,function(Ve){var $e=Ve.firstTabbableNode;return p===$e});if(J<0&&(G.container===p||Je(p,l.tabbableOptions)&&!me(p,l.tabbableOptions)&&!G.nextTabbableNode(p,!1))&&(J=H),J>=0){var fe=J===0?a.tabbableGroups.length-1:J-1,Se=a.tabbableGroups[fe];L=ce(p)>=0?Se.lastTabbableNode:Se.lastDomTabbableNode}else Ne(F)||(L=G.nextTabbableNode(p,!1))}else{var oe=Rt(a.tabbableGroups,function(Ve){var $e=Ve.lastTabbableNode;return p===$e});if(oe<0&&(G.container===p||Je(p,l.tabbableOptions)&&!me(p,l.tabbableOptions)&&!G.nextTabbableNode(p))&&(oe=H),oe>=0){var ke=oe===a.tabbableGroups.length-1?0:oe+1,rt=a.tabbableGroups[ke];L=ce(p)>=0?rt.firstTabbableNode:rt.firstDomTabbableNode}else Ne(F)||(L=G.nextTabbableNode(p))}}else L=d("fallbackFocus");return L},A=function(m){var p=Le(m);if(!(o(p,m)>=0)){if(Ce(l.clickOutsideDeactivates,m)){s.deactivate({returnFocus:l.returnFocusOnDeactivate});return}Ce(l.allowOutsideClick,m)||m.preventDefault()}},v=function(m){var p=Le(m),F=o(p,m)>=0;if(F||p instanceof Document)F&&(a.mostRecentlyFocusedNode=p);else{m.stopImmediatePropagation();var I,K=!0;if(a.mostRecentlyFocusedNode)if(ce(a.mostRecentlyFocusedNode)>0){var L=o(a.mostRecentlyFocusedNode),H=a.containerGroups[L].tabbableNodes;if(H.length>0){var G=H.findIndex(function(J){return J===a.mostRecentlyFocusedNode});G>=0&&(l.isKeyForward(a.recentNavEvent)?G+1<H.length&&(I=H[G+1],K=!1):G-1>=0&&(I=H[G-1],K=!1))}}else a.containerGroups.some(function(J){return J.tabbableNodes.some(function(fe){return ce(fe)>0})})||(K=!1);else K=!1;K&&(I=w({target:a.mostRecentlyFocusedNode,isBackward:l.isKeyBackward(a.recentNavEvent)})),h(I||a.mostRecentlyFocusedNode||c())}a.recentNavEvent=void 0},S=function(m){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;a.recentNavEvent=m;var F=w({event:m,isBackward:p});F&&(Ne(m)&&m.preventDefault(),h(F))},b=function(m){if(xr(m)&&Ce(l.escapeDeactivates,m)!==!1){m.preventDefault(),s.deactivate();return}(l.isKeyForward(m)||l.isKeyBackward(m))&&S(m,l.isKeyBackward(m))},T=function(m){var p=Le(m);o(p,m)>=0||Ce(l.clickOutsideDeactivates,m)||Ce(l.allowOutsideClick,m)||(m.preventDefault(),m.stopImmediatePropagation())},k=function(){if(a.active)return Pt.activateTrap(i,s),a.delayInitialFocusTimer=l.delayInitialFocus?Lt(function(){h(c())}):h(c()),r.addEventListener("focusin",v,!0),r.addEventListener("mousedown",A,{capture:!0,passive:!1}),r.addEventListener("touchstart",A,{capture:!0,passive:!1}),r.addEventListener("click",T,{capture:!0,passive:!1}),r.addEventListener("keydown",b,{capture:!0,passive:!1}),s},y=function(){if(a.active)return r.removeEventListener("focusin",v,!0),r.removeEventListener("mousedown",A,!0),r.removeEventListener("touchstart",A,!0),r.removeEventListener("click",T,!0),r.removeEventListener("keydown",b,!0),s},_=function(m){var p=m.some(function(F){var I=Array.from(F.removedNodes);return I.some(function(K){return K===a.mostRecentlyFocusedNode})});p&&h(c())},M=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(_):void 0,O=function(){M&&(M.disconnect(),a.active&&!a.paused&&a.containers.map(function(m){M.observe(m,{subtree:!0,childList:!0})}))};return s={get active(){return a.active},get paused(){return a.paused},activate:function(m){if(a.active)return this;var p=u(m,"onActivate"),F=u(m,"onPostActivate"),I=u(m,"checkCanFocusTrap");I||f(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=r.activeElement,p==null||p();var K=function(){I&&f(),k(),O(),F==null||F()};return I?(I(a.containers.concat()).then(K,K),this):(K(),this)},deactivate:function(m){if(!a.active)return this;var p=At({onDeactivate:l.onDeactivate,onPostDeactivate:l.onPostDeactivate,checkCanReturnFocus:l.checkCanReturnFocus},m);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,y(),a.active=!1,a.paused=!1,O(),Pt.deactivateTrap(i,s);var F=u(p,"onDeactivate"),I=u(p,"onPostDeactivate"),K=u(p,"checkCanReturnFocus"),L=u(p,"returnFocus","returnFocusOnDeactivate");F==null||F();var H=function(){Lt(function(){L&&h(g(a.nodeFocusedBeforeActivation)),I==null||I()})};return L&&K?(K(g(a.nodeFocusedBeforeActivation)).then(H,H),this):(H(),this)},pause:function(m){if(a.paused||!a.active)return this;var p=u(m,"onPause"),F=u(m,"onPostPause");return a.paused=!0,p==null||p(),y(),O(),F==null||F(),this},unpause:function(m){if(!a.paused||!a.active)return this;var p=u(m,"onUnpause"),F=u(m,"onPostUnpause");return a.paused=!1,p==null||p(),f(),k(),O(),F==null||F(),this},updateContainerElements:function(m){var p=[].concat(m).filter(Boolean);return a.containers=p.map(function(F){return typeof F=="string"?r.querySelector(F):F}),a.active&&f(),O(),this}},s.updateContainerElements(e),s};const hn=()=>(Math.random()+1).toString(36).substring(5);function ii(t){let e,n,r,i,l,a,s,u,o,d;return{c(){e=R("div"),n=R("button"),r=Me("svg"),i=Me("path"),a=$(),s=R("div"),u=ne(t[1]),C(i,"fill","none"),C(i,"stroke","currentColor"),C(i,"stroke-linecap","round"),C(i,"stroke-linejoin","round"),C(i,"stroke-width","1"),C(i,"d",l=t[3][t[0]].path),C(r,"viewBox","0 0 16 16"),C(r,"class","svelte-1nd3ako"),C(n,"aria-labelledby",t[4]),C(n,"class","clickable svelte-1nd3ako"),z(n,"open",open),C(s,"class","label svelte-1nd3ako"),C(s,"id",t[4]),C(e,"class","icon-button clickable svelte-1nd3ako")},m(c,f){j(c,e,f),P(e,n),P(n,r),P(r,i),P(e,a),P(e,s),P(s,u),o||(d=[Y(n,"click",function(){ae(t[2])&&t[2].apply(this,arguments)}),Y(e,"click",function(){ae(t[2])&&t[2].apply(this,arguments)})],o=!0)},p(c,[f]){t=c,f&1&&l!==(l=t[3][t[0]].path)&&C(i,"d",l),f&0&&z(n,"open",open),f&2&&Fe(u,t[1])},i:W,o:W,d(c){c&&U(e),o=!1,se(d)}}}function ai(t,e,n){const r={Close:{path:"M 3 3 L 13 13 M 3 13 L 13 3"},Menu:{path:"M 2 4 L 14 4 M 2 8 L 14 8 M 2 12 L 14 12"},Shuffle:{path:"M 5 2 L 2 5 L 5 8 M 2 5 L 12 5 M 11 14 L 14 11 L 11 8 M 14 11 L 4 11"},Undo:{path:"M 5 3 L 2 6 L 5 9 M 2 6 L 10 6 A 3 3 0 1 1 10 13 L 8 13"}};let{icon:i}=e,{label:l}=e,{onClick:a}=e;const s=`${hn()}-label`;return t.$$set=u=>{"icon"in u&&n(0,i=u.icon),"label"in u&&n(1,l=u.label),"onClick"in u&&n(2,a=u.onClick)},[i,l,a,r,s]}class Be extends te{constructor(e){super(),ee(this,e,ai,ii,Q,{icon:0,label:1,onClick:2})}}function li(t){let e,n,r,i,l,a,s,u,o,d;u=new Be({props:{icon:"Close",label:"Close",onClick:t[2]}});const c=t[4].default,f=jt(c,t,t[3],null);return{c(){e=R("div"),n=$(),r=R("div"),i=R("div"),l=R("h2"),a=ne(t[0]),s=$(),V(u.$$.fragment),o=$(),f&&f.c(),C(e,"class","backdrop svelte-1lts3yv"),C(l,"class","svelte-1lts3yv"),C(i,"class","header svelte-1lts3yv"),C(r,"class","modal svelte-1lts3yv"),C(r,"id",t[1])},m(h,g){j(h,e,g),j(h,n,g),j(h,r,g),P(r,i),P(i,l),P(l,a),P(i,s),q(u,i,null),P(r,o),f&&f.m(r,null),d=!0},p(h,[g]){(!d||g&1)&&Fe(a,h[0]),f&&f.p&&(!d||g&8)&&Vt(f,c,h,h[3],d?Bt(c,h[3],g,null):$t(h[3]),null)},i(h){d||(N(u.$$.fragment,h),N(f,h),d=!0)},o(h){E(u.$$.fragment,h),E(f,h),d=!1},d(h){h&&(U(e),U(n),U(r)),B(u),f&&f.d(h)}}}function oi(t,e,n){let{$$slots:r={},$$scope:i}=e,{title:l}=e;const a=`modal-${hn()}`;Qe(()=>{const o=ri(`#${a}`,{clickOutsideDeactivates:!0,onDeactivate:()=>u()});o.activate();const d=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{o.deactivate(),document.body.style.overflow=d}});const s=Wt(),u=()=>{s("close")};return t.$$set=o=>{"title"in o&&n(0,l=o.title),"$$scope"in o&&n(3,i=o.$$scope)},[l,a,u,i,r]}class ui extends te{constructor(e){super(),ee(this,e,oi,li,Q,{title:0})}}function si(t){let e,n,r,i,l;return{c(){e=R("button"),n=ne(t[0]),C(e,"aria-pressed",r=t[1]?"true":"false"),e.disabled=t[1],C(e,"class","svelte-jc3xzr"),z(e,"pressed",t[1])},m(a,s){j(a,e,s),P(e,n),i||(l=Y(e,"click",function(){ae(t[2])&&t[2].apply(this,arguments)}),i=!0)},p(a,[s]){t=a,s&1&&Fe(n,t[0]),s&2&&r!==(r=t[1]?"true":"false")&&C(e,"aria-pressed",r),s&2&&(e.disabled=t[1]),s&2&&z(e,"pressed",t[1])},i:W,o:W,d(a){a&&U(e),i=!1,l()}}}function fi(t,e,n){let r,i,l;ue(t,_e,d=>n(4,l=d));let{target:a}=e,{value:s}=e;const{update:u}=_e,o=()=>{};return t.$$set=d=>{"target"in d&&n(3,a=d.target),"value"in d&&n(0,s=d.value)},t.$$.update=()=>{t.$$.dirty&25&&n(1,i=l[a]===s),t.$$.dirty&11&&n(2,r=i?o:()=>u(d=>({...d,[a]:s})))},[s,i,r,a,l]}class ie extends te{constructor(e){super(),ee(this,e,fi,si,Q,{target:3,value:0})}}function Mt(t){let e,n;return e=new Be({props:{icon:"Shuffle",label:"Shuffle",onClick:t[1].shuffle}}),{c(){V(e.$$.fragment)},m(r,i){q(e,r,i),n=!0},p(r,i){const l={};i&2&&(l.onClick=r[1].shuffle),e.$set(l)},i(r){n||(N(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function It(t){let e,n;return e=new Be({props:{icon:"Undo",label:"Undo",onClick:t[1].undo}}),{c(){V(e.$$.fragment)},m(r,i){q(e,r,i),n=!0},p(r,i){const l={};i&2&&(l.onClick=r[1].undo),e.$set(l)},i(r){n||(N(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Ut(t){let e,n;return e=new ui({props:{title:"Settings",$$slots:{default:[ci]},$$scope:{ctx:t}}}),e.$on("close",t[2]("close")),{c(){V(e.$$.fragment)},m(r,i){q(e,r,i),n=!0},p(r,i){const l={};i&8&&(l.$$scope={dirty:i,ctx:r}),e.$set(l)},i(r){n||(N(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function ci(t){let e,n,r,i,l,a,s,u,o,d,c,f,h,g,w,A,v,S,b,T,k,y,_,M,O,D,m,p,F,I,K;return a=new ie({props:{target:"game",value:"deck"}}),u=new ie({props:{target:"game",value:"pileon"}}),g=new ie({props:{target:"colors",value:"default"}}),A=new ie({props:{target:"colors",value:"standard"}}),S=new ie({props:{target:"colors",value:"four-color"}}),M=new ie({props:{target:"size",value:"default"}}),D=new ie({props:{target:"size",value:"bridge"}}),p=new ie({props:{target:"size",value:"poker"}}),I=new ie({props:{target:"size",value:"small"}}),{c(){e=R("table"),n=R("tr"),r=R("th"),r.textContent="Game:",i=$(),l=R("td"),V(a.$$.fragment),s=ne(" / "),V(u.$$.fragment),o=$(),d=R("tr"),c=R("th"),c.textContent="Colors:",f=$(),h=R("td"),V(g.$$.fragment),w=ne(" / "),V(A.$$.fragment),v=ne(" / "),V(S.$$.fragment),b=$(),T=R("tr"),k=R("th"),k.textContent="Size:",y=$(),_=R("td"),V(M.$$.fragment),O=ne(" / "),V(D.$$.fragment),m=ne(" / "),V(p.$$.fragment),F=ne(" / "),V(I.$$.fragment),C(r,"class","svelte-1knt3fz"),C(l,"class","svelte-1knt3fz"),C(c,"class","svelte-1knt3fz"),C(h,"class","svelte-1knt3fz"),C(k,"class","svelte-1knt3fz"),C(_,"class","svelte-1knt3fz"),C(e,"class","svelte-1knt3fz")},m(L,H){j(L,e,H),P(e,n),P(n,r),P(n,i),P(n,l),q(a,l,null),P(l,s),q(u,l,null),P(e,o),P(e,d),P(d,c),P(d,f),P(d,h),q(g,h,null),P(h,w),q(A,h,null),P(h,v),q(S,h,null),P(e,b),P(e,T),P(T,k),P(T,y),P(T,_),q(M,_,null),P(_,O),q(D,_,null),P(_,m),q(p,_,null),P(_,F),q(I,_,null),K=!0},p:W,i(L){K||(N(a.$$.fragment,L),N(u.$$.fragment,L),N(g.$$.fragment,L),N(A.$$.fragment,L),N(S.$$.fragment,L),N(M.$$.fragment,L),N(D.$$.fragment,L),N(p.$$.fragment,L),N(I.$$.fragment,L),K=!0)},o(L){E(a.$$.fragment,L),E(u.$$.fragment,L),E(g.$$.fragment,L),E(A.$$.fragment,L),E(S.$$.fragment,L),E(M.$$.fragment,L),E(D.$$.fragment,L),E(p.$$.fragment,L),E(I.$$.fragment,L),K=!1},d(L){L&&U(e),B(a),B(u),B(g),B(A),B(S),B(M),B(D),B(p),B(I)}}}function di(t){let e,n,r,i,l,a,s,u=t[1].shuffle!==void 0&&Mt(t);r=new Be({props:{icon:"Menu",label:"Settings",onClick:t[2]("open")}});let o=t[1].undo!==void 0&&It(t),d=t[0]&&Ut(t);return{c(){e=R("div"),u&&u.c(),n=$(),V(r.$$.fragment),i=$(),o&&o.c(),l=$(),d&&d.c(),a=_n(),C(e,"class","menu svelte-1knt3fz")},m(c,f){j(c,e,f),u&&u.m(e,null),P(e,n),q(r,e,null),P(e,i),o&&o.m(e,null),j(c,l,f),d&&d.m(c,f),j(c,a,f),s=!0},p(c,[f]){c[1].shuffle!==void 0?u?(u.p(c,f),f&2&&N(u,1)):(u=Mt(c),u.c(),N(u,1),u.m(e,n)):u&&(X(),E(u,1,1,()=>{u=null}),x()),c[1].undo!==void 0?o?(o.p(c,f),f&2&&N(o,1)):(o=It(c),o.c(),N(o,1),o.m(e,null)):o&&(X(),E(o,1,1,()=>{o=null}),x()),c[0]?d?(d.p(c,f),f&1&&N(d,1)):(d=Ut(c),d.c(),N(d,1),d.m(a.parentNode,a)):d&&(X(),E(d,1,1,()=>{d=null}),x())},i(c){s||(N(u),N(r.$$.fragment,c),N(o),N(d),s=!0)},o(c){E(u),E(r.$$.fragment,c),E(o),E(d),s=!1},d(c){c&&(U(e),U(l),U(a)),u&&u.d(),B(r),o&&o.d(),d&&d.d(c)}}}function gi(t,e,n){let r;ue(t,we,a=>n(1,r=a));let i=!1;return[i,r,a=>s=>{n(0,i=a==="open"),s.stopPropagation()}]}class hi extends te{constructor(e){super(),ee(this,e,gi,di,Q,{})}}function vi(t){let e,n,r,i,l,a,s,u,o;e=new hi({});var d=t[0];function c(f,h){return{}}return d&&(r=lt(d,c())),a=new Ar({}),{c(){V(e.$$.fragment),n=$(),r&&V(r.$$.fragment),i=$(),l=$(),V(a.$$.fragment)},m(f,h){q(e,f,h),j(f,n,h),r&&q(r,f,h),j(f,i,h),j(f,l,h),q(a,f,h),s=!0,u||(o=Y(document.body,"keydown",t[1]),u=!0)},p(f,[h]){if(h&1&&d!==(d=f[0])){if(r){X();const g=r;E(g.$$.fragment,1,0,()=>{B(g,1)}),x()}d?(r=lt(d,c()),V(r.$$.fragment),N(r.$$.fragment,1),q(r,i.parentNode,i)):r=null}},i(f){s||(N(e.$$.fragment,f),r&&N(r.$$.fragment,f),N(a.$$.fragment,f),s=!0)},o(f){E(e.$$.fragment,f),r&&E(r.$$.fragment,f),E(a.$$.fragment,f),s=!1},d(f){f&&(U(n),U(i),U(l)),B(e,f),r&&B(r,f),B(a,f),u=!1,o()}}}function mi(t,e,n){let r,i,l;ue(t,we,s=>n(3,i=s)),ue(t,_e,s=>n(2,l=s));const a=s=>{s.key==="z"&&(s.ctrlKey||s.metaKey)&&i.undo!==void 0&&i.undo(s)};return t.$$.update=()=>{t.$$.dirty&4&&n(0,r=l.game==="deck"?hr:Dr)},[r,a,l]}class pi extends te{constructor(e){super(),ee(this,e,mi,vi,Q,{})}}new pi({target:document.body});
