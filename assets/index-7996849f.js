var dn=Object.defineProperty;var gn=(t,e,n)=>e in t?dn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var $e=(t,e,n)=>(gn(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}})();function W(){}function hn(t,e){for(const n in e)t[n]=e[n];return t}function It(t){return t()}function rt(){return Object.create(null)}function se(t){t.forEach(It)}function ae(t){return typeof t=="function"}function Q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function vn(t){return Object.keys(t).length===0}function Mt(t,...e){if(t==null){for(const r of e)r(void 0);return W}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function mn(t){let e;return Mt(t,n=>e=n)(),e}function ue(t,e,n){t.$$.on_destroy.push(Mt(e,n))}function Ut(t,e,n,r){if(t){const i=Kt(t,e,n,r);return t[0](i)}}function Kt(t,e,n,r){return t[1]&&r?hn(n.ctx.slice(),t[1](r(e))):n.ctx}function zt(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const l=[],a=Math.max(e.dirty.length,i.length);for(let u=0;u<a;u+=1)l[u]=e.dirty[u]|i[u];return l}return e.dirty|i}return e.dirty}function jt(t,e,n,r,i,l){if(i){const a=Kt(e,n,r,l);t.p(a,i)}}function qt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function P(t,e){t.appendChild(e)}function j(t,e,n){t.insertBefore(e,n||null)}function U(t){t.parentNode&&t.parentNode.removeChild(t)}function ye(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function I(t){return document.createElement(t)}function Re(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ee(t){return document.createTextNode(t)}function $(){return ee(" ")}function bn(){return ee("")}function Y(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function k(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function pn(t){return Array.from(t.childNodes)}function Ee(t,e){e=""+e,t.data!==e&&(t.data=e)}function it(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}let Ae;function yn(){if(Ae===void 0){Ae=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Ae=!0}}return Ae}function _n(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const r=I("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const i=yn();let l;return i?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",l=Y(window,"message",a=>{a.source===r.contentWindow&&e()})):(r.src="about:blank",r.onload=()=>{l=Y(r.contentWindow,"resize",e),e()}),P(t,r),()=>{(i||l&&r.contentWindow)&&l(),U(r)}}function z(t,e,n){t.classList.toggle(e,!!n)}function wn(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}function at(t,e){return new t(e)}let Ne;function Ce(t){Ne=t}function Fe(){if(!Ne)throw new Error("Function called outside component initialization");return Ne}function Bt(t){Fe().$$.on_mount.push(t)}function Sn(t){Fe().$$.on_destroy.push(t)}function Vt(){const t=Fe();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const l=wn(e,n,{cancelable:r});return i.slice().forEach(a=>{a.call(t,l)}),!l.defaultPrevented}return!0}}function kn(t,e){return Fe().$$.context.set(t,e),e}function $t(t){return Fe().$$.context.get(t)}function lt(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const be=[],ot=[];let pe=[];const ut=[],Cn=Promise.resolve();let Je=!1;function Tn(){Je||(Je=!0,Cn.then(Ht))}function De(t){pe.push(t)}const He=new Set;let he=0;function Ht(){if(he!==0)return;const t=Ne;do{try{for(;he<be.length;){const e=be[he];he++,Ce(e),Nn(e.$$)}}catch(e){throw be.length=0,he=0,e}for(Ce(null),be.length=0,he=0;ot.length;)ot.pop()();for(let e=0;e<pe.length;e+=1){const n=pe[e];He.has(n)||(He.add(n),n())}pe.length=0}while(be.length);for(;ut.length;)ut.pop()();Je=!1,He.clear(),Ce(t)}function Nn(t){if(t.fragment!==null){t.update(),se(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(De)}}function Dn(t){const e=[],n=[];pe.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),pe=e}const Le=new Set;let de;function te(){de={r:0,c:[],p:de}}function ne(){de.r||se(de.c),de=de.p}function N(t,e){t&&t.i&&(Le.delete(t),t.i(e))}function F(t,e,n,r){if(t&&t.o){if(Le.has(t))return;Le.add(t),de.c.push(()=>{Le.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function re(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function V(t){t&&t.c()}function q(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),De(()=>{const l=t.$$.on_mount.map(It).filter(ae);t.$$.on_destroy?t.$$.on_destroy.push(...l):se(l),t.$$.on_mount=[]}),i.forEach(De)}function B(t,e){const n=t.$$;n.fragment!==null&&(Dn(n.after_update),se(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function En(t,e){t.$$.dirty[0]===-1&&(be.push(t),Tn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function X(t,e,n,r,i,l,a,u=[-1]){const s=Ne;Ce(t);const o=t.$$={fragment:null,ctx:[],props:l,update:W,not_equal:i,bound:rt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:rt(),dirty:u,skip_bound:!1,root:e.target||s.$$.root};a&&a(o.root);let c=!1;if(o.ctx=n?n(t,e.props||{},(d,f,...v)=>{const g=v.length?v[0]:f;return o.ctx&&i(o.ctx[d],o.ctx[d]=g)&&(!o.skip_bound&&o.bound[d]&&o.bound[d](g),c&&En(t,d)),f}):[],o.update(),c=!0,se(o.before_update),o.fragment=r?r(o.ctx):!1,e.target){if(e.hydrate){const d=pn(e.target);o.fragment&&o.fragment.l(d),d.forEach(U)}else o.fragment&&o.fragment.c();e.intro&&N(t.$$.fragment),q(t,e.target,e.anchor),Ht()}Ce(s)}class x{constructor(){$e(this,"$$");$e(this,"$$set")}$destroy(){B(this,1),this.$destroy=W}$on(e,n){if(!ae(n))return W;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!vn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Fn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Fn);const ve=[];function Ze(t,e=W){let n;const r=new Set;function i(u){if(Q(t,u)&&(t=u,n)){const s=!ve.length;for(const o of r)o[1](),ve.push(o,t);if(s){for(let o=0;o<ve.length;o+=2)ve[o][0](ve[o+1]);ve.length=0}}}function l(u){i(u(t))}function a(u,s=W){const o=[u,s];return r.add(o),r.size===1&&(n=e(i,l)||W),u(t),()=>{r.delete(o),r.size===0&&n&&(n(),n=null)}}return{set:i,update:l,subscribe:a}}const Wt="settings",On={game:"pileon",colors:"default",size:"default"},An=JSON.parse(localStorage.getItem(Wt)),_e=Ze(An??On);_e.subscribe(t=>localStorage.setItem(Wt,JSON.stringify(t)));const Pn={},Ie=Ze(Pn),Ln=4.5,Rn=5,In=3,st=7,Mn=5,Jt=t=>{switch(t){case"bridge":return{height:st,width:Ln};case"poker":return{height:st,width:Rn};case"small":return{height:Mn,width:In}}},Qe="card-appearance",Un={size:"bridge",fourColor:!1},Kn=({size:t,colors:e})=>({size:t==="default"?"poker":t,fourColor:e==="four-color"}),Gt=t=>{const e=Ze(Un,n=>(_e.subscribe(r=>n(t(r))),()=>{}));return kn(Qe,e),e},Xe=()=>$t(Qe),zn=t=>{const e=$t(Qe);if(e){const n=mn(_e);e.set(t(n))}},Ge=(t,e,n={})=>r=>{(Array.isArray(t)?t:[t]).includes(r.code)&&e!==void 0&&(n.preventDefault&&r.preventDefault(),e())};var oe={},Oe={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CardStringType=t.CardSuits=void 0;function e(o,c){if(!(o instanceof c))throw new TypeError("Cannot call a class as a function")}function n(o,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(o,f.key,f)}}function r(o,c,d){return c&&n(o.prototype,c),d&&n(o,d),o}function i(o,c,d){return c in o?Object.defineProperty(o,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[c]=d,o}var l;t.CardSuits=l,function(o){o[o.Hearts=0]="Hearts",o[o.Spades=1]="Spades",o[o.Diamonds=2]="Diamonds",o[o.Clubs=3]="Clubs"}(l||(t.CardSuits=l={}));var a;t.CardStringType=a,function(o){o.Short="SHORT",o.Long="LONG",o.ShortEmoji="SHORT_EMOJI",o.ShortSuit="SHORT_SUIT",o.LongSuit="LONG_SUIT",o.EmojiSuit="EMOJI_SUIT",o.ShortValue="SHORT_VALUE",o.LongValue="LONG_VALUE"}(a||(t.CardStringType=a={}));var u=function(){function o(c){e(this,o),i(this,"num",void 0),this.num=c}return r(o,[{key:"toString",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o.StringType.Long;switch(d){case o.StringType.Short:return this.toString(o.StringType.ShortValue)+this.toString(o.StringType.ShortSuit);case o.StringType.ShortEmoji:return this.toString(o.StringType.ShortValue)+this.toString(o.StringType.EmojiSuit);case o.StringType.Long:return this.toString(o.StringType.LongValue)+" of "+this.toString(o.StringType.LongSuit);case o.StringType.ShortSuit:return o.shortSuits[this.suit];case o.StringType.LongSuit:return o.longSuits[this.suit];case o.StringType.EmojiSuit:return o.emojiSuits[this.suit];case o.StringType.ShortValue:return o.shortValues[this.value===13?0:this.value];case o.StringType.LongValue:return o.longValues[this.value===13?0:this.value]}throw new Error("Unsupported output type")}},{key:"suit",get:function(){return o.getSuit(this.num)}},{key:"value",get:function(){return o.getValue(this.num)}}],[{key:"fromJSON",value:function(d){var f=d.num;return new o(f)}},{key:"getSuit",value:function(d){return Math.floor(d/13)%4}},{key:"getValue",value:function(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return d%13||f?d%13:13}},{key:"compare",value:function(d,f){return f.value-d.value}}]),o}();i(u,"Suits",l),i(u,"StringType",a),i(u,"emojiSuits",["♥","♠","♦","♣"]),i(u,"shortSuits",["h","s","d","c"]),i(u,"longSuits",["hearts","spades","diamonds","clubs"]),i(u,"shortValues",["A","2","3","4","5","6","7","8","9","T","J","Q","K"]),i(u,"longValues",["ace","two","three","four","five","six","seven","eight","nine","ten","jack","queen","king"]);var s=u;t.default=s})(Oe);var Yt={},Z={};Object.defineProperty(Z,"__esModule",{value:!0});Z.uniqueFilter=Z.shuffle=Z.last=Z.isSorted=Z.getCombinations=Z.arraySubtraction=void 0;var jn=function(e,n){return e.filter(function(r){return!n.includes(r)})};Z.arraySubtraction=jn;var qn=function t(e,n,r,i,l){if(i.length>=n)l.push(i);else for(var a=r;a<e.length;a++)t(e,n,a+1,i.concat(e[a]),l)},Bn=function(e,n){var r=[];return qn(e,n,0,[],r),r};Z.getCombinations=Bn;var Vn=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=r?-1:1;try{return e.reduce(function(l,a){if(i*n(l,a)<=0)return a;throw new Error}),!0}catch{return!1}};Z.isSorted=Vn;var $n=function(e){return e[e.length-1]};Z.last=$n;var Hn=function(e){for(var n=e.length-1;n>0;n--){var r=Math.floor(Math.random()*(n+1)),i=[e[r],e[n]];e[n]=i[0],e[r]=i[1]}return e};Z.shuffle=Hn;var Wn=function(e,n,r){return r.indexOf(e)===n};Z.uniqueFilter=Wn;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=r(Oe),n=Z;function r(g){return g&&g.__esModule?g:{default:g}}function i(g){return u(g)||a(g)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}function u(g){if(Array.isArray(g)){for(var w=0,A=new Array(g.length);w<g.length;w++)A[w]=g[w];return A}}function s(g,w){if(!(g instanceof w))throw new TypeError("Cannot call a class as a function")}function o(g,w){for(var A=0;A<w.length;A++){var h=w[A];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(g,h.key,h)}}function c(g,w,A){return w&&o(g.prototype,w),A&&o(g,A),g}function d(g,w,A){return w in g?Object.defineProperty(g,w,{value:A,enumerable:!0,configurable:!0,writable:!0}):g[w]=A,g}var f=function(){function g(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;s(this,g),d(this,"cards",void 0),this.cards=i(Array(52*A).keys()).map(function(h){return new e.default(h)}),w&&this.shuffle()}return c(g,[{key:"shuffle",value:function(){(0,n.shuffle)(this.cards)}},{key:"isShuffled",value:function(){return!(0,n.isSorted)(this.cards,function(A,h){return A.num-h.num})}},{key:"pop",value:function(){return this.cards.pop()}},{key:"popN",value:function(A){for(var h=[],T,b=0;b<A&&(T=this.pop());b++)h.push(T);return h}},{key:"cardsRemaining",get:function(){return this.cards.length}}],[{key:"fromJSON",value:function(A){var h=A.cards,T=new g(!1,0);return T.cards=h.map(function(b){return e.default.fromJSON(b)}),T}}]),g}(),v=f;t.default=v})(Yt);var Zt={},je={};Object.defineProperty(je,"__esModule",{value:!0});je.uuid4=void 0;var Jn=function(e){var n;do n=Math.random().toString(16).slice(2,e+2);while(n.length<e&&e<=12);return n},Gn=function(){var e=[8,4,4,4,12],n=e.map(Jn).join("-").split("");return n[14]="4",n[19]=(Math.floor(Math.random()*64)%4+8).toString(16),n.join("")};je.uuid4=Gn;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.HandRank=void 0;var e=i(Oe),n=je,r=Z;function i(h){return h&&h.__esModule?h:{default:h}}function l(h){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?l=function(b){return typeof b}:l=function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},l(h)}function a(h){return o(h)||s(h)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function s(h){if(Symbol.iterator in Object(h)||Object.prototype.toString.call(h)==="[object Arguments]")return Array.from(h)}function o(h){if(Array.isArray(h)){for(var T=0,b=new Array(h.length);T<h.length;T++)b[T]=h[T];return b}}function c(h,T){if(!(h instanceof T))throw new TypeError("Cannot call a class as a function")}function d(h,T){for(var b=0;b<T.length;b++){var C=T[b];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(h,C.key,C)}}function f(h,T,b){return T&&d(h.prototype,T),b&&d(h,b),h}function v(h,T,b){return T in h?Object.defineProperty(h,T,{value:b,enumerable:!0,configurable:!0,writable:!0}):h[T]=b,h}var g;t.HandRank=g,function(h){h[h.High=0]="High",h[h.Pair=5]="Pair",h[h.TwoPairs=10]="TwoPairs",h[h.ThreeOfAKind=15]="ThreeOfAKind",h[h.Straight=20]="Straight",h[h.Flush=25]="Flush",h[h.FullHouse=30]="FullHouse",h[h.FourOfAKind=35]="FourOfAKind",h[h.StraightFlush=40]="StraightFlush",h[h.FiveOfAKind=45]="FiveOfAKind"}(g||(t.HandRank=g={}));var w=function(){function h(T,b,C){c(this,h),v(this,"uuid",void 0),v(this,"rank",void 0),v(this,"cards",void 0),this.rank=T,this.cards=b,this.uuid=C||(0,n.uuid4)()}return f(h,[{key:"getCardsString",value:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.default.StringType.Short;return this.cards.map(function(C){return C.toString(b)}).join(", ")}},{key:"toString",value:function(){var b=this,C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.default.StringType.Short,S=e.default.StringType.LongValue,y=function(R){return b.cards[R].toString(S)},_=this.getCardsString(C);switch(this.rank){case h.Rank.FiveOfAKind:return"Five of a kind, ".concat(y(0),"s (").concat(_,")");case h.Rank.StraightFlush:return"Straigth flush, ".concat(y(0)," high (").concat(_,")");case h.Rank.FourOfAKind:return"Four of a kind, ".concat(y(0),"s (").concat(_,")");case h.Rank.FullHouse:return"Full house, ".concat(y(0),"s over ").concat(y(3),"s (").concat(_,")");case h.Rank.Flush:return"Flush, ".concat(y(0)," high (").concat(_,")");case h.Rank.Straight:return"Straigth, ".concat(y(0)," high (").concat(_,")");case h.Rank.ThreeOfAKind:return"Three of a kind, ".concat(y(0),"s (").concat(_,")");case h.Rank.TwoPairs:return"Two pairs, ".concat(y(0),"s and ").concat(y(2),"s (").concat(_,")");case h.Rank.Pair:return"Pair, ".concat(y(0),"s (").concat(_,")");case h.Rank.High:return"".concat(y(0).replace(/^\w/,function(D){return D.toUpperCase()})," high (").concat(_,")")}throw new Error("Unsupported rank value")}}],[{key:"fromJSON",value:function(b){var C=b.rank,S=b.cards,y=b.uuid;return new h(C,S.map(e.default.fromJSON),y)}},{key:"solve",value:function(b){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,S,y;return(S=h.isNumOfAKind(5,b))?y=h.Rank.FiveOfAKind:(S=h.isStraightFlush(b,C))?y=h.Rank.StraightFlush:(S=h.isNumOfAKind(4,b))?y=h.Rank.FourOfAKind:(S=h.isFullHouse(b))?y=h.Rank.FullHouse:(S=h.isFlush(b,C))?y=h.Rank.Flush:(S=h.isStraight(b,C))?y=h.Rank.Straight:(S=h.isNumOfAKind(3,b))?y=h.Rank.ThreeOfAKind:(S=h.isTwoPairs(b))?y=h.Rank.TwoPairs:(S=h.isNumOfAKind(2,b))?y=h.Rank.Pair:(S=[],y=h.Rank.High),S=h.fillWithKickers(S,b),new h(y,S)}},{key:"solveHoldEm",value:function(b,C){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(S===0)return h.solve([].concat(a(b),a(C)));for(var y=(0,r.getCombinations)(b,b.length-S),_=(0,r.getCombinations)(C,Math.min(C.length,S)),D=[],R=0;R<y.length;R++)for(var O=0;O<_.length;O++)D.push(h.solve([].concat(a(y[R]),a(_[O]))));return h.max.apply(h,D)}},{key:"compare",value:function(b,C){var S;if(b.cards.length!==C.cards.length)throw new Error("Comparing hands with different number of cards");if((S=C.rank-b.rank)!==0)return S;for(var y=0;y<b.cards.length;y++)if((S=e.default.compare(b.cards[y],C.cards[y]))!==0)return S;return 0}},{key:"winners",value:function(){for(var b=arguments.length,C=new Array(b),S=0;S<b;S++)C[S]=arguments[S];var y=h.max.apply(h,C);return C.filter(function(_){return!h.compare(_,y)})}},{key:"max",value:function(){for(var b=function(D,R){return h.compare(D,R)<0?D:R},C=arguments.length,S=new Array(C),y=0;y<C;y++)S[y]=arguments[y];return S.reduce(function(_,D){return b(_,D)})}},{key:"fillWithKickers",value:function(b,C){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5;return C=(0,r.arraySubtraction)(C,b).sort(e.default.compare),[].concat(a(b),a(C)).slice(0,S)}},{key:"getUniqueValues",value:function(b){return b.map(function(C){return C.value}).filter(r.uniqueFilter).sort(function(C,S){return S-C})}},{key:"isNumOfAKind",value:function(b,C){for(var S=h.getUniqueValues(C),y,_=function(m){if(y=C.filter(function(p){return p.value==S[m]}),y.length>=b)return{v:y}},D=0;D<S.length;D++){var R=_(D);if(l(R)==="object")return R.v}return!1}},{key:"isNumOfAKindCombination",value:function(b,C){for(var S=[],y=0;y<b.length;y++){var _=h.isNumOfAKind(b[y],(0,r.arraySubtraction)(C,S));if(_===!1)return!1;_=_,S.push.apply(S,a(_))}return S}},{key:"isStraightFlush",value:function(b){for(var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,S=[],y=function(O){if(S=b.filter(function(p){return p.suit===O}),S.length<C)return"continue";var m=h.isStraight(S,C);if(m)return{v:m}},_=0;_<4;_++){var D=y(_);switch(D){case"continue":continue;default:if(l(D)==="object")return D.v}}return!1}},{key:"isFullHouse",value:function(b){return h.isNumOfAKindCombination([3,2],b)}},{key:"isFlush",value:function(b){for(var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,S=function(R){var O=b.filter(function(m){return m.suit==R});if(O.length>=C)return{v:O.sort(e.default.compare).slice(0,C)}},y=0;y<4;y++){var _=S(y);if(l(_)==="object")return _.v}return!1}},{key:"isStraight",value:function(b){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,S=h.getUniqueValues(b);if(S.length<C)return!1;S.includes(13)&&S.push(0);for(var y=[S[0]],_=1;_<S.length&&y.length<C;_++)(0,r.last)(y)-S[_]===1?y.push(S[_]):y=[S[_]];return y.length==C?y.map(function(D){return b.find(function(R){return R.value===(D||13)})}):!1}},{key:"isTwoPairs",value:function(b){return h.isNumOfAKindCombination([2,2],b)}}]),h}();v(w,"Rank",g);var A=w;t.default=A})(Zt);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Card",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"Deck",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"Hand",{enumerable:!0,get:function(){return r.default}});var e=i(Oe),n=i(Yt),r=i(Zt);function i(l){return l&&l.__esModule?l:{default:l}}})(oe);function Yn(t){let e,n;return{c(){e=Re("svg"),n=Re("path"),k(n,"d",t[1]),k(n,"fill","CurrentColor"),k(e,"viewBox","0 0 16 20"),k(e,"class","svelte-1jimf84"),z(e,"flip",t[0])},m(r,i){j(r,e,i),P(e,n)},p(r,[i]){i&2&&k(n,"d",r[1]),i&1&&z(e,"flip",r[0])},i:W,o:W,d(r){r&&U(e)}}}function Zn(t,e,n){let r,{suit:i=null}=e,{flip:l=!1}=e;const a=u=>{switch(u){case"hearts":return"M 8 2 C 9 0 11 0 12 0 C 13 0 16 1 16 6 C 16 8 15.5 10 14 12 L 8 20 L 2 12 C 0.5 10 0 8 0 6 C 0 1 3 0 4 0 C 5 0 7 0 8 2";case"spades":return"M 8 0 L 13 5 C 16 8 16 10 16 12 C 16 14 14 16 12 16 C 11 16 9 16 8 14 L 12 20 L 4 20 L 8 14 C 7 16 5 16 4 16 C 2 16 0 14 0 12 C 0 10 0 8 3 5 L 8 0";case"diamonds":return"M 8 0 L 16 10 L 8 20 L 0 10 L 8 0";case"clubs":return"M 8 0 C 10 0 12 2 12 4 C 12 6 11 8 8 10 C 9 8 10 7 12 7 C 14 7 16 9 16 12 C 16 14 14 16 12 16 C 11 16 9 16 8 14 L 12 20 L 4 20 L 8 14 C 7 16 5 16 4 16 C 2 16 0 14 0 12 C 0 9 2 7 4 7 C 6 7 7 8 8 10 C 5 8 4 6 4 4 C 4 2 6 0 8 0";default:return null}};return t.$$set=u=>{"suit"in u&&n(2,i=u.suit),"flip"in u&&n(0,l=u.flip)},t.$$.update=()=>{t.$$.dirty&4&&n(1,r=a(i))},[l,r,i]}class Qt extends x{constructor(e){super(),X(this,e,Zn,Yn,Q,{suit:2,flip:0})}}function ft(t,e,n){const r=t.slice();return r[5]=e[n],r}function ct(t,e,n){const r=t.slice();return r[8]=e[n],r}function dt(t){let e,n,r;return n=new Qt({props:{suit:t[0],flip:t[8].toLowerCase()==="d"}}),{c(){e=I("span"),V(n.$$.fragment),k(e,"class","svelte-1sm49dl")},m(i,l){j(i,e,l),q(n,e,null),r=!0},p(i,l){const a={};l&1&&(a.suit=i[0]),l&2&&(a.flip=i[8].toLowerCase()==="d"),n.$set(a)},i(i){r||(N(n.$$.fragment,i),r=!0)},o(i){F(n.$$.fragment,i),r=!1},d(i){i&&U(e),B(n)}}}function gt(t){let e,n,r,i,l=re(t[5].split("")),a=[];for(let s=0;s<l.length;s+=1)a[s]=dt(ct(t,l,s));const u=s=>F(a[s],1,1,()=>{a[s]=null});return{c(){e=I("div");for(let s=0;s<a.length;s+=1)a[s].c();n=$(),k(e,"class",r="row "+t[3](t[5])+" svelte-1sm49dl")},m(s,o){j(s,e,o);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(e,null);P(e,n),i=!0},p(s,o){if(o&7){l=re(s[5].split(""));let c;for(c=0;c<l.length;c+=1){const d=ct(s,l,c);a[c]?(a[c].p(d,o),N(a[c],1)):(a[c]=dt(d),a[c].c(),N(a[c],1),a[c].m(e,n))}for(te(),c=l.length;c<a.length;c+=1)u(c);ne()}(!i||o&2&&r!==(r="row "+s[3](s[5])+" svelte-1sm49dl"))&&k(e,"class",r)},i(s){if(!i){for(let o=0;o<l.length;o+=1)N(a[o]);i=!0}},o(s){a=a.filter(Boolean);for(let o=0;o<a.length;o+=1)F(a[o]);i=!1},d(s){s&&U(e),ye(a,s)}}}function Qn(t){let e,n,r=re(t[2](t[1])),i=[];for(let a=0;a<r.length;a+=1)i[a]=gt(ft(t,r,a));const l=a=>F(i[a],1,1,()=>{i[a]=null});return{c(){e=I("div");for(let a=0;a<i.length;a+=1)i[a].c();k(e,"class","center-pattern svelte-1sm49dl")},m(a,u){j(a,e,u);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(e,null);n=!0},p(a,[u]){if(u&15){r=re(a[2](a[1]));let s;for(s=0;s<r.length;s+=1){const o=ft(a,r,s);i[s]?(i[s].p(o,u),N(i[s],1)):(i[s]=gt(o),i[s].c(),N(i[s],1),i[s].m(e,null))}for(te(),s=r.length;s<i.length;s+=1)l(s);ne()}},i(a){if(!n){for(let u=0;u<r.length;u+=1)N(i[u]);n=!0}},o(a){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)F(i[u]);n=!1},d(a){a&&U(e),ye(i,a)}}}function Xn(t,e,n){let{suit:r}=e,{rank:i}=e;const l={A:["U"],2:["U","D"],3:["U","U","D"],4:["UU","DD"],5:["UU","U","DD"],6:["UU","UU","DD"],7:["UU","u","UU","DD"],8:["UU","UU","DD","DD"],9:["UU","u","UU","DD","DD"],10:["UU","u","UU","DD","d","DD"]},a=s=>l[s]??[],u=s=>s.toUpperCase()===s?"grow":"";return t.$$set=s=>{"suit"in s&&n(0,r=s.suit),"rank"in s&&n(1,i=s.rank)},[r,i,a,u]}class xn extends x{constructor(e){super(),X(this,e,Xn,Qn,Q,{suit:0,rank:1})}}function er(t){let e,n;const r=t[1].default,i=Ut(r,t,t[0],null);return{c(){e=I("span"),i&&i.c(),k(e,"class","screen-reader-only svelte-3uotpv")},m(l,a){j(l,e,a),i&&i.m(e,null),n=!0},p(l,[a]){i&&i.p&&(!n||a&1)&&jt(i,r,l,l[0],n?zt(r,l[0],a,null):qt(l[0]),null)},i(l){n||(N(i,l),n=!0)},o(l){F(i,l),n=!1},d(l){l&&U(e),i&&i.d(l)}}}function tr(t,e,n){let{$$slots:r={},$$scope:i}=e;return t.$$set=l=>{"$$scope"in l&&n(0,i=l.$$scope)},[i,r]}class nr extends x{constructor(e){super(),X(this,e,tr,er,Q,{})}}function ht(t,e,n){const r=t.slice();return r[16]=e[n],r}function vt(t){let e,n;return e=new nr({props:{$$slots:{default:[rr]},$$scope:{ctx:t}}}),{c(){V(e.$$.fragment)},m(r,i){q(e,r,i),n=!0},p(r,i){const l={};i&524320&&(l.$$scope={dirty:i,ctx:r}),e.$set(l)},i(r){n||(N(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function rr(t){let e;return{c(){e=ee(t[5])},m(n,r){j(n,e,r)},p(n,r){r&32&&Ee(e,n[5])},d(n){n&&U(e)}}}function mt(t){let e,n;return e=new xn({props:{suit:t[7],rank:t[8]}}),{c(){V(e.$$.fragment)},m(r,i){q(e,r,i),n=!0},p(r,i){const l={};i&128&&(l.suit=r[7]),i&256&&(l.rank=r[8]),e.$set(l)},i(r){n||(N(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function bt(t){let e,n,r,i,l,a,u,s,o,c,d;u=new Qt({props:{suit:t[7]}});let f=!t[10]&&mt(t);return{c(){e=I("div"),n=I("div"),r=ee(t[8]),l=$(),a=I("div"),V(u.$$.fragment),s=$(),o=I("div"),f&&f.c(),c=$(),k(n,"class",i="rank rank-"+t[8]+" svelte-t2vtqs"),k(a,"class","suit svelte-t2vtqs"),k(e,"aria-hidden","true"),k(e,"class",t[16]+" label svelte-t2vtqs"),k(o,"class","center svelte-t2vtqs"),z(o,"face",t[6])},m(v,g){j(v,e,g),P(e,n),P(n,r),P(e,l),P(e,a),q(u,a,null),j(v,s,g),j(v,o,g),f&&f.m(o,null),P(o,c),d=!0},p(v,g){(!d||g&256)&&Ee(r,v[8]),(!d||g&256&&i!==(i="rank rank-"+v[8]+" svelte-t2vtqs"))&&k(n,"class",i);const w={};g&128&&(w.suit=v[7]),u.$set(w),v[10]?f&&(te(),F(f,1,1,()=>{f=null}),ne()):f?(f.p(v,g),g&1024&&N(f,1)):(f=mt(v),f.c(),N(f,1),f.m(o,c)),(!d||g&64)&&z(o,"face",v[6])},i(v){d||(N(u.$$.fragment,v),N(f),d=!0)},o(v){F(u.$$.fragment,v),F(f),d=!1},d(v){v&&(U(e),U(s),U(o)),B(u),f&&f.d()}}}function ir(t){let e,n,r,i,l=t[3]&&vt(t),a=re(t[13]),u=[];for(let o=0;o<a.length;o+=1)u[o]=bt(ht(t,a,o));const s=o=>F(u[o],1,1,()=>{u[o]=null});return{c(){e=I("div"),l&&l.c(),n=$();for(let o=0;o<u.length;o+=1)u[o].c();k(e,"class",r="card "+t[7]+" stack-"+t[2]+" svelte-t2vtqs"),z(e,"bridge",t[11]),z(e,"small",t[10]),z(e,"fourColor",t[9]),z(e,"empty",t[0]),z(e,"hidden",t[4]),z(e,"shadow",t[1]),z(e,"visible",t[3])},m(o,c){j(o,e,c),l&&l.m(e,null),P(e,n);for(let d=0;d<u.length;d+=1)u[d]&&u[d].m(e,null);i=!0},p(o,[c]){if(o[3]?l?(l.p(o,c),c&8&&N(l,1)):(l=vt(o),l.c(),N(l,1),l.m(e,n)):l&&(te(),F(l,1,1,()=>{l=null}),ne()),c&9664){a=re(o[13]);let d;for(d=0;d<a.length;d+=1){const f=ht(o,a,d);u[d]?(u[d].p(f,c),N(u[d],1)):(u[d]=bt(f),u[d].c(),N(u[d],1),u[d].m(e,null))}for(te(),d=a.length;d<u.length;d+=1)s(d);ne()}(!i||c&132&&r!==(r="card "+o[7]+" stack-"+o[2]+" svelte-t2vtqs"))&&k(e,"class",r),(!i||c&2180)&&z(e,"bridge",o[11]),(!i||c&1156)&&z(e,"small",o[10]),(!i||c&644)&&z(e,"fourColor",o[9]),(!i||c&133)&&z(e,"empty",o[0]),(!i||c&148)&&z(e,"hidden",o[4]),(!i||c&134)&&z(e,"shadow",o[1]),(!i||c&140)&&z(e,"visible",o[3])},i(o){if(!i){N(l);for(let c=0;c<a.length;c+=1)N(u[c]);i=!0}},o(o){F(l),u=u.filter(Boolean);for(let c=0;c<u.length;c+=1)F(u[c]);i=!1},d(o){o&&U(e),l&&l.d(),ye(u,o)}}}function ar(t,e,n){let r,i,l,a,u,s,o,c,d,f;const v=Xe();ue(t,v,b=>n(15,f=b));let{card:g=null}=e,{empty:w=!1}=e,{shadow:A=!1}=e,{stack:h=void 0}=e;const T=["top","bottom"];return t.$$set=b=>{"card"in b&&n(14,g=b.card),"empty"in b&&n(0,w=b.empty),"shadow"in b&&n(1,A=b.shadow),"stack"in b&&n(2,h=b.stack)},t.$$.update=()=>{t.$$.dirty&32768&&n(11,r=f.size==="bridge"),t.$$.dirty&32768&&n(10,i=f.size==="small"),t.$$.dirty&32768&&n(9,l=f.fourColor),t.$$.dirty&16386&&n(4,a=g===null&&!A),t.$$.dirty&19&&n(3,u=!(w||a||A)),t.$$.dirty&16392&&n(8,s=u&&g.toString(oe.Card.StringType.ShortValue).replace("T","10")),t.$$.dirty&16392&&n(7,o=u&&g.toString(oe.Card.StringType.LongSuit)),t.$$.dirty&16392&&n(6,c=u&&g.num%13>9),t.$$.dirty&16392&&n(5,d=u&&g.toString(oe.Card.StringType.Long))},[w,A,h,u,a,d,c,o,s,l,i,r,v,T,g,f]}class qe extends x{constructor(e){super(),X(this,e,ar,ir,Q,{card:14,empty:0,shadow:1,stack:2})}}function pt(t,e,n){const r=t.slice();return r[19]=e[n].card,r[20]=e[n].shadow,r[21]=e[n].transform,r}function yt(t){let e,n;return e=new qe({props:{card:t[0],empty:t[0]===void 0}}),{c(){V(e.$$.fragment)},m(r,i){q(e,r,i),n=!0},p(r,i){const l={};i&1&&(l.card=r[0]),i&1&&(l.empty=r[0]===void 0),e.$set(l)},i(r){n||(N(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function _t(t){let e,n,r,i;return n=new qe({props:{card:t[19],shadow:t[20]}}),{c(){e=I("div"),V(n.$$.fragment),r=$(),k(e,"class","shadow-container svelte-1ns87h6"),it(e,"transform",t[21])},m(l,a){j(l,e,a),q(n,e,null),P(e,r),i=!0},p(l,a){const u={};a&8&&(u.card=l[19]),a&8&&(u.shadow=l[20]),n.$set(u),(!i||a&8)&&it(e,"transform",l[21])},i(l){i||(N(n.$$.fragment,l),i=!0)},o(l){F(n.$$.fragment,l),i=!1},d(l){l&&U(e),B(n)}}}function lr(t){let e,n,r,i,l,a,u=!t[1]&&yt(t),s=re(t[3]),o=[];for(let d=0;d<s.length;d+=1)o[d]=_t(pt(t,s,d));const c=d=>F(o[d],1,1,()=>{o[d]=null});return{c(){e=I("div"),n=I("div"),u&&u.c(),r=$();for(let d=0;d<o.length;d+=1)o[d].c();k(n,"aria-atomic","true"),k(n,"aria-live","polite"),k(e,"aria-label",t[2]),k(e,"aria-disabled",t[1]),k(e,"class","deck svelte-1ns87h6"),k(e,"role","button"),k(e,"tabindex","0"),z(e,"bridge",t[5]),z(e,"small",t[4]),z(e,"shuffling",t[1])},m(d,f){j(d,e,f),P(e,n),u&&u.m(n,null),P(n,r);for(let v=0;v<o.length;v+=1)o[v]&&o[v].m(n,null);i=!0,l||(a=[Y(e,"keydown",Ge(["Space","Enter"],t[7],{preventDefault:!0})),Y(e,"click",t[7])],l=!0)},p(d,[f]){if(d[1]?u&&(te(),F(u,1,1,()=>{u=null}),ne()):u?(u.p(d,f),f&2&&N(u,1)):(u=yt(d),u.c(),N(u,1),u.m(n,r)),f&8){s=re(d[3]);let v;for(v=0;v<s.length;v+=1){const g=pt(d,s,v);o[v]?(o[v].p(g,f),N(o[v],1)):(o[v]=_t(g),o[v].c(),N(o[v],1),o[v].m(n,null))}for(te(),v=s.length;v<o.length;v+=1)c(v);ne()}(!i||f&4)&&k(e,"aria-label",d[2]),(!i||f&2)&&k(e,"aria-disabled",d[1]),(!i||f&32)&&z(e,"bridge",d[5]),(!i||f&16)&&z(e,"small",d[4]),(!i||f&2)&&z(e,"shuffling",d[1])},i(d){if(!i){N(u);for(let f=0;f<s.length;f+=1)N(o[f]);i=!0}},o(d){F(u),o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)F(o[f]);i=!1},d(d){d&&U(e),u&&u.d(),ye(o,d),l=!1,se(a)}}}function or(t,e,n,r){const i=t/r*e,l=.5*i/(n*52),a=1*i/(n*52);return`translate(${l}em , ${a}em)`}function ur(t,e,n){let r,i,l,a,u,s;const o=Xe();ue(t,o,y=>n(16,s=y));let{numCards:c=52}=e,{numDecks:d=1}=e,{topCard:f=null}=e,{numShadows:v=10}=e,{shuffleAnimationSteps:g=4}=e,{shuffleAnimationMaxDistanceEm:w=.8}=e,{shuffleAnimationMaxRotateDeg:A=7}=e,{onClick:h=()=>{}}=e,T=0;function b(y,_){const D=p=>[1,_+2].includes(y)?0:(Math.random()*2-1)*p,R=D(w),O=D(w),m=D(A);return`translate(${R}em, ${O}em) rotate(${m}deg)`}function C(){T>0&&setTimeout(()=>{n(15,T-=1),C()},250)}function S(){if(!a)return h()}return t.$$set=y=>{"numCards"in y&&n(8,c=y.numCards),"numDecks"in y&&n(9,d=y.numDecks),"topCard"in y&&n(0,f=y.topCard),"numShadows"in y&&n(10,v=y.numShadows),"shuffleAnimationSteps"in y&&n(11,g=y.shuffleAnimationSteps),"shuffleAnimationMaxDistanceEm"in y&&n(12,w=y.shuffleAnimationMaxDistanceEm),"shuffleAnimationMaxRotateDeg"in y&&n(13,A=y.shuffleAnimationMaxRotateDeg),"onClick"in y&&n(14,h=y.onClick)},t.$$.update=()=>{t.$$.dirty&65536&&n(5,r=(s==null?void 0:s.size)==="bridge"),t.$$.dirty&65536&&n(4,i=(s==null?void 0:s.size)==="small"),t.$$.dirty&2817&&f===null&&c===52*d&&g>0&&(n(15,T=g+2),C()),t.$$.dirty&32768&&n(1,a=T>0),t.$$.dirty&36611&&n(3,l=f===void 0?[]:a?[...Array(v)].map((y,_)=>({card:null,shadow:!1,transform:b(T,g)})):[...Array(v)].map((y,_)=>({card:void 0,shadow:!0,transform:or(_,c,d,v)}))),t.$$.dirty&1&&n(2,u=f===void 0?"Shuffle the deck":"Draw a card")},[f,a,u,l,i,r,o,S,c,d,v,g,w,A,h,T,s]}class sr extends x{constructor(e){super(),X(this,e,ur,lr,Q,{numCards:8,numDecks:9,topCard:0,numShadows:10,shuffleAnimationSteps:11,shuffleAnimationMaxDistanceEm:12,shuffleAnimationMaxRotateDeg:13,onClick:14})}}function fr(t){let e,n,r;return n=new sr({props:{onClick:t[2],topCard:t[1],numCards:t[0]}}),{c(){e=I("main"),V(n.$$.fragment),k(e,"class","svelte-1tag1lj")},m(i,l){j(i,e,l),q(n,e,null),r=!0},p(i,[l]){const a={};l&2&&(a.topCard=i[1]),l&1&&(a.numCards=i[0]),n.$set(a)},i(i){r||(N(n.$$.fragment,i),r=!0)},o(i){F(n.$$.fragment,i),r=!1},d(i){i&&U(e),B(n)}}}function cr(t,e,n){Gt(Kn);let r=new oe.Deck,i=r.cardsRemaining,l=null;function a(){l!==void 0?n(1,l=r.pop()):(r=new oe.Deck,n(1,l=null)),n(0,i=r.cardsRemaining)}return[i,l,a]}class dr extends x{constructor(e){super(),X(this,e,cr,fr,Q,{})}}const Xt=(t,e)=>Jt(e).width+(t-1)*1.125,gr=(t,e,n)=>{const r={sourceStack:e,cards:n};t.dataTransfer.setData("application/json",JSON.stringify(r)),t.dataTransfer.effectAllowed="move"},hr=t=>{const{sourceStack:e,cards:n}=JSON.parse(t.dataTransfer.getData("application/json"));return{sourceStack:e,cards:n.map(oe.Card.fromJSON)}};function vr(t){let e,n;return e=new qe({props:{card:t[10]?null:t[0][0],stack:"left"}}),{c(){V(e.$$.fragment)},m(r,i){q(e,r,i),n=!0},p(r,i){const l={};i&1025&&(l.card=r[10]?null:r[0][0]),e.$set(l)},i(r){n||(N(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function mr(t){let e,n;return e=new qe({props:{empty:!0}}),{c(){V(e.$$.fragment)},m(r,i){q(e,r,i),n=!0},p:W,i(r){n||(N(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function wt(t){let e,n,r;return n=new xt({props:{cards:t[0].slice(1),capacity:t[1]-1,nested:!0,closed:t[2],index:t[3],isDraggableFn:t[4],selectedCardsN:t[5]}}),{c(){e=I("div"),V(n.$$.fragment),k(e,"class","nested svelte-o50ay1")},m(i,l){j(i,e,l),q(n,e,null),r=!0},p(i,l){const a={};l&1&&(a.cards=i[0].slice(1)),l&2&&(a.capacity=i[1]-1),l&4&&(a.closed=i[2]),l&8&&(a.index=i[3]),l&16&&(a.isDraggableFn=i[4]),l&32&&(a.selectedCardsN=i[5]),n.$set(a)},i(i){r||(N(n.$$.fragment,i),r=!0)},o(i){F(n.$$.fragment,i),r=!1},d(i){i&&U(e),B(n)}}}function br(t){let e,n,r,i,l,a,u,s;const o=[mr,vr],c=[];function d(v,g){return v[0].length===0?0:1}n=d(t),r=c[n]=o[n](t);let f=t[0].length>1&&wt(t);return{c(){e=I("div"),r.c(),i=$(),f&&f.c(),k(e,"class","stack svelte-o50ay1"),k(e,"style",t[13]),k(e,"draggable",t[12]),k(e,"tabindex",l=t[6]?void 0:0),z(e,"selected",t[11])},m(v,g){j(v,e,g),c[n].m(e,null),P(e,i),f&&f.m(e,null),a=!0,u||(s=[Y(e,"dblclick",t[17]),Y(e,"dragstart",function(){ae(t[9])&&t[9].apply(this,arguments)}),Y(e,"dragover",function(){ae(t[8])&&t[8].apply(this,arguments)}),Y(e,"drop",t[18]),Y(e,"click",function(){ae(t[7])&&t[7].apply(this,arguments)}),Y(e,"keydown",function(){ae(Ge(["Enter","Space"],t[7],{preventDefault:!0}))&&Ge(["Enter","Space"],t[7],{preventDefault:!0}).apply(this,arguments)})],u=!0)},p(v,[g]){t=v;let w=n;n=d(t),n===w?c[n].p(t,g):(te(),F(c[w],1,1,()=>{c[w]=null}),ne(),r=c[n],r?r.p(t,g):(r=c[n]=o[n](t),r.c()),N(r,1),r.m(e,i)),t[0].length>1?f?(f.p(t,g),g&1&&N(f,1)):(f=wt(t),f.c(),N(f,1),f.m(e,null)):f&&(te(),F(f,1,1,()=>{f=null}),ne()),(!a||g&8192)&&k(e,"style",t[13]),(!a||g&4096)&&k(e,"draggable",t[12]),(!a||g&64&&l!==(l=t[6]?void 0:0))&&k(e,"tabindex",l),(!a||g&2048)&&z(e,"selected",t[11])},i(v){a||(N(r),N(f),a=!0)},o(v){F(r),F(f),a=!1},d(v){v&&U(e),c[n].d(),f&&f.d(),u=!1,se(s)}}}function pr(t,e,n){let r,i,l,a,u,s,o,c,d;const f=Xe();ue(t,f,_=>n(16,d=_));let{cards:v=[]}=e,{capacity:g=4}=e,{closed:w=!1}=e,{index:A=0}=e,{isDraggableFn:h=()=>!1}=e,{selectedCardsN:T=0}=e,{nested:b=!1}=e;const C=Vt();function S(_){lt.call(this,t,_)}function y(_){lt.call(this,t,_)}return t.$$set=_=>{"cards"in _&&n(0,v=_.cards),"capacity"in _&&n(1,g=_.capacity),"closed"in _&&n(2,w=_.closed),"index"in _&&n(3,A=_.index),"isDraggableFn"in _&&n(4,h=_.isDraggableFn),"selectedCardsN"in _&&n(5,T=_.selectedCardsN),"nested"in _&&n(6,b=_.nested)},t.$$.update=()=>{t.$$.dirty&65536&&n(15,r=d.size),t.$$.dirty&32770&&n(13,i=`width: ${Xt(g,r)}em`),t.$$.dirty&21&&n(12,l=!w&&h(v)),t.$$.dirty&33&&n(11,a=T>0&&T===v.length),t.$$.dirty&5&&n(10,u=w&&v.length===1),t.$$.dirty&9&&n(9,s=_=>{_.stopPropagation(),gr(_,A,v)}),t.$$.dirty&72&&n(7,c=()=>{b||C("select",{index:A})})},n(8,o=_=>{_.preventDefault()}),[v,g,w,A,h,T,b,c,o,s,u,a,l,i,f,r,d,S,y]}class xt extends x{constructor(e){super(),X(this,e,pr,br,Q,{cards:0,capacity:1,closed:2,index:3,isDraggableFn:4,selectedCardsN:5,nested:6})}}const en=(t,e)=>{const n=t/e;return n<3/4?[3,5]:n<4/3?[4,4]:[5,3]},St=(t,e)=>{const[n,r]=en(t,e);return{length:n*r-15}},yr=(t,e,n,r)=>{const[i,l]=en(e,r),a=Xt(4,t)*i+(t!=="small"?.666:.333)*10,u=e*.95/a,s=Jt(t).height*l+(t!=="small"?.5:.25)*6,c=(n>600?n:r)*.95/s;return Math.min(u,c)},_r=()=>{const t=new oe.Deck;return[...Array(13)].map(()=>t.popN(4)).concat([[],[]])},xe=t=>{const[e,...n]=t;return n.every(r=>r.value===e.value)},wr=t=>t.length===0?!1:t.length===1?!0:xe(t),tn=(t,e)=>t.length+e.length>4?!1:e.length===0||e[e.length-1].value===t[0].value,nn=(t,e,n,r)=>{const i=t.map(l=>[...l]);if(!tn(r,i[n]))throw new Error(`Can not move cards ${r.map(l=>l.toString(Oe.CardStringType.ShortEmoji))} from pile ${e} to pile ${n}`);return i[e]=i[e].slice(0,i[e].length-r.length),i[n]=[...i[n],...r],i},et=t=>t.length===1||xe(t)?t:et(t.slice(1)),Sr=(t,e)=>{if(t[e].length===0)throw new Error("Cannot move cards from an empty pile.");if(rn(t[e]))throw new Error("Cannot move cards from a completed pile.");const n=et(t[e]),r=t.reduce((a,u,s)=>s!==e&&tn(n,u)?[...a,s]:a,[]);if(r.length===0)throw new Error(`Cannot move cards from pile ${e} to any other pile`);const i=r.filter(a=>t[a].length>0),l=i.length>0?i[0]:r[0];return nn(t,e,l,n)},rn=t=>t.length===4&&xe(t),kr=t=>t.reduce((e,n,r)=>rn(n)?[...e,r]:e,[]);function kt(t,e,n){const r=t.slice();return r[21]=e[n],r}function Ct(t,e,n){const r=t.slice();return r[24]=e[n],r[26]=n,r}function Tt(t){let e,n,r;return n=new xt({props:{cards:t[24],closed:t[8].includes(t[26]),selectedCardsN:t[7]===t[26]?t[6].length:0,index:t[26],isDraggableFn:wr}}),n.$on("drop",t[11](t[26])),n.$on("dblclick",t[12](t[26])),n.$on("select",t[10]),{c(){e=I("div"),V(n.$$.fragment),k(e,"class","pile svelte-1qdb0j4"),z(e,"small",t[3]==="small")},m(i,l){j(i,e,l),q(n,e,null),r=!0},p(i,l){const a={};l&16&&(a.cards=i[24]),l&256&&(a.closed=i[8].includes(i[26])),l&192&&(a.selectedCardsN=i[7]===i[26]?i[6].length:0),n.$set(a),(!r||l&8)&&z(e,"small",i[3]==="small")},i(i){r||(N(n.$$.fragment,i),r=!0)},o(i){F(n.$$.fragment,i),r=!1},d(i){i&&U(e),B(n)}}}function Nt(t){let e;return{c(){e=I("div"),k(e,"class","pile svelte-1qdb0j4")},m(n,r){j(n,e,r)},p:W,d(n){n&&U(e)}}}function Cr(t){let e,n,r,i,l,a;De(t[17]);let u=re(t[4]),s=[];for(let f=0;f<u.length;f+=1)s[f]=Tt(Ct(t,u,f));const o=f=>F(s[f],1,1,()=>{s[f]=null});let c=re(St(t[0],t[2])),d=[];for(let f=0;f<c.length;f+=1)d[f]=Nt(kt(t,c,f));return{c(){e=I("main");for(let f=0;f<s.length;f+=1)s[f].c();n=$();for(let f=0;f<d.length;f+=1)d[f].c();k(e,"class","pileon svelte-1qdb0j4"),k(e,"style",t[5]),De(()=>t[18].call(e))},m(f,v){j(f,e,v);for(let g=0;g<s.length;g+=1)s[g]&&s[g].m(e,null);P(e,n);for(let g=0;g<d.length;g+=1)d[g]&&d[g].m(e,null);r=_n(e,t[18].bind(e)),i=!0,l||(a=Y(window,"resize",t[17]),l=!0)},p(f,[v]){if(v&7640){u=re(f[4]);let g;for(g=0;g<u.length;g+=1){const w=Ct(f,u,g);s[g]?(s[g].p(w,v),N(s[g],1)):(s[g]=Tt(w),s[g].c(),N(s[g],1),s[g].m(e,n))}for(te(),g=u.length;g<s.length;g+=1)o(g);ne()}if(v&5){c=re(St(f[0],f[2]));let g;for(g=0;g<c.length;g+=1){const w=kt(f,c,g);d[g]?d[g].p(w,v):(d[g]=Nt(),d[g].c(),d[g].m(e,null))}for(;g<d.length;g+=1)d[g].d(1);d.length=c.length}(!i||v&32)&&k(e,"style",f[5])},i(f){if(!i){for(let v=0;v<u.length;v+=1)N(s[v]);i=!0}},o(f){s=s.filter(Boolean);for(let v=0;v<s.length;v+=1)F(s[v]);i=!1},d(f){f&&U(e),ye(s,f),ye(d,f),r(),l=!1,a()}}}function Tr(t,e,n){let r,i,l,a,u,s,o,c,d,f,v,g=Gt(D=>({size:D.size==="default"?"bridge":D.size,fourColor:D.colors==="four-color"}));ue(t,g,D=>n(16,c=D));let w=[_r()];const A=D=>{D.stopPropagation(),w.length>1&&n(13,w=w.slice(0,w.length-1))};let h=[void 0,[]];const T=(D,R,O)=>{try{n(14,h=[void 0,[]]);const m=nn(w[w.length-1],D,R,O);n(13,w=[...w,m])}catch{}},b=D=>{const[R,O]=h,m=D.detail.index;i.includes(m)||(R===void 0||O.length===0?n(14,h=[m,et(r[m])]):R===m?n(14,h=[m,O.slice(1)]):R!==m&&(T(R,m,O),n(14,h=[void 0,[]])))},C=D=>R=>{R.preventDefault();const{sourceStack:O,cards:m}=hr(R);O!==D&&T(O,D,m)},S=D=>R=>{R.preventDefault();try{n(14,h=[void 0,[]]);const O=Sr(w[w.length-1],D);n(13,w=[...w,O])}catch{}};Bt(()=>{Ie.update(D=>({...D,undo:A}))}),Sn(()=>{Ie.update(D=>({...D,undo:void 0}))});function y(){n(2,v=window.innerHeight)}function _(){f=this.clientHeight,d=this.clientWidth,n(1,f),n(0,d)}return t.$$.update=()=>{if(t.$$.dirty&5){const D=d<800||v<500?"small":"bridge";zn(R=>({size:R.size==="default"?D:R.size,fourColor:R.colors==="four-color"}))}t.$$.dirty&8192&&n(4,r=w[w.length-1]),t.$$.dirty&16&&n(8,i=kr(r)),t.$$.dirty&16384&&n(7,l=h[0]),t.$$.dirty&16384&&n(6,a=h[1]),t.$$.dirty&65536&&n(3,u=c.size),t.$$.dirty&15&&n(15,s=yr(u,d,f,v)),t.$$.dirty&32768&&n(5,o=`font-size: ${s}px`)},[d,f,v,u,r,o,a,l,i,g,b,C,S,w,h,s,c,y,_]}class Nr extends x{constructor(e){super(),X(this,e,Tr,Cr,Q,{})}}function Dr(t){let e;return{c(){e=I("span"),e.textContent=`at ${t[0]} ${t[1]}`},m(n,r){j(n,e,r)},p:W,d(n){n&&U(e)}}}function Er(t){let e,n,r,i=(t[1]||t[0])&&Dr(t);return{c(){e=I("footer"),n=I("a"),n.textContent="kangasta / pileon",r=$(),i&&i.c(),k(n,"href","https://github.com/kangasta/pileon.git"),k(n,"target","_blank"),k(e,"class","svelte-16t3ryr")},m(l,a){j(l,e,a),P(e,n),P(e,r),i&&i.m(e,null)},p(l,[a]){(l[1]||l[0])&&i.p(l,a)},i:W,o:W,d(l){l&&U(e),i&&i.d()}}}function Fr(t){const e={}.VITE_TAG??"",n="c5fc6b0f29e0fd6e4fb95211065ebb0e89f1e872".slice(0,8);return[e,n]}class Or extends x{constructor(e){super(),X(this,e,Fr,Er,Q,{})}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var an=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Me=an.join(","),ln=typeof Element>"u",ge=ln?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Ue=!ln&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},Ke=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),l=i===""||i==="true",a=l||n&&e&&t(e.parentNode);return a},Ar=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},on=function(e,n,r){if(Ke(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(Me));return n&&ge.call(e,Me)&&i.unshift(e),i=i.filter(r),i},un=function t(e,n,r){for(var i=[],l=Array.from(e);l.length;){var a=l.shift();if(!Ke(a,!1))if(a.tagName==="SLOT"){var u=a.assignedElements(),s=u.length?u:a.children,o=t(s,!0,r);r.flatten?i.push.apply(i,o):i.push({scopeParent:a,candidates:o})}else{var c=ge.call(a,Me);c&&r.filter(a)&&(n||!e.includes(a))&&i.push(a);var d=a.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(a),f=!Ke(d,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(a));if(d&&f){var v=t(d===!0?a.children:d.children,!0,r);r.flatten?i.push.apply(i,v):i.push({scopeParent:a,candidates:v})}else l.unshift.apply(l,a.children)}}return i},sn=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},ce=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Ar(e))&&!sn(e)?0:e.tabIndex},Pr=function(e,n){var r=ce(e);return r<0&&n&&!sn(e)?0:r},Lr=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},fn=function(e){return e.tagName==="INPUT"},Rr=function(e){return fn(e)&&e.type==="hidden"},Ir=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},Mr=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},Ur=function(e){if(!e.name)return!0;var n=e.form||Ue(e),r=function(u){return n.querySelectorAll('input[type="radio"][name="'+u+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var l=Mr(i,e.form);return!l||l===e},Kr=function(e){return fn(e)&&e.type==="radio"},zr=function(e){return Kr(e)&&!Ur(e)},jr=function(e){var n,r=e&&Ue(e),i=(n=r)===null||n===void 0?void 0:n.host,l=!1;if(r&&r!==e){var a,u,s;for(l=!!((a=i)!==null&&a!==void 0&&(u=a.ownerDocument)!==null&&u!==void 0&&u.contains(i)||e!=null&&(s=e.ownerDocument)!==null&&s!==void 0&&s.contains(e));!l&&i;){var o,c,d;r=Ue(i),i=(o=r)===null||o===void 0?void 0:o.host,l=!!((c=i)!==null&&c!==void 0&&(d=c.ownerDocument)!==null&&d!==void 0&&d.contains(i))}}return l},Dt=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},qr=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var l=ge.call(e,"details>summary:first-of-type"),a=l?e.parentElement:e;if(ge.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var u=e;e;){var s=e.parentElement,o=Ue(e);if(s&&!s.shadowRoot&&i(s)===!0)return Dt(e);e.assignedSlot?e=e.assignedSlot:!s&&o!==e.ownerDocument?e=o.host:e=s}e=u}if(jr(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Dt(e);return!1},Br=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return ge.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},ze=function(e,n){return!(n.disabled||Ke(n)||Rr(n)||qr(n,e)||Ir(n)||Br(n))},Ye=function(e,n){return!(zr(n)||ce(n)<0||!ze(e,n))},Vr=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},$r=function t(e){var n=[],r=[];return e.forEach(function(i,l){var a=!!i.scopeParent,u=a?i.scopeParent:i,s=Pr(u,a),o=a?t(i.candidates):u;s===0?a?n.push.apply(n,o):n.push(u):r.push({documentOrder:l,tabIndex:s,item:i,isScope:a,content:o})}),r.sort(Lr).reduce(function(i,l){return l.isScope?i.push.apply(i,l.content):i.push(l.content),i},[]).concat(n)},Hr=function(e,n){n=n||{};var r;return n.getShadowRoot?r=un([e],n.includeContainer,{filter:Ye.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:Vr}):r=on(e,n.includeContainer,Ye.bind(null,n)),$r(r)},Wr=function(e,n){n=n||{};var r;return n.getShadowRoot?r=un([e],n.includeContainer,{filter:ze.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=on(e,n.includeContainer,ze.bind(null,n)),r},me=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ge.call(e,Me)===!1?!1:Ye(n,e)},Jr=an.concat("iframe").join(","),We=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ge.call(e,Jr)===!1?!1:ze(n,e)};/*!
* focus-trap 7.5.2
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ft(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Et(Object(n),!0).forEach(function(r){Gr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gr(t,e,n){return e=Zr(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yr(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zr(t){var e=Yr(t,"string");return typeof e=="symbol"?e:String(e)}var Ot={activateTrap:function(e,n){if(e.length>0){var r=e[e.length-1];r!==n&&r.pause()}var i=e.indexOf(n);i===-1||e.splice(i,1),e.push(n)},deactivateTrap:function(e,n){var r=e.indexOf(n);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},Qr=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Xr=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},Te=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},xr=function(e){return Te(e)&&!e.shiftKey},ei=function(e){return Te(e)&&e.shiftKey},At=function(e){return setTimeout(e,0)},Pt=function(e,n){var r=-1;return e.every(function(i,l){return n(i)?(r=l,!1):!0}),r},ke=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},Pe=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},ti=[],ni=function(e,n){var r=(n==null?void 0:n.document)||document,i=(n==null?void 0:n.trapStack)||ti,l=Ft({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:xr,isKeyBackward:ei},n),a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},u,s=function(m,p,E){return m&&m[p]!==void 0?m[p]:l[E||p]},o=function(m,p){var E=typeof(p==null?void 0:p.composedPath)=="function"?p.composedPath():void 0;return a.containerGroups.findIndex(function(M){var K=M.container,L=M.tabbableNodes;return K.contains(m)||(E==null?void 0:E.includes(K))||L.find(function(H){return H===m})})},c=function(m){var p=l[m];if(typeof p=="function"){for(var E=arguments.length,M=new Array(E>1?E-1:0),K=1;K<E;K++)M[K-1]=arguments[K];p=p.apply(void 0,M)}if(p===!0&&(p=void 0),!p){if(p===void 0||p===!1)return p;throw new Error("`".concat(m,"` was specified but was not a node, or did not return a node"))}var L=p;if(typeof p=="string"&&(L=r.querySelector(p),!L))throw new Error("`".concat(m,"` as selector refers to no known node"));return L},d=function(){var m=c("initialFocus");if(m===!1)return!1;if(m===void 0||!We(m,l.tabbableOptions))if(o(r.activeElement)>=0)m=r.activeElement;else{var p=a.tabbableGroups[0],E=p&&p.firstTabbableNode;m=E||c("fallbackFocus")}if(!m)throw new Error("Your focus-trap needs to have at least one focusable element");return m},f=function(){if(a.containerGroups=a.containers.map(function(m){var p=Hr(m,l.tabbableOptions),E=Wr(m,l.tabbableOptions),M=p.length>0?p[0]:void 0,K=p.length>0?p[p.length-1]:void 0,L=E.find(function(J){return me(J)}),H=E.slice().reverse().find(function(J){return me(J)}),G=!!p.find(function(J){return ce(J)>0});return{container:m,tabbableNodes:p,focusableNodes:E,posTabIndexesFound:G,firstTabbableNode:M,lastTabbableNode:K,firstDomTabbableNode:L,lastDomTabbableNode:H,nextTabbableNode:function(fe){var we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,le=p.indexOf(fe);return le<0?we?E.slice(E.indexOf(fe)+1).find(function(Se){return me(Se)}):E.slice(0,E.indexOf(fe)).reverse().find(function(Se){return me(Se)}):p[le+(we?1:-1)]}}}),a.tabbableGroups=a.containerGroups.filter(function(m){return m.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!c("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(a.containerGroups.find(function(m){return m.posTabIndexesFound})&&a.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},v=function O(m){if(m!==!1&&m!==r.activeElement){if(!m||!m.focus){O(d());return}m.focus({preventScroll:!!l.preventScroll}),a.mostRecentlyFocusedNode=m,Qr(m)&&m.select()}},g=function(m){var p=c("setReturnFocus",m);return p||(p===!1?!1:m)},w=function(m){var p=m.target,E=m.event,M=m.isBackward,K=M===void 0?!1:M;p=p||Pe(E),f();var L=null;if(a.tabbableGroups.length>0){var H=o(p,E),G=H>=0?a.containerGroups[H]:void 0;if(H<0)K?L=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:L=a.tabbableGroups[0].firstTabbableNode;else if(K){var J=Pt(a.tabbableGroups,function(Be){var Ve=Be.firstTabbableNode;return p===Ve});if(J<0&&(G.container===p||We(p,l.tabbableOptions)&&!me(p,l.tabbableOptions)&&!G.nextTabbableNode(p,!1))&&(J=H),J>=0){var fe=J===0?a.tabbableGroups.length-1:J-1,we=a.tabbableGroups[fe];L=ce(p)>=0?we.lastTabbableNode:we.lastDomTabbableNode}else Te(E)||(L=G.nextTabbableNode(p,!1))}else{var le=Pt(a.tabbableGroups,function(Be){var Ve=Be.lastTabbableNode;return p===Ve});if(le<0&&(G.container===p||We(p,l.tabbableOptions)&&!me(p,l.tabbableOptions)&&!G.nextTabbableNode(p))&&(le=H),le>=0){var Se=le===a.tabbableGroups.length-1?0:le+1,nt=a.tabbableGroups[Se];L=ce(p)>=0?nt.firstTabbableNode:nt.firstDomTabbableNode}else Te(E)||(L=G.nextTabbableNode(p))}}else L=c("fallbackFocus");return L},A=function(m){var p=Pe(m);if(!(o(p,m)>=0)){if(ke(l.clickOutsideDeactivates,m)){u.deactivate({returnFocus:l.returnFocusOnDeactivate});return}ke(l.allowOutsideClick,m)||m.preventDefault()}},h=function(m){var p=Pe(m),E=o(p,m)>=0;if(E||p instanceof Document)E&&(a.mostRecentlyFocusedNode=p);else{m.stopImmediatePropagation();var M,K=!0;if(a.mostRecentlyFocusedNode)if(ce(a.mostRecentlyFocusedNode)>0){var L=o(a.mostRecentlyFocusedNode),H=a.containerGroups[L].tabbableNodes;if(H.length>0){var G=H.findIndex(function(J){return J===a.mostRecentlyFocusedNode});G>=0&&(l.isKeyForward(a.recentNavEvent)?G+1<H.length&&(M=H[G+1],K=!1):G-1>=0&&(M=H[G-1],K=!1))}}else a.containerGroups.some(function(J){return J.tabbableNodes.some(function(fe){return ce(fe)>0})})||(K=!1);else K=!1;K&&(M=w({target:a.mostRecentlyFocusedNode,isBackward:l.isKeyBackward(a.recentNavEvent)})),v(M||a.mostRecentlyFocusedNode||d())}a.recentNavEvent=void 0},T=function(m){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;a.recentNavEvent=m;var E=w({event:m,isBackward:p});E&&(Te(m)&&m.preventDefault(),v(E))},b=function(m){if(Xr(m)&&ke(l.escapeDeactivates,m)!==!1){m.preventDefault(),u.deactivate();return}(l.isKeyForward(m)||l.isKeyBackward(m))&&T(m,l.isKeyBackward(m))},C=function(m){var p=Pe(m);o(p,m)>=0||ke(l.clickOutsideDeactivates,m)||ke(l.allowOutsideClick,m)||(m.preventDefault(),m.stopImmediatePropagation())},S=function(){if(a.active)return Ot.activateTrap(i,u),a.delayInitialFocusTimer=l.delayInitialFocus?At(function(){v(d())}):v(d()),r.addEventListener("focusin",h,!0),r.addEventListener("mousedown",A,{capture:!0,passive:!1}),r.addEventListener("touchstart",A,{capture:!0,passive:!1}),r.addEventListener("click",C,{capture:!0,passive:!1}),r.addEventListener("keydown",b,{capture:!0,passive:!1}),u},y=function(){if(a.active)return r.removeEventListener("focusin",h,!0),r.removeEventListener("mousedown",A,!0),r.removeEventListener("touchstart",A,!0),r.removeEventListener("click",C,!0),r.removeEventListener("keydown",b,!0),u},_=function(m){var p=m.some(function(E){var M=Array.from(E.removedNodes);return M.some(function(K){return K===a.mostRecentlyFocusedNode})});p&&v(d())},D=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(_):void 0,R=function(){D&&(D.disconnect(),a.active&&!a.paused&&a.containers.map(function(m){D.observe(m,{subtree:!0,childList:!0})}))};return u={get active(){return a.active},get paused(){return a.paused},activate:function(m){if(a.active)return this;var p=s(m,"onActivate"),E=s(m,"onPostActivate"),M=s(m,"checkCanFocusTrap");M||f(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=r.activeElement,p==null||p();var K=function(){M&&f(),S(),R(),E==null||E()};return M?(M(a.containers.concat()).then(K,K),this):(K(),this)},deactivate:function(m){if(!a.active)return this;var p=Ft({onDeactivate:l.onDeactivate,onPostDeactivate:l.onPostDeactivate,checkCanReturnFocus:l.checkCanReturnFocus},m);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,y(),a.active=!1,a.paused=!1,R(),Ot.deactivateTrap(i,u);var E=s(p,"onDeactivate"),M=s(p,"onPostDeactivate"),K=s(p,"checkCanReturnFocus"),L=s(p,"returnFocus","returnFocusOnDeactivate");E==null||E();var H=function(){At(function(){L&&v(g(a.nodeFocusedBeforeActivation)),M==null||M()})};return L&&K?(K(g(a.nodeFocusedBeforeActivation)).then(H,H),this):(H(),this)},pause:function(m){if(a.paused||!a.active)return this;var p=s(m,"onPause"),E=s(m,"onPostPause");return a.paused=!0,p==null||p(),y(),R(),E==null||E(),this},unpause:function(m){if(!a.paused||!a.active)return this;var p=s(m,"onUnpause"),E=s(m,"onPostUnpause");return a.paused=!1,p==null||p(),f(),S(),R(),E==null||E(),this},updateContainerElements:function(m){var p=[].concat(m).filter(Boolean);return a.containers=p.map(function(E){return typeof E=="string"?r.querySelector(E):E}),a.active&&f(),R(),this}},u.updateContainerElements(e),u};const cn=()=>(Math.random()+1).toString(36).substring(5);function ri(t){let e,n,r,i,l,a,u,s,o,c;return{c(){e=I("div"),n=I("button"),r=Re("svg"),i=Re("path"),a=$(),u=I("div"),s=ee(t[1]),k(i,"fill","none"),k(i,"stroke","currentColor"),k(i,"stroke-linecap","round"),k(i,"stroke-linejoin","round"),k(i,"stroke-width","1"),k(i,"d",l=t[3][t[0]].path),k(r,"viewBox","0 0 16 16"),k(r,"class","svelte-1nd3ako"),k(n,"aria-labelledby",t[4]),k(n,"class","clickable svelte-1nd3ako"),z(n,"open",open),k(u,"class","label svelte-1nd3ako"),k(u,"id",t[4]),k(e,"class","icon-button clickable svelte-1nd3ako")},m(d,f){j(d,e,f),P(e,n),P(n,r),P(r,i),P(e,a),P(e,u),P(u,s),o||(c=[Y(n,"click",function(){ae(t[2])&&t[2].apply(this,arguments)}),Y(e,"click",function(){ae(t[2])&&t[2].apply(this,arguments)})],o=!0)},p(d,[f]){t=d,f&1&&l!==(l=t[3][t[0]].path)&&k(i,"d",l),f&0&&z(n,"open",open),f&2&&Ee(s,t[1])},i:W,o:W,d(d){d&&U(e),o=!1,se(c)}}}function ii(t,e,n){const r={Close:{path:"M 3 3 L 13 13 M 3 13 L 13 3"},Menu:{path:"M 2 4 L 14 4 M 2 8 L 14 8 M 2 12 L 14 12"},Undo:{path:"M 6 2 L 2 6 L 6 10 M 2 6 L 10 6 A 4 4 0 1 1 10 14 L 8 14"}};let{icon:i}=e,{label:l}=e,{onClick:a}=e;const u=`${cn()}-label`;return t.$$set=s=>{"icon"in s&&n(0,i=s.icon),"label"in s&&n(1,l=s.label),"onClick"in s&&n(2,a=s.onClick)},[i,l,a,r,u]}class tt extends x{constructor(e){super(),X(this,e,ii,ri,Q,{icon:0,label:1,onClick:2})}}function ai(t){let e,n,r,i,l,a,u,s,o,c;s=new tt({props:{icon:"Close",label:"Close",onClick:t[2]}});const d=t[4].default,f=Ut(d,t,t[3],null);return{c(){e=I("div"),n=$(),r=I("div"),i=I("div"),l=I("h2"),a=ee(t[0]),u=$(),V(s.$$.fragment),o=$(),f&&f.c(),k(e,"class","backdrop svelte-1lts3yv"),k(l,"class","svelte-1lts3yv"),k(i,"class","header svelte-1lts3yv"),k(r,"class","modal svelte-1lts3yv"),k(r,"id",t[1])},m(v,g){j(v,e,g),j(v,n,g),j(v,r,g),P(r,i),P(i,l),P(l,a),P(i,u),q(s,i,null),P(r,o),f&&f.m(r,null),c=!0},p(v,[g]){(!c||g&1)&&Ee(a,v[0]),f&&f.p&&(!c||g&8)&&jt(f,d,v,v[3],c?zt(d,v[3],g,null):qt(v[3]),null)},i(v){c||(N(s.$$.fragment,v),N(f,v),c=!0)},o(v){F(s.$$.fragment,v),F(f,v),c=!1},d(v){v&&(U(e),U(n),U(r)),B(s),f&&f.d(v)}}}function li(t,e,n){let{$$slots:r={},$$scope:i}=e,{title:l}=e;const a=`modal-${cn()}`;Bt(()=>{const o=ni(`#${a}`,{clickOutsideDeactivates:!0,onDeactivate:()=>s()});o.activate();const c=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{o.deactivate(),document.body.style.overflow=c}});const u=Vt(),s=()=>{u("close")};return t.$$set=o=>{"title"in o&&n(0,l=o.title),"$$scope"in o&&n(3,i=o.$$scope)},[l,a,s,i,r]}class oi extends x{constructor(e){super(),X(this,e,li,ai,Q,{title:0})}}function ui(t){let e,n,r,i,l;return{c(){e=I("button"),n=ee(t[0]),k(e,"aria-pressed",r=t[1]?"true":"false"),e.disabled=t[1],k(e,"class","svelte-jc3xzr"),z(e,"pressed",t[1])},m(a,u){j(a,e,u),P(e,n),i||(l=Y(e,"click",function(){ae(t[2])&&t[2].apply(this,arguments)}),i=!0)},p(a,[u]){t=a,u&1&&Ee(n,t[0]),u&2&&r!==(r=t[1]?"true":"false")&&k(e,"aria-pressed",r),u&2&&(e.disabled=t[1]),u&2&&z(e,"pressed",t[1])},i:W,o:W,d(a){a&&U(e),i=!1,l()}}}function si(t,e,n){let r,i,l;ue(t,_e,c=>n(4,l=c));let{target:a}=e,{value:u}=e;const{update:s}=_e,o=()=>{};return t.$$set=c=>{"target"in c&&n(3,a=c.target),"value"in c&&n(0,u=c.value)},t.$$.update=()=>{t.$$.dirty&25&&n(1,i=l[a]===u),t.$$.dirty&11&&n(2,r=i?o:()=>s(c=>({...c,[a]:u})))},[u,i,r,a,l]}class ie extends x{constructor(e){super(),X(this,e,si,ui,Q,{target:3,value:0})}}function Lt(t){let e,n;return e=new tt({props:{icon:"Undo",label:"Undo",onClick:t[1].undo}}),{c(){V(e.$$.fragment)},m(r,i){q(e,r,i),n=!0},p(r,i){const l={};i&2&&(l.onClick=r[1].undo),e.$set(l)},i(r){n||(N(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Rt(t){let e,n;return e=new oi({props:{title:"Settings",$$slots:{default:[fi]},$$scope:{ctx:t}}}),e.$on("close",t[2]("close")),{c(){V(e.$$.fragment)},m(r,i){q(e,r,i),n=!0},p(r,i){const l={};i&8&&(l.$$scope={dirty:i,ctx:r}),e.$set(l)},i(r){n||(N(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function fi(t){let e,n,r,i,l,a,u,s,o,c,d,f,v,g,w,A,h,T,b,C,S,y,_,D,R,O,m,p,E,M,K;return a=new ie({props:{target:"game",value:"deck"}}),s=new ie({props:{target:"game",value:"pileon"}}),g=new ie({props:{target:"colors",value:"default"}}),A=new ie({props:{target:"colors",value:"standard"}}),T=new ie({props:{target:"colors",value:"four-color"}}),D=new ie({props:{target:"size",value:"default"}}),O=new ie({props:{target:"size",value:"bridge"}}),p=new ie({props:{target:"size",value:"poker"}}),M=new ie({props:{target:"size",value:"small"}}),{c(){e=I("table"),n=I("tr"),r=I("th"),r.textContent="Game:",i=$(),l=I("td"),V(a.$$.fragment),u=ee(" / "),V(s.$$.fragment),o=$(),c=I("tr"),d=I("th"),d.textContent="Colors:",f=$(),v=I("td"),V(g.$$.fragment),w=ee(" / "),V(A.$$.fragment),h=ee(" / "),V(T.$$.fragment),b=$(),C=I("tr"),S=I("th"),S.textContent="Size:",y=$(),_=I("td"),V(D.$$.fragment),R=ee(" / "),V(O.$$.fragment),m=ee(" / "),V(p.$$.fragment),E=ee(" / "),V(M.$$.fragment),k(r,"class","svelte-1knt3fz"),k(l,"class","svelte-1knt3fz"),k(d,"class","svelte-1knt3fz"),k(v,"class","svelte-1knt3fz"),k(S,"class","svelte-1knt3fz"),k(_,"class","svelte-1knt3fz"),k(e,"class","svelte-1knt3fz")},m(L,H){j(L,e,H),P(e,n),P(n,r),P(n,i),P(n,l),q(a,l,null),P(l,u),q(s,l,null),P(e,o),P(e,c),P(c,d),P(c,f),P(c,v),q(g,v,null),P(v,w),q(A,v,null),P(v,h),q(T,v,null),P(e,b),P(e,C),P(C,S),P(C,y),P(C,_),q(D,_,null),P(_,R),q(O,_,null),P(_,m),q(p,_,null),P(_,E),q(M,_,null),K=!0},p:W,i(L){K||(N(a.$$.fragment,L),N(s.$$.fragment,L),N(g.$$.fragment,L),N(A.$$.fragment,L),N(T.$$.fragment,L),N(D.$$.fragment,L),N(O.$$.fragment,L),N(p.$$.fragment,L),N(M.$$.fragment,L),K=!0)},o(L){F(a.$$.fragment,L),F(s.$$.fragment,L),F(g.$$.fragment,L),F(A.$$.fragment,L),F(T.$$.fragment,L),F(D.$$.fragment,L),F(O.$$.fragment,L),F(p.$$.fragment,L),F(M.$$.fragment,L),K=!1},d(L){L&&U(e),B(a),B(s),B(g),B(A),B(T),B(D),B(O),B(p),B(M)}}}function ci(t){let e,n,r,i,l,a;n=new tt({props:{icon:"Menu",label:"Settings",onClick:t[2]("open")}});let u=t[1].undo!==void 0&&Lt(t),s=t[0]&&Rt(t);return{c(){e=I("div"),V(n.$$.fragment),r=$(),u&&u.c(),i=$(),s&&s.c(),l=bn(),k(e,"class","menu svelte-1knt3fz")},m(o,c){j(o,e,c),q(n,e,null),P(e,r),u&&u.m(e,null),j(o,i,c),s&&s.m(o,c),j(o,l,c),a=!0},p(o,[c]){o[1].undo!==void 0?u?(u.p(o,c),c&2&&N(u,1)):(u=Lt(o),u.c(),N(u,1),u.m(e,null)):u&&(te(),F(u,1,1,()=>{u=null}),ne()),o[0]?s?(s.p(o,c),c&1&&N(s,1)):(s=Rt(o),s.c(),N(s,1),s.m(l.parentNode,l)):s&&(te(),F(s,1,1,()=>{s=null}),ne())},i(o){a||(N(n.$$.fragment,o),N(u),N(s),a=!0)},o(o){F(n.$$.fragment,o),F(u),F(s),a=!1},d(o){o&&(U(e),U(i),U(l)),B(n),u&&u.d(),s&&s.d(o)}}}function di(t,e,n){let r;ue(t,Ie,a=>n(1,r=a));let i=!1;return[i,r,a=>u=>{n(0,i=a==="open"),u.stopPropagation()}]}class gi extends x{constructor(e){super(),X(this,e,di,ci,Q,{})}}function hi(t){let e,n,r,i,l,a,u,s,o;e=new gi({});var c=t[0];function d(f,v){return{}}return c&&(r=at(c,d())),a=new Or({}),{c(){V(e.$$.fragment),n=$(),r&&V(r.$$.fragment),i=$(),l=$(),V(a.$$.fragment)},m(f,v){q(e,f,v),j(f,n,v),r&&q(r,f,v),j(f,i,v),j(f,l,v),q(a,f,v),u=!0,s||(o=Y(document.body,"keydown",t[1]),s=!0)},p(f,[v]){if(v&1&&c!==(c=f[0])){if(r){te();const g=r;F(g.$$.fragment,1,0,()=>{B(g,1)}),ne()}c?(r=at(c,d()),V(r.$$.fragment),N(r.$$.fragment,1),q(r,i.parentNode,i)):r=null}},i(f){u||(N(e.$$.fragment,f),r&&N(r.$$.fragment,f),N(a.$$.fragment,f),u=!0)},o(f){F(e.$$.fragment,f),r&&F(r.$$.fragment,f),F(a.$$.fragment,f),u=!1},d(f){f&&(U(n),U(i),U(l)),B(e,f),r&&B(r,f),B(a,f),s=!1,o()}}}function vi(t,e,n){let r,i,l;ue(t,Ie,u=>n(3,i=u)),ue(t,_e,u=>n(2,l=u));const a=u=>{u.key==="z"&&(u.ctrlKey||u.metaKey)&&i.undo!==void 0&&i.undo(u)};return t.$$.update=()=>{t.$$.dirty&4&&n(0,r=l.game==="deck"?dr:Nr)},[r,a,l]}class mi extends x{constructor(e){super(),X(this,e,vi,hi,Q,{})}}new mi({target:document.body});
