var xn=Object.defineProperty;var er=(t,e,n)=>e in t?xn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ot=(t,e,n)=>(er(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function q(){}function tr(t,e){for(const n in e)t[n]=e[n];return t}function cn(t){return t()}function Ct(){return Object.create(null)}function he(t){t.forEach(cn)}function ue(t){return typeof t=="function"}function Z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function nr(t){return Object.keys(t).length===0}function dn(t,...e){if(t==null){for(const r of e)r(void 0);return q}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function rr(t){let e;return dn(t,n=>e=n)(),e}function ge(t,e,n){t.$$.on_destroy.push(dn(e,n))}function gn(t,e,n,r){if(t){const i=hn(t,e,n,r);return t[0](i)}}function hn(t,e,n,r){return t[1]&&r?tr(n.ctx.slice(),t[1](r(e))):n.ctx}function mn(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const a=[],o=Math.max(e.dirty.length,i.length);for(let l=0;l<o;l+=1)a[l]=e.dirty[l]|i[l];return a}return e.dirty|i}return e.dirty}function vn(t,e,n,r,i,a){if(i){const o=hn(e,n,r,a);t.p(o,i)}}function pn(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function C(t,e){t.appendChild(e)}function E(t,e,n){t.insertBefore(e,n||null)}function N(t){t.parentNode&&t.parentNode.removeChild(t)}function Ne(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function T(t){return document.createElement(t)}function Ye(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function re(t){return document.createTextNode(t)}function M(){return re(" ")}function bn(){return re("")}function x(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function b(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ir(t){return Array.from(t.childNodes)}function Be(t,e){e=""+e,t.data!==e&&(t.data=e)}function Tt(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}let He;function ar(){if(He===void 0){He=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{He=!0}}return He}function or(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const r=T("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const i=ar();let a;return i?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",a=x(window,"message",o=>{o.source===r.contentWindow&&e()})):(r.src="about:blank",r.onload=()=>{a=x(r.contentWindow,"resize",e),e()}),C(t,r),()=>{(i||a&&r.contentWindow)&&a(),N(r)}}function R(t,e,n){t.classList.toggle(e,!!n)}function lr(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}function Nt(t,e){return new t(e)}let Me;function Re(t){Me=t}function qe(){if(!Me)throw new Error("Function called outside component initialization");return Me}function vt(t){qe().$$.on_mount.push(t)}function yn(t){qe().$$.on_destroy.push(t)}function _n(){const t=qe();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const a=lr(e,n,{cancelable:r});return i.slice().forEach(o=>{o.call(t,a)}),!a.defaultPrevented}return!0}}function ur(t,e){return qe().$$.context.set(t,e),e}function wn(t){return qe().$$.context.get(t)}function st(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const Ce=[],Ot=[];let Te=[];const At=[],sr=Promise.resolve();let ft=!1;function fr(){ft||(ft=!0,sr.then(Sn))}function je(t){Te.push(t)}const lt=new Set;let _e=0;function Sn(){if(_e!==0)return;const t=Me;do{try{for(;_e<Ce.length;){const e=Ce[_e];_e++,Re(e),cr(e.$$)}}catch(e){throw Ce.length=0,_e=0,e}for(Re(null),Ce.length=0,_e=0;Ot.length;)Ot.pop()();for(let e=0;e<Te.length;e+=1){const n=Te[e];lt.has(n)||(lt.add(n),n())}Te.length=0}while(Ce.length);for(;At.length;)At.pop()();ft=!1,lt.clear(),Re(t)}function cr(t){if(t.fragment!==null){t.update(),he(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(je)}}function dr(t){const e=[],n=[];Te.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),Te=e}const Je=new Set;let be;function Q(){be={r:0,c:[],p:be}}function Y(){be.r||he(be.c),be=be.p}function y(t,e){t&&t.i&&(Je.delete(t),t.i(e))}function S(t,e,n,r){if(t&&t.o){if(Je.has(t))return;Je.add(t),be.c.push(()=>{Je.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function ie(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function I(t){t&&t.c()}function L(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),je(()=>{const a=t.$$.on_mount.map(cn).filter(ue);t.$$.on_destroy?t.$$.on_destroy.push(...a):he(a),t.$$.on_mount=[]}),i.forEach(je)}function $(t,e){const n=t.$$;n.fragment!==null&&(dr(n.after_update),he(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function gr(t,e){t.$$.dirty[0]===-1&&(Ce.push(t),fr(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ee(t,e,n,r,i,a,o,l=[-1]){const u=Me;Re(t);const s=t.$$={fragment:null,ctx:[],props:a,update:q,not_equal:i,bound:Ct(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Ct(),dirty:l,skip_bound:!1,root:e.target||u.$$.root};o&&o(s.root);let f=!1;if(s.ctx=n?n(t,e.props||{},(c,d,...g)=>{const h=g.length?g[0]:d;return s.ctx&&i(s.ctx[c],s.ctx[c]=h)&&(!s.skip_bound&&s.bound[c]&&s.bound[c](h),f&&gr(t,c)),d}):[],s.update(),f=!0,he(s.before_update),s.fragment=r?r(s.ctx):!1,e.target){if(e.hydrate){const c=ir(e.target);s.fragment&&s.fragment.l(c),c.forEach(N)}else s.fragment&&s.fragment.c();e.intro&&y(t.$$.fragment),L(t,e.target,e.anchor),Sn()}Re(u)}class te{constructor(){ot(this,"$$");ot(this,"$$set")}$destroy(){$(this,1),this.$destroy=q}$on(e,n){if(!ue(n))return q;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!nr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const hr="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(hr);const we=[];function pt(t,e=q){let n;const r=new Set;function i(l){if(Z(t,l)&&(t=l,n)){const u=!we.length;for(const s of r)s[1](),we.push(s,t);if(u){for(let s=0;s<we.length;s+=2)we[s][0](we[s+1]);we.length=0}}}function a(l){i(l(t))}function o(l,u=q){const s=[l,u];return r.add(s),r.size===1&&(n=e(i,a)||q),l(t),()=>{r.delete(s),r.size===0&&n&&(n(),n=null)}}return{set:i,update:a,subscribe:o}}const kn="settings",mr={game:"pileon",colors:"default",size:"default"},vr=JSON.parse(localStorage.getItem(kn)),Oe=pt(vr??mr);Oe.subscribe(t=>localStorage.setItem(kn,JSON.stringify(t)));const pr={},Ae=pt(pr),br=4.5,yr=5,_r=3,Dt=7,wr=5,Cn=t=>{switch(t){case"bridge":return{height:Dt,width:br};case"poker":return{height:Dt,width:yr};case"small":return{height:wr,width:_r}}},bt="card-appearance",Sr={size:"bridge",fourColor:!1},kr=({size:t,colors:e})=>({size:t==="default"?"poker":t,fourColor:e==="four-color"}),Tn=t=>{const e=pt(Sr,n=>(Oe.subscribe(r=>n(t(r))),()=>{}));return ur(bt,e),e},yt=()=>wn(bt),Cr=t=>{const e=wn(bt);if(e){const n=rr(Oe);e.set(t(n))}},ct=(t,e,n={})=>r=>{(Array.isArray(t)?t:[t]).includes(r.code)&&e!==void 0&&(n.preventDefault&&r.preventDefault(),e())};var ne={},ae={};function De(t){"@babel/helpers - typeof";return De=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(t)}Object.defineProperty(ae,"__esModule",{value:!0});ae.Cards=ae.CardSuits=Fn=ae.CardStringType=ae.Card=void 0;function se(t,e,n){return e=An(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,An(r.key),r)}}function On(t,e,n){return e&&Et(t.prototype,e),n&&Et(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function An(t){var e=Tr(t,"string");return De(e)==="symbol"?e:String(e)}function Tr(t,e){if(De(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(De(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ue(t,e)}function Or(t){var e=En();return function(){var r=Ke(t),i;if(e){var a=Ke(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return Dn(this,i)}}function Dn(t,e){if(e&&(De(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ar(t)}function Ar(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dt(t){var e=typeof Map=="function"?new Map:void 0;return dt=function(r){if(r===null||!Dr(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return Ge(r,arguments,Ke(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Ue(i,r)},dt(t)}function Ge(t,e,n){return En()?Ge=Reflect.construct.bind():Ge=function(i,a,o){var l=[null];l.push.apply(l,a);var u=Function.bind.apply(i,l),s=new u;return o&&Ue(s,o.prototype),s},Ge.apply(null,arguments)}function En(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Dr(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function Ue(t,e){return Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ue(t,e)}function Ke(t){return Ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ke(t)}function Er(t,e){return $r(t)||Lr(t,e)||Fr(t,e)||Pr()}function Pr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fr(t,e){if(t){if(typeof t=="string")return Pt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pt(t,e)}}function Pt(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Lr(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],u=!0,s=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(f){s=!0,i=f}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw i}}return l}}function $r(t){if(Array.isArray(t))return t}var Pn=function(t){return t[t.Hearts=0]="Hearts",t[t.Spades=1]="Spades",t[t.Diamonds=2]="Diamonds",t[t.Clubs=3]="Clubs",t}({});ae.CardSuits=Pn;var _t=function(t){return t.Char="CHAR",t.Short="SHORT",t.Long="LONG",t.ShortEmoji="SHORT_EMOJI",t.ShortSuit="SHORT_SUIT",t.LongSuit="LONG_SUIT",t.EmojiSuit="EMOJI_SUIT",t.ShortValue="SHORT_VALUE",t.LongValue="LONG_VALUE",t}({}),Fn=ae.CardStringType=_t,Rr={"♥":0,"♠":1,"♦":2,"♣":3,h:0,s:1,d:2,c:3},Ir={A:1,T:10,J:11,Q:12,K:13},Mr=function(e){var n=/^([2-9ATJQK]{1}|10)([♥♠♦♣hsdc]{1})$/,r=e.match(n);if(!r)throw new Error('Could not parse card from "'.concat(e,'". Input should match ').concat(n,"."));var i=Er(r,3);i[0];var a=i[1],o=i[2],l=Number(a),u=(Number.isNaN(l)?Ir[a]:l)-1;return Rr[o]*13+u},jr=function(e){var n=/^_[a-z]+$/i;if(e.match(n)){var r=Array.from(e.slice(1));return r.map(function(i){var a=i.charCodeAt(0);return a<91?a-65:a-97+26})}return e.split(/[\s,]+/)},Ur=function(t){Nr(n,t);var e=Or(n);function n(r){var i;if(Nn(this,n),typeof r=="number")i=e.call(this,r);else{i=e.call(this);var a=Array.isArray(r)?r:jr(r);a.forEach(function(o){return i.push(new oe(o))})}return Dn(i)}return On(n,[{key:"toString",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:oe.StringType.Short;return i===_t.Char?"_"+this.map(function(a){return a.toString(i)}).join(""):this.map(function(a){return a.toString(i)}).join(", ")}}]),n}(dt(Array));ae.Cards=Ur;var Kr=function(e){return typeof e=="string"?Mr(e):e instanceof oe?e.num:e},oe=function(){function t(e){Nn(this,t),se(this,"num",void 0),this.num=Kr(e)}return On(t,[{key:"suit",get:function(){return t.getSuit(this.num)}},{key:"value",get:function(){return t.getValue(this.num)}},{key:"toString",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.StringType.Long;switch(n){case t.StringType.Short:return this.toString(t.StringType.ShortValue)+this.toString(t.StringType.ShortSuit);case t.StringType.ShortEmoji:return this.toString(t.StringType.ShortValue)+this.toString(t.StringType.EmojiSuit);case t.StringType.Long:return this.toString(t.StringType.LongValue)+" of "+this.toString(t.StringType.LongSuit);case t.StringType.Char:return t.chars[this.num];case t.StringType.ShortSuit:return t.shortSuits[this.suit];case t.StringType.LongSuit:return t.longSuits[this.suit];case t.StringType.EmojiSuit:return t.emojiSuits[this.suit];case t.StringType.ShortValue:return t.shortValues[this.value===13?0:this.value];case t.StringType.LongValue:return t.longValues[this.value===13?0:this.value]}throw new Error("Unsupported output type")}}],[{key:"fromJSON",value:function(n){var r=n.num;return new t(r)}},{key:"getSuit",value:function(n){return Math.floor(n/13)%4}},{key:"getValue",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return n%13||r?n%13:13}},{key:"compare",value:function(n,r){return r.value-n.value}}]),t}();ae.Card=oe;se(oe,"Suits",Pn);se(oe,"StringType",_t);se(oe,"chars","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz");se(oe,"emojiSuits",["♥","♠","♦","♣"]);se(oe,"shortSuits",["h","s","d","c"]);se(oe,"longSuits",["hearts","spades","diamonds","clubs"]);se(oe,"shortValues",["A","2","3","4","5","6","7","8","9","T","J","Q","K"]);se(oe,"longValues",["ace","two","three","four","five","six","seven","eight","nine","ten","jack","queen","king"]);var tt={},J={};Object.defineProperty(J,"__esModule",{value:!0});J.uniqueFilter=J.shuffle=J.last=J.isSorted=J.getCombinationsHelper=J.getCombinations=J.arraySubtraction=void 0;var zr=function(e,n){return e.filter(function(r){return!n.includes(r)})};J.arraySubtraction=zr;var Ln=function t(e,n,r,i,a){if(i.length>=n)a.push(i);else for(var o=r;o<e.length;o++)t(e,n,o+1,i.concat(e[o]),a)};J.getCombinationsHelper=Ln;var Br=function(e,n){var r=[];return Ln(e,n,0,[],r),r};J.getCombinations=Br;var qr=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=r?-1:1;try{return e.reduce(function(a,o){if(i*n(a,o)<=0)return o;throw new Error}),!0}catch{return!1}};J.isSorted=qr;var Vr=function(e){return e[e.length-1]};J.last=Vr;var Hr=function(e){for(var n=e.length-1;n>0;n--){var r=Math.floor(Math.random()*(n+1)),i=[e[r],e[n]];e[n]=i[0],e[r]=i[1]}return e};J.shuffle=Hr;var Wr=function(e,n,r){return r.indexOf(e)===n};J.uniqueFilter=Wr;Object.defineProperty(tt,"__esModule",{value:!0});tt.Deck=void 0;var Ft=J,Le=ae;function ze(t){"@babel/helpers - typeof";return ze=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(t)}function Jr(t){return Zr(t)||Yr(t)||Qr(t)||Gr()}function Gr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qr(t,e){if(t){if(typeof t=="string")return gt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gt(t,e)}}function Yr(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Zr(t){if(Array.isArray(t))return gt(t)}function gt(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$n(r.key),r)}}function xr(t,e,n){return e&&Lt(t.prototype,e),n&&Lt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ei(t,e,n){return e=$n(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $n(t){var e=ti(t,"string");return ze(e)==="symbol"?e:String(e)}function ti(t,e){if(ze(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ze(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ni=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;Xr(this,t),ei(this,"cards",void 0),this.cards=Jr(Array(52*n).keys()).map(function(r){return new Le.Card(r)}),e&&this.shuffle()}return xr(t,[{key:"shuffle",value:function(){(0,Ft.shuffle)(this.cards)}},{key:"isShuffled",value:function(){return!(0,Ft.isSorted)(this.cards,function(n,r){return n.num-r.num})}},{key:"cardsRemaining",get:function(){return this.cards.length}},{key:"pop",value:function(){return this.cards.pop()}},{key:"popN",value:function(n){for(var r=[],i,a=0;a<n&&(i=this.pop());a++)r.push(i);return r}},{key:"toString",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Le.Card.StringType.Char;return new Le.Cards(this.cards).toString(n)}}],[{key:"fromJSON",value:function(n){var r=n.cards,i=new t(!1,0);return i.cards=r.map(function(a){return Le.Card.fromJSON(a)}),i}},{key:"fromString",value:function(n){var r=new t(!1,0);return r.cards=new Le.Cards(n),r}}]),t}();tt.Deck=ni;var Ee={},nt={};Object.defineProperty(nt,"__esModule",{value:!0});nt.uuid4=void 0;var ri=function(e){var n;do n=Math.random().toString(16).slice(2,e+2);while(n.length<e&&e<=12);return n},ii=function(){var e=[8,4,4,4,12],n=e.map(ri).join("-").split("");return n[14]="4",n[19]=(Math.floor(Math.random()*64)%4+8).toString(16),n.join("")};nt.uuid4=ii;Object.defineProperty(Ee,"__esModule",{value:!0});Ee.HandRank=Ee.Hand=void 0;var Se=J,ce=ae,ai=nt;function de(t){"@babel/helpers - typeof";return de=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(t)}function ve(t){return si(t)||ui(t)||li(t)||oi()}function oi(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function li(t,e){if(t){if(typeof t=="string")return ht(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ht(t,e)}}function ui(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function si(t){if(Array.isArray(t))return ht(t)}function ht(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function fi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Rn(r.key),r)}}function ci(t,e,n){return e&&$t(t.prototype,e),n&&$t(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qe(t,e,n){return e=Rn(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rn(t){var e=di(t,"string");return de(e)==="symbol"?e:String(e)}function di(t,e){if(de(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(de(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var In=function(t){return t[t.High=0]="High",t[t.Pair=5]="Pair",t[t.TwoPairs=10]="TwoPairs",t[t.ThreeOfAKind=15]="ThreeOfAKind",t[t.Straight=20]="Straight",t[t.Flush=25]="Flush",t[t.FullHouse=30]="FullHouse",t[t.FourOfAKind=35]="FourOfAKind",t[t.StraightFlush=40]="StraightFlush",t[t.FiveOfAKind=45]="FiveOfAKind",t}({});Ee.HandRank=In;var Mn=function(){function t(e,n,r){fi(this,t),Qe(this,"uuid",void 0),Qe(this,"rank",void 0),Qe(this,"cards",void 0),this.rank=e,this.cards=n,this.uuid=r||(0,ai.uuid4)()}return ci(t,[{key:"getCardsString",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ce.Card.StringType.Short;return new ce.Cards(this.cards).toString(n)}},{key:"toString",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ce.Card.StringType.Short,i=ce.Card.StringType.LongValue,a=function(u){return n.cards[u].toString(i)},o=this.getCardsString(r);switch(this.rank){case t.Rank.FiveOfAKind:return"Five of a kind, ".concat(a(0),"s (").concat(o,")");case t.Rank.StraightFlush:return"Straigth flush, ".concat(a(0)," high (").concat(o,")");case t.Rank.FourOfAKind:return"Four of a kind, ".concat(a(0),"s (").concat(o,")");case t.Rank.FullHouse:return"Full house, ".concat(a(0),"s over ").concat(a(3),"s (").concat(o,")");case t.Rank.Flush:return"Flush, ".concat(a(0)," high (").concat(o,")");case t.Rank.Straight:return"Straigth, ".concat(a(0)," high (").concat(o,")");case t.Rank.ThreeOfAKind:return"Three of a kind, ".concat(a(0),"s (").concat(o,")");case t.Rank.TwoPairs:return"Two pairs, ".concat(a(0),"s and ").concat(a(2),"s (").concat(o,")");case t.Rank.Pair:return"Pair, ".concat(a(0),"s (").concat(o,")");case t.Rank.High:return"".concat(a(0).replace(/^\w/,function(l){return l.toUpperCase()})," high (").concat(o,")")}throw new Error("Unsupported rank value")}}],[{key:"fromJSON",value:function(n){var r=n.rank,i=n.cards,a=n.uuid;return new t(r,i.map(ce.Card.fromJSON),a)}},{key:"solve",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,i,a;return(i=t.isNumOfAKind(5,n))?a=t.Rank.FiveOfAKind:(i=t.isStraightFlush(n,r))?a=t.Rank.StraightFlush:(i=t.isNumOfAKind(4,n))?a=t.Rank.FourOfAKind:(i=t.isFullHouse(n))?a=t.Rank.FullHouse:(i=t.isFlush(n,r))?a=t.Rank.Flush:(i=t.isStraight(n,r))?a=t.Rank.Straight:(i=t.isNumOfAKind(3,n))?a=t.Rank.ThreeOfAKind:(i=t.isTwoPairs(n))?a=t.Rank.TwoPairs:(i=t.isNumOfAKind(2,n))?a=t.Rank.Pair:(i=[],a=t.Rank.High),i=t.fillWithKickers(i,n),new t(a,i)}},{key:"solveHoldEm",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(i===0)return t.solve([].concat(ve(n),ve(r)));for(var a=(0,Se.getCombinations)(n,n.length-i),o=(0,Se.getCombinations)(r,Math.min(r.length,i)),l=[],u=0;u<a.length;u++)for(var s=0;s<o.length;s++)l.push(t.solve([].concat(ve(a[u]),ve(o[s]))));return t.max.apply(t,l)}},{key:"compare",value:function(n,r){var i;if(n.cards.length!==r.cards.length)throw new Error("Comparing hands with different number of cards");if((i=r.rank-n.rank)!==0)return i;for(var a=0;a<n.cards.length;a++)if((i=ce.Card.compare(n.cards[a],r.cards[a]))!==0)return i;return 0}},{key:"winners",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=t.max.apply(t,r);return r.filter(function(o){return!t.compare(o,a)})}},{key:"max",value:function(){for(var n=function(l,u){return t.compare(l,u)<0?l:u},r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return i.reduce(function(o,l){return n(o,l)})}},{key:"fillWithKickers",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5;return r=(0,Se.arraySubtraction)(r,n).sort(ce.Card.compare),[].concat(ve(n),ve(r)).slice(0,i)}},{key:"getUniqueValues",value:function(n){return n.map(function(r){return r.value}).filter(Se.uniqueFilter).sort(function(r,i){return i-r})}},{key:"isNumOfAKind",value:function(n,r){for(var i=t.getUniqueValues(r),a,o=function(f){if(a=r.filter(function(c){return c.value==i[f]}),a.length>=n)return{v:a}},l=0;l<i.length;l++){var u=o(l);if(de(u)==="object")return u.v}return!1}},{key:"isNumOfAKindCombination",value:function(n,r){for(var i=[],a=0;a<n.length;a++){var o=t.isNumOfAKind(n[a],(0,Se.arraySubtraction)(r,i));if(o===!1)return!1;o=o,i.push.apply(i,ve(o))}return i}},{key:"isStraightFlush",value:function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,i=[],a=function(s){if(i=n.filter(function(c){return c.suit===s}),i.length<r)return"continue";var f=t.isStraight(i,r);if(f)return{v:f}},o=0;o<4;o++){var l=a(o);if(l!=="continue"&&de(l)==="object")return l.v}return!1}},{key:"isFullHouse",value:function(n){return t.isNumOfAKindCombination([3,2],n)}},{key:"isFlush",value:function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,i=function(u){var s=n.filter(function(f){return f.suit==u});if(s.length>=r)return{v:s.sort(ce.Card.compare).slice(0,r)}},a=0;a<4;a++){var o=i(a);if(de(o)==="object")return o.v}return!1}},{key:"isStraight",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,i=t.getUniqueValues(n);if(i.length<r)return!1;i.includes(13)&&i.push(0);for(var a=[i[0]],o=1;o<i.length&&a.length<r;o++)(0,Se.last)(a)-i[o]===1?a.push(i[o]):a=[i[o]];return a.length==r?a.map(function(l){return n.find(function(u){return u.value===(l||13)})}):!1}},{key:"isTwoPairs",value:function(n){return t.isNumOfAKindCombination([2,2],n)}}]),t}();Ee.Hand=Mn;Qe(Mn,"Rank",In);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Card",{enumerable:!0,get:function(){return e.Card}}),Object.defineProperty(t,"CardStringType",{enumerable:!0,get:function(){return e.CardStringType}}),Object.defineProperty(t,"Cards",{enumerable:!0,get:function(){return e.Cards}}),Object.defineProperty(t,"Deck",{enumerable:!0,get:function(){return n.Deck}}),Object.defineProperty(t,"Hand",{enumerable:!0,get:function(){return r.Hand}});var e=ae,n=tt,r=Ee})(ne);function gi(t){let e,n;return{c(){e=Ye("svg"),n=Ye("path"),b(n,"d",t[1]),b(n,"fill","CurrentColor"),b(e,"viewBox","0 0 16 20"),b(e,"class","svelte-1jimf84"),R(e,"flip",t[0])},m(r,i){E(r,e,i),C(e,n)},p(r,[i]){i&2&&b(n,"d",r[1]),i&1&&R(e,"flip",r[0])},i:q,o:q,d(r){r&&N(e)}}}function hi(t,e,n){let r,{suit:i=null}=e,{flip:a=!1}=e;const o=l=>{switch(l){case"hearts":return"M 8 2 C 9 0 11 0 12 0 C 13 0 16 1 16 6 C 16 8 15.5 10 14 12 L 8 20 L 2 12 C 0.5 10 0 8 0 6 C 0 1 3 0 4 0 C 5 0 7 0 8 2";case"spades":return"M 8 0 L 13 5 C 16 8 16 10 16 12 C 16 14 14 16 12 16 C 11 16 9 16 8 14 L 12 20 L 4 20 L 8 14 C 7 16 5 16 4 16 C 2 16 0 14 0 12 C 0 10 0 8 3 5 L 8 0";case"diamonds":return"M 8 0 L 16 10 L 8 20 L 0 10 L 8 0";case"clubs":return"M 8 0 C 10 0 12 2 12 4 C 12 6 11 8 8 10 C 9 8 10 7 12 7 C 14 7 16 9 16 12 C 16 14 14 16 12 16 C 11 16 9 16 8 14 L 12 20 L 4 20 L 8 14 C 7 16 5 16 4 16 C 2 16 0 14 0 12 C 0 9 2 7 4 7 C 6 7 7 8 8 10 C 5 8 4 6 4 4 C 4 2 6 0 8 0";default:return null}};return t.$$set=l=>{"suit"in l&&n(2,i=l.suit),"flip"in l&&n(0,a=l.flip)},t.$$.update=()=>{t.$$.dirty&4&&n(1,r=o(i))},[a,r,i]}class jn extends te{constructor(e){super(),ee(this,e,hi,gi,Z,{suit:2,flip:0})}}function Rt(t,e,n){const r=t.slice();return r[5]=e[n],r}function It(t,e,n){const r=t.slice();return r[8]=e[n],r}function Mt(t){let e,n,r;return n=new jn({props:{suit:t[0],flip:t[8].toLowerCase()==="d"}}),{c(){e=T("span"),I(n.$$.fragment),b(e,"class","svelte-1sm49dl")},m(i,a){E(i,e,a),L(n,e,null),r=!0},p(i,a){const o={};a&1&&(o.suit=i[0]),a&2&&(o.flip=i[8].toLowerCase()==="d"),n.$set(o)},i(i){r||(y(n.$$.fragment,i),r=!0)},o(i){S(n.$$.fragment,i),r=!1},d(i){i&&N(e),$(n)}}}function jt(t){let e,n,r,i,a=ie(t[5].split("")),o=[];for(let u=0;u<a.length;u+=1)o[u]=Mt(It(t,a,u));const l=u=>S(o[u],1,1,()=>{o[u]=null});return{c(){e=T("div");for(let u=0;u<o.length;u+=1)o[u].c();n=M(),b(e,"class",r="row "+t[3](t[5])+" svelte-1sm49dl")},m(u,s){E(u,e,s);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);C(e,n),i=!0},p(u,s){if(s&7){a=ie(u[5].split(""));let f;for(f=0;f<a.length;f+=1){const c=It(u,a,f);o[f]?(o[f].p(c,s),y(o[f],1)):(o[f]=Mt(c),o[f].c(),y(o[f],1),o[f].m(e,n))}for(Q(),f=a.length;f<o.length;f+=1)l(f);Y()}(!i||s&2&&r!==(r="row "+u[3](u[5])+" svelte-1sm49dl"))&&b(e,"class",r)},i(u){if(!i){for(let s=0;s<a.length;s+=1)y(o[s]);i=!0}},o(u){o=o.filter(Boolean);for(let s=0;s<o.length;s+=1)S(o[s]);i=!1},d(u){u&&N(e),Ne(o,u)}}}function mi(t){let e,n,r=ie(t[2](t[1])),i=[];for(let o=0;o<r.length;o+=1)i[o]=jt(Rt(t,r,o));const a=o=>S(i[o],1,1,()=>{i[o]=null});return{c(){e=T("div");for(let o=0;o<i.length;o+=1)i[o].c();b(e,"class","center-pattern svelte-1sm49dl")},m(o,l){E(o,e,l);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(e,null);n=!0},p(o,[l]){if(l&15){r=ie(o[2](o[1]));let u;for(u=0;u<r.length;u+=1){const s=Rt(o,r,u);i[u]?(i[u].p(s,l),y(i[u],1)):(i[u]=jt(s),i[u].c(),y(i[u],1),i[u].m(e,null))}for(Q(),u=r.length;u<i.length;u+=1)a(u);Y()}},i(o){if(!n){for(let l=0;l<r.length;l+=1)y(i[l]);n=!0}},o(o){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)S(i[l]);n=!1},d(o){o&&N(e),Ne(i,o)}}}function vi(t,e,n){let{suit:r}=e,{rank:i}=e;const a={A:["U"],2:["U","D"],3:["U","U","D"],4:["UU","DD"],5:["UU","U","DD"],6:["UU","UU","DD"],7:["UU","u","UU","DD"],8:["UU","UU","DD","DD"],9:["UU","u","UU","DD","DD"],10:["UU","u","UU","DD","d","DD"]},o=u=>a[u]??[],l=u=>u.toUpperCase()===u?"grow":"";return t.$$set=u=>{"suit"in u&&n(0,r=u.suit),"rank"in u&&n(1,i=u.rank)},[r,i,o,l]}class pi extends te{constructor(e){super(),ee(this,e,vi,mi,Z,{suit:0,rank:1})}}function bi(t){let e,n;const r=t[1].default,i=gn(r,t,t[0],null);return{c(){e=T("span"),i&&i.c(),b(e,"class","screen-reader-only svelte-3uotpv")},m(a,o){E(a,e,o),i&&i.m(e,null),n=!0},p(a,[o]){i&&i.p&&(!n||o&1)&&vn(i,r,a,a[0],n?mn(r,a[0],o,null):pn(a[0]),null)},i(a){n||(y(i,a),n=!0)},o(a){S(i,a),n=!1},d(a){a&&N(e),i&&i.d(a)}}}function yi(t,e,n){let{$$slots:r={},$$scope:i}=e;return t.$$set=a=>{"$$scope"in a&&n(0,i=a.$$scope)},[i,r]}class _i extends te{constructor(e){super(),ee(this,e,yi,bi,Z,{})}}function Ut(t,e,n){const r=t.slice();return r[16]=e[n],r}function Kt(t){let e,n;return e=new _i({props:{$$slots:{default:[wi]},$$scope:{ctx:t}}}),{c(){I(e.$$.fragment)},m(r,i){L(e,r,i),n=!0},p(r,i){const a={};i&524320&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(y(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function wi(t){let e;return{c(){e=re(t[5])},m(n,r){E(n,e,r)},p(n,r){r&32&&Be(e,n[5])},d(n){n&&N(e)}}}function zt(t){let e,n;return e=new pi({props:{suit:t[7],rank:t[8]}}),{c(){I(e.$$.fragment)},m(r,i){L(e,r,i),n=!0},p(r,i){const a={};i&128&&(a.suit=r[7]),i&256&&(a.rank=r[8]),e.$set(a)},i(r){n||(y(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function Bt(t){let e,n,r,i,a,o,l,u,s,f,c;l=new jn({props:{suit:t[7]}});let d=!t[10]&&zt(t);return{c(){e=T("div"),n=T("div"),r=re(t[8]),a=M(),o=T("div"),I(l.$$.fragment),u=M(),s=T("div"),d&&d.c(),f=M(),b(n,"class",i="rank rank-"+t[8]+" svelte-t2vtqs"),b(o,"class","suit svelte-t2vtqs"),b(e,"aria-hidden","true"),b(e,"class",t[16]+" label svelte-t2vtqs"),b(s,"class","center svelte-t2vtqs"),R(s,"face",t[6])},m(g,h){E(g,e,h),C(e,n),C(n,r),C(e,a),C(e,o),L(l,o,null),E(g,u,h),E(g,s,h),d&&d.m(s,null),C(s,f),c=!0},p(g,h){(!c||h&256)&&Be(r,g[8]),(!c||h&256&&i!==(i="rank rank-"+g[8]+" svelte-t2vtqs"))&&b(n,"class",i);const v={};h&128&&(v.suit=g[7]),l.$set(v),g[10]?d&&(Q(),S(d,1,1,()=>{d=null}),Y()):d?(d.p(g,h),h&1024&&y(d,1)):(d=zt(g),d.c(),y(d,1),d.m(s,f)),(!c||h&64)&&R(s,"face",g[6])},i(g){c||(y(l.$$.fragment,g),y(d),c=!0)},o(g){S(l.$$.fragment,g),S(d),c=!1},d(g){g&&(N(e),N(u),N(s)),$(l),d&&d.d()}}}function Si(t){let e,n,r,i,a=t[3]&&Kt(t),o=ie(t[13]),l=[];for(let s=0;s<o.length;s+=1)l[s]=Bt(Ut(t,o,s));const u=s=>S(l[s],1,1,()=>{l[s]=null});return{c(){e=T("div"),a&&a.c(),n=M();for(let s=0;s<l.length;s+=1)l[s].c();b(e,"class",r="card "+t[7]+" stack-"+t[2]+" svelte-t2vtqs"),R(e,"bridge",t[11]),R(e,"small",t[10]),R(e,"fourColor",t[9]),R(e,"empty",t[0]),R(e,"hidden",t[4]),R(e,"shadow",t[1]),R(e,"visible",t[3])},m(s,f){E(s,e,f),a&&a.m(e,null),C(e,n);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);i=!0},p(s,[f]){if(s[3]?a?(a.p(s,f),f&8&&y(a,1)):(a=Kt(s),a.c(),y(a,1),a.m(e,n)):a&&(Q(),S(a,1,1,()=>{a=null}),Y()),f&9664){o=ie(s[13]);let c;for(c=0;c<o.length;c+=1){const d=Ut(s,o,c);l[c]?(l[c].p(d,f),y(l[c],1)):(l[c]=Bt(d),l[c].c(),y(l[c],1),l[c].m(e,null))}for(Q(),c=o.length;c<l.length;c+=1)u(c);Y()}(!i||f&132&&r!==(r="card "+s[7]+" stack-"+s[2]+" svelte-t2vtqs"))&&b(e,"class",r),(!i||f&2180)&&R(e,"bridge",s[11]),(!i||f&1156)&&R(e,"small",s[10]),(!i||f&644)&&R(e,"fourColor",s[9]),(!i||f&133)&&R(e,"empty",s[0]),(!i||f&148)&&R(e,"hidden",s[4]),(!i||f&134)&&R(e,"shadow",s[1]),(!i||f&140)&&R(e,"visible",s[3])},i(s){if(!i){y(a);for(let f=0;f<o.length;f+=1)y(l[f]);i=!0}},o(s){S(a),l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)S(l[f]);i=!1},d(s){s&&N(e),a&&a.d(),Ne(l,s)}}}function ki(t,e,n){let r,i,a,o,l,u,s,f,c,d;const g=yt();ge(t,g,z=>n(15,d=z));let{card:h=null}=e,{empty:v=!1}=e,{shadow:w=!1}=e,{stack:k=void 0}=e;const U=["top","bottom"];return t.$$set=z=>{"card"in z&&n(14,h=z.card),"empty"in z&&n(0,v=z.empty),"shadow"in z&&n(1,w=z.shadow),"stack"in z&&n(2,k=z.stack)},t.$$.update=()=>{t.$$.dirty&32768&&n(11,r=d.size==="bridge"),t.$$.dirty&32768&&n(10,i=d.size==="small"),t.$$.dirty&32768&&n(9,a=d.fourColor),t.$$.dirty&16386&&n(4,o=h===null&&!w),t.$$.dirty&19&&n(3,l=!(v||o||w)),t.$$.dirty&16392&&n(8,u=l&&h.toString(ne.Card.StringType.ShortValue).replace("T","10")),t.$$.dirty&16392&&n(7,s=l&&h.toString(ne.Card.StringType.LongSuit)),t.$$.dirty&16392&&n(6,f=l&&h.num%13>9),t.$$.dirty&16392&&n(5,c=l&&h.toString(ne.Card.StringType.Long))},[v,w,k,l,o,c,f,s,u,a,i,r,g,U,h,d]}class rt extends te{constructor(e){super(),ee(this,e,ki,Si,Z,{card:14,empty:0,shadow:1,stack:2})}}function qt(t,e,n){const r=t.slice();return r[19]=e[n].card,r[20]=e[n].shadow,r[21]=e[n].transform,r}function Vt(t){let e,n;return e=new rt({props:{card:t[0],empty:t[0]===void 0}}),{c(){I(e.$$.fragment)},m(r,i){L(e,r,i),n=!0},p(r,i){const a={};i&1&&(a.card=r[0]),i&1&&(a.empty=r[0]===void 0),e.$set(a)},i(r){n||(y(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function Ht(t){let e,n,r,i;return n=new rt({props:{card:t[19],shadow:t[20]}}),{c(){e=T("div"),I(n.$$.fragment),r=M(),b(e,"class","shadow-container svelte-1ns87h6"),Tt(e,"transform",t[21])},m(a,o){E(a,e,o),L(n,e,null),C(e,r),i=!0},p(a,o){const l={};o&8&&(l.card=a[19]),o&8&&(l.shadow=a[20]),n.$set(l),(!i||o&8)&&Tt(e,"transform",a[21])},i(a){i||(y(n.$$.fragment,a),i=!0)},o(a){S(n.$$.fragment,a),i=!1},d(a){a&&N(e),$(n)}}}function Ci(t){let e,n,r,i,a,o,l=!t[1]&&Vt(t),u=ie(t[3]),s=[];for(let c=0;c<u.length;c+=1)s[c]=Ht(qt(t,u,c));const f=c=>S(s[c],1,1,()=>{s[c]=null});return{c(){e=T("div"),n=T("div"),l&&l.c(),r=M();for(let c=0;c<s.length;c+=1)s[c].c();b(n,"aria-atomic","true"),b(n,"aria-live","polite"),b(e,"aria-label",t[2]),b(e,"aria-disabled",t[1]),b(e,"class","deck svelte-1ns87h6"),b(e,"role","button"),b(e,"tabindex","0"),R(e,"bridge",t[5]),R(e,"small",t[4]),R(e,"shuffling",t[1])},m(c,d){E(c,e,d),C(e,n),l&&l.m(n,null),C(n,r);for(let g=0;g<s.length;g+=1)s[g]&&s[g].m(n,null);i=!0,a||(o=[x(e,"keydown",ct(["Space","Enter"],t[7],{preventDefault:!0})),x(e,"click",t[7])],a=!0)},p(c,[d]){if(c[1]?l&&(Q(),S(l,1,1,()=>{l=null}),Y()):l?(l.p(c,d),d&2&&y(l,1)):(l=Vt(c),l.c(),y(l,1),l.m(n,r)),d&8){u=ie(c[3]);let g;for(g=0;g<u.length;g+=1){const h=qt(c,u,g);s[g]?(s[g].p(h,d),y(s[g],1)):(s[g]=Ht(h),s[g].c(),y(s[g],1),s[g].m(n,null))}for(Q(),g=u.length;g<s.length;g+=1)f(g);Y()}(!i||d&4)&&b(e,"aria-label",c[2]),(!i||d&2)&&b(e,"aria-disabled",c[1]),(!i||d&32)&&R(e,"bridge",c[5]),(!i||d&16)&&R(e,"small",c[4]),(!i||d&2)&&R(e,"shuffling",c[1])},i(c){if(!i){y(l);for(let d=0;d<u.length;d+=1)y(s[d]);i=!0}},o(c){S(l),s=s.filter(Boolean);for(let d=0;d<s.length;d+=1)S(s[d]);i=!1},d(c){c&&N(e),l&&l.d(),Ne(s,c),a=!1,he(o)}}}function Ti(t,e,n,r){const i=t/r*e,a=.5*i/(n*52),o=1*i/(n*52);return`translate(${a}em , ${o}em)`}function Ni(t,e,n){let r,i,a,o,l,u;const s=yt();ge(t,s,j=>n(16,u=j));let{numCards:f=52}=e,{numDecks:c=1}=e,{topCard:d=null}=e,{numShadows:g=10}=e,{shuffleAnimationSteps:h=4}=e,{shuffleAnimationMaxDistanceEm:v=.8}=e,{shuffleAnimationMaxRotateDeg:w=7}=e,{onClick:k=()=>{}}=e,U=0;function z(j,V){const H=m=>[1,V+2].includes(j)?0:(Math.random()*2-1)*m,P=H(v),F=H(v),p=H(w);return`translate(${P}em, ${F}em) rotate(${p}deg)`}function K(){U>0&&setTimeout(()=>{n(15,U-=1),K()},250)}function W(){if(!o)return k()}return t.$$set=j=>{"numCards"in j&&n(8,f=j.numCards),"numDecks"in j&&n(9,c=j.numDecks),"topCard"in j&&n(0,d=j.topCard),"numShadows"in j&&n(10,g=j.numShadows),"shuffleAnimationSteps"in j&&n(11,h=j.shuffleAnimationSteps),"shuffleAnimationMaxDistanceEm"in j&&n(12,v=j.shuffleAnimationMaxDistanceEm),"shuffleAnimationMaxRotateDeg"in j&&n(13,w=j.shuffleAnimationMaxRotateDeg),"onClick"in j&&n(14,k=j.onClick)},t.$$.update=()=>{t.$$.dirty&65536&&n(5,r=(u==null?void 0:u.size)==="bridge"),t.$$.dirty&65536&&n(4,i=(u==null?void 0:u.size)==="small"),t.$$.dirty&2817&&d===null&&f===52*c&&h>0&&(n(15,U=h+2),K()),t.$$.dirty&32768&&n(1,o=U>0),t.$$.dirty&36611&&n(3,a=d===void 0?[]:o?[...Array(g)].map(()=>({card:null,shadow:!1,transform:z(U,h)})):[...Array(g)].map((j,V)=>({card:void 0,shadow:!0,transform:Ti(V,f,c,g)}))),t.$$.dirty&1&&n(2,l=d===void 0?"Shuffle the deck":"Draw a card")},[d,o,l,a,i,r,s,W,f,c,g,h,v,w,k,U,u]}class Oi extends te{constructor(e){super(),ee(this,e,Ni,Ci,Z,{numCards:8,numDecks:9,topCard:0,numShadows:10,shuffleAnimationSteps:11,shuffleAnimationMaxDistanceEm:12,shuffleAnimationMaxRotateDeg:13,onClick:14})}}function Ai(t){let e,n,r;return n=new Oi({props:{onClick:t[2],topCard:t[1],numCards:t[0]}}),{c(){e=T("main"),I(n.$$.fragment),b(e,"class","svelte-1tag1lj")},m(i,a){E(i,e,a),L(n,e,null),r=!0},p(i,[a]){const o={};a&2&&(o.topCard=i[1]),a&1&&(o.numCards=i[0]),n.$set(o)},i(i){r||(y(n.$$.fragment,i),r=!0)},o(i){S(n.$$.fragment,i),r=!1},d(i){i&&N(e),$(n)}}}function Di(t,e,n){Tn(kr);let r=new ne.Deck,i=r.cardsRemaining,a=null;function o(){a!==void 0?n(1,a=r.pop()):(r=new ne.Deck,n(1,a=null)),n(0,i=r.cardsRemaining)}const l=u=>{u.stopPropagation(),r=new ne.Deck,n(1,a=null),n(0,i=r.cardsRemaining)};return vt(()=>{Ae.update(u=>({...u,shuffle:l}))}),yn(()=>{Ae.update(u=>({...u,shuffle:void 0}))}),[i,a,o]}class Ei extends te{constructor(e){super(),ee(this,e,Di,Ai,Z,{})}}const Un=(t,e)=>Cn(e).width+(t-1)*1.125,Pi=(t,e,n)=>t.length===0?"empty":e?`closed${n==="rank"?`, ${t[0].toString(ne.CardStringType.LongValue)}s`:""}`:t.toString(ne.CardStringType.Long),Fi=(t,e,n,r,i=!1)=>{const a=Pi(new ne.Cards(e),r,i),o=n>0?` ${n} cards selected: ${new ne.Cards(e.slice(e.length-n)).toString(ne.CardStringType.Long)}`:"";return`${t}: ${a}.${o}`},Li=(t,e,n)=>{const r={sourceStack:e,cards:n};t.dataTransfer.setData("application/json",JSON.stringify(r)),t.dataTransfer.effectAllowed="move"},$i=t=>{const{sourceStack:e,cards:n}=JSON.parse(t.dataTransfer.getData("application/json"));return{sourceStack:e,cards:n.map(ne.Card.fromJSON)}};function Ri(t){let e,n;return e=new rt({props:{card:t[11]?null:t[0][0],stack:"left"}}),{c(){I(e.$$.fragment)},m(r,i){L(e,r,i),n=!0},p(r,i){const a={};i&2049&&(a.card=r[11]?null:r[0][0]),e.$set(a)},i(r){n||(y(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function Ii(t){let e,n;return e=new rt({props:{empty:!0}}),{c(){I(e.$$.fragment)},m(r,i){L(e,r,i),n=!0},p:q,i(r){n||(y(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function Wt(t){let e,n,r;return n=new Kn({props:{cards:t[0].slice(1),capacity:t[1]-1,nested:!0,closed:t[2],index:t[3],isDraggableFn:t[4],selectedCardsN:t[5]}}),{c(){e=T("div"),I(n.$$.fragment),b(e,"class","nested svelte-o50ay1")},m(i,a){E(i,e,a),L(n,e,null),r=!0},p(i,a){const o={};a&1&&(o.cards=i[0].slice(1)),a&2&&(o.capacity=i[1]-1),a&4&&(o.closed=i[2]),a&8&&(o.index=i[3]),a&16&&(o.isDraggableFn=i[4]),a&32&&(o.selectedCardsN=i[5]),n.$set(o)},i(i){r||(y(n.$$.fragment,i),r=!0)},o(i){S(n.$$.fragment,i),r=!1},d(i){i&&N(e),$(n)}}}function Mi(t){let e,n,r,i,a,o,l,u,s,f;const c=[Ii,Ri],d=[];function g(v,w){return v[0].length===0?0:1}r=g(t),i=d[r]=c[r](t);let h=t[0].length>1&&Wt(t);return{c(){e=T("div"),n=T("div"),i.c(),a=M(),h&&h.c(),b(n,"aria-hidden",o=t[6]?void 0:"true"),b(e,"aria-label",t[7]),b(e,"class","stack svelte-o50ay1"),b(e,"style",t[14]),b(e,"draggable",t[13]),b(e,"role","button"),b(e,"tabindex",l=t[6]?void 0:0),R(e,"selected",t[12])},m(v,w){E(v,e,w),C(e,n),d[r].m(n,null),C(n,a),h&&h.m(n,null),u=!0,s||(f=[x(e,"dblclick",t[19]),x(e,"dragstart",function(){ue(t[10])&&t[10].apply(this,arguments)}),x(e,"dragover",function(){ue(t[9])&&t[9].apply(this,arguments)}),x(e,"drop",t[20]),x(e,"click",function(){ue(t[8])&&t[8].apply(this,arguments)}),x(e,"keydown",function(){ue(ct(["Enter","Space"],t[8],{preventDefault:!0}))&&ct(["Enter","Space"],t[8],{preventDefault:!0}).apply(this,arguments)})],s=!0)},p(v,[w]){t=v;let k=r;r=g(t),r===k?d[r].p(t,w):(Q(),S(d[k],1,1,()=>{d[k]=null}),Y(),i=d[r],i?i.p(t,w):(i=d[r]=c[r](t),i.c()),y(i,1),i.m(n,a)),t[0].length>1?h?(h.p(t,w),w&1&&y(h,1)):(h=Wt(t),h.c(),y(h,1),h.m(n,null)):h&&(Q(),S(h,1,1,()=>{h=null}),Y()),(!u||w&64&&o!==(o=t[6]?void 0:"true"))&&b(n,"aria-hidden",o),(!u||w&128)&&b(e,"aria-label",t[7]),(!u||w&16384)&&b(e,"style",t[14]),(!u||w&8192)&&b(e,"draggable",t[13]),(!u||w&64&&l!==(l=t[6]?void 0:0))&&b(e,"tabindex",l),(!u||w&4096)&&R(e,"selected",t[12])},i(v){u||(y(i),y(h),u=!0)},o(v){S(i),S(h),u=!1},d(v){v&&N(e),d[r].d(),h&&h.d(),s=!1,he(f)}}}function ji(t,e,n){let r,i,a,o,l,u,s,f,c,d;const g=yt();ge(t,g,P=>n(18,d=P));let{cards:h=[]}=e,{capacity:v=4}=e,{closed:w=!1}=e,{index:k=0}=e,{isDraggableFn:U=()=>!1}=e,{selectedCardsN:z=0}=e,{labelOptions:K={title:"Stack"}}=e,{nested:W=!1}=e;const j=_n();function V(P){st.call(this,t,P)}function H(P){st.call(this,t,P)}return t.$$set=P=>{"cards"in P&&n(0,h=P.cards),"capacity"in P&&n(1,v=P.capacity),"closed"in P&&n(2,w=P.closed),"index"in P&&n(3,k=P.index),"isDraggableFn"in P&&n(4,U=P.isDraggableFn),"selectedCardsN"in P&&n(5,z=P.selectedCardsN),"labelOptions"in P&&n(16,K=P.labelOptions),"nested"in P&&n(6,W=P.nested)},t.$$.update=()=>{t.$$.dirty&262144&&n(17,r=d.size),t.$$.dirty&131074&&n(14,i=`width: ${Un(v,r)}em`),t.$$.dirty&21&&n(13,a=!w&&U(h)),t.$$.dirty&33&&n(12,o=z>0&&z===h.length),t.$$.dirty&5&&n(11,l=w&&h.length===1),t.$$.dirty&9&&n(10,u=P=>{P.stopPropagation(),Li(P,k,h)}),t.$$.dirty&72&&n(8,f=()=>{W||j("select",{index:k})}),t.$$.dirty&65637&&n(7,c=W?void 0:Fi(K.title,h,z,w,K.closed))},n(9,s=P=>{P.preventDefault()}),[h,v,w,k,U,z,W,c,f,s,u,l,o,a,i,g,K,r,d,V,H]}class Kn extends te{constructor(e){super(),ee(this,e,ji,Mi,Z,{cards:0,capacity:1,closed:2,index:3,isDraggableFn:4,selectedCardsN:5,labelOptions:16,nested:6})}}const zn=(t,e)=>{const n=t/e;return n<3/4?[3,5]:n<4/3?[4,4]:[5,3]},Jt=(t,e)=>{const[n,r]=zn(t,e);return{length:n*r-15}},Ui=(t,e,n,r)=>{const[i,a]=zn(e,r),o=Un(4,t)*i+(t!=="small"?.666:.333)*10,l=e*.95/o,u=Cn(t).height*a+(t!=="small"?.5:.25)*6,f=(n>600?n:r)*.95/u;return Math.min(l,f)},Gt=()=>{const t=new ne.Deck;return[...Array(13)].map(()=>t.popN(4)).concat([[],[]])},wt=t=>{const[e,...n]=t;return n.every(r=>r.value===e.value)},Ki=t=>t.length===0?!1:t.length===1?!0:wt(t),Bn=(t,e)=>t.length+e.length>4?!1:e.length===0||e[e.length-1].value===t[0].value,qn=(t,e,n,r)=>{const i=t.map(a=>[...a]);if(!Bn(r,i[n]))throw new Error(`Can not move cards ${r.map(a=>a.toString(Fn.ShortEmoji))} from pile ${e} to pile ${n}`);return i[e]=i[e].slice(0,i[e].length-r.length),i[n]=[...i[n],...r],i},St=t=>t.length===1||wt(t)?t:St(t.slice(1)),zi=(t,e)=>{if(t[e].length===0)throw new Error("Cannot move cards from an empty pile.");if(Vn(t[e]))throw new Error("Cannot move cards from a completed pile.");const n=St(t[e]),r=t.reduce((o,l,u)=>u!==e&&Bn(n,l)?[...o,u]:o,[]);if(r.length===0)throw new Error(`Cannot move cards from pile ${e} to any other pile`);const i=r.filter(o=>t[o].length>0),a=i.length>0?i[0]:r[0];return qn(t,e,a,n)},Vn=t=>t.length===4&&wt(t),Bi=t=>t.reduce((e,n,r)=>Vn(n)?[...e,r]:e,[]);/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Hn=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ze=Hn.join(","),Wn=typeof Element>"u",ye=Wn?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Xe=!Wn&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},xe=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),a=i===""||i==="true",o=a||n&&e&&t(e.parentNode);return o},qi=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},Jn=function(e,n,r){if(xe(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(Ze));return n&&ye.call(e,Ze)&&i.unshift(e),i=i.filter(r),i},Gn=function t(e,n,r){for(var i=[],a=Array.from(e);a.length;){var o=a.shift();if(!xe(o,!1))if(o.tagName==="SLOT"){var l=o.assignedElements(),u=l.length?l:o.children,s=t(u,!0,r);r.flatten?i.push.apply(i,s):i.push({scopeParent:o,candidates:s})}else{var f=ye.call(o,Ze);f&&r.filter(o)&&(n||!e.includes(o))&&i.push(o);var c=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),d=!xe(c,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(c&&d){var g=t(c===!0?o.children:c.children,!0,r);r.flatten?i.push.apply(i,g):i.push({scopeParent:o,candidates:g})}else a.unshift.apply(a,o.children)}}return i},Qn=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},pe=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||qi(e))&&!Qn(e)?0:e.tabIndex},Vi=function(e,n){var r=pe(e);return r<0&&n&&!Qn(e)?0:r},Hi=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},Yn=function(e){return e.tagName==="INPUT"},Wi=function(e){return Yn(e)&&e.type==="hidden"},Ji=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},Gi=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},Qi=function(e){if(!e.name)return!0;var n=e.form||Xe(e),r=function(l){return n.querySelectorAll('input[type="radio"][name="'+l+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var a=Gi(i,e.form);return!a||a===e},Yi=function(e){return Yn(e)&&e.type==="radio"},Zi=function(e){return Yi(e)&&!Qi(e)},Xi=function(e){var n,r=e&&Xe(e),i=(n=r)===null||n===void 0?void 0:n.host,a=!1;if(r&&r!==e){var o,l,u;for(a=!!((o=i)!==null&&o!==void 0&&(l=o.ownerDocument)!==null&&l!==void 0&&l.contains(i)||e!=null&&(u=e.ownerDocument)!==null&&u!==void 0&&u.contains(e));!a&&i;){var s,f,c;r=Xe(i),i=(s=r)===null||s===void 0?void 0:s.host,a=!!((f=i)!==null&&f!==void 0&&(c=f.ownerDocument)!==null&&c!==void 0&&c.contains(i))}}return a},Qt=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},xi=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var a=ye.call(e,"details>summary:first-of-type"),o=a?e.parentElement:e;if(ye.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var l=e;e;){var u=e.parentElement,s=Xe(e);if(u&&!u.shadowRoot&&i(u)===!0)return Qt(e);e.assignedSlot?e=e.assignedSlot:!u&&s!==e.ownerDocument?e=s.host:e=u}e=l}if(Xi(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Qt(e);return!1},ea=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return ye.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},et=function(e,n){return!(n.disabled||xe(n)||Wi(n)||xi(n,e)||Ji(n)||ea(n))},mt=function(e,n){return!(Zi(n)||pe(n)<0||!et(e,n))},ta=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},na=function t(e){var n=[],r=[];return e.forEach(function(i,a){var o=!!i.scopeParent,l=o?i.scopeParent:i,u=Vi(l,o),s=o?t(i.candidates):l;u===0?o?n.push.apply(n,s):n.push(l):r.push({documentOrder:a,tabIndex:u,item:i,isScope:o,content:s})}),r.sort(Hi).reduce(function(i,a){return a.isScope?i.push.apply(i,a.content):i.push(a.content),i},[]).concat(n)},ra=function(e,n){n=n||{};var r;return n.getShadowRoot?r=Gn([e],n.includeContainer,{filter:mt.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:ta}):r=Jn(e,n.includeContainer,mt.bind(null,n)),na(r)},ia=function(e,n){n=n||{};var r;return n.getShadowRoot?r=Gn([e],n.includeContainer,{filter:et.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=Jn(e,n.includeContainer,et.bind(null,n)),r},ke=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ye.call(e,Ze)===!1?!1:mt(n,e)},aa=Hn.concat("iframe").join(","),ut=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ye.call(e,aa)===!1?!1:et(n,e)};/*!
* focus-trap 7.5.2
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Yt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Yt(Object(n),!0).forEach(function(r){oa(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oa(t,e,n){return e=ua(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function la(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ua(t){var e=la(t,"string");return typeof e=="symbol"?e:String(e)}var Xt={activateTrap:function(e,n){if(e.length>0){var r=e[e.length-1];r!==n&&r.pause()}var i=e.indexOf(n);i===-1||e.splice(i,1),e.push(n)},deactivateTrap:function(e,n){var r=e.indexOf(n);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},sa=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},fa=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},Ie=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},ca=function(e){return Ie(e)&&!e.shiftKey},da=function(e){return Ie(e)&&e.shiftKey},xt=function(e){return setTimeout(e,0)},en=function(e,n){var r=-1;return e.every(function(i,a){return n(i)?(r=a,!1):!0}),r},$e=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},We=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},ga=[],ha=function(e,n){var r=(n==null?void 0:n.document)||document,i=(n==null?void 0:n.trapStack)||ga,a=Zt({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:ca,isKeyBackward:da},n),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},l,u=function(p,m,_){return p&&p[m]!==void 0?p[m]:a[_||m]},s=function(p,m){var _=typeof(m==null?void 0:m.composedPath)=="function"?m.composedPath():void 0;return o.containerGroups.findIndex(function(O){var D=O.container,A=O.tabbableNodes;return D.contains(p)||(_==null?void 0:_.includes(D))||A.find(function(B){return B===p})})},f=function(p){var m=a[p];if(typeof m=="function"){for(var _=arguments.length,O=new Array(_>1?_-1:0),D=1;D<_;D++)O[D-1]=arguments[D];m=m.apply(void 0,O)}if(m===!0&&(m=void 0),!m){if(m===void 0||m===!1)return m;throw new Error("`".concat(p,"` was specified but was not a node, or did not return a node"))}var A=m;if(typeof m=="string"&&(A=r.querySelector(m),!A))throw new Error("`".concat(p,"` as selector refers to no known node"));return A},c=function(){var p=f("initialFocus");if(p===!1)return!1;if(p===void 0||!ut(p,a.tabbableOptions))if(s(r.activeElement)>=0)p=r.activeElement;else{var m=o.tabbableGroups[0],_=m&&m.firstTabbableNode;p=_||f("fallbackFocus")}if(!p)throw new Error("Your focus-trap needs to have at least one focusable element");return p},d=function(){if(o.containerGroups=o.containers.map(function(p){var m=ra(p,a.tabbableOptions),_=ia(p,a.tabbableOptions),O=m.length>0?m[0]:void 0,D=m.length>0?m[m.length-1]:void 0,A=_.find(function(G){return ke(G)}),B=_.slice().reverse().find(function(G){return ke(G)}),X=!!m.find(function(G){return pe(G)>0});return{container:p,tabbableNodes:m,focusableNodes:_,posTabIndexesFound:X,firstTabbableNode:O,lastTabbableNode:D,firstDomTabbableNode:A,lastDomTabbableNode:B,nextTabbableNode:function(me){var Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,fe=m.indexOf(me);return fe<0?Pe?_.slice(_.indexOf(me)+1).find(function(Fe){return ke(Fe)}):_.slice(0,_.indexOf(me)).reverse().find(function(Fe){return ke(Fe)}):m[fe+(Pe?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function(p){return p.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!f("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function(p){return p.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},g=function F(p){if(p!==!1&&p!==r.activeElement){if(!p||!p.focus){F(c());return}p.focus({preventScroll:!!a.preventScroll}),o.mostRecentlyFocusedNode=p,sa(p)&&p.select()}},h=function(p){var m=f("setReturnFocus",p);return m||(m===!1?!1:p)},v=function(p){var m=p.target,_=p.event,O=p.isBackward,D=O===void 0?!1:O;m=m||We(_),d();var A=null;if(o.tabbableGroups.length>0){var B=s(m,_),X=B>=0?o.containerGroups[B]:void 0;if(B<0)D?A=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:A=o.tabbableGroups[0].firstTabbableNode;else if(D){var G=en(o.tabbableGroups,function(it){var at=it.firstTabbableNode;return m===at});if(G<0&&(X.container===m||ut(m,a.tabbableOptions)&&!ke(m,a.tabbableOptions)&&!X.nextTabbableNode(m,!1))&&(G=B),G>=0){var me=G===0?o.tabbableGroups.length-1:G-1,Pe=o.tabbableGroups[me];A=pe(m)>=0?Pe.lastTabbableNode:Pe.lastDomTabbableNode}else Ie(_)||(A=X.nextTabbableNode(m,!1))}else{var fe=en(o.tabbableGroups,function(it){var at=it.lastTabbableNode;return m===at});if(fe<0&&(X.container===m||ut(m,a.tabbableOptions)&&!ke(m,a.tabbableOptions)&&!X.nextTabbableNode(m))&&(fe=B),fe>=0){var Fe=fe===o.tabbableGroups.length-1?0:fe+1,kt=o.tabbableGroups[Fe];A=pe(m)>=0?kt.firstTabbableNode:kt.firstDomTabbableNode}else Ie(_)||(A=X.nextTabbableNode(m))}}else A=f("fallbackFocus");return A},w=function(p){var m=We(p);if(!(s(m,p)>=0)){if($e(a.clickOutsideDeactivates,p)){l.deactivate({returnFocus:a.returnFocusOnDeactivate});return}$e(a.allowOutsideClick,p)||p.preventDefault()}},k=function(p){var m=We(p),_=s(m,p)>=0;if(_||m instanceof Document)_&&(o.mostRecentlyFocusedNode=m);else{p.stopImmediatePropagation();var O,D=!0;if(o.mostRecentlyFocusedNode)if(pe(o.mostRecentlyFocusedNode)>0){var A=s(o.mostRecentlyFocusedNode),B=o.containerGroups[A].tabbableNodes;if(B.length>0){var X=B.findIndex(function(G){return G===o.mostRecentlyFocusedNode});X>=0&&(a.isKeyForward(o.recentNavEvent)?X+1<B.length&&(O=B[X+1],D=!1):X-1>=0&&(O=B[X-1],D=!1))}}else o.containerGroups.some(function(G){return G.tabbableNodes.some(function(me){return pe(me)>0})})||(D=!1);else D=!1;D&&(O=v({target:o.mostRecentlyFocusedNode,isBackward:a.isKeyBackward(o.recentNavEvent)})),g(O||o.mostRecentlyFocusedNode||c())}o.recentNavEvent=void 0},U=function(p){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=p;var _=v({event:p,isBackward:m});_&&(Ie(p)&&p.preventDefault(),g(_))},z=function(p){if(fa(p)&&$e(a.escapeDeactivates,p)!==!1){p.preventDefault(),l.deactivate();return}(a.isKeyForward(p)||a.isKeyBackward(p))&&U(p,a.isKeyBackward(p))},K=function(p){var m=We(p);s(m,p)>=0||$e(a.clickOutsideDeactivates,p)||$e(a.allowOutsideClick,p)||(p.preventDefault(),p.stopImmediatePropagation())},W=function(){if(o.active)return Xt.activateTrap(i,l),o.delayInitialFocusTimer=a.delayInitialFocus?xt(function(){g(c())}):g(c()),r.addEventListener("focusin",k,!0),r.addEventListener("mousedown",w,{capture:!0,passive:!1}),r.addEventListener("touchstart",w,{capture:!0,passive:!1}),r.addEventListener("click",K,{capture:!0,passive:!1}),r.addEventListener("keydown",z,{capture:!0,passive:!1}),l},j=function(){if(o.active)return r.removeEventListener("focusin",k,!0),r.removeEventListener("mousedown",w,!0),r.removeEventListener("touchstart",w,!0),r.removeEventListener("click",K,!0),r.removeEventListener("keydown",z,!0),l},V=function(p){var m=p.some(function(_){var O=Array.from(_.removedNodes);return O.some(function(D){return D===o.mostRecentlyFocusedNode})});m&&g(c())},H=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(V):void 0,P=function(){H&&(H.disconnect(),o.active&&!o.paused&&o.containers.map(function(p){H.observe(p,{subtree:!0,childList:!0})}))};return l={get active(){return o.active},get paused(){return o.paused},activate:function(p){if(o.active)return this;var m=u(p,"onActivate"),_=u(p,"onPostActivate"),O=u(p,"checkCanFocusTrap");O||d(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=r.activeElement,m==null||m();var D=function(){O&&d(),W(),P(),_==null||_()};return O?(O(o.containers.concat()).then(D,D),this):(D(),this)},deactivate:function(p){if(!o.active)return this;var m=Zt({onDeactivate:a.onDeactivate,onPostDeactivate:a.onPostDeactivate,checkCanReturnFocus:a.checkCanReturnFocus},p);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,j(),o.active=!1,o.paused=!1,P(),Xt.deactivateTrap(i,l);var _=u(m,"onDeactivate"),O=u(m,"onPostDeactivate"),D=u(m,"checkCanReturnFocus"),A=u(m,"returnFocus","returnFocusOnDeactivate");_==null||_();var B=function(){xt(function(){A&&g(h(o.nodeFocusedBeforeActivation)),O==null||O()})};return A&&D?(D(h(o.nodeFocusedBeforeActivation)).then(B,B),this):(B(),this)},pause:function(p){if(o.paused||!o.active)return this;var m=u(p,"onPause"),_=u(p,"onPostPause");return o.paused=!0,m==null||m(),j(),P(),_==null||_(),this},unpause:function(p){if(!o.paused||!o.active)return this;var m=u(p,"onUnpause"),_=u(p,"onPostUnpause");return o.paused=!1,m==null||m(),d(),W(),P(),_==null||_(),this},updateContainerElements:function(p){var m=[].concat(p).filter(Boolean);return o.containers=m.map(function(_){return typeof _=="string"?r.querySelector(_):_}),o.active&&d(),P(),this}},l.updateContainerElements(e),l};const Zn=()=>(Math.random()+1).toString(36).substring(5);function ma(t){let e,n,r,i,a,o,l,u,s,f;return{c(){e=T("div"),n=T("button"),r=Ye("svg"),i=Ye("path"),o=M(),l=T("div"),u=re(t[1]),b(i,"fill","none"),b(i,"stroke","currentColor"),b(i,"stroke-linecap","round"),b(i,"stroke-linejoin","round"),b(i,"stroke-width","1"),b(i,"d",a=t[3][t[0]].path),b(r,"viewBox","0 0 16 16"),b(r,"class","svelte-1nd3ako"),b(n,"aria-labelledby",t[4]),b(n,"class","clickable svelte-1nd3ako"),R(n,"open",open),b(l,"class","label svelte-1nd3ako"),b(l,"id",t[4]),b(e,"class","icon-button clickable svelte-1nd3ako")},m(c,d){E(c,e,d),C(e,n),C(n,r),C(r,i),C(e,o),C(e,l),C(l,u),s||(f=[x(n,"click",function(){ue(t[2])&&t[2].apply(this,arguments)}),x(e,"click",function(){ue(t[2])&&t[2].apply(this,arguments)})],s=!0)},p(c,[d]){t=c,d&1&&a!==(a=t[3][t[0]].path)&&b(i,"d",a),d&0&&R(n,"open",open),d&2&&Be(u,t[1])},i:q,o:q,d(c){c&&N(e),s=!1,he(f)}}}function va(t,e,n){const r={Close:{path:"M 3 3 L 13 13 M 3 13 L 13 3"},Help:{path:"M 8 12 L 8 12 M 8 10 L 8 9 C 8 7 10 8 10 6 A 2 2 0 1 0 6 6 M 8 1.5 A 6.5 6.5 0 0 1 8 14.5 A 6.5 6.5 0 0 1 8 1.5"},Menu:{path:"M 2 4 L 14 4 M 2 8 L 14 8 M 2 12 L 14 12"},Shuffle:{path:"M 5 2 L 2 5 L 5 8 M 2 5 L 12 5 M 11 14 L 14 11 L 11 8 M 14 11 L 4 11"},Undo:{path:"M 5 3 L 2 6 L 5 9 M 2 6 L 10 6 A 3 3 0 1 1 10 13 L 8 13"}};let{icon:i}=e,{label:a}=e,{onClick:o}=e;const l=`${Zn()}-label`;return t.$$set=u=>{"icon"in u&&n(0,i=u.icon),"label"in u&&n(1,a=u.label),"onClick"in u&&n(2,o=u.onClick)},[i,a,o,r,l]}class Ve extends te{constructor(e){super(),ee(this,e,va,ma,Z,{icon:0,label:1,onClick:2})}}function pa(t){let e,n,r,i,a,o,l,u,s,f,c;u=new Ve({props:{icon:"Close",label:"Close",onClick:t[3]}});const d=t[5].default,g=gn(d,t,t[4],null);return{c(){e=T("div"),n=M(),r=T("div"),i=T("div"),a=T("h2"),o=re(t[0]),l=M(),I(u.$$.fragment),s=M(),f=T("div"),g&&g.c(),b(e,"class","backdrop svelte-p8twni"),b(a,"id",t[2]),b(a,"class","svelte-p8twni"),b(i,"class","header svelte-p8twni"),b(f,"class","content svelte-p8twni"),b(r,"class","modal svelte-p8twni"),b(r,"role","dialog"),b(r,"aria-labelledby",t[2]),b(r,"id",t[1])},m(h,v){E(h,e,v),E(h,n,v),E(h,r,v),C(r,i),C(i,a),C(a,o),C(i,l),L(u,i,null),C(r,s),C(r,f),g&&g.m(f,null),c=!0},p(h,[v]){(!c||v&1)&&Be(o,h[0]),g&&g.p&&(!c||v&16)&&vn(g,d,h,h[4],c?mn(d,h[4],v,null):pn(h[4]),null)},i(h){c||(y(u.$$.fragment,h),y(g,h),c=!0)},o(h){S(u.$$.fragment,h),S(g,h),c=!1},d(h){h&&(N(e),N(n),N(r)),$(u),g&&g.d(h)}}}function ba(t,e,n){let{$$slots:r={},$$scope:i}=e,{title:a}=e;const o=`modal-${Zn()}`,l=`${o}-title`;vt(()=>{const f=ha(`#${o}`,{clickOutsideDeactivates:!0,onDeactivate:()=>s()});f.activate();const c=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{f.deactivate(),document.body.style.overflow=c}});const u=_n(),s=()=>{u("close")};return t.$$set=f=>{"title"in f&&n(0,a=f.title),"$$scope"in f&&n(4,i=f.$$scope)},[a,o,l,s,i,r]}class Xn extends te{constructor(e){super(),ee(this,e,ba,pa,Z,{title:0})}}function ya(t){let e,n,r,i,a,o,l,u,s,f,c;return{c(){e=T("p"),e.textContent=`The goal of the pileon solitaire is to rearrange a deck of cards into piles
    of equal ranks from thirteen random piles of four using fifteen piles.`,n=M(),r=T("h3"),r.textContent="Rules",i=M(),a=T("ul"),a.innerHTML=`<li>Each pile can contain up to four cards.</li> <li>Cards can be moved from top of the pile into a pile where the top card is
      of the same rank as the card that is moved.</li> <li>Cards of any rank can be moved into an empty pile.</li> <li>Multiple cards with the same rank can be moved at once.</li> <li>Pile is complete when it contains all four cards with the same rank.</li>`,o=M(),l=T("h3"),l.textContent="Moving cards",u=M(),s=T("ol"),s.innerHTML=`<li>Select the source pile by clicking a pile. Cards to be moved are
      highlighted. Click the source pile again to reduce the amount of selected
      cards.</li> <li>Move cards by clicking the target pile. If the move is valid, the cards
      are moved from the source pile into the target pile.</li>`,f=M(),c=T("p"),c.textContent=`If your device supports drag-and-drop, you can also drag the cards you want
    to move from the source pile into the target pile. Double-clicking the
    source pile automatically moves cards from the pile to an available target
    pile.`},m(d,g){E(d,e,g),E(d,n,g),E(d,r,g),E(d,i,g),E(d,a,g),E(d,o,g),E(d,l,g),E(d,u,g),E(d,s,g),E(d,f,g),E(d,c,g)},p:q,d(d){d&&(N(e),N(n),N(r),N(i),N(a),N(o),N(l),N(u),N(s),N(f),N(c))}}}function _a(t){let e,n;return e=new Xn({props:{title:"How to play?",$$slots:{default:[ya]},$$scope:{ctx:t}}}),e.$on("close",t[0]),{c(){I(e.$$.fragment)},m(r,i){L(e,r,i),n=!0},p(r,[i]){const a={};i&2&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(y(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function wa(t){function e(n){st.call(this,t,n)}return[e]}class Sa extends te{constructor(e){super(),ee(this,e,wa,_a,Z,{})}}function tn(t,e,n){const r=t.slice();return r[25]=e[n],r}function nn(t,e,n){const r=t.slice();return r[28]=e[n],r[30]=n,r}function rn(t){let e,n,r;return n=new Kn({props:{cards:t[28],closed:t[9].includes(t[30]),selectedCardsN:t[8]===t[30]?t[7].length:0,labelOptions:{title:`Stack ${t[30]+1}`,closed:"rank"},index:t[30],isDraggableFn:Ki}}),n.$on("drop",t[12](t[30])),n.$on("dblclick",t[13](t[30])),n.$on("select",t[11]),{c(){e=T("div"),I(n.$$.fragment),b(e,"class","pile svelte-1qdb0j4"),R(e,"small",t[3]==="small")},m(i,a){E(i,e,a),L(n,e,null),r=!0},p(i,a){const o={};a&16&&(o.cards=i[28]),a&512&&(o.closed=i[9].includes(i[30])),a&384&&(o.selectedCardsN=i[8]===i[30]?i[7].length:0),n.$set(o),(!r||a&8)&&R(e,"small",i[3]==="small")},i(i){r||(y(n.$$.fragment,i),r=!0)},o(i){S(n.$$.fragment,i),r=!1},d(i){i&&N(e),$(n)}}}function an(t){let e;return{c(){e=T("div"),b(e,"class","pile svelte-1qdb0j4")},m(n,r){E(n,e,r)},p:q,d(n){n&&N(e)}}}function on(t){let e,n;return e=new Sa({}),e.$on("close",t[20]),{c(){I(e.$$.fragment)},m(r,i){L(e,r,i),n=!0},p:q,i(r){n||(y(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function ka(t){let e,n,r,i,a,o,l,u;je(t[18]);let s=ie(t[4]),f=[];for(let v=0;v<s.length;v+=1)f[v]=rn(nn(t,s,v));const c=v=>S(f[v],1,1,()=>{f[v]=null});let d=ie(Jt(t[0],t[2])),g=[];for(let v=0;v<d.length;v+=1)g[v]=an(tn(t,d,v));let h=t[5]&&on(t);return{c(){e=T("main");for(let v=0;v<f.length;v+=1)f[v].c();n=M();for(let v=0;v<g.length;v+=1)g[v].c();i=M(),h&&h.c(),a=bn(),b(e,"class","pileon svelte-1qdb0j4"),b(e,"style",t[6]),je(()=>t[19].call(e))},m(v,w){E(v,e,w);for(let k=0;k<f.length;k+=1)f[k]&&f[k].m(e,null);C(e,n);for(let k=0;k<g.length;k+=1)g[k]&&g[k].m(e,null);r=or(e,t[19].bind(e)),E(v,i,w),h&&h.m(v,w),E(v,a,w),o=!0,l||(u=x(window,"resize",t[18]),l=!0)},p(v,[w]){if(w&15256){s=ie(v[4]);let k;for(k=0;k<s.length;k+=1){const U=nn(v,s,k);f[k]?(f[k].p(U,w),y(f[k],1)):(f[k]=rn(U),f[k].c(),y(f[k],1),f[k].m(e,n))}for(Q(),k=s.length;k<f.length;k+=1)c(k);Y()}if(w&5){d=ie(Jt(v[0],v[2]));let k;for(k=0;k<d.length;k+=1){const U=tn(v,d,k);g[k]?g[k].p(U,w):(g[k]=an(),g[k].c(),g[k].m(e,null))}for(;k<g.length;k+=1)g[k].d(1);g.length=d.length}(!o||w&64)&&b(e,"style",v[6]),v[5]?h?(h.p(v,w),w&32&&y(h,1)):(h=on(v),h.c(),y(h,1),h.m(a.parentNode,a)):h&&(Q(),S(h,1,1,()=>{h=null}),Y())},i(v){if(!o){for(let w=0;w<s.length;w+=1)y(f[w]);y(h),o=!0}},o(v){f=f.filter(Boolean);for(let w=0;w<f.length;w+=1)S(f[w]);S(h),o=!1},d(v){v&&(N(e),N(i),N(a)),Ne(f,v),Ne(g,v),r(),h&&h.d(v),l=!1,u()}}}function Ca(t,e,n){let r,i,a,o,l,u,s,f,c,d,g,h=Tn(m=>({size:m.size==="default"?"bridge":m.size,fourColor:m.colors==="four-color"}));ge(t,h,m=>n(17,f=m));let v=[Gt()],w=!1;const k=m=>{m.stopPropagation(),n(5,w=!0)},U=m=>{m.stopPropagation(),n(15,K=[void 0,[]]),n(14,v=[Gt()])},z=m=>{m.stopPropagation(),v.length>1&&(n(15,K=[void 0,[]]),n(14,v=v.slice(0,v.length-1)))};let K=[void 0,[]];const W=(m,_,O)=>{try{n(15,K=[void 0,[]]);const D=qn(v[v.length-1],m,_,O);n(14,v=[...v,D])}catch{}},j=m=>{const[_,O]=K,D=m.detail.index;i.includes(D)||(_===void 0||O.length===0?n(15,K=[D,St(r[D])]):_===D?n(15,K=[D,O.slice(1)]):_!==D&&(W(_,D,O),n(15,K=[void 0,[]])))},V=m=>_=>{_.preventDefault();const{sourceStack:O,cards:D}=$i(_);O!==m&&W(O,m,D)},H=m=>_=>{_.preventDefault();try{n(15,K=[void 0,[]]);const O=zi(v[v.length-1],m);n(14,v=[...v,O])}catch{}};vt(()=>{Ae.update(m=>({...m,help:k,shuffle:U,undo:z}))}),yn(()=>{Ae.update(m=>({...m,help:void 0,shuffle:void 0,undo:void 0}))});function P(){n(2,g=window.innerHeight)}function F(){d=this.clientHeight,c=this.clientWidth,n(1,d),n(0,c)}const p=()=>{n(5,w=!1)};return t.$$.update=()=>{if(t.$$.dirty&5){const m=c<800||g<500?"small":"bridge";Cr(_=>({size:_.size==="default"?m:_.size,fourColor:_.colors==="four-color"}))}t.$$.dirty&16384&&n(4,r=v[v.length-1]),t.$$.dirty&16&&n(9,i=Bi(r)),t.$$.dirty&32768&&n(8,a=K[0]),t.$$.dirty&32768&&n(7,o=K[1]),t.$$.dirty&131072&&n(3,l=f.size),t.$$.dirty&15&&n(16,u=Ui(l,c,d,g)),t.$$.dirty&65536&&n(6,s=`font-size: ${u}px`)},[c,d,g,l,r,w,s,o,a,i,h,j,V,H,v,K,u,f,P,F,p]}class Ta extends te{constructor(e){super(),ee(this,e,Ca,ka,Z,{})}}function Na(t){let e;return{c(){e=T("span"),e.textContent=`at ${t[0]} ${t[1]}`},m(n,r){E(n,e,r)},p:q,d(n){n&&N(e)}}}function Oa(t){let e,n,r,i=(t[1]||t[0])&&Na(t);return{c(){e=T("footer"),n=T("a"),n.textContent="kangasta / pileon",r=M(),i&&i.c(),b(n,"href","https://github.com/kangasta/pileon.git"),b(n,"target","_blank"),b(e,"class","svelte-16t3ryr")},m(a,o){E(a,e,o),C(e,n),C(e,r),i&&i.m(e,null)},p(a,[o]){(a[1]||a[0])&&i.p(a,o)},i:q,o:q,d(a){a&&N(e),i&&i.d()}}}function Aa(t){const e={}.VITE_TAG??"",n="4897cd8e4df42a6d2f25732795c040ba87546abc".slice(0,8);return[e,n]}class Da extends te{constructor(e){super(),ee(this,e,Aa,Oa,Z,{})}}function Ea(t){let e,n,r,i,a;return{c(){e=T("button"),n=re(t[0]),b(e,"aria-pressed",r=t[1]?"true":"false"),e.disabled=t[1],b(e,"class","svelte-jc3xzr"),R(e,"pressed",t[1])},m(o,l){E(o,e,l),C(e,n),i||(a=x(e,"click",function(){ue(t[2])&&t[2].apply(this,arguments)}),i=!0)},p(o,[l]){t=o,l&1&&Be(n,t[0]),l&2&&r!==(r=t[1]?"true":"false")&&b(e,"aria-pressed",r),l&2&&(e.disabled=t[1]),l&2&&R(e,"pressed",t[1])},i:q,o:q,d(o){o&&N(e),i=!1,a()}}}function Pa(t,e,n){let r,i,a;ge(t,Oe,f=>n(4,a=f));let{target:o}=e,{value:l}=e;const{update:u}=Oe,s=()=>{};return t.$$set=f=>{"target"in f&&n(3,o=f.target),"value"in f&&n(0,l=f.value)},t.$$.update=()=>{t.$$.dirty&25&&n(1,i=a[o]===l),t.$$.dirty&11&&n(2,r=i?s:()=>u(f=>({...f,[o]:l})))},[l,i,r,o,a]}class le extends te{constructor(e){super(),ee(this,e,Pa,Ea,Z,{target:3,value:0})}}function ln(t){let e,n;return e=new Ve({props:{icon:"Help",label:"Help",onClick:t[1].help}}),{c(){I(e.$$.fragment)},m(r,i){L(e,r,i),n=!0},p(r,i){const a={};i&2&&(a.onClick=r[1].help),e.$set(a)},i(r){n||(y(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function un(t){let e,n;return e=new Ve({props:{icon:"Shuffle",label:"Shuffle",onClick:t[1].shuffle}}),{c(){I(e.$$.fragment)},m(r,i){L(e,r,i),n=!0},p(r,i){const a={};i&2&&(a.onClick=r[1].shuffle),e.$set(a)},i(r){n||(y(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function sn(t){let e,n;return e=new Ve({props:{icon:"Undo",label:"Undo",onClick:t[1].undo}}),{c(){I(e.$$.fragment)},m(r,i){L(e,r,i),n=!0},p(r,i){const a={};i&2&&(a.onClick=r[1].undo),e.$set(a)},i(r){n||(y(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function fn(t){let e,n;return e=new Xn({props:{title:"Settings",$$slots:{default:[Fa]},$$scope:{ctx:t}}}),e.$on("close",t[2]("close")),{c(){I(e.$$.fragment)},m(r,i){L(e,r,i),n=!0},p(r,i){const a={};i&8&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(y(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function Fa(t){let e,n,r,i,a,o,l,u,s,f,c,d,g,h,v,w,k,U,z,K,W,j,V,H,P,F,p,m,_,O,D;return o=new le({props:{target:"game",value:"deck"}}),u=new le({props:{target:"game",value:"pileon"}}),h=new le({props:{target:"colors",value:"default"}}),w=new le({props:{target:"colors",value:"standard"}}),U=new le({props:{target:"colors",value:"four-color"}}),H=new le({props:{target:"size",value:"default"}}),F=new le({props:{target:"size",value:"bridge"}}),m=new le({props:{target:"size",value:"poker"}}),O=new le({props:{target:"size",value:"small"}}),{c(){e=T("table"),n=T("tr"),r=T("th"),r.textContent="Game:",i=M(),a=T("td"),I(o.$$.fragment),l=re(" / "),I(u.$$.fragment),s=M(),f=T("tr"),c=T("th"),c.textContent="Colors:",d=M(),g=T("td"),I(h.$$.fragment),v=re(" / "),I(w.$$.fragment),k=re(" / "),I(U.$$.fragment),z=M(),K=T("tr"),W=T("th"),W.textContent="Size:",j=M(),V=T("td"),I(H.$$.fragment),P=re(" / "),I(F.$$.fragment),p=re(" / "),I(m.$$.fragment),_=re(" / "),I(O.$$.fragment),b(r,"class","svelte-uw79fp"),b(a,"class","svelte-uw79fp"),b(c,"class","svelte-uw79fp"),b(g,"class","svelte-uw79fp"),b(W,"class","svelte-uw79fp"),b(V,"class","svelte-uw79fp"),b(e,"class","svelte-uw79fp")},m(A,B){E(A,e,B),C(e,n),C(n,r),C(n,i),C(n,a),L(o,a,null),C(a,l),L(u,a,null),C(e,s),C(e,f),C(f,c),C(f,d),C(f,g),L(h,g,null),C(g,v),L(w,g,null),C(g,k),L(U,g,null),C(e,z),C(e,K),C(K,W),C(K,j),C(K,V),L(H,V,null),C(V,P),L(F,V,null),C(V,p),L(m,V,null),C(V,_),L(O,V,null),D=!0},p:q,i(A){D||(y(o.$$.fragment,A),y(u.$$.fragment,A),y(h.$$.fragment,A),y(w.$$.fragment,A),y(U.$$.fragment,A),y(H.$$.fragment,A),y(F.$$.fragment,A),y(m.$$.fragment,A),y(O.$$.fragment,A),D=!0)},o(A){S(o.$$.fragment,A),S(u.$$.fragment,A),S(h.$$.fragment,A),S(w.$$.fragment,A),S(U.$$.fragment,A),S(H.$$.fragment,A),S(F.$$.fragment,A),S(m.$$.fragment,A),S(O.$$.fragment,A),D=!1},d(A){A&&N(e),$(o),$(u),$(h),$(w),$(U),$(H),$(F),$(m),$(O)}}}function La(t){let e,n,r,i,a,o,l,u,s=t[1].help!==void 0&&ln(t),f=t[1].shuffle!==void 0&&un(t);i=new Ve({props:{icon:"Menu",label:"Settings",onClick:t[2]("open")}});let c=t[1].undo!==void 0&&sn(t),d=t[0]&&fn(t);return{c(){e=T("div"),s&&s.c(),n=M(),f&&f.c(),r=M(),I(i.$$.fragment),a=M(),c&&c.c(),o=M(),d&&d.c(),l=bn(),b(e,"class","menu svelte-uw79fp")},m(g,h){E(g,e,h),s&&s.m(e,null),C(e,n),f&&f.m(e,null),C(e,r),L(i,e,null),C(e,a),c&&c.m(e,null),E(g,o,h),d&&d.m(g,h),E(g,l,h),u=!0},p(g,[h]){g[1].help!==void 0?s?(s.p(g,h),h&2&&y(s,1)):(s=ln(g),s.c(),y(s,1),s.m(e,n)):s&&(Q(),S(s,1,1,()=>{s=null}),Y()),g[1].shuffle!==void 0?f?(f.p(g,h),h&2&&y(f,1)):(f=un(g),f.c(),y(f,1),f.m(e,r)):f&&(Q(),S(f,1,1,()=>{f=null}),Y()),g[1].undo!==void 0?c?(c.p(g,h),h&2&&y(c,1)):(c=sn(g),c.c(),y(c,1),c.m(e,null)):c&&(Q(),S(c,1,1,()=>{c=null}),Y()),g[0]?d?(d.p(g,h),h&1&&y(d,1)):(d=fn(g),d.c(),y(d,1),d.m(l.parentNode,l)):d&&(Q(),S(d,1,1,()=>{d=null}),Y())},i(g){u||(y(s),y(f),y(i.$$.fragment,g),y(c),y(d),u=!0)},o(g){S(s),S(f),S(i.$$.fragment,g),S(c),S(d),u=!1},d(g){g&&(N(e),N(o),N(l)),s&&s.d(),f&&f.d(),$(i),c&&c.d(),d&&d.d(g)}}}function $a(t,e,n){let r;ge(t,Ae,o=>n(1,r=o));let i=!1;return[i,r,o=>l=>{n(0,i=o==="open"),l.stopPropagation()}]}class Ra extends te{constructor(e){super(),ee(this,e,$a,La,Z,{})}}function Ia(t){let e,n,r,i,a,o,l,u,s;e=new Ra({});var f=t[0];function c(d,g){return{}}return f&&(r=Nt(f,c())),o=new Da({}),{c(){I(e.$$.fragment),n=M(),r&&I(r.$$.fragment),i=M(),a=M(),I(o.$$.fragment)},m(d,g){L(e,d,g),E(d,n,g),r&&L(r,d,g),E(d,i,g),E(d,a,g),L(o,d,g),l=!0,u||(s=x(document.body,"keydown",t[1]),u=!0)},p(d,[g]){if(g&1&&f!==(f=d[0])){if(r){Q();const h=r;S(h.$$.fragment,1,0,()=>{$(h,1)}),Y()}f?(r=Nt(f,c()),I(r.$$.fragment),y(r.$$.fragment,1),L(r,i.parentNode,i)):r=null}},i(d){l||(y(e.$$.fragment,d),r&&y(r.$$.fragment,d),y(o.$$.fragment,d),l=!0)},o(d){S(e.$$.fragment,d),r&&S(r.$$.fragment,d),S(o.$$.fragment,d),l=!1},d(d){d&&(N(n),N(i),N(a)),$(e,d),r&&$(r,d),$(o,d),u=!1,s()}}}function Ma(t,e,n){let r,i,a;ge(t,Ae,l=>n(3,i=l)),ge(t,Oe,l=>n(2,a=l));const o=l=>{l.key==="z"&&(l.ctrlKey||l.metaKey)&&i.undo!==void 0&&i.undo(l)};return t.$$.update=()=>{t.$$.dirty&4&&n(0,r=a.game==="deck"?Ei:Ta)},[r,o,a]}class ja extends te{constructor(e){super(),ee(this,e,Ma,Ia,Z,{})}}new ja({target:document.body});
