var yn=Object.defineProperty;var _n=(t,e,n)=>e in t?yn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var He=(t,e,n)=>(_n(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function W(){}function wn(t,e){for(const n in e)t[n]=e[n];return t}function jt(t){return t()}function at(){return Object.create(null)}function se(t){t.forEach(jt)}function ae(t){return typeof t=="function"}function Z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Sn(t){return Object.keys(t).length===0}function zt(t,...e){if(t==null){for(const r of e)r(void 0);return W}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function kn(t){let e;return zt(t,n=>e=n)(),e}function ue(t,e,n){t.$$.on_destroy.push(zt(e,n))}function qt(t,e,n,r){if(t){const i=Bt(t,e,n,r);return t[0](i)}}function Bt(t,e,n,r){return t[1]&&r?wn(n.ctx.slice(),t[1](r(e))):n.ctx}function Vt(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const a=[],l=Math.max(e.dirty.length,i.length);for(let u=0;u<l;u+=1)a[u]=e.dirty[u]|i[u];return a}return e.dirty|i}return e.dirty}function Ht(t,e,n,r,i,a){if(i){const l=Bt(e,n,r,a);t.p(l,i)}}function Wt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function A(t,e){t.appendChild(e)}function I(t,e,n){t.insertBefore(e,n||null)}function P(t){t.parentNode&&t.parentNode.removeChild(t)}function ye(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function O(t){return document.createElement(t)}function Ie(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ne(t){return document.createTextNode(t)}function B(){return ne(" ")}function Jt(){return ne("")}function X(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function k(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Cn(t){return Array.from(t.childNodes)}function Fe(t,e){e=""+e,t.data!==e&&(t.data=e)}function lt(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}let Le;function Tn(){if(Le===void 0){Le=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Le=!0}}return Le}function Nn(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const r=O("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const i=Tn();let a;return i?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",a=X(window,"message",l=>{l.source===r.contentWindow&&e()})):(r.src="about:blank",r.onload=()=>{a=X(r.contentWindow,"resize",e),e()}),A(t,r),()=>{(i||a&&r.contentWindow)&&a(),P(r)}}function z(t,e,n){t.classList.toggle(e,!!n)}function Dn(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}function ot(t,e){return new t(e)}let De;function Te(t){De=t}function Ae(){if(!De)throw new Error("Function called outside component initialization");return De}function Xe(t){Ae().$$.on_mount.push(t)}function Gt(t){Ae().$$.on_destroy.push(t)}function Yt(){const t=Ae();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const a=Dn(e,n,{cancelable:r});return i.slice().forEach(l=>{l.call(t,a)}),!a.defaultPrevented}return!0}}function En(t,e){return Ae().$$.context.set(t,e),e}function Zt(t){return Ae().$$.context.get(t)}function Ge(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const pe=[],ut=[];let be=[];const st=[],Fn=Promise.resolve();let Ye=!1;function An(){Ye||(Ye=!0,Fn.then(Qt))}function Ee(t){be.push(t)}const We=new Set;let he=0;function Qt(){if(he!==0)return;const t=De;do{try{for(;he<pe.length;){const e=pe[he];he++,Te(e),On(e.$$)}}catch(e){throw pe.length=0,he=0,e}for(Te(null),pe.length=0,he=0;ut.length;)ut.pop()();for(let e=0;e<be.length;e+=1){const n=be[e];We.has(n)||(We.add(n),n())}be.length=0}while(pe.length);for(;st.length;)st.pop()();Ye=!1,We.clear(),Te(t)}function On(t){if(t.fragment!==null){t.update(),se(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ee)}}function Pn(t){const e=[],n=[];be.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),be=e}const Re=new Set;let de;function G(){de={r:0,c:[],p:de}}function Y(){de.r||se(de.c),de=de.p}function C(t,e){t&&t.i&&(Re.delete(t),t.i(e))}function F(t,e,n,r){if(t&&t.o){if(Re.has(t))return;Re.add(t),de.c.push(()=>{Re.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function re(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function q(t){t&&t.c()}function K(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),Ee(()=>{const a=t.$$.on_mount.map(jt).filter(ae);t.$$.on_destroy?t.$$.on_destroy.push(...a):se(a),t.$$.on_mount=[]}),i.forEach(Ee)}function j(t,e){const n=t.$$;n.fragment!==null&&(Pn(n.after_update),se(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ln(t,e){t.$$.dirty[0]===-1&&(pe.push(t),An(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ee(t,e,n,r,i,a,l,u=[-1]){const f=De;Te(t);const o=t.$$={fragment:null,ctx:[],props:a,update:W,not_equal:i,bound:at(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:at(),dirty:u,skip_bound:!1,root:e.target||f.$$.root};l&&l(o.root);let s=!1;if(o.ctx=n?n(t,e.props||{},(d,c,...h)=>{const v=h.length?h[0]:c;return o.ctx&&i(o.ctx[d],o.ctx[d]=v)&&(!o.skip_bound&&o.bound[d]&&o.bound[d](v),s&&Ln(t,d)),c}):[],o.update(),s=!0,se(o.before_update),o.fragment=r?r(o.ctx):!1,e.target){if(e.hydrate){const d=Cn(e.target);o.fragment&&o.fragment.l(d),d.forEach(P)}else o.fragment&&o.fragment.c();e.intro&&C(t.$$.fragment),K(t,e.target,e.anchor),Qt()}Te(f)}class te{constructor(){He(this,"$$");He(this,"$$set")}$destroy(){j(this,1),this.$destroy=W}$on(e,n){if(!ae(n))return W;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!Sn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Mn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Mn);const ve=[];function xe(t,e=W){let n;const r=new Set;function i(u){if(Z(t,u)&&(t=u,n)){const f=!ve.length;for(const o of r)o[1](),ve.push(o,t);if(f){for(let o=0;o<ve.length;o+=2)ve[o][0](ve[o+1]);ve.length=0}}}function a(u){i(u(t))}function l(u,f=W){const o=[u,f];return r.add(o),r.size===1&&(n=e(i,a)||W),u(t),()=>{r.delete(o),r.size===0&&n&&(n(),n=null)}}return{set:i,update:a,subscribe:l}}const Xt="settings",Rn={game:"pileon",colors:"default",size:"default"},In=JSON.parse(localStorage.getItem(Xt)),_e=xe(In??Rn);_e.subscribe(t=>localStorage.setItem(Xt,JSON.stringify(t)));const $n={},we=xe($n),Un=4.5,Kn=5,jn=3,ft=7,zn=5,xt=t=>{switch(t){case"bridge":return{height:ft,width:Un};case"poker":return{height:ft,width:Kn};case"small":return{height:zn,width:jn}}},et="card-appearance",qn={size:"bridge",fourColor:!1},Bn=({size:t,colors:e})=>({size:t==="default"?"poker":t,fourColor:e==="four-color"}),en=t=>{const e=xe(qn,n=>(_e.subscribe(r=>n(t(r))),()=>{}));return En(et,e),e},tt=()=>Zt(et),Vn=t=>{const e=Zt(et);if(e){const n=kn(_e);e.set(t(n))}},Ze=(t,e,n={})=>r=>{(Array.isArray(t)?t:[t]).includes(r.code)&&e!==void 0&&(n.preventDefault&&r.preventDefault(),e())};var le={},Oe={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CardStringType=t.CardSuits=void 0;function e(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function n(o,s){for(var d=0;d<s.length;d++){var c=s[d];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(o,c.key,c)}}function r(o,s,d){return s&&n(o.prototype,s),d&&n(o,d),o}function i(o,s,d){return s in o?Object.defineProperty(o,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[s]=d,o}var a;t.CardSuits=a,function(o){o[o.Hearts=0]="Hearts",o[o.Spades=1]="Spades",o[o.Diamonds=2]="Diamonds",o[o.Clubs=3]="Clubs"}(a||(t.CardSuits=a={}));var l;t.CardStringType=l,function(o){o.Short="SHORT",o.Long="LONG",o.ShortEmoji="SHORT_EMOJI",o.ShortSuit="SHORT_SUIT",o.LongSuit="LONG_SUIT",o.EmojiSuit="EMOJI_SUIT",o.ShortValue="SHORT_VALUE",o.LongValue="LONG_VALUE"}(l||(t.CardStringType=l={}));var u=function(){function o(s){e(this,o),i(this,"num",void 0),this.num=s}return r(o,[{key:"toString",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o.StringType.Long;switch(d){case o.StringType.Short:return this.toString(o.StringType.ShortValue)+this.toString(o.StringType.ShortSuit);case o.StringType.ShortEmoji:return this.toString(o.StringType.ShortValue)+this.toString(o.StringType.EmojiSuit);case o.StringType.Long:return this.toString(o.StringType.LongValue)+" of "+this.toString(o.StringType.LongSuit);case o.StringType.ShortSuit:return o.shortSuits[this.suit];case o.StringType.LongSuit:return o.longSuits[this.suit];case o.StringType.EmojiSuit:return o.emojiSuits[this.suit];case o.StringType.ShortValue:return o.shortValues[this.value===13?0:this.value];case o.StringType.LongValue:return o.longValues[this.value===13?0:this.value]}throw new Error("Unsupported output type")}},{key:"suit",get:function(){return o.getSuit(this.num)}},{key:"value",get:function(){return o.getValue(this.num)}}],[{key:"fromJSON",value:function(d){var c=d.num;return new o(c)}},{key:"getSuit",value:function(d){return Math.floor(d/13)%4}},{key:"getValue",value:function(d){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return d%13||c?d%13:13}},{key:"compare",value:function(d,c){return c.value-d.value}}]),o}();i(u,"Suits",a),i(u,"StringType",l),i(u,"emojiSuits",["♥","♠","♦","♣"]),i(u,"shortSuits",["h","s","d","c"]),i(u,"longSuits",["hearts","spades","diamonds","clubs"]),i(u,"shortValues",["A","2","3","4","5","6","7","8","9","T","J","Q","K"]),i(u,"longValues",["ace","two","three","four","five","six","seven","eight","nine","ten","jack","queen","king"]);var f=u;t.default=f})(Oe);var tn={},x={};Object.defineProperty(x,"__esModule",{value:!0});x.uniqueFilter=x.shuffle=x.last=x.isSorted=x.getCombinations=x.arraySubtraction=void 0;var Hn=function(e,n){return e.filter(function(r){return!n.includes(r)})};x.arraySubtraction=Hn;var Wn=function t(e,n,r,i,a){if(i.length>=n)a.push(i);else for(var l=r;l<e.length;l++)t(e,n,l+1,i.concat(e[l]),a)},Jn=function(e,n){var r=[];return Wn(e,n,0,[],r),r};x.getCombinations=Jn;var Gn=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=r?-1:1;try{return e.reduce(function(a,l){if(i*n(a,l)<=0)return l;throw new Error}),!0}catch{return!1}};x.isSorted=Gn;var Yn=function(e){return e[e.length-1]};x.last=Yn;var Zn=function(e){for(var n=e.length-1;n>0;n--){var r=Math.floor(Math.random()*(n+1)),i=[e[r],e[n]];e[n]=i[0],e[r]=i[1]}return e};x.shuffle=Zn;var Qn=function(e,n,r){return r.indexOf(e)===n};x.uniqueFilter=Qn;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=r(Oe),n=x;function r(v){return v&&v.__esModule?v:{default:v}}function i(v){return u(v)||l(v)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(v){if(Symbol.iterator in Object(v)||Object.prototype.toString.call(v)==="[object Arguments]")return Array.from(v)}function u(v){if(Array.isArray(v)){for(var p=0,N=new Array(v.length);p<v.length;p++)N[p]=v[p];return N}}function f(v,p){if(!(v instanceof p))throw new TypeError("Cannot call a class as a function")}function o(v,p){for(var N=0;N<p.length;N++){var g=p[N];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,g.key,g)}}function s(v,p,N){return p&&o(v.prototype,p),N&&o(v,N),v}function d(v,p,N){return p in v?Object.defineProperty(v,p,{value:N,enumerable:!0,configurable:!0,writable:!0}):v[p]=N,v}var c=function(){function v(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;f(this,v),d(this,"cards",void 0),this.cards=i(Array(52*N).keys()).map(function(g){return new e.default(g)}),p&&this.shuffle()}return s(v,[{key:"shuffle",value:function(){(0,n.shuffle)(this.cards)}},{key:"isShuffled",value:function(){return!(0,n.isSorted)(this.cards,function(N,g){return N.num-g.num})}},{key:"pop",value:function(){return this.cards.pop()}},{key:"popN",value:function(N){for(var g=[],D,b=0;b<N&&(D=this.pop());b++)g.push(D);return g}},{key:"cardsRemaining",get:function(){return this.cards.length}}],[{key:"fromJSON",value:function(N){var g=N.cards,D=new v(!1,0);return D.cards=g.map(function(b){return e.default.fromJSON(b)}),D}}]),v}(),h=c;t.default=h})(tn);var nn={},ze={};Object.defineProperty(ze,"__esModule",{value:!0});ze.uuid4=void 0;var Xn=function(e){var n;do n=Math.random().toString(16).slice(2,e+2);while(n.length<e&&e<=12);return n},xn=function(){var e=[8,4,4,4,12],n=e.map(Xn).join("-").split("");return n[14]="4",n[19]=(Math.floor(Math.random()*64)%4+8).toString(16),n.join("")};ze.uuid4=xn;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.HandRank=void 0;var e=i(Oe),n=ze,r=x;function i(g){return g&&g.__esModule?g:{default:g}}function a(g){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(b){return typeof b}:a=function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},a(g)}function l(g){return o(g)||f(g)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function f(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}function o(g){if(Array.isArray(g)){for(var D=0,b=new Array(g.length);D<g.length;D++)b[D]=g[D];return b}}function s(g,D){if(!(g instanceof D))throw new TypeError("Cannot call a class as a function")}function d(g,D){for(var b=0;b<D.length;b++){var S=D[b];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,S.key,S)}}function c(g,D,b){return D&&d(g.prototype,D),b&&d(g,b),g}function h(g,D,b){return D in g?Object.defineProperty(g,D,{value:b,enumerable:!0,configurable:!0,writable:!0}):g[D]=b,g}var v;t.HandRank=v,function(g){g[g.High=0]="High",g[g.Pair=5]="Pair",g[g.TwoPairs=10]="TwoPairs",g[g.ThreeOfAKind=15]="ThreeOfAKind",g[g.Straight=20]="Straight",g[g.Flush=25]="Flush",g[g.FullHouse=30]="FullHouse",g[g.FourOfAKind=35]="FourOfAKind",g[g.StraightFlush=40]="StraightFlush",g[g.FiveOfAKind=45]="FiveOfAKind"}(v||(t.HandRank=v={}));var p=function(){function g(D,b,S){s(this,g),h(this,"uuid",void 0),h(this,"rank",void 0),h(this,"cards",void 0),this.rank=D,this.cards=b,this.uuid=S||(0,n.uuid4)()}return c(g,[{key:"getCardsString",value:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.default.StringType.Short;return this.cards.map(function(S){return S.toString(b)}).join(", ")}},{key:"toString",value:function(){var b=this,S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.default.StringType.Short,T=e.default.StringType.LongValue,_=function(V){return b.cards[V].toString(T)},w=this.getCardsString(S);switch(this.rank){case g.Rank.FiveOfAKind:return"Five of a kind, ".concat(_(0),"s (").concat(w,")");case g.Rank.StraightFlush:return"Straigth flush, ".concat(_(0)," high (").concat(w,")");case g.Rank.FourOfAKind:return"Four of a kind, ".concat(_(0),"s (").concat(w,")");case g.Rank.FullHouse:return"Full house, ".concat(_(0),"s over ").concat(_(3),"s (").concat(w,")");case g.Rank.Flush:return"Flush, ".concat(_(0)," high (").concat(w,")");case g.Rank.Straight:return"Straigth, ".concat(_(0)," high (").concat(w,")");case g.Rank.ThreeOfAKind:return"Three of a kind, ".concat(_(0),"s (").concat(w,")");case g.Rank.TwoPairs:return"Two pairs, ".concat(_(0),"s and ").concat(_(2),"s (").concat(w,")");case g.Rank.Pair:return"Pair, ".concat(_(0),"s (").concat(w,")");case g.Rank.High:return"".concat(_(0).replace(/^\w/,function(U){return U.toUpperCase()})," high (").concat(w,")")}throw new Error("Unsupported rank value")}}],[{key:"fromJSON",value:function(b){var S=b.rank,T=b.cards,_=b.uuid;return new g(S,T.map(e.default.fromJSON),_)}},{key:"solve",value:function(b){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,T,_;return(T=g.isNumOfAKind(5,b))?_=g.Rank.FiveOfAKind:(T=g.isStraightFlush(b,S))?_=g.Rank.StraightFlush:(T=g.isNumOfAKind(4,b))?_=g.Rank.FourOfAKind:(T=g.isFullHouse(b))?_=g.Rank.FullHouse:(T=g.isFlush(b,S))?_=g.Rank.Flush:(T=g.isStraight(b,S))?_=g.Rank.Straight:(T=g.isNumOfAKind(3,b))?_=g.Rank.ThreeOfAKind:(T=g.isTwoPairs(b))?_=g.Rank.TwoPairs:(T=g.isNumOfAKind(2,b))?_=g.Rank.Pair:(T=[],_=g.Rank.High),T=g.fillWithKickers(T,b),new g(_,T)}},{key:"solveHoldEm",value:function(b,S){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(T===0)return g.solve([].concat(l(b),l(S)));for(var _=(0,r.getCombinations)(b,b.length-T),w=(0,r.getCombinations)(S,Math.min(S.length,T)),U=[],V=0;V<_.length;V++)for(var $=0;$<w.length;$++)U.push(g.solve([].concat(l(_[V]),l(w[$]))));return g.max.apply(g,U)}},{key:"compare",value:function(b,S){var T;if(b.cards.length!==S.cards.length)throw new Error("Comparing hands with different number of cards");if((T=S.rank-b.rank)!==0)return T;for(var _=0;_<b.cards.length;_++)if((T=e.default.compare(b.cards[_],S.cards[_]))!==0)return T;return 0}},{key:"winners",value:function(){for(var b=arguments.length,S=new Array(b),T=0;T<b;T++)S[T]=arguments[T];var _=g.max.apply(g,S);return S.filter(function(w){return!g.compare(w,_)})}},{key:"max",value:function(){for(var b=function(U,V){return g.compare(U,V)<0?U:V},S=arguments.length,T=new Array(S),_=0;_<S;_++)T[_]=arguments[_];return T.reduce(function(w,U){return b(w,U)})}},{key:"fillWithKickers",value:function(b,S){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5;return S=(0,r.arraySubtraction)(S,b).sort(e.default.compare),[].concat(l(b),l(S)).slice(0,T)}},{key:"getUniqueValues",value:function(b){return b.map(function(S){return S.value}).filter(r.uniqueFilter).sort(function(S,T){return T-S})}},{key:"isNumOfAKind",value:function(b,S){for(var T=g.getUniqueValues(S),_,w=function(y){if(_=S.filter(function(m){return m.value==T[y]}),_.length>=b)return{v:_}},U=0;U<T.length;U++){var V=w(U);if(a(V)==="object")return V.v}return!1}},{key:"isNumOfAKindCombination",value:function(b,S){for(var T=[],_=0;_<b.length;_++){var w=g.isNumOfAKind(b[_],(0,r.arraySubtraction)(S,T));if(w===!1)return!1;w=w,T.push.apply(T,l(w))}return T}},{key:"isStraightFlush",value:function(b){for(var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,T=[],_=function($){if(T=b.filter(function(m){return m.suit===$}),T.length<S)return"continue";var y=g.isStraight(T,S);if(y)return{v:y}},w=0;w<4;w++){var U=_(w);switch(U){case"continue":continue;default:if(a(U)==="object")return U.v}}return!1}},{key:"isFullHouse",value:function(b){return g.isNumOfAKindCombination([3,2],b)}},{key:"isFlush",value:function(b){for(var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,T=function(V){var $=b.filter(function(y){return y.suit==V});if($.length>=S)return{v:$.sort(e.default.compare).slice(0,S)}},_=0;_<4;_++){var w=T(_);if(a(w)==="object")return w.v}return!1}},{key:"isStraight",value:function(b){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,T=g.getUniqueValues(b);if(T.length<S)return!1;T.includes(13)&&T.push(0);for(var _=[T[0]],w=1;w<T.length&&_.length<S;w++)(0,r.last)(_)-T[w]===1?_.push(T[w]):_=[T[w]];return _.length==S?_.map(function(U){return b.find(function(V){return V.value===(U||13)})}):!1}},{key:"isTwoPairs",value:function(b){return g.isNumOfAKindCombination([2,2],b)}}]),g}();h(p,"Rank",v);var N=p;t.default=N})(nn);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Card",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"Deck",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"Hand",{enumerable:!0,get:function(){return r.default}});var e=i(Oe),n=i(tn),r=i(nn);function i(a){return a&&a.__esModule?a:{default:a}}})(le);function er(t){let e,n;return{c(){e=Ie("svg"),n=Ie("path"),k(n,"d",t[1]),k(n,"fill","CurrentColor"),k(e,"viewBox","0 0 16 20"),k(e,"class","svelte-1jimf84"),z(e,"flip",t[0])},m(r,i){I(r,e,i),A(e,n)},p(r,[i]){i&2&&k(n,"d",r[1]),i&1&&z(e,"flip",r[0])},i:W,o:W,d(r){r&&P(e)}}}function tr(t,e,n){let r,{suit:i=null}=e,{flip:a=!1}=e;const l=u=>{switch(u){case"hearts":return"M 8 2 C 9 0 11 0 12 0 C 13 0 16 1 16 6 C 16 8 15.5 10 14 12 L 8 20 L 2 12 C 0.5 10 0 8 0 6 C 0 1 3 0 4 0 C 5 0 7 0 8 2";case"spades":return"M 8 0 L 13 5 C 16 8 16 10 16 12 C 16 14 14 16 12 16 C 11 16 9 16 8 14 L 12 20 L 4 20 L 8 14 C 7 16 5 16 4 16 C 2 16 0 14 0 12 C 0 10 0 8 3 5 L 8 0";case"diamonds":return"M 8 0 L 16 10 L 8 20 L 0 10 L 8 0";case"clubs":return"M 8 0 C 10 0 12 2 12 4 C 12 6 11 8 8 10 C 9 8 10 7 12 7 C 14 7 16 9 16 12 C 16 14 14 16 12 16 C 11 16 9 16 8 14 L 12 20 L 4 20 L 8 14 C 7 16 5 16 4 16 C 2 16 0 14 0 12 C 0 9 2 7 4 7 C 6 7 7 8 8 10 C 5 8 4 6 4 4 C 4 2 6 0 8 0";default:return null}};return t.$$set=u=>{"suit"in u&&n(2,i=u.suit),"flip"in u&&n(0,a=u.flip)},t.$$.update=()=>{t.$$.dirty&4&&n(1,r=l(i))},[a,r,i]}class rn extends te{constructor(e){super(),ee(this,e,tr,er,Z,{suit:2,flip:0})}}function ct(t,e,n){const r=t.slice();return r[5]=e[n],r}function dt(t,e,n){const r=t.slice();return r[8]=e[n],r}function gt(t){let e,n,r;return n=new rn({props:{suit:t[0],flip:t[8].toLowerCase()==="d"}}),{c(){e=O("span"),q(n.$$.fragment),k(e,"class","svelte-1sm49dl")},m(i,a){I(i,e,a),K(n,e,null),r=!0},p(i,a){const l={};a&1&&(l.suit=i[0]),a&2&&(l.flip=i[8].toLowerCase()==="d"),n.$set(l)},i(i){r||(C(n.$$.fragment,i),r=!0)},o(i){F(n.$$.fragment,i),r=!1},d(i){i&&P(e),j(n)}}}function ht(t){let e,n,r,i,a=re(t[5].split("")),l=[];for(let f=0;f<a.length;f+=1)l[f]=gt(dt(t,a,f));const u=f=>F(l[f],1,1,()=>{l[f]=null});return{c(){e=O("div");for(let f=0;f<l.length;f+=1)l[f].c();n=B(),k(e,"class",r="row "+t[3](t[5])+" svelte-1sm49dl")},m(f,o){I(f,e,o);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null);A(e,n),i=!0},p(f,o){if(o&7){a=re(f[5].split(""));let s;for(s=0;s<a.length;s+=1){const d=dt(f,a,s);l[s]?(l[s].p(d,o),C(l[s],1)):(l[s]=gt(d),l[s].c(),C(l[s],1),l[s].m(e,n))}for(G(),s=a.length;s<l.length;s+=1)u(s);Y()}(!i||o&2&&r!==(r="row "+f[3](f[5])+" svelte-1sm49dl"))&&k(e,"class",r)},i(f){if(!i){for(let o=0;o<a.length;o+=1)C(l[o]);i=!0}},o(f){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)F(l[o]);i=!1},d(f){f&&P(e),ye(l,f)}}}function nr(t){let e,n,r=re(t[2](t[1])),i=[];for(let l=0;l<r.length;l+=1)i[l]=ht(ct(t,r,l));const a=l=>F(i[l],1,1,()=>{i[l]=null});return{c(){e=O("div");for(let l=0;l<i.length;l+=1)i[l].c();k(e,"class","center-pattern svelte-1sm49dl")},m(l,u){I(l,e,u);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(e,null);n=!0},p(l,[u]){if(u&15){r=re(l[2](l[1]));let f;for(f=0;f<r.length;f+=1){const o=ct(l,r,f);i[f]?(i[f].p(o,u),C(i[f],1)):(i[f]=ht(o),i[f].c(),C(i[f],1),i[f].m(e,null))}for(G(),f=r.length;f<i.length;f+=1)a(f);Y()}},i(l){if(!n){for(let u=0;u<r.length;u+=1)C(i[u]);n=!0}},o(l){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)F(i[u]);n=!1},d(l){l&&P(e),ye(i,l)}}}function rr(t,e,n){let{suit:r}=e,{rank:i}=e;const a={A:["U"],2:["U","D"],3:["U","U","D"],4:["UU","DD"],5:["UU","U","DD"],6:["UU","UU","DD"],7:["UU","u","UU","DD"],8:["UU","UU","DD","DD"],9:["UU","u","UU","DD","DD"],10:["UU","u","UU","DD","d","DD"]},l=f=>a[f]??[],u=f=>f.toUpperCase()===f?"grow":"";return t.$$set=f=>{"suit"in f&&n(0,r=f.suit),"rank"in f&&n(1,i=f.rank)},[r,i,l,u]}class ir extends te{constructor(e){super(),ee(this,e,rr,nr,Z,{suit:0,rank:1})}}function ar(t){let e,n;const r=t[1].default,i=qt(r,t,t[0],null);return{c(){e=O("span"),i&&i.c(),k(e,"class","screen-reader-only svelte-3uotpv")},m(a,l){I(a,e,l),i&&i.m(e,null),n=!0},p(a,[l]){i&&i.p&&(!n||l&1)&&Ht(i,r,a,a[0],n?Vt(r,a[0],l,null):Wt(a[0]),null)},i(a){n||(C(i,a),n=!0)},o(a){F(i,a),n=!1},d(a){a&&P(e),i&&i.d(a)}}}function lr(t,e,n){let{$$slots:r={},$$scope:i}=e;return t.$$set=a=>{"$$scope"in a&&n(0,i=a.$$scope)},[i,r]}class or extends te{constructor(e){super(),ee(this,e,lr,ar,Z,{})}}function vt(t,e,n){const r=t.slice();return r[16]=e[n],r}function mt(t){let e,n;return e=new or({props:{$$slots:{default:[ur]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(r,i){K(e,r,i),n=!0},p(r,i){const a={};i&524320&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function ur(t){let e;return{c(){e=ne(t[5])},m(n,r){I(n,e,r)},p(n,r){r&32&&Fe(e,n[5])},d(n){n&&P(e)}}}function pt(t){let e,n;return e=new ir({props:{suit:t[7],rank:t[8]}}),{c(){q(e.$$.fragment)},m(r,i){K(e,r,i),n=!0},p(r,i){const a={};i&128&&(a.suit=r[7]),i&256&&(a.rank=r[8]),e.$set(a)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function bt(t){let e,n,r,i,a,l,u,f,o,s,d;u=new rn({props:{suit:t[7]}});let c=!t[10]&&pt(t);return{c(){e=O("div"),n=O("div"),r=ne(t[8]),a=B(),l=O("div"),q(u.$$.fragment),f=B(),o=O("div"),c&&c.c(),s=B(),k(n,"class",i="rank rank-"+t[8]+" svelte-t2vtqs"),k(l,"class","suit svelte-t2vtqs"),k(e,"aria-hidden","true"),k(e,"class",t[16]+" label svelte-t2vtqs"),k(o,"class","center svelte-t2vtqs"),z(o,"face",t[6])},m(h,v){I(h,e,v),A(e,n),A(n,r),A(e,a),A(e,l),K(u,l,null),I(h,f,v),I(h,o,v),c&&c.m(o,null),A(o,s),d=!0},p(h,v){(!d||v&256)&&Fe(r,h[8]),(!d||v&256&&i!==(i="rank rank-"+h[8]+" svelte-t2vtqs"))&&k(n,"class",i);const p={};v&128&&(p.suit=h[7]),u.$set(p),h[10]?c&&(G(),F(c,1,1,()=>{c=null}),Y()):c?(c.p(h,v),v&1024&&C(c,1)):(c=pt(h),c.c(),C(c,1),c.m(o,s)),(!d||v&64)&&z(o,"face",h[6])},i(h){d||(C(u.$$.fragment,h),C(c),d=!0)},o(h){F(u.$$.fragment,h),F(c),d=!1},d(h){h&&(P(e),P(f),P(o)),j(u),c&&c.d()}}}function sr(t){let e,n,r,i,a=t[3]&&mt(t),l=re(t[13]),u=[];for(let o=0;o<l.length;o+=1)u[o]=bt(vt(t,l,o));const f=o=>F(u[o],1,1,()=>{u[o]=null});return{c(){e=O("div"),a&&a.c(),n=B();for(let o=0;o<u.length;o+=1)u[o].c();k(e,"class",r="card "+t[7]+" stack-"+t[2]+" svelte-t2vtqs"),z(e,"bridge",t[11]),z(e,"small",t[10]),z(e,"fourColor",t[9]),z(e,"empty",t[0]),z(e,"hidden",t[4]),z(e,"shadow",t[1]),z(e,"visible",t[3])},m(o,s){I(o,e,s),a&&a.m(e,null),A(e,n);for(let d=0;d<u.length;d+=1)u[d]&&u[d].m(e,null);i=!0},p(o,[s]){if(o[3]?a?(a.p(o,s),s&8&&C(a,1)):(a=mt(o),a.c(),C(a,1),a.m(e,n)):a&&(G(),F(a,1,1,()=>{a=null}),Y()),s&9664){l=re(o[13]);let d;for(d=0;d<l.length;d+=1){const c=vt(o,l,d);u[d]?(u[d].p(c,s),C(u[d],1)):(u[d]=bt(c),u[d].c(),C(u[d],1),u[d].m(e,null))}for(G(),d=l.length;d<u.length;d+=1)f(d);Y()}(!i||s&132&&r!==(r="card "+o[7]+" stack-"+o[2]+" svelte-t2vtqs"))&&k(e,"class",r),(!i||s&2180)&&z(e,"bridge",o[11]),(!i||s&1156)&&z(e,"small",o[10]),(!i||s&644)&&z(e,"fourColor",o[9]),(!i||s&133)&&z(e,"empty",o[0]),(!i||s&148)&&z(e,"hidden",o[4]),(!i||s&134)&&z(e,"shadow",o[1]),(!i||s&140)&&z(e,"visible",o[3])},i(o){if(!i){C(a);for(let s=0;s<l.length;s+=1)C(u[s]);i=!0}},o(o){F(a),u=u.filter(Boolean);for(let s=0;s<u.length;s+=1)F(u[s]);i=!1},d(o){o&&P(e),a&&a.d(),ye(u,o)}}}function fr(t,e,n){let r,i,a,l,u,f,o,s,d,c;const h=tt();ue(t,h,b=>n(15,c=b));let{card:v=null}=e,{empty:p=!1}=e,{shadow:N=!1}=e,{stack:g=void 0}=e;const D=["top","bottom"];return t.$$set=b=>{"card"in b&&n(14,v=b.card),"empty"in b&&n(0,p=b.empty),"shadow"in b&&n(1,N=b.shadow),"stack"in b&&n(2,g=b.stack)},t.$$.update=()=>{t.$$.dirty&32768&&n(11,r=c.size==="bridge"),t.$$.dirty&32768&&n(10,i=c.size==="small"),t.$$.dirty&32768&&n(9,a=c.fourColor),t.$$.dirty&16386&&n(4,l=v===null&&!N),t.$$.dirty&19&&n(3,u=!(p||l||N)),t.$$.dirty&16392&&n(8,f=u&&v.toString(le.Card.StringType.ShortValue).replace("T","10")),t.$$.dirty&16392&&n(7,o=u&&v.toString(le.Card.StringType.LongSuit)),t.$$.dirty&16392&&n(6,s=u&&v.num%13>9),t.$$.dirty&16392&&n(5,d=u&&v.toString(le.Card.StringType.Long))},[p,N,g,u,l,d,s,o,f,a,i,r,h,D,v,c]}class qe extends te{constructor(e){super(),ee(this,e,fr,sr,Z,{card:14,empty:0,shadow:1,stack:2})}}function yt(t,e,n){const r=t.slice();return r[19]=e[n].card,r[20]=e[n].shadow,r[21]=e[n].transform,r}function _t(t){let e,n;return e=new qe({props:{card:t[0],empty:t[0]===void 0}}),{c(){q(e.$$.fragment)},m(r,i){K(e,r,i),n=!0},p(r,i){const a={};i&1&&(a.card=r[0]),i&1&&(a.empty=r[0]===void 0),e.$set(a)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function wt(t){let e,n,r,i;return n=new qe({props:{card:t[19],shadow:t[20]}}),{c(){e=O("div"),q(n.$$.fragment),r=B(),k(e,"class","shadow-container svelte-1ns87h6"),lt(e,"transform",t[21])},m(a,l){I(a,e,l),K(n,e,null),A(e,r),i=!0},p(a,l){const u={};l&8&&(u.card=a[19]),l&8&&(u.shadow=a[20]),n.$set(u),(!i||l&8)&&lt(e,"transform",a[21])},i(a){i||(C(n.$$.fragment,a),i=!0)},o(a){F(n.$$.fragment,a),i=!1},d(a){a&&P(e),j(n)}}}function cr(t){let e,n,r,i,a,l,u=!t[1]&&_t(t),f=re(t[3]),o=[];for(let d=0;d<f.length;d+=1)o[d]=wt(yt(t,f,d));const s=d=>F(o[d],1,1,()=>{o[d]=null});return{c(){e=O("div"),n=O("div"),u&&u.c(),r=B();for(let d=0;d<o.length;d+=1)o[d].c();k(n,"aria-atomic","true"),k(n,"aria-live","polite"),k(e,"aria-label",t[2]),k(e,"aria-disabled",t[1]),k(e,"class","deck svelte-1ns87h6"),k(e,"role","button"),k(e,"tabindex","0"),z(e,"bridge",t[5]),z(e,"small",t[4]),z(e,"shuffling",t[1])},m(d,c){I(d,e,c),A(e,n),u&&u.m(n,null),A(n,r);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(n,null);i=!0,a||(l=[X(e,"keydown",Ze(["Space","Enter"],t[7],{preventDefault:!0})),X(e,"click",t[7])],a=!0)},p(d,[c]){if(d[1]?u&&(G(),F(u,1,1,()=>{u=null}),Y()):u?(u.p(d,c),c&2&&C(u,1)):(u=_t(d),u.c(),C(u,1),u.m(n,r)),c&8){f=re(d[3]);let h;for(h=0;h<f.length;h+=1){const v=yt(d,f,h);o[h]?(o[h].p(v,c),C(o[h],1)):(o[h]=wt(v),o[h].c(),C(o[h],1),o[h].m(n,null))}for(G(),h=f.length;h<o.length;h+=1)s(h);Y()}(!i||c&4)&&k(e,"aria-label",d[2]),(!i||c&2)&&k(e,"aria-disabled",d[1]),(!i||c&32)&&z(e,"bridge",d[5]),(!i||c&16)&&z(e,"small",d[4]),(!i||c&2)&&z(e,"shuffling",d[1])},i(d){if(!i){C(u);for(let c=0;c<f.length;c+=1)C(o[c]);i=!0}},o(d){F(u),o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)F(o[c]);i=!1},d(d){d&&P(e),u&&u.d(),ye(o,d),a=!1,se(l)}}}function dr(t,e,n,r){const i=t/r*e,a=.5*i/(n*52),l=1*i/(n*52);return`translate(${a}em , ${l}em)`}function gr(t,e,n){let r,i,a,l,u,f;const o=tt();ue(t,o,_=>n(16,f=_));let{numCards:s=52}=e,{numDecks:d=1}=e,{topCard:c=null}=e,{numShadows:h=10}=e,{shuffleAnimationSteps:v=4}=e,{shuffleAnimationMaxDistanceEm:p=.8}=e,{shuffleAnimationMaxRotateDeg:N=7}=e,{onClick:g=()=>{}}=e,D=0;function b(_,w){const U=m=>[1,w+2].includes(_)?0:(Math.random()*2-1)*m,V=U(p),$=U(p),y=U(N);return`translate(${V}em, ${$}em) rotate(${y}deg)`}function S(){D>0&&setTimeout(()=>{n(15,D-=1),S()},250)}function T(){if(!l)return g()}return t.$$set=_=>{"numCards"in _&&n(8,s=_.numCards),"numDecks"in _&&n(9,d=_.numDecks),"topCard"in _&&n(0,c=_.topCard),"numShadows"in _&&n(10,h=_.numShadows),"shuffleAnimationSteps"in _&&n(11,v=_.shuffleAnimationSteps),"shuffleAnimationMaxDistanceEm"in _&&n(12,p=_.shuffleAnimationMaxDistanceEm),"shuffleAnimationMaxRotateDeg"in _&&n(13,N=_.shuffleAnimationMaxRotateDeg),"onClick"in _&&n(14,g=_.onClick)},t.$$.update=()=>{t.$$.dirty&65536&&n(5,r=(f==null?void 0:f.size)==="bridge"),t.$$.dirty&65536&&n(4,i=(f==null?void 0:f.size)==="small"),t.$$.dirty&2817&&c===null&&s===52*d&&v>0&&(n(15,D=v+2),S()),t.$$.dirty&32768&&n(1,l=D>0),t.$$.dirty&36611&&n(3,a=c===void 0?[]:l?[...Array(h)].map((_,w)=>({card:null,shadow:!1,transform:b(D,v)})):[...Array(h)].map((_,w)=>({card:void 0,shadow:!0,transform:dr(w,s,d,h)}))),t.$$.dirty&1&&n(2,u=c===void 0?"Shuffle the deck":"Draw a card")},[c,l,u,a,i,r,o,T,s,d,h,v,p,N,g,D,f]}class hr extends te{constructor(e){super(),ee(this,e,gr,cr,Z,{numCards:8,numDecks:9,topCard:0,numShadows:10,shuffleAnimationSteps:11,shuffleAnimationMaxDistanceEm:12,shuffleAnimationMaxRotateDeg:13,onClick:14})}}function vr(t){let e,n,r;return n=new hr({props:{onClick:t[2],topCard:t[1],numCards:t[0]}}),{c(){e=O("main"),q(n.$$.fragment),k(e,"class","svelte-1tag1lj")},m(i,a){I(i,e,a),K(n,e,null),r=!0},p(i,[a]){const l={};a&2&&(l.topCard=i[1]),a&1&&(l.numCards=i[0]),n.$set(l)},i(i){r||(C(n.$$.fragment,i),r=!0)},o(i){F(n.$$.fragment,i),r=!1},d(i){i&&P(e),j(n)}}}function mr(t,e,n){en(Bn);let r=new le.Deck,i=r.cardsRemaining,a=null;function l(){a!==void 0?n(1,a=r.pop()):(r=new le.Deck,n(1,a=null)),n(0,i=r.cardsRemaining)}const u=f=>{f.stopPropagation(),r=new le.Deck,n(1,a=null),n(0,i=r.cardsRemaining)};return Xe(()=>{we.update(f=>({...f,shuffle:u}))}),Gt(()=>{we.update(f=>({...f,shuffle:void 0}))}),[i,a,l]}class pr extends te{constructor(e){super(),ee(this,e,mr,vr,Z,{})}}const an=(t,e)=>xt(e).width+(t-1)*1.125,br=(t,e,n)=>{const r={sourceStack:e,cards:n};t.dataTransfer.setData("application/json",JSON.stringify(r)),t.dataTransfer.effectAllowed="move"},yr=t=>{const{sourceStack:e,cards:n}=JSON.parse(t.dataTransfer.getData("application/json"));return{sourceStack:e,cards:n.map(le.Card.fromJSON)}};function _r(t){let e,n;return e=new qe({props:{card:t[10]?null:t[0][0],stack:"left"}}),{c(){q(e.$$.fragment)},m(r,i){K(e,r,i),n=!0},p(r,i){const a={};i&1025&&(a.card=r[10]?null:r[0][0]),e.$set(a)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function wr(t){let e,n;return e=new qe({props:{empty:!0}}),{c(){q(e.$$.fragment)},m(r,i){K(e,r,i),n=!0},p:W,i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function St(t){let e,n,r;return n=new ln({props:{cards:t[0].slice(1),capacity:t[1]-1,nested:!0,closed:t[2],index:t[3],isDraggableFn:t[4],selectedCardsN:t[5]}}),{c(){e=O("div"),q(n.$$.fragment),k(e,"class","nested svelte-o50ay1")},m(i,a){I(i,e,a),K(n,e,null),r=!0},p(i,a){const l={};a&1&&(l.cards=i[0].slice(1)),a&2&&(l.capacity=i[1]-1),a&4&&(l.closed=i[2]),a&8&&(l.index=i[3]),a&16&&(l.isDraggableFn=i[4]),a&32&&(l.selectedCardsN=i[5]),n.$set(l)},i(i){r||(C(n.$$.fragment,i),r=!0)},o(i){F(n.$$.fragment,i),r=!1},d(i){i&&P(e),j(n)}}}function Sr(t){let e,n,r,i,a,l,u,f;const o=[wr,_r],s=[];function d(h,v){return h[0].length===0?0:1}n=d(t),r=s[n]=o[n](t);let c=t[0].length>1&&St(t);return{c(){e=O("div"),r.c(),i=B(),c&&c.c(),k(e,"class","stack svelte-o50ay1"),k(e,"style",t[13]),k(e,"draggable",t[12]),k(e,"tabindex",a=t[6]?void 0:0),z(e,"selected",t[11])},m(h,v){I(h,e,v),s[n].m(e,null),A(e,i),c&&c.m(e,null),l=!0,u||(f=[X(e,"dblclick",t[17]),X(e,"dragstart",function(){ae(t[9])&&t[9].apply(this,arguments)}),X(e,"dragover",function(){ae(t[8])&&t[8].apply(this,arguments)}),X(e,"drop",t[18]),X(e,"click",function(){ae(t[7])&&t[7].apply(this,arguments)}),X(e,"keydown",function(){ae(Ze(["Enter","Space"],t[7],{preventDefault:!0}))&&Ze(["Enter","Space"],t[7],{preventDefault:!0}).apply(this,arguments)})],u=!0)},p(h,[v]){t=h;let p=n;n=d(t),n===p?s[n].p(t,v):(G(),F(s[p],1,1,()=>{s[p]=null}),Y(),r=s[n],r?r.p(t,v):(r=s[n]=o[n](t),r.c()),C(r,1),r.m(e,i)),t[0].length>1?c?(c.p(t,v),v&1&&C(c,1)):(c=St(t),c.c(),C(c,1),c.m(e,null)):c&&(G(),F(c,1,1,()=>{c=null}),Y()),(!l||v&8192)&&k(e,"style",t[13]),(!l||v&4096)&&k(e,"draggable",t[12]),(!l||v&64&&a!==(a=t[6]?void 0:0))&&k(e,"tabindex",a),(!l||v&2048)&&z(e,"selected",t[11])},i(h){l||(C(r),C(c),l=!0)},o(h){F(r),F(c),l=!1},d(h){h&&P(e),s[n].d(),c&&c.d(),u=!1,se(f)}}}function kr(t,e,n){let r,i,a,l,u,f,o,s,d;const c=tt();ue(t,c,w=>n(16,d=w));let{cards:h=[]}=e,{capacity:v=4}=e,{closed:p=!1}=e,{index:N=0}=e,{isDraggableFn:g=()=>!1}=e,{selectedCardsN:D=0}=e,{nested:b=!1}=e;const S=Yt();function T(w){Ge.call(this,t,w)}function _(w){Ge.call(this,t,w)}return t.$$set=w=>{"cards"in w&&n(0,h=w.cards),"capacity"in w&&n(1,v=w.capacity),"closed"in w&&n(2,p=w.closed),"index"in w&&n(3,N=w.index),"isDraggableFn"in w&&n(4,g=w.isDraggableFn),"selectedCardsN"in w&&n(5,D=w.selectedCardsN),"nested"in w&&n(6,b=w.nested)},t.$$.update=()=>{t.$$.dirty&65536&&n(15,r=d.size),t.$$.dirty&32770&&n(13,i=`width: ${an(v,r)}em`),t.$$.dirty&21&&n(12,a=!p&&g(h)),t.$$.dirty&33&&n(11,l=D>0&&D===h.length),t.$$.dirty&5&&n(10,u=p&&h.length===1),t.$$.dirty&9&&n(9,f=w=>{w.stopPropagation(),br(w,N,h)}),t.$$.dirty&72&&n(7,s=()=>{b||S("select",{index:N})})},n(8,o=w=>{w.preventDefault()}),[h,v,p,N,g,D,b,s,o,f,u,l,a,i,c,r,d,T,_]}class ln extends te{constructor(e){super(),ee(this,e,kr,Sr,Z,{cards:0,capacity:1,closed:2,index:3,isDraggableFn:4,selectedCardsN:5,nested:6})}}const on=(t,e)=>{const n=t/e;return n<3/4?[3,5]:n<4/3?[4,4]:[5,3]},kt=(t,e)=>{const[n,r]=on(t,e);return{length:n*r-15}},Cr=(t,e,n,r)=>{const[i,a]=on(e,r),l=an(4,t)*i+(t!=="small"?.666:.333)*10,u=e*.95/l,f=xt(t).height*a+(t!=="small"?.5:.25)*6,s=(n>600?n:r)*.95/f;return Math.min(u,s)},Ct=()=>{const t=new le.Deck;return[...Array(13)].map(()=>t.popN(4)).concat([[],[]])},nt=t=>{const[e,...n]=t;return n.every(r=>r.value===e.value)},Tr=t=>t.length===0?!1:t.length===1?!0:nt(t),un=(t,e)=>t.length+e.length>4?!1:e.length===0||e[e.length-1].value===t[0].value,sn=(t,e,n,r)=>{const i=t.map(a=>[...a]);if(!un(r,i[n]))throw new Error(`Can not move cards ${r.map(a=>a.toString(Oe.CardStringType.ShortEmoji))} from pile ${e} to pile ${n}`);return i[e]=i[e].slice(0,i[e].length-r.length),i[n]=[...i[n],...r],i},rt=t=>t.length===1||nt(t)?t:rt(t.slice(1)),Nr=(t,e)=>{if(t[e].length===0)throw new Error("Cannot move cards from an empty pile.");if(fn(t[e]))throw new Error("Cannot move cards from a completed pile.");const n=rt(t[e]),r=t.reduce((l,u,f)=>f!==e&&un(n,u)?[...l,f]:l,[]);if(r.length===0)throw new Error(`Cannot move cards from pile ${e} to any other pile`);const i=r.filter(l=>t[l].length>0),a=i.length>0?i[0]:r[0];return sn(t,e,a,n)},fn=t=>t.length===4&&nt(t),Dr=t=>t.reduce((e,n,r)=>fn(n)?[...e,r]:e,[]);/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var cn=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],$e=cn.join(","),dn=typeof Element>"u",ge=dn?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Ue=!dn&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},Ke=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),a=i===""||i==="true",l=a||n&&e&&t(e.parentNode);return l},Er=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},gn=function(e,n,r){if(Ke(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll($e));return n&&ge.call(e,$e)&&i.unshift(e),i=i.filter(r),i},hn=function t(e,n,r){for(var i=[],a=Array.from(e);a.length;){var l=a.shift();if(!Ke(l,!1))if(l.tagName==="SLOT"){var u=l.assignedElements(),f=u.length?u:l.children,o=t(f,!0,r);r.flatten?i.push.apply(i,o):i.push({scopeParent:l,candidates:o})}else{var s=ge.call(l,$e);s&&r.filter(l)&&(n||!e.includes(l))&&i.push(l);var d=l.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(l),c=!Ke(d,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(l));if(d&&c){var h=t(d===!0?l.children:d.children,!0,r);r.flatten?i.push.apply(i,h):i.push({scopeParent:l,candidates:h})}else a.unshift.apply(a,l.children)}}return i},vn=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},ce=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Er(e))&&!vn(e)?0:e.tabIndex},Fr=function(e,n){var r=ce(e);return r<0&&n&&!vn(e)?0:r},Ar=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},mn=function(e){return e.tagName==="INPUT"},Or=function(e){return mn(e)&&e.type==="hidden"},Pr=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},Lr=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},Mr=function(e){if(!e.name)return!0;var n=e.form||Ue(e),r=function(u){return n.querySelectorAll('input[type="radio"][name="'+u+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var a=Lr(i,e.form);return!a||a===e},Rr=function(e){return mn(e)&&e.type==="radio"},Ir=function(e){return Rr(e)&&!Mr(e)},$r=function(e){var n,r=e&&Ue(e),i=(n=r)===null||n===void 0?void 0:n.host,a=!1;if(r&&r!==e){var l,u,f;for(a=!!((l=i)!==null&&l!==void 0&&(u=l.ownerDocument)!==null&&u!==void 0&&u.contains(i)||e!=null&&(f=e.ownerDocument)!==null&&f!==void 0&&f.contains(e));!a&&i;){var o,s,d;r=Ue(i),i=(o=r)===null||o===void 0?void 0:o.host,a=!!((s=i)!==null&&s!==void 0&&(d=s.ownerDocument)!==null&&d!==void 0&&d.contains(i))}}return a},Tt=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},Ur=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var a=ge.call(e,"details>summary:first-of-type"),l=a?e.parentElement:e;if(ge.call(l,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var u=e;e;){var f=e.parentElement,o=Ue(e);if(f&&!f.shadowRoot&&i(f)===!0)return Tt(e);e.assignedSlot?e=e.assignedSlot:!f&&o!==e.ownerDocument?e=o.host:e=f}e=u}if($r(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Tt(e);return!1},Kr=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return ge.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},je=function(e,n){return!(n.disabled||Ke(n)||Or(n)||Ur(n,e)||Pr(n)||Kr(n))},Qe=function(e,n){return!(Ir(n)||ce(n)<0||!je(e,n))},jr=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},zr=function t(e){var n=[],r=[];return e.forEach(function(i,a){var l=!!i.scopeParent,u=l?i.scopeParent:i,f=Fr(u,l),o=l?t(i.candidates):u;f===0?l?n.push.apply(n,o):n.push(u):r.push({documentOrder:a,tabIndex:f,item:i,isScope:l,content:o})}),r.sort(Ar).reduce(function(i,a){return a.isScope?i.push.apply(i,a.content):i.push(a.content),i},[]).concat(n)},qr=function(e,n){n=n||{};var r;return n.getShadowRoot?r=hn([e],n.includeContainer,{filter:Qe.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:jr}):r=gn(e,n.includeContainer,Qe.bind(null,n)),zr(r)},Br=function(e,n){n=n||{};var r;return n.getShadowRoot?r=hn([e],n.includeContainer,{filter:je.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=gn(e,n.includeContainer,je.bind(null,n)),r},me=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ge.call(e,$e)===!1?!1:Qe(n,e)},Vr=cn.concat("iframe").join(","),Je=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ge.call(e,Vr)===!1?!1:je(n,e)};/*!
* focus-trap 7.5.2
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nt(Object(n),!0).forEach(function(r){Hr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hr(t,e,n){return e=Jr(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wr(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jr(t){var e=Wr(t,"string");return typeof e=="symbol"?e:String(e)}var Et={activateTrap:function(e,n){if(e.length>0){var r=e[e.length-1];r!==n&&r.pause()}var i=e.indexOf(n);i===-1||e.splice(i,1),e.push(n)},deactivateTrap:function(e,n){var r=e.indexOf(n);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},Gr=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Yr=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},Ne=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},Zr=function(e){return Ne(e)&&!e.shiftKey},Qr=function(e){return Ne(e)&&e.shiftKey},Ft=function(e){return setTimeout(e,0)},At=function(e,n){var r=-1;return e.every(function(i,a){return n(i)?(r=a,!1):!0}),r},Ce=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},Me=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Xr=[],xr=function(e,n){var r=(n==null?void 0:n.document)||document,i=(n==null?void 0:n.trapStack)||Xr,a=Dt({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Zr,isKeyBackward:Qr},n),l={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},u,f=function(y,m,E){return y&&y[m]!==void 0?y[m]:a[E||m]},o=function(y,m){var E=typeof(m==null?void 0:m.composedPath)=="function"?m.composedPath():void 0;return l.containerGroups.findIndex(function(L){var R=L.container,M=L.tabbableNodes;return R.contains(y)||(E==null?void 0:E.includes(R))||M.find(function(H){return H===y})})},s=function(y){var m=a[y];if(typeof m=="function"){for(var E=arguments.length,L=new Array(E>1?E-1:0),R=1;R<E;R++)L[R-1]=arguments[R];m=m.apply(void 0,L)}if(m===!0&&(m=void 0),!m){if(m===void 0||m===!1)return m;throw new Error("`".concat(y,"` was specified but was not a node, or did not return a node"))}var M=m;if(typeof m=="string"&&(M=r.querySelector(m),!M))throw new Error("`".concat(y,"` as selector refers to no known node"));return M},d=function(){var y=s("initialFocus");if(y===!1)return!1;if(y===void 0||!Je(y,a.tabbableOptions))if(o(r.activeElement)>=0)y=r.activeElement;else{var m=l.tabbableGroups[0],E=m&&m.firstTabbableNode;y=E||s("fallbackFocus")}if(!y)throw new Error("Your focus-trap needs to have at least one focusable element");return y},c=function(){if(l.containerGroups=l.containers.map(function(y){var m=qr(y,a.tabbableOptions),E=Br(y,a.tabbableOptions),L=m.length>0?m[0]:void 0,R=m.length>0?m[m.length-1]:void 0,M=E.find(function(J){return me(J)}),H=E.slice().reverse().find(function(J){return me(J)}),Q=!!m.find(function(J){return ce(J)>0});return{container:y,tabbableNodes:m,focusableNodes:E,posTabIndexesFound:Q,firstTabbableNode:L,lastTabbableNode:R,firstDomTabbableNode:M,lastDomTabbableNode:H,nextTabbableNode:function(fe){var Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,oe=m.indexOf(fe);return oe<0?Se?E.slice(E.indexOf(fe)+1).find(function(ke){return me(ke)}):E.slice(0,E.indexOf(fe)).reverse().find(function(ke){return me(ke)}):m[oe+(Se?1:-1)]}}}),l.tabbableGroups=l.containerGroups.filter(function(y){return y.tabbableNodes.length>0}),l.tabbableGroups.length<=0&&!s("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(l.containerGroups.find(function(y){return y.posTabIndexesFound})&&l.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},h=function $(y){if(y!==!1&&y!==r.activeElement){if(!y||!y.focus){$(d());return}y.focus({preventScroll:!!a.preventScroll}),l.mostRecentlyFocusedNode=y,Gr(y)&&y.select()}},v=function(y){var m=s("setReturnFocus",y);return m||(m===!1?!1:y)},p=function(y){var m=y.target,E=y.event,L=y.isBackward,R=L===void 0?!1:L;m=m||Me(E),c();var M=null;if(l.tabbableGroups.length>0){var H=o(m,E),Q=H>=0?l.containerGroups[H]:void 0;if(H<0)R?M=l.tabbableGroups[l.tabbableGroups.length-1].lastTabbableNode:M=l.tabbableGroups[0].firstTabbableNode;else if(R){var J=At(l.tabbableGroups,function(Be){var Ve=Be.firstTabbableNode;return m===Ve});if(J<0&&(Q.container===m||Je(m,a.tabbableOptions)&&!me(m,a.tabbableOptions)&&!Q.nextTabbableNode(m,!1))&&(J=H),J>=0){var fe=J===0?l.tabbableGroups.length-1:J-1,Se=l.tabbableGroups[fe];M=ce(m)>=0?Se.lastTabbableNode:Se.lastDomTabbableNode}else Ne(E)||(M=Q.nextTabbableNode(m,!1))}else{var oe=At(l.tabbableGroups,function(Be){var Ve=Be.lastTabbableNode;return m===Ve});if(oe<0&&(Q.container===m||Je(m,a.tabbableOptions)&&!me(m,a.tabbableOptions)&&!Q.nextTabbableNode(m))&&(oe=H),oe>=0){var ke=oe===l.tabbableGroups.length-1?0:oe+1,it=l.tabbableGroups[ke];M=ce(m)>=0?it.firstTabbableNode:it.firstDomTabbableNode}else Ne(E)||(M=Q.nextTabbableNode(m))}}else M=s("fallbackFocus");return M},N=function(y){var m=Me(y);if(!(o(m,y)>=0)){if(Ce(a.clickOutsideDeactivates,y)){u.deactivate({returnFocus:a.returnFocusOnDeactivate});return}Ce(a.allowOutsideClick,y)||y.preventDefault()}},g=function(y){var m=Me(y),E=o(m,y)>=0;if(E||m instanceof Document)E&&(l.mostRecentlyFocusedNode=m);else{y.stopImmediatePropagation();var L,R=!0;if(l.mostRecentlyFocusedNode)if(ce(l.mostRecentlyFocusedNode)>0){var M=o(l.mostRecentlyFocusedNode),H=l.containerGroups[M].tabbableNodes;if(H.length>0){var Q=H.findIndex(function(J){return J===l.mostRecentlyFocusedNode});Q>=0&&(a.isKeyForward(l.recentNavEvent)?Q+1<H.length&&(L=H[Q+1],R=!1):Q-1>=0&&(L=H[Q-1],R=!1))}}else l.containerGroups.some(function(J){return J.tabbableNodes.some(function(fe){return ce(fe)>0})})||(R=!1);else R=!1;R&&(L=p({target:l.mostRecentlyFocusedNode,isBackward:a.isKeyBackward(l.recentNavEvent)})),h(L||l.mostRecentlyFocusedNode||d())}l.recentNavEvent=void 0},D=function(y){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;l.recentNavEvent=y;var E=p({event:y,isBackward:m});E&&(Ne(y)&&y.preventDefault(),h(E))},b=function(y){if(Yr(y)&&Ce(a.escapeDeactivates,y)!==!1){y.preventDefault(),u.deactivate();return}(a.isKeyForward(y)||a.isKeyBackward(y))&&D(y,a.isKeyBackward(y))},S=function(y){var m=Me(y);o(m,y)>=0||Ce(a.clickOutsideDeactivates,y)||Ce(a.allowOutsideClick,y)||(y.preventDefault(),y.stopImmediatePropagation())},T=function(){if(l.active)return Et.activateTrap(i,u),l.delayInitialFocusTimer=a.delayInitialFocus?Ft(function(){h(d())}):h(d()),r.addEventListener("focusin",g,!0),r.addEventListener("mousedown",N,{capture:!0,passive:!1}),r.addEventListener("touchstart",N,{capture:!0,passive:!1}),r.addEventListener("click",S,{capture:!0,passive:!1}),r.addEventListener("keydown",b,{capture:!0,passive:!1}),u},_=function(){if(l.active)return r.removeEventListener("focusin",g,!0),r.removeEventListener("mousedown",N,!0),r.removeEventListener("touchstart",N,!0),r.removeEventListener("click",S,!0),r.removeEventListener("keydown",b,!0),u},w=function(y){var m=y.some(function(E){var L=Array.from(E.removedNodes);return L.some(function(R){return R===l.mostRecentlyFocusedNode})});m&&h(d())},U=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(w):void 0,V=function(){U&&(U.disconnect(),l.active&&!l.paused&&l.containers.map(function(y){U.observe(y,{subtree:!0,childList:!0})}))};return u={get active(){return l.active},get paused(){return l.paused},activate:function(y){if(l.active)return this;var m=f(y,"onActivate"),E=f(y,"onPostActivate"),L=f(y,"checkCanFocusTrap");L||c(),l.active=!0,l.paused=!1,l.nodeFocusedBeforeActivation=r.activeElement,m==null||m();var R=function(){L&&c(),T(),V(),E==null||E()};return L?(L(l.containers.concat()).then(R,R),this):(R(),this)},deactivate:function(y){if(!l.active)return this;var m=Dt({onDeactivate:a.onDeactivate,onPostDeactivate:a.onPostDeactivate,checkCanReturnFocus:a.checkCanReturnFocus},y);clearTimeout(l.delayInitialFocusTimer),l.delayInitialFocusTimer=void 0,_(),l.active=!1,l.paused=!1,V(),Et.deactivateTrap(i,u);var E=f(m,"onDeactivate"),L=f(m,"onPostDeactivate"),R=f(m,"checkCanReturnFocus"),M=f(m,"returnFocus","returnFocusOnDeactivate");E==null||E();var H=function(){Ft(function(){M&&h(v(l.nodeFocusedBeforeActivation)),L==null||L()})};return M&&R?(R(v(l.nodeFocusedBeforeActivation)).then(H,H),this):(H(),this)},pause:function(y){if(l.paused||!l.active)return this;var m=f(y,"onPause"),E=f(y,"onPostPause");return l.paused=!0,m==null||m(),_(),V(),E==null||E(),this},unpause:function(y){if(!l.paused||!l.active)return this;var m=f(y,"onUnpause"),E=f(y,"onPostUnpause");return l.paused=!1,m==null||m(),c(),T(),V(),E==null||E(),this},updateContainerElements:function(y){var m=[].concat(y).filter(Boolean);return l.containers=m.map(function(E){return typeof E=="string"?r.querySelector(E):E}),l.active&&c(),V(),this}},u.updateContainerElements(e),u};const pn=()=>(Math.random()+1).toString(36).substring(5);function ei(t){let e,n,r,i,a,l,u,f,o,s;return{c(){e=O("div"),n=O("button"),r=Ie("svg"),i=Ie("path"),l=B(),u=O("div"),f=ne(t[1]),k(i,"fill","none"),k(i,"stroke","currentColor"),k(i,"stroke-linecap","round"),k(i,"stroke-linejoin","round"),k(i,"stroke-width","1"),k(i,"d",a=t[3][t[0]].path),k(r,"viewBox","0 0 16 16"),k(r,"class","svelte-1nd3ako"),k(n,"aria-labelledby",t[4]),k(n,"class","clickable svelte-1nd3ako"),z(n,"open",open),k(u,"class","label svelte-1nd3ako"),k(u,"id",t[4]),k(e,"class","icon-button clickable svelte-1nd3ako")},m(d,c){I(d,e,c),A(e,n),A(n,r),A(r,i),A(e,l),A(e,u),A(u,f),o||(s=[X(n,"click",function(){ae(t[2])&&t[2].apply(this,arguments)}),X(e,"click",function(){ae(t[2])&&t[2].apply(this,arguments)})],o=!0)},p(d,[c]){t=d,c&1&&a!==(a=t[3][t[0]].path)&&k(i,"d",a),c&0&&z(n,"open",open),c&2&&Fe(f,t[1])},i:W,o:W,d(d){d&&P(e),o=!1,se(s)}}}function ti(t,e,n){const r={Close:{path:"M 3 3 L 13 13 M 3 13 L 13 3"},Help:{path:"M 8 12 L 8 12 M 8 10 L 8 9 C 8 7 10 8 10 6 A 2 2 0 1 0 6 6 M 8 1.5 A 6.5 6.5 0 0 1 8 14.5 A 6.5 6.5 0 0 1 8 1.5"},Menu:{path:"M 2 4 L 14 4 M 2 8 L 14 8 M 2 12 L 14 12"},Shuffle:{path:"M 5 2 L 2 5 L 5 8 M 2 5 L 12 5 M 11 14 L 14 11 L 11 8 M 14 11 L 4 11"},Undo:{path:"M 5 3 L 2 6 L 5 9 M 2 6 L 10 6 A 3 3 0 1 1 10 13 L 8 13"}};let{icon:i}=e,{label:a}=e,{onClick:l}=e;const u=`${pn()}-label`;return t.$$set=f=>{"icon"in f&&n(0,i=f.icon),"label"in f&&n(1,a=f.label),"onClick"in f&&n(2,l=f.onClick)},[i,a,l,r,u]}class Pe extends te{constructor(e){super(),ee(this,e,ti,ei,Z,{icon:0,label:1,onClick:2})}}function ni(t){let e,n,r,i,a,l,u,f,o,s,d;f=new Pe({props:{icon:"Close",label:"Close",onClick:t[3]}});const c=t[5].default,h=qt(c,t,t[4],null);return{c(){e=O("div"),n=B(),r=O("div"),i=O("div"),a=O("h2"),l=ne(t[0]),u=B(),q(f.$$.fragment),o=B(),s=O("div"),h&&h.c(),k(e,"class","backdrop svelte-p8twni"),k(a,"id",t[2]),k(a,"class","svelte-p8twni"),k(i,"class","header svelte-p8twni"),k(s,"class","content svelte-p8twni"),k(r,"class","modal svelte-p8twni"),k(r,"role","dialog"),k(r,"aria-labelledby",t[2]),k(r,"id",t[1])},m(v,p){I(v,e,p),I(v,n,p),I(v,r,p),A(r,i),A(i,a),A(a,l),A(i,u),K(f,i,null),A(r,o),A(r,s),h&&h.m(s,null),d=!0},p(v,[p]){(!d||p&1)&&Fe(l,v[0]),h&&h.p&&(!d||p&16)&&Ht(h,c,v,v[4],d?Vt(c,v[4],p,null):Wt(v[4]),null)},i(v){d||(C(f.$$.fragment,v),C(h,v),d=!0)},o(v){F(f.$$.fragment,v),F(h,v),d=!1},d(v){v&&(P(e),P(n),P(r)),j(f),h&&h.d(v)}}}function ri(t,e,n){let{$$slots:r={},$$scope:i}=e,{title:a}=e;const l=`modal-${pn()}`,u=`${l}-title`;Xe(()=>{const s=xr(`#${l}`,{clickOutsideDeactivates:!0,onDeactivate:()=>o()});s.activate();const d=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{s.deactivate(),document.body.style.overflow=d}});const f=Yt(),o=()=>{f("close")};return t.$$set=s=>{"title"in s&&n(0,a=s.title),"$$scope"in s&&n(4,i=s.$$scope)},[a,l,u,o,i,r]}class bn extends te{constructor(e){super(),ee(this,e,ri,ni,Z,{title:0})}}function ii(t){let e,n,r,i,a,l,u,f,o,s,d;return{c(){e=O("p"),e.textContent=`The goal of the pileon solitaire is to rearrange a deck of cards into piles
    of equal ranks from thirteen random piles of four using fifteen piles.`,n=B(),r=O("h3"),r.textContent="Rules",i=B(),a=O("ul"),a.innerHTML=`<li>Each pile can contain up to four cards.</li> <li>Cards can be moved from top of the pile into a pile where the top card is
      of the same rank as the card that is moved.</li> <li>Cards of any rank can be moved into an empty pile.</li> <li>Multiple cards with the same rank can be moved at once.</li> <li>Pile is complete when it contains all four cards with the same rank.</li>`,l=B(),u=O("h3"),u.textContent="Moving cards",f=B(),o=O("ol"),o.innerHTML=`<li>Select the source pile by clicking a pile. Cards to be moved are
      highlighted. Click the source pile again to reduce the amount of selected
      cards.</li> <li>Move cards by clicking the target pile. If the move is valid, the cards
      are moved from the source pile into the target pile.</li>`,s=B(),d=O("p"),d.textContent=`If your device supports drag-and-drop, you can also drag the cards you want
    to move from the source pile into the target pile. Double-clicking the
    source pile automatically moves cards from the pile to an available target
    pile.`},m(c,h){I(c,e,h),I(c,n,h),I(c,r,h),I(c,i,h),I(c,a,h),I(c,l,h),I(c,u,h),I(c,f,h),I(c,o,h),I(c,s,h),I(c,d,h)},p:W,d(c){c&&(P(e),P(n),P(r),P(i),P(a),P(l),P(u),P(f),P(o),P(s),P(d))}}}function ai(t){let e,n;return e=new bn({props:{title:"How to play?",$$slots:{default:[ii]},$$scope:{ctx:t}}}),e.$on("close",t[0]),{c(){q(e.$$.fragment)},m(r,i){K(e,r,i),n=!0},p(r,[i]){const a={};i&2&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function li(t){function e(n){Ge.call(this,t,n)}return[e]}class oi extends te{constructor(e){super(),ee(this,e,li,ai,Z,{})}}function Ot(t,e,n){const r=t.slice();return r[25]=e[n],r}function Pt(t,e,n){const r=t.slice();return r[28]=e[n],r[30]=n,r}function Lt(t){let e,n,r;return n=new ln({props:{cards:t[28],closed:t[9].includes(t[30]),selectedCardsN:t[8]===t[30]?t[7].length:0,index:t[30],isDraggableFn:Tr}}),n.$on("drop",t[12](t[30])),n.$on("dblclick",t[13](t[30])),n.$on("select",t[11]),{c(){e=O("div"),q(n.$$.fragment),k(e,"class","pile svelte-1qdb0j4"),z(e,"small",t[3]==="small")},m(i,a){I(i,e,a),K(n,e,null),r=!0},p(i,a){const l={};a&16&&(l.cards=i[28]),a&512&&(l.closed=i[9].includes(i[30])),a&384&&(l.selectedCardsN=i[8]===i[30]?i[7].length:0),n.$set(l),(!r||a&8)&&z(e,"small",i[3]==="small")},i(i){r||(C(n.$$.fragment,i),r=!0)},o(i){F(n.$$.fragment,i),r=!1},d(i){i&&P(e),j(n)}}}function Mt(t){let e;return{c(){e=O("div"),k(e,"class","pile svelte-1qdb0j4")},m(n,r){I(n,e,r)},p:W,d(n){n&&P(e)}}}function Rt(t){let e,n;return e=new oi({}),e.$on("close",t[20]),{c(){q(e.$$.fragment)},m(r,i){K(e,r,i),n=!0},p:W,i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function ui(t){let e,n,r,i,a,l,u,f;Ee(t[18]);let o=re(t[4]),s=[];for(let p=0;p<o.length;p+=1)s[p]=Lt(Pt(t,o,p));const d=p=>F(s[p],1,1,()=>{s[p]=null});let c=re(kt(t[0],t[2])),h=[];for(let p=0;p<c.length;p+=1)h[p]=Mt(Ot(t,c,p));let v=t[5]&&Rt(t);return{c(){e=O("main");for(let p=0;p<s.length;p+=1)s[p].c();n=B();for(let p=0;p<h.length;p+=1)h[p].c();i=B(),v&&v.c(),a=Jt(),k(e,"class","pileon svelte-1qdb0j4"),k(e,"style",t[6]),Ee(()=>t[19].call(e))},m(p,N){I(p,e,N);for(let g=0;g<s.length;g+=1)s[g]&&s[g].m(e,null);A(e,n);for(let g=0;g<h.length;g+=1)h[g]&&h[g].m(e,null);r=Nn(e,t[19].bind(e)),I(p,i,N),v&&v.m(p,N),I(p,a,N),l=!0,u||(f=X(window,"resize",t[18]),u=!0)},p(p,[N]){if(N&15256){o=re(p[4]);let g;for(g=0;g<o.length;g+=1){const D=Pt(p,o,g);s[g]?(s[g].p(D,N),C(s[g],1)):(s[g]=Lt(D),s[g].c(),C(s[g],1),s[g].m(e,n))}for(G(),g=o.length;g<s.length;g+=1)d(g);Y()}if(N&5){c=re(kt(p[0],p[2]));let g;for(g=0;g<c.length;g+=1){const D=Ot(p,c,g);h[g]?h[g].p(D,N):(h[g]=Mt(),h[g].c(),h[g].m(e,null))}for(;g<h.length;g+=1)h[g].d(1);h.length=c.length}(!l||N&64)&&k(e,"style",p[6]),p[5]?v?(v.p(p,N),N&32&&C(v,1)):(v=Rt(p),v.c(),C(v,1),v.m(a.parentNode,a)):v&&(G(),F(v,1,1,()=>{v=null}),Y())},i(p){if(!l){for(let N=0;N<o.length;N+=1)C(s[N]);C(v),l=!0}},o(p){s=s.filter(Boolean);for(let N=0;N<s.length;N+=1)F(s[N]);F(v),l=!1},d(p){p&&(P(e),P(i),P(a)),ye(s,p),ye(h,p),r(),v&&v.d(p),u=!1,f()}}}function si(t,e,n){let r,i,a,l,u,f,o,s,d,c,h,v=en(m=>({size:m.size==="default"?"bridge":m.size,fourColor:m.colors==="four-color"}));ue(t,v,m=>n(17,s=m));let p=[Ct()],N=!1;const g=m=>{m.stopPropagation(),n(5,N=!0)},D=m=>{m.stopPropagation(),n(14,p=[Ct()])},b=m=>{m.stopPropagation(),p.length>1&&n(14,p=p.slice(0,p.length-1))};let S=[void 0,[]];const T=(m,E,L)=>{try{n(15,S=[void 0,[]]);const R=sn(p[p.length-1],m,E,L);n(14,p=[...p,R])}catch{}},_=m=>{const[E,L]=S,R=m.detail.index;i.includes(R)||(E===void 0||L.length===0?n(15,S=[R,rt(r[R])]):E===R?n(15,S=[R,L.slice(1)]):E!==R&&(T(E,R,L),n(15,S=[void 0,[]])))},w=m=>E=>{E.preventDefault();const{sourceStack:L,cards:R}=yr(E);L!==m&&T(L,m,R)},U=m=>E=>{E.preventDefault();try{n(15,S=[void 0,[]]);const L=Nr(p[p.length-1],m);n(14,p=[...p,L])}catch{}};Xe(()=>{we.update(m=>({...m,help:g,shuffle:D,undo:b}))}),Gt(()=>{we.update(m=>({...m,help:void 0,shuffle:void 0,undo:void 0}))});function V(){n(2,h=window.innerHeight)}function $(){c=this.clientHeight,d=this.clientWidth,n(1,c),n(0,d)}const y=()=>{n(5,N=!1)};return t.$$.update=()=>{if(t.$$.dirty&5){const m=d<800||h<500?"small":"bridge";Vn(E=>({size:E.size==="default"?m:E.size,fourColor:E.colors==="four-color"}))}t.$$.dirty&16384&&n(4,r=p[p.length-1]),t.$$.dirty&16&&n(9,i=Dr(r)),t.$$.dirty&32768&&n(8,a=S[0]),t.$$.dirty&32768&&n(7,l=S[1]),t.$$.dirty&131072&&n(3,u=s.size),t.$$.dirty&15&&n(16,f=Cr(u,d,c,h)),t.$$.dirty&65536&&n(6,o=`font-size: ${f}px`)},[d,c,h,u,r,N,o,l,a,i,v,_,w,U,p,S,f,s,V,$,y]}class fi extends te{constructor(e){super(),ee(this,e,si,ui,Z,{})}}function ci(t){let e;return{c(){e=O("span"),e.textContent=`at ${t[0]} ${t[1]}`},m(n,r){I(n,e,r)},p:W,d(n){n&&P(e)}}}function di(t){let e,n,r,i=(t[1]||t[0])&&ci(t);return{c(){e=O("footer"),n=O("a"),n.textContent="kangasta / pileon",r=B(),i&&i.c(),k(n,"href","https://github.com/kangasta/pileon.git"),k(n,"target","_blank"),k(e,"class","svelte-16t3ryr")},m(a,l){I(a,e,l),A(e,n),A(e,r),i&&i.m(e,null)},p(a,[l]){(a[1]||a[0])&&i.p(a,l)},i:W,o:W,d(a){a&&P(e),i&&i.d()}}}function gi(t){const e={}.VITE_TAG??"",n="b54a8567c50d482ad2b63e380febcc0427418094".slice(0,8);return[e,n]}class hi extends te{constructor(e){super(),ee(this,e,gi,di,Z,{})}}function vi(t){let e,n,r,i,a;return{c(){e=O("button"),n=ne(t[0]),k(e,"aria-pressed",r=t[1]?"true":"false"),e.disabled=t[1],k(e,"class","svelte-jc3xzr"),z(e,"pressed",t[1])},m(l,u){I(l,e,u),A(e,n),i||(a=X(e,"click",function(){ae(t[2])&&t[2].apply(this,arguments)}),i=!0)},p(l,[u]){t=l,u&1&&Fe(n,t[0]),u&2&&r!==(r=t[1]?"true":"false")&&k(e,"aria-pressed",r),u&2&&(e.disabled=t[1]),u&2&&z(e,"pressed",t[1])},i:W,o:W,d(l){l&&P(e),i=!1,a()}}}function mi(t,e,n){let r,i,a;ue(t,_e,s=>n(4,a=s));let{target:l}=e,{value:u}=e;const{update:f}=_e,o=()=>{};return t.$$set=s=>{"target"in s&&n(3,l=s.target),"value"in s&&n(0,u=s.value)},t.$$.update=()=>{t.$$.dirty&25&&n(1,i=a[l]===u),t.$$.dirty&11&&n(2,r=i?o:()=>f(s=>({...s,[l]:u})))},[u,i,r,l,a]}class ie extends te{constructor(e){super(),ee(this,e,mi,vi,Z,{target:3,value:0})}}function It(t){let e,n;return e=new Pe({props:{icon:"Help",label:"Help",onClick:t[1].help}}),{c(){q(e.$$.fragment)},m(r,i){K(e,r,i),n=!0},p(r,i){const a={};i&2&&(a.onClick=r[1].help),e.$set(a)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function $t(t){let e,n;return e=new Pe({props:{icon:"Shuffle",label:"Shuffle",onClick:t[1].shuffle}}),{c(){q(e.$$.fragment)},m(r,i){K(e,r,i),n=!0},p(r,i){const a={};i&2&&(a.onClick=r[1].shuffle),e.$set(a)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function Ut(t){let e,n;return e=new Pe({props:{icon:"Undo",label:"Undo",onClick:t[1].undo}}),{c(){q(e.$$.fragment)},m(r,i){K(e,r,i),n=!0},p(r,i){const a={};i&2&&(a.onClick=r[1].undo),e.$set(a)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function Kt(t){let e,n;return e=new bn({props:{title:"Settings",$$slots:{default:[pi]},$$scope:{ctx:t}}}),e.$on("close",t[2]("close")),{c(){q(e.$$.fragment)},m(r,i){K(e,r,i),n=!0},p(r,i){const a={};i&8&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function pi(t){let e,n,r,i,a,l,u,f,o,s,d,c,h,v,p,N,g,D,b,S,T,_,w,U,V,$,y,m,E,L,R;return l=new ie({props:{target:"game",value:"deck"}}),f=new ie({props:{target:"game",value:"pileon"}}),v=new ie({props:{target:"colors",value:"default"}}),N=new ie({props:{target:"colors",value:"standard"}}),D=new ie({props:{target:"colors",value:"four-color"}}),U=new ie({props:{target:"size",value:"default"}}),$=new ie({props:{target:"size",value:"bridge"}}),m=new ie({props:{target:"size",value:"poker"}}),L=new ie({props:{target:"size",value:"small"}}),{c(){e=O("table"),n=O("tr"),r=O("th"),r.textContent="Game:",i=B(),a=O("td"),q(l.$$.fragment),u=ne(" / "),q(f.$$.fragment),o=B(),s=O("tr"),d=O("th"),d.textContent="Colors:",c=B(),h=O("td"),q(v.$$.fragment),p=ne(" / "),q(N.$$.fragment),g=ne(" / "),q(D.$$.fragment),b=B(),S=O("tr"),T=O("th"),T.textContent="Size:",_=B(),w=O("td"),q(U.$$.fragment),V=ne(" / "),q($.$$.fragment),y=ne(" / "),q(m.$$.fragment),E=ne(" / "),q(L.$$.fragment),k(r,"class","svelte-uw79fp"),k(a,"class","svelte-uw79fp"),k(d,"class","svelte-uw79fp"),k(h,"class","svelte-uw79fp"),k(T,"class","svelte-uw79fp"),k(w,"class","svelte-uw79fp"),k(e,"class","svelte-uw79fp")},m(M,H){I(M,e,H),A(e,n),A(n,r),A(n,i),A(n,a),K(l,a,null),A(a,u),K(f,a,null),A(e,o),A(e,s),A(s,d),A(s,c),A(s,h),K(v,h,null),A(h,p),K(N,h,null),A(h,g),K(D,h,null),A(e,b),A(e,S),A(S,T),A(S,_),A(S,w),K(U,w,null),A(w,V),K($,w,null),A(w,y),K(m,w,null),A(w,E),K(L,w,null),R=!0},p:W,i(M){R||(C(l.$$.fragment,M),C(f.$$.fragment,M),C(v.$$.fragment,M),C(N.$$.fragment,M),C(D.$$.fragment,M),C(U.$$.fragment,M),C($.$$.fragment,M),C(m.$$.fragment,M),C(L.$$.fragment,M),R=!0)},o(M){F(l.$$.fragment,M),F(f.$$.fragment,M),F(v.$$.fragment,M),F(N.$$.fragment,M),F(D.$$.fragment,M),F(U.$$.fragment,M),F($.$$.fragment,M),F(m.$$.fragment,M),F(L.$$.fragment,M),R=!1},d(M){M&&P(e),j(l),j(f),j(v),j(N),j(D),j(U),j($),j(m),j(L)}}}function bi(t){let e,n,r,i,a,l,u,f,o=t[1].help!==void 0&&It(t),s=t[1].shuffle!==void 0&&$t(t);i=new Pe({props:{icon:"Menu",label:"Settings",onClick:t[2]("open")}});let d=t[1].undo!==void 0&&Ut(t),c=t[0]&&Kt(t);return{c(){e=O("div"),o&&o.c(),n=B(),s&&s.c(),r=B(),q(i.$$.fragment),a=B(),d&&d.c(),l=B(),c&&c.c(),u=Jt(),k(e,"class","menu svelte-uw79fp")},m(h,v){I(h,e,v),o&&o.m(e,null),A(e,n),s&&s.m(e,null),A(e,r),K(i,e,null),A(e,a),d&&d.m(e,null),I(h,l,v),c&&c.m(h,v),I(h,u,v),f=!0},p(h,[v]){h[1].help!==void 0?o?(o.p(h,v),v&2&&C(o,1)):(o=It(h),o.c(),C(o,1),o.m(e,n)):o&&(G(),F(o,1,1,()=>{o=null}),Y()),h[1].shuffle!==void 0?s?(s.p(h,v),v&2&&C(s,1)):(s=$t(h),s.c(),C(s,1),s.m(e,r)):s&&(G(),F(s,1,1,()=>{s=null}),Y()),h[1].undo!==void 0?d?(d.p(h,v),v&2&&C(d,1)):(d=Ut(h),d.c(),C(d,1),d.m(e,null)):d&&(G(),F(d,1,1,()=>{d=null}),Y()),h[0]?c?(c.p(h,v),v&1&&C(c,1)):(c=Kt(h),c.c(),C(c,1),c.m(u.parentNode,u)):c&&(G(),F(c,1,1,()=>{c=null}),Y())},i(h){f||(C(o),C(s),C(i.$$.fragment,h),C(d),C(c),f=!0)},o(h){F(o),F(s),F(i.$$.fragment,h),F(d),F(c),f=!1},d(h){h&&(P(e),P(l),P(u)),o&&o.d(),s&&s.d(),j(i),d&&d.d(),c&&c.d(h)}}}function yi(t,e,n){let r;ue(t,we,l=>n(1,r=l));let i=!1;return[i,r,l=>u=>{n(0,i=l==="open"),u.stopPropagation()}]}class _i extends te{constructor(e){super(),ee(this,e,yi,bi,Z,{})}}function wi(t){let e,n,r,i,a,l,u,f,o;e=new _i({});var s=t[0];function d(c,h){return{}}return s&&(r=ot(s,d())),l=new hi({}),{c(){q(e.$$.fragment),n=B(),r&&q(r.$$.fragment),i=B(),a=B(),q(l.$$.fragment)},m(c,h){K(e,c,h),I(c,n,h),r&&K(r,c,h),I(c,i,h),I(c,a,h),K(l,c,h),u=!0,f||(o=X(document.body,"keydown",t[1]),f=!0)},p(c,[h]){if(h&1&&s!==(s=c[0])){if(r){G();const v=r;F(v.$$.fragment,1,0,()=>{j(v,1)}),Y()}s?(r=ot(s,d()),q(r.$$.fragment),C(r.$$.fragment,1),K(r,i.parentNode,i)):r=null}},i(c){u||(C(e.$$.fragment,c),r&&C(r.$$.fragment,c),C(l.$$.fragment,c),u=!0)},o(c){F(e.$$.fragment,c),r&&F(r.$$.fragment,c),F(l.$$.fragment,c),u=!1},d(c){c&&(P(n),P(i),P(a)),j(e,c),r&&j(r,c),j(l,c),f=!1,o()}}}function Si(t,e,n){let r,i,a;ue(t,we,u=>n(3,i=u)),ue(t,_e,u=>n(2,a=u));const l=u=>{u.key==="z"&&(u.ctrlKey||u.metaKey)&&i.undo!==void 0&&i.undo(u)};return t.$$.update=()=>{t.$$.dirty&4&&n(0,r=a.game==="deck"?pr:fi)},[r,l,a]}class ki extends te{constructor(e){super(),ee(this,e,Si,wi,Z,{})}}new ki({target:document.body});
