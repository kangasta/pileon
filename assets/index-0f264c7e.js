var ur=Object.defineProperty;var fr=(t,e,n)=>e in t?ur(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var gt=(t,e,n)=>(fr(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Y(){}function cr(t,e){for(const n in e)t[n]=e[n];return t}function Pn(t){return t()}function Kt(){return Object.create(null)}function ye(t){t.forEach(Pn)}function de(t){return typeof t=="function"}function Z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function dr(t){return Object.keys(t).length===0}function $n(t,...e){if(t==null){for(const r of e)r(void 0);return Y}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function gr(t){let e;return $n(t,n=>e=n)(),e}function pe(t,e,n){t.$$.on_destroy.push($n(e,n))}function Tt(t,e,n,r){if(t){const i=Fn(t,e,n,r);return t[0](i)}}function Fn(t,e,n,r){return t[1]&&r?cr(n.ctx.slice(),t[1](r(e))):n.ctx}function Nt(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],l=Math.max(e.dirty.length,i.length);for(let a=0;a<l;a+=1)o[a]=e.dirty[a]|i[a];return o}return e.dirty|i}return e.dirty}function Ot(t,e,n,r,i,o){if(i){const l=Fn(e,n,r,o);t.p(l,i)}}function Et(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function w(t,e){t.appendChild(e)}function P(t,e,n){t.insertBefore(e,n||null)}function D(t){t.parentNode&&t.parentNode.removeChild(t)}function Pe(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function C(t){return document.createElement(t)}function Xe(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Q(t){return document.createTextNode(t)}function M(){return Q(" ")}function At(){return Q("")}function re(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function b(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function mr(t){return Array.from(t.childNodes)}function fe(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ae(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}let We;function hr(){if(We===void 0){We=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{We=!0}}return We}function vr(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const r=C("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const i=hr();let o;return i?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=re(window,"message",l=>{l.source===r.contentWindow&&e()})):(r.src="about:blank",r.onload=()=>{o=re(r.contentWindow,"resize",e),e()}),w(t,r),()=>{(i||o&&r.contentWindow)&&o(),D(r)}}function H(t,e,n){t.classList.toggle(e,!!n)}function pr(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}function zt(t,e){return new t(e)}let ze;function Ue(t){ze=t}function qe(){if(!ze)throw new Error("Function called outside component initialization");return ze}function ot(t){qe().$$.on_mount.push(t)}function Ln(t){qe().$$.on_destroy.push(t)}function lt(){const t=qe();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=pr(e,n,{cancelable:r});return i.slice().forEach(l=>{l.call(t,o)}),!o.defaultPrevented}return!0}}function br(t,e){return qe().$$.context.set(t,e),e}function Mn(t){return qe().$$.context.get(t)}function vt(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const Ee=[],pt=[];let De=[];const Bt=[],yr=Promise.resolve();let bt=!1;function _r(){bt||(bt=!0,yr.then(Rn))}function xe(t){De.push(t)}const mt=new Set;let Ce=0;function Rn(){if(Ce!==0)return;const t=ze;do{try{for(;Ce<Ee.length;){const e=Ee[Ce];Ce++,Ue(e),wr(e.$$)}}catch(e){throw Ee.length=0,Ce=0,e}for(Ue(null),Ee.length=0,Ce=0;pt.length;)pt.pop()();for(let e=0;e<De.length;e+=1){const n=De[e];mt.has(n)||(mt.add(n),n())}De.length=0}while(Ee.length);for(;Bt.length;)Bt.pop()();bt=!1,mt.clear(),Ue(t)}function wr(t){if(t.fragment!==null){t.update(),ye(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(xe)}}function Sr(t){const e=[],n=[];De.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),De=e}const Qe=new Set;let Se;function X(){Se={r:0,c:[],p:Se}}function x(){Se.r||ye(Se.c),Se=Se.p}function _(t,e){t&&t.i&&(Qe.delete(t),t.i(e))}function S(t,e,n,r){if(t&&t.o){if(Qe.has(t))return;Qe.add(t),Se.c.push(()=>{Qe.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function le(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function K(t){t&&t.c()}function j(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),xe(()=>{const o=t.$$.on_mount.map(Pn).filter(de);t.$$.on_destroy?t.$$.on_destroy.push(...o):ye(o),t.$$.on_mount=[]}),i.forEach(xe)}function U(t,e){const n=t.$$;n.fragment!==null&&(Sr(n.after_update),ye(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function kr(t,e){t.$$.dirty[0]===-1&&(Ee.push(t),_r(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ee(t,e,n,r,i,o,l,a=[-1]){const s=ze;Ue(t);const u=t.$$={fragment:null,ctx:[],props:o,update:Y,not_equal:i,bound:Kt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:Kt(),dirty:a,skip_bound:!1,root:e.target||s.$$.root};l&&l(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},(d,c,...g)=>{const m=g.length?g[0]:c;return u.ctx&&i(u.ctx[d],u.ctx[d]=m)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](m),f&&kr(t,d)),c}):[],u.update(),f=!0,ye(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const d=mr(e.target);u.fragment&&u.fragment.l(d),d.forEach(D)}else u.fragment&&u.fragment.c();e.intro&&_(t.$$.fragment),j(t,e.target,e.anchor),Rn()}Ue(s)}class te{constructor(){gt(this,"$$");gt(this,"$$set")}$destroy(){U(this,1),this.$destroy=Y}$on(e,n){if(!de(n))return Y;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!dr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Cr="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Cr);function Tr(t){let e;return{c(){e=C("span"),e.textContent=`at ${t[0]} ${t[1]}`},m(n,r){P(n,e,r)},p:Y,d(n){n&&D(e)}}}function Nr(t){let e,n,r,i=(t[1]||t[0])&&Tr(t);return{c(){e=C("footer"),n=C("a"),n.textContent="kangasta / pileon",r=M(),i&&i.c(),b(n,"href","https://github.com/kangasta/pileon.git"),b(n,"target","_blank"),b(e,"class","svelte-ivyywu")},m(o,l){P(o,e,l),w(e,n),w(e,r),i&&i.m(e,null)},p(o,[l]){(o[1]||o[0])&&i.p(o,l)},i:Y,o:Y,d(o){o&&D(e),i&&i.d()}}}function Or(t){const e={}.VITE_TAG??"",n="ff859e19293dfd27d24423037ca131a959790f48".slice(0,8);return[e,n]}class Er extends te{constructor(e){super(),ee(this,e,Or,Nr,Z,{})}}const Te=[];function Dt(t,e=Y){let n;const r=new Set;function i(a){if(Z(t,a)&&(t=a,n)){const s=!Te.length;for(const u of r)u[1](),Te.push(u,t);if(s){for(let u=0;u<Te.length;u+=2)Te[u][0](Te[u+1]);Te.length=0}}}function o(a){i(a(t))}function l(a,s=Y){const u=[a,s];return r.add(u),r.size===1&&(n=e(i,o)||Y),a(t),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:i,update:o,subscribe:l}}const In="settings",Ar={game:"pileon",colors:"default",size:"default"},Dr=JSON.parse(localStorage.getItem(In)),$e=Dt(Dr??Ar);$e.subscribe(t=>localStorage.setItem(In,JSON.stringify(t)));const Pr={},Fe=Dt(Pr);/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var jn=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],et=jn.join(","),Un=typeof Element>"u",ke=Un?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,tt=!Un&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},nt=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),o=i===""||i==="true",l=o||n&&e&&t(e.parentNode);return l},$r=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},Kn=function(e,n,r){if(nt(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(et));return n&&ke.call(e,et)&&i.unshift(e),i=i.filter(r),i},zn=function t(e,n,r){for(var i=[],o=Array.from(e);o.length;){var l=o.shift();if(!nt(l,!1))if(l.tagName==="SLOT"){var a=l.assignedElements(),s=a.length?a:l.children,u=t(s,!0,r);r.flatten?i.push.apply(i,u):i.push({scopeParent:l,candidates:u})}else{var f=ke.call(l,et);f&&r.filter(l)&&(n||!e.includes(l))&&i.push(l);var d=l.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(l),c=!nt(d,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(l));if(d&&c){var g=t(d===!0?l.children:d.children,!0,r);r.flatten?i.push.apply(i,g):i.push({scopeParent:l,candidates:g})}else o.unshift.apply(o,l.children)}}return i},Bn=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},we=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||$r(e))&&!Bn(e)?0:e.tabIndex},Fr=function(e,n){var r=we(e);return r<0&&n&&!Bn(e)?0:r},Lr=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},Vn=function(e){return e.tagName==="INPUT"},Mr=function(e){return Vn(e)&&e.type==="hidden"},Rr=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},Ir=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},jr=function(e){if(!e.name)return!0;var n=e.form||tt(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var o=Ir(i,e.form);return!o||o===e},Ur=function(e){return Vn(e)&&e.type==="radio"},Kr=function(e){return Ur(e)&&!jr(e)},zr=function(e){var n,r=e&&tt(e),i=(n=r)===null||n===void 0?void 0:n.host,o=!1;if(r&&r!==e){var l,a,s;for(o=!!((l=i)!==null&&l!==void 0&&(a=l.ownerDocument)!==null&&a!==void 0&&a.contains(i)||e!=null&&(s=e.ownerDocument)!==null&&s!==void 0&&s.contains(e));!o&&i;){var u,f,d;r=tt(i),i=(u=r)===null||u===void 0?void 0:u.host,o=!!((f=i)!==null&&f!==void 0&&(d=f.ownerDocument)!==null&&d!==void 0&&d.contains(i))}}return o},Vt=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},Br=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var o=ke.call(e,"details>summary:first-of-type"),l=o?e.parentElement:e;if(ke.call(l,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var a=e;e;){var s=e.parentElement,u=tt(e);if(s&&!s.shadowRoot&&i(s)===!0)return Vt(e);e.assignedSlot?e=e.assignedSlot:!s&&u!==e.ownerDocument?e=u.host:e=s}e=a}if(zr(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Vt(e);return!1},Vr=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return ke.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},rt=function(e,n){return!(n.disabled||nt(n)||Mr(n)||Br(n,e)||Rr(n)||Vr(n))},yt=function(e,n){return!(Kr(n)||we(n)<0||!rt(e,n))},Hr=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},qr=function t(e){var n=[],r=[];return e.forEach(function(i,o){var l=!!i.scopeParent,a=l?i.scopeParent:i,s=Fr(a,l),u=l?t(i.candidates):a;s===0?l?n.push.apply(n,u):n.push(a):r.push({documentOrder:o,tabIndex:s,item:i,isScope:l,content:u})}),r.sort(Lr).reduce(function(i,o){return o.isScope?i.push.apply(i,o.content):i.push(o.content),i},[]).concat(n)},Wr=function(e,n){n=n||{};var r;return n.getShadowRoot?r=zn([e],n.includeContainer,{filter:yt.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:Hr}):r=Kn(e,n.includeContainer,yt.bind(null,n)),qr(r)},Jr=function(e,n){n=n||{};var r;return n.getShadowRoot?r=zn([e],n.includeContainer,{filter:rt.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=Kn(e,n.includeContainer,rt.bind(null,n)),r},Ne=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ke.call(e,et)===!1?!1:yt(n,e)},Gr=jn.concat("iframe").join(","),ht=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ke.call(e,Gr)===!1?!1:rt(n,e)};/*!
* focus-trap 7.5.2
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ht(Object(n),!0).forEach(function(r){Qr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qr(t,e,n){return e=Zr(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yr(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zr(t){var e=Yr(t,"string");return typeof e=="symbol"?e:String(e)}var Wt={activateTrap:function(e,n){if(e.length>0){var r=e[e.length-1];r!==n&&r.pause()}var i=e.indexOf(n);i===-1||e.splice(i,1),e.push(n)},deactivateTrap:function(e,n){var r=e.indexOf(n);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},Xr=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},xr=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},Ke=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},ei=function(e){return Ke(e)&&!e.shiftKey},ti=function(e){return Ke(e)&&e.shiftKey},Jt=function(e){return setTimeout(e,0)},Gt=function(e,n){var r=-1;return e.every(function(i,o){return n(i)?(r=o,!1):!0}),r},Re=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},Je=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},ni=[],ri=function(e,n){var r=(n==null?void 0:n.document)||document,i=(n==null?void 0:n.trapStack)||ni,o=qt({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:ei,isKeyBackward:ti},n),l={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,s=function(p,h,k){return p&&p[h]!==void 0?p[h]:o[k||h]},u=function(p,h){var k=typeof(h==null?void 0:h.composedPath)=="function"?h.composedPath():void 0;return l.containerGroups.findIndex(function(L){var F=L.container,z=L.tabbableNodes;return F.contains(p)||(k==null?void 0:k.includes(F))||z.find(function(W){return W===p})})},f=function(p){var h=o[p];if(typeof h=="function"){for(var k=arguments.length,L=new Array(k>1?k-1:0),F=1;F<k;F++)L[F-1]=arguments[F];h=h.apply(void 0,L)}if(h===!0&&(h=void 0),!h){if(h===void 0||h===!1)return h;throw new Error("`".concat(p,"` was specified but was not a node, or did not return a node"))}var z=h;if(typeof h=="string"&&(z=r.querySelector(h),!z))throw new Error("`".concat(p,"` as selector refers to no known node"));return z},d=function(){var p=f("initialFocus");if(p===!1)return!1;if(p===void 0||!ht(p,o.tabbableOptions))if(u(r.activeElement)>=0)p=r.activeElement;else{var h=l.tabbableGroups[0],k=h&&h.firstTabbableNode;p=k||f("fallbackFocus")}if(!p)throw new Error("Your focus-trap needs to have at least one focusable element");return p},c=function(){if(l.containerGroups=l.containers.map(function(p){var h=Wr(p,o.tabbableOptions),k=Jr(p,o.tabbableOptions),L=h.length>0?h[0]:void 0,F=h.length>0?h[h.length-1]:void 0,z=k.find(function(G){return Ne(G)}),W=k.slice().reverse().find(function(G){return Ne(G)}),J=!!h.find(function(G){return we(G)>0});return{container:p,tabbableNodes:h,focusableNodes:k,posTabIndexesFound:J,firstTabbableNode:L,lastTabbableNode:F,firstDomTabbableNode:z,lastDomTabbableNode:W,nextTabbableNode:function(V){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ue=h.indexOf(V);return ue<0?oe?k.slice(k.indexOf(V)+1).find(function(me){return Ne(me)}):k.slice(0,k.indexOf(V)).reverse().find(function(me){return Ne(me)}):h[ue+(oe?1:-1)]}}}),l.tabbableGroups=l.containerGroups.filter(function(p){return p.tabbableNodes.length>0}),l.tabbableGroups.length<=0&&!f("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(l.containerGroups.find(function(p){return p.posTabIndexesFound})&&l.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},g=function B(p){if(p!==!1&&p!==r.activeElement){if(!p||!p.focus){B(d());return}p.focus({preventScroll:!!o.preventScroll}),l.mostRecentlyFocusedNode=p,Xr(p)&&p.select()}},m=function(p){var h=f("setReturnFocus",p);return h||(h===!1?!1:p)},y=function(p){var h=p.target,k=p.event,L=p.isBackward,F=L===void 0?!1:L;h=h||Je(k),c();var z=null;if(l.tabbableGroups.length>0){var W=u(h,k),J=W>=0?l.containerGroups[W]:void 0;if(W<0)F?z=l.tabbableGroups[l.tabbableGroups.length-1].lastTabbableNode:z=l.tabbableGroups[0].firstTabbableNode;else if(F){var G=Gt(l.tabbableGroups,function(ct){var dt=ct.firstTabbableNode;return h===dt});if(G<0&&(J.container===h||ht(h,o.tabbableOptions)&&!Ne(h,o.tabbableOptions)&&!J.nextTabbableNode(h,!1))&&(G=W),G>=0){var V=G===0?l.tabbableGroups.length-1:G-1,oe=l.tabbableGroups[V];z=we(h)>=0?oe.lastTabbableNode:oe.lastDomTabbableNode}else Ke(k)||(z=J.nextTabbableNode(h,!1))}else{var ue=Gt(l.tabbableGroups,function(ct){var dt=ct.lastTabbableNode;return h===dt});if(ue<0&&(J.container===h||ht(h,o.tabbableOptions)&&!Ne(h,o.tabbableOptions)&&!J.nextTabbableNode(h))&&(ue=W),ue>=0){var me=ue===l.tabbableGroups.length-1?0:ue+1,Ut=l.tabbableGroups[me];z=we(h)>=0?Ut.firstTabbableNode:Ut.firstDomTabbableNode}else Ke(k)||(z=J.nextTabbableNode(h))}}else z=f("fallbackFocus");return z},T=function(p){var h=Je(p);if(!(u(h,p)>=0)){if(Re(o.clickOutsideDeactivates,p)){a.deactivate({returnFocus:o.returnFocusOnDeactivate});return}Re(o.allowOutsideClick,p)||p.preventDefault()}},O=function(p){var h=Je(p),k=u(h,p)>=0;if(k||h instanceof Document)k&&(l.mostRecentlyFocusedNode=h);else{p.stopImmediatePropagation();var L,F=!0;if(l.mostRecentlyFocusedNode)if(we(l.mostRecentlyFocusedNode)>0){var z=u(l.mostRecentlyFocusedNode),W=l.containerGroups[z].tabbableNodes;if(W.length>0){var J=W.findIndex(function(G){return G===l.mostRecentlyFocusedNode});J>=0&&(o.isKeyForward(l.recentNavEvent)?J+1<W.length&&(L=W[J+1],F=!1):J-1>=0&&(L=W[J-1],F=!1))}}else l.containerGroups.some(function(G){return G.tabbableNodes.some(function(V){return we(V)>0})})||(F=!1);else F=!1;F&&(L=y({target:l.mostRecentlyFocusedNode,isBackward:o.isKeyBackward(l.recentNavEvent)})),g(L||l.mostRecentlyFocusedNode||d())}l.recentNavEvent=void 0},A=function(p){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;l.recentNavEvent=p;var k=y({event:p,isBackward:h});k&&(Ke(p)&&p.preventDefault(),g(k))},v=function(p){if(xr(p)&&Re(o.escapeDeactivates,p)!==!1){p.preventDefault(),a.deactivate();return}(o.isKeyForward(p)||o.isKeyBackward(p))&&A(p,o.isKeyBackward(p))},N=function(p){var h=Je(p);u(h,p)>=0||Re(o.clickOutsideDeactivates,p)||Re(o.allowOutsideClick,p)||(p.preventDefault(),p.stopImmediatePropagation())},E=function(){if(l.active)return Wt.activateTrap(i,a),l.delayInitialFocusTimer=o.delayInitialFocus?Jt(function(){g(d())}):g(d()),r.addEventListener("focusin",O,!0),r.addEventListener("mousedown",T,{capture:!0,passive:!1}),r.addEventListener("touchstart",T,{capture:!0,passive:!1}),r.addEventListener("click",N,{capture:!0,passive:!1}),r.addEventListener("keydown",v,{capture:!0,passive:!1}),a},$=function(){if(l.active)return r.removeEventListener("focusin",O,!0),r.removeEventListener("mousedown",T,!0),r.removeEventListener("touchstart",T,!0),r.removeEventListener("click",N,!0),r.removeEventListener("keydown",v,!0),a},I=function(p){var h=p.some(function(k){var L=Array.from(k.removedNodes);return L.some(function(F){return F===l.mostRecentlyFocusedNode})});h&&g(d())},q=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(I):void 0,R=function(){q&&(q.disconnect(),l.active&&!l.paused&&l.containers.map(function(p){q.observe(p,{subtree:!0,childList:!0})}))};return a={get active(){return l.active},get paused(){return l.paused},activate:function(p){if(l.active)return this;var h=s(p,"onActivate"),k=s(p,"onPostActivate"),L=s(p,"checkCanFocusTrap");L||c(),l.active=!0,l.paused=!1,l.nodeFocusedBeforeActivation=r.activeElement,h==null||h();var F=function(){L&&c(),E(),R(),k==null||k()};return L?(L(l.containers.concat()).then(F,F),this):(F(),this)},deactivate:function(p){if(!l.active)return this;var h=qt({onDeactivate:o.onDeactivate,onPostDeactivate:o.onPostDeactivate,checkCanReturnFocus:o.checkCanReturnFocus},p);clearTimeout(l.delayInitialFocusTimer),l.delayInitialFocusTimer=void 0,$(),l.active=!1,l.paused=!1,R(),Wt.deactivateTrap(i,a);var k=s(h,"onDeactivate"),L=s(h,"onPostDeactivate"),F=s(h,"checkCanReturnFocus"),z=s(h,"returnFocus","returnFocusOnDeactivate");k==null||k();var W=function(){Jt(function(){z&&g(m(l.nodeFocusedBeforeActivation)),L==null||L()})};return z&&F?(F(m(l.nodeFocusedBeforeActivation)).then(W,W),this):(W(),this)},pause:function(p){if(l.paused||!l.active)return this;var h=s(p,"onPause"),k=s(p,"onPostPause");return l.paused=!0,h==null||h(),$(),R(),k==null||k(),this},unpause:function(p){if(!l.paused||!l.active)return this;var h=s(p,"onUnpause"),k=s(p,"onPostUnpause");return l.paused=!1,h==null||h(),c(),E(),R(),k==null||k(),this},updateContainerElements:function(p){var h=[].concat(p).filter(Boolean);return l.containers=h.map(function(k){return typeof k=="string"?r.querySelector(k):k}),l.active&&c(),R(),this}},a.updateContainerElements(e),a};const Hn=()=>(Math.random()+1).toString(36).substring(5);function ii(t){let e,n,r,i,o,l,a,s,u,f,d;return{c(){e=C("div"),n=C("div"),r=C("button"),i=Xe("svg"),o=Xe("path"),a=M(),s=C("div"),u=Q(t[1]),b(o,"fill","none"),b(o,"stroke","currentColor"),b(o,"stroke-linecap","round"),b(o,"stroke-linejoin","round"),b(o,"stroke-width","1"),b(o,"d",l=t[3][t[0]].path),b(i,"viewBox","0 0 16 16"),b(i,"class","svelte-17tr1dn"),b(r,"aria-labelledby",t[4]),b(r,"class","clickable svelte-17tr1dn"),H(r,"open",open),b(s,"class","label svelte-17tr1dn"),b(s,"id",t[4]),b(n,"class","content svelte-17tr1dn"),b(e,"class","icon-button clickable svelte-17tr1dn")},m(c,g){P(c,e,g),w(e,n),w(n,r),w(r,i),w(i,o),w(n,a),w(n,s),w(s,u),f||(d=[re(r,"click",function(){de(t[2])&&t[2].apply(this,arguments)}),re(e,"click",function(){de(t[2])&&t[2].apply(this,arguments)})],f=!0)},p(c,[g]){t=c,g&1&&l!==(l=t[3][t[0]].path)&&b(o,"d",l),g&0&&H(r,"open",open),g&2&&fe(u,t[1])},i:Y,o:Y,d(c){c&&D(e),f=!1,ye(d)}}}function oi(t,e,n){const r={Close:{path:"M 3 3 L 13 13 M 3 13 L 13 3"},Help:{path:"M 8 12 L 8 12 M 8 10 L 8 9 C 8 7 10 8 10 6 A 2 2 0 1 0 6 6 M 8 1.5 A 6.5 6.5 0 0 1 8 14.5 A 6.5 6.5 0 0 1 8 1.5"},Menu:{path:"M 2 4 L 14 4 M 2 8 L 14 8 M 2 12 L 14 12"},Shuffle:{path:"M 5 2 L 2 5 L 5 8 M 2 5 L 12 5 M 11 14 L 14 11 L 11 8 M 14 11 L 4 11"},Undo:{path:"M 5 3 L 2 6 L 5 9 M 2 6 L 10 6 A 3 3 0 1 1 10 13 L 8 13"}};let{icon:i}=e,{label:o}=e,{onClick:l}=e;const a=`${Hn()}-label`;return t.$$set=s=>{"icon"in s&&n(0,i=s.icon),"label"in s&&n(1,o=s.label),"onClick"in s&&n(2,l=s.onClick)},[i,o,l,r,a]}class be extends te{constructor(e){super(),ee(this,e,oi,ii,Z,{icon:0,label:1,onClick:2})}}function li(t){let e,n,r,i,o,l,a,s,u,f,d,c;s=new be({props:{icon:"Close",label:"Close",onClick:t[5]}});const g=t[8].default,m=Tt(g,t,t[7],null);return{c(){e=C("div"),n=M(),r=C("div"),i=C("div"),o=C("h2"),l=Q(t[0]),a=M(),K(s.$$.fragment),u=M(),f=C("div"),m&&m.c(),b(e,"class","backdrop svelte-5i027u"),H(e,"open",t[2]),b(o,"id",t[4]),b(o,"class","svelte-5i027u"),b(i,"class","header svelte-5i027u"),b(f,"class","content svelte-5i027u"),b(r,"class",d="modal "+t[1]+" "+(t[6]?"window-controls-on-left":"")+" svelte-5i027u"),b(r,"role","dialog"),b(r,"aria-labelledby",t[4]),b(r,"id",t[3]),H(r,"open",t[2])},m(y,T){P(y,e,T),P(y,n,T),P(y,r,T),w(r,i),w(i,o),w(o,l),w(i,a),j(s,i,null),w(r,u),w(r,f),m&&m.m(f,null),c=!0},p(y,[T]){(!c||T&4)&&H(e,"open",y[2]),(!c||T&1)&&fe(l,y[0]),m&&m.p&&(!c||T&128)&&Ot(m,g,y,y[7],c?Nt(g,y[7],T,null):Et(y[7]),null),(!c||T&2&&d!==(d="modal "+y[1]+" "+(y[6]?"window-controls-on-left":"")+" svelte-5i027u"))&&b(r,"class",d),(!c||T&6)&&H(r,"open",y[2])},i(y){c||(_(s.$$.fragment,y),_(m,y),c=!0)},o(y){S(s.$$.fragment,y),S(m,y),c=!1},d(y){y&&(D(e),D(n),D(r)),U(s),m&&m.d(y)}}}function ai(t,e,n){var g,m;let{$$slots:r={},$$scope:i}=e,{title:o}=e,{position:l="center"}=e;const a=`modal-${Hn()}`,s=`${a}-title`;let u=!1;ot(()=>{const y=ri(`#${a}`,{clickOutsideDeactivates:!0,onDeactivate:()=>d()});y.activate();const T=document.body.style.overflow;return document.body.style.overflow="hidden",setTimeout(()=>{n(2,u=!0)},0),()=>{y.deactivate(),document.body.style.overflow=T}});const f=lt(),d=()=>{n(2,u=!1),setTimeout(()=>f("close"),125)};let c=((g=navigator.windowControlsOverlay)==null?void 0:g.visible)&&((m=navigator.windowControlsOverlay)==null?void 0:m.getTitlebarAreaRect().left)>0;return t.$$set=y=>{"title"in y&&n(0,o=y.title),"position"in y&&n(1,l=y.position),"$$scope"in y&&n(7,i=y.$$scope)},[o,l,u,a,s,d,c,i,r]}class at extends te{constructor(e){super(),ee(this,e,ai,li,Z,{title:0,position:1})}}function si(t){let e;return{c(){e=Q(t[0])},m(n,r){P(n,e,r)},p(n,r){r&1&&fe(e,n[0])},d(n){n&&D(e)}}}function ui(t){let e,n,r,i,o;const l=t[6].default,a=Tt(l,t,t[5],null),s=a||si(t);return{c(){e=C("button"),s&&s.c(),b(e,"aria-pressed",n=t[1]?"true":"false"),e.disabled=t[1],b(e,"class","svelte-fhaqyy"),H(e,"pressed",t[1])},m(u,f){P(u,e,f),s&&s.m(e,null),r=!0,i||(o=re(e,"click",function(){de(t[2])&&t[2].apply(this,arguments)}),i=!0)},p(u,[f]){t=u,a?a.p&&(!r||f&32)&&Ot(a,l,t,t[5],r?Nt(l,t[5],f,null):Et(t[5]),null):s&&s.p&&(!r||f&1)&&s.p(t,r?f:-1),(!r||f&2&&n!==(n=t[1]?"true":"false"))&&b(e,"aria-pressed",n),(!r||f&2)&&(e.disabled=t[1]),(!r||f&2)&&H(e,"pressed",t[1])},i(u){r||(_(s,u),r=!0)},o(u){S(s,u),r=!1},d(u){u&&D(e),s&&s.d(u),i=!1,o()}}}function fi(t,e,n){let r,i,o;pe(t,$e,c=>n(4,o=c));let{$$slots:l={},$$scope:a}=e,{target:s}=e,{value:u}=e;const{update:f}=$e,d=()=>{};return t.$$set=c=>{"target"in c&&n(3,s=c.target),"value"in c&&n(0,u=c.value),"$$scope"in c&&n(5,a=c.$$scope)},t.$$.update=()=>{t.$$.dirty&25&&n(1,i=o[s]===u),t.$$.dirty&11&&n(2,r=i?d:()=>f(c=>({...c,[s]:u})))},[u,i,r,s,o,a,l]}class ce extends te{constructor(e){super(),ee(this,e,fi,ui,Z,{target:3,value:0})}}function Qt(t){let e,n;return e=new be({props:{icon:"Help",label:"Help",onClick:t[3].help}}),{c(){K(e.$$.fragment)},m(r,i){j(e,r,i),n=!0},p(r,i){const o={};i&8&&(o.onClick=r[3].help),e.$set(o)},i(r){n||(_(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function Yt(t){let e,n;return e=new be({props:{icon:"Shuffle",label:"Shuffle",onClick:t[3].shuffle}}),{c(){K(e.$$.fragment)},m(r,i){j(e,r,i),n=!0},p(r,i){const o={};i&8&&(o.onClick=r[3].shuffle),e.$set(o)},i(r){n||(_(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function Zt(t){let e,n;return e=new be({props:{icon:"Undo",label:"Undo",onClick:t[3].undo}}),{c(){K(e.$$.fragment)},m(r,i){j(e,r,i),n=!0},p(r,i){const o={};i&8&&(o.onClick=r[3].undo),e.$set(o)},i(r){n||(_(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function Xt(t){let e,n;return e=new at({props:{position:"left",title:"Menu",$$slots:{default:[gi]},$$scope:{ctx:t}}}),e.$on("close",t[4]("close")),{c(){K(e.$$.fragment)},m(r,i){j(e,r,i),n=!0},p(r,i){const o={};i&128&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(_(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function ci(t){let e;return{c(){e=Q("Pileon solitaire")},m(n,r){P(n,e,r)},d(n){n&&D(e)}}}function di(t){let e;return{c(){e=Q("Deck of cards")},m(n,r){P(n,e,r)},d(n){n&&D(e)}}}function gi(t){let e,n,r,i,o,l,a,s,u,f,d,c,g,m,y,T,O,A,v,N,E,$,I,q,R,B,p,h,k,L,F,z,W,J,G;return i=new ce({props:{target:"game",value:"pileon",$$slots:{default:[ci]},$$scope:{ctx:t}}}),a=new ce({props:{target:"game",value:"deck",$$slots:{default:[di]},$$scope:{ctx:t}}}),A=new ce({props:{target:"colors",value:"default"}}),N=new ce({props:{target:"colors",value:"standard"}}),$=new ce({props:{target:"colors",value:"four-color"}}),h=new ce({props:{target:"size",value:"default"}}),L=new ce({props:{target:"size",value:"bridge"}}),z=new ce({props:{target:"size",value:"poker"}}),J=new ce({props:{target:"size",value:"small"}}),{c(){e=C("div"),n=C("ul"),r=C("li"),K(i.$$.fragment),o=M(),l=C("li"),K(a.$$.fragment),s=M(),u=C("div"),f=M(),d=C("h3"),d.textContent="Settings",c=M(),g=C("table"),m=C("tr"),y=C("th"),y.textContent="Colors:",T=M(),O=C("td"),K(A.$$.fragment),v=Q(" / "),K(N.$$.fragment),E=Q(" / "),K($.$$.fragment),I=M(),q=C("tr"),R=C("th"),R.textContent="Size:",B=M(),p=C("td"),K(h.$$.fragment),k=Q(" / "),K(L.$$.fragment),F=Q(" / "),K(z.$$.fragment),W=Q(" / "),K(J.$$.fragment),b(r,"class","svelte-vd9w7o"),b(l,"class","svelte-vd9w7o"),b(n,"class","svelte-vd9w7o"),b(u,"class","whitespace svelte-vd9w7o"),b(y,"class","svelte-vd9w7o"),b(O,"class","svelte-vd9w7o"),b(R,"class","svelte-vd9w7o"),b(p,"class","svelte-vd9w7o"),b(g,"class","svelte-vd9w7o"),b(e,"class","drawer svelte-vd9w7o")},m(V,oe){P(V,e,oe),w(e,n),w(n,r),j(i,r,null),w(n,o),w(n,l),j(a,l,null),w(e,s),w(e,u),w(e,f),w(e,d),w(e,c),w(e,g),w(g,m),w(m,y),w(m,T),w(m,O),j(A,O,null),w(O,v),j(N,O,null),w(O,E),j($,O,null),w(g,I),w(g,q),w(q,R),w(q,B),w(q,p),j(h,p,null),w(p,k),j(L,p,null),w(p,F),j(z,p,null),w(p,W),j(J,p,null),G=!0},p(V,oe){const ue={};oe&128&&(ue.$$scope={dirty:oe,ctx:V}),i.$set(ue);const me={};oe&128&&(me.$$scope={dirty:oe,ctx:V}),a.$set(me)},i(V){G||(_(i.$$.fragment,V),_(a.$$.fragment,V),_(A.$$.fragment,V),_(N.$$.fragment,V),_($.$$.fragment,V),_(h.$$.fragment,V),_(L.$$.fragment,V),_(z.$$.fragment,V),_(J.$$.fragment,V),G=!0)},o(V){S(i.$$.fragment,V),S(a.$$.fragment,V),S(A.$$.fragment,V),S(N.$$.fragment,V),S($.$$.fragment,V),S(h.$$.fragment,V),S(L.$$.fragment,V),S(z.$$.fragment,V),S(J.$$.fragment,V),G=!1},d(V){V&&D(e),U(i),U(a),U(A),U(N),U($),U(h),U(L),U(z),U(J)}}}function mi(t){let e,n,r,i,o,l,a,s,u,f,d,c,g,m,y,T;o=new be({props:{icon:"Menu",label:"Menu",onClick:t[4]("open")}});let O=t[3].help!==void 0&&Qt(t),A=t[3].shuffle!==void 0&&Yt(t),v=t[3].undo!==void 0&&Zt(t),N=t[0]&&Xt(t);return{c(){e=C("div"),n=C("div"),r=M(),i=C("div"),K(o.$$.fragment),l=M(),O&&O.c(),a=M(),A&&A.c(),s=M(),v&&v.c(),f=M(),d=C("div"),c=M(),N&&N.c(),g=At(),b(n,"class","window-controls svelte-vd9w7o"),b(i,"class",u="menu "+t[2]+" svelte-vd9w7o"),b(d,"class","window-controls svelte-vd9w7o"),b(e,"class","titlebar svelte-vd9w7o")},m(E,$){P(E,e,$),w(e,n),w(e,r),w(e,i),j(o,i,null),w(i,l),O&&O.m(i,null),w(i,a),A&&A.m(i,null),w(i,s),v&&v.m(i,null),t[6](i),w(e,f),w(e,d),P(E,c,$),N&&N.m(E,$),P(E,g,$),m=!0,y||(T=re(window,"resize",t[5]),y=!0)},p(E,[$]){E[3].help!==void 0?O?(O.p(E,$),$&8&&_(O,1)):(O=Qt(E),O.c(),_(O,1),O.m(i,a)):O&&(X(),S(O,1,1,()=>{O=null}),x()),E[3].shuffle!==void 0?A?(A.p(E,$),$&8&&_(A,1)):(A=Yt(E),A.c(),_(A,1),A.m(i,s)):A&&(X(),S(A,1,1,()=>{A=null}),x()),E[3].undo!==void 0?v?(v.p(E,$),$&8&&_(v,1)):(v=Zt(E),v.c(),_(v,1),v.m(i,null)):v&&(X(),S(v,1,1,()=>{v=null}),x()),(!m||$&4&&u!==(u="menu "+E[2]+" svelte-vd9w7o"))&&b(i,"class",u),E[0]?N?(N.p(E,$),$&1&&_(N,1)):(N=Xt(E),N.c(),_(N,1),N.m(g.parentNode,g)):N&&(X(),S(N,1,1,()=>{N=null}),x())},i(E){m||(_(o.$$.fragment,E),_(O),_(A),_(v),_(N),m=!0)},o(E){S(o.$$.fragment,E),S(O),S(A),S(v),S(N),m=!1},d(E){E&&(D(e),D(c),D(g)),U(o),O&&O.d(),A&&A.d(),v&&v.d(),t[6](null),N&&N.d(E),y=!1,T()}}}function hi(t,e,n){let r;pe(t,Fe,f=>n(3,r=f));let i=!1;const o=f=>d=>{n(0,i=f==="open"),d.stopPropagation()};let l,a="";const s=()=>{var c,g;if(!((c=navigator.windowControlsOverlay)!=null&&c.visible))return;const f=l.getBoundingClientRect(),d=(g=navigator.windowControlsOverlay)==null?void 0:g.getTitlebarAreaRect();d.left>f.left||d.right<f.right?n(2,a="below-titlebar"):n(2,a="")};ot(s);function u(f){pt[f?"unshift":"push"](()=>{l=f,n(1,l)})}return[i,l,a,r,o,s,u]}class vi extends te{constructor(e){super(),ee(this,e,hi,mi,Z,{})}}var ie={},ae={};function Le(t){"@babel/helpers - typeof";return Le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(t)}Object.defineProperty(ae,"__esModule",{value:!0});var _t=ae.Cards=ae.CardSuits=Zn=ae.CardStringType=ae.Card=void 0;function ge(t,e,n){return e=Jn(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Jn(r.key),r)}}function Wn(t,e,n){return e&&xt(t.prototype,e),n&&xt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jn(t){var e=pi(t,"string");return Le(e)==="symbol"?e:String(e)}function pi(t,e){if(Le(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Le(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bi(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Be(t,e)}function yi(t){var e=Qn();return function(){var r=Ve(t),i;if(e){var o=Ve(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Gn(this,i)}}function Gn(t,e){if(e&&(Le(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _i(t)}function _i(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wt(t){var e=typeof Map=="function"?new Map:void 0;return wt=function(r){if(r===null||!wi(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return Ye(r,arguments,Ve(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Be(i,r)},wt(t)}function Ye(t,e,n){return Qn()?Ye=Reflect.construct.bind():Ye=function(i,o,l){var a=[null];a.push.apply(a,o);var s=Function.bind.apply(i,a),u=new s;return l&&Be(u,l.prototype),u},Ye.apply(null,arguments)}function Qn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wi(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function Be(t,e){return Be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Be(t,e)}function Ve(t){return Ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ve(t)}function Si(t,e){return Ni(t)||Ti(t,e)||Ci(t,e)||ki()}function ki(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ci(t,e){if(t){if(typeof t=="string")return en(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return en(t,e)}}function en(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ti(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,l,a=[],s=!0,u=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);s=!0);}catch(f){u=!0,i=f}finally{try{if(!s&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return a}}function Ni(t){if(Array.isArray(t))return t}var Yn=function(t){return t[t.Hearts=0]="Hearts",t[t.Spades=1]="Spades",t[t.Diamonds=2]="Diamonds",t[t.Clubs=3]="Clubs",t}({});ae.CardSuits=Yn;var Pt=function(t){return t.Char="CHAR",t.Short="SHORT",t.Long="LONG",t.ShortEmoji="SHORT_EMOJI",t.ShortSuit="SHORT_SUIT",t.LongSuit="LONG_SUIT",t.EmojiSuit="EMOJI_SUIT",t.ShortValue="SHORT_VALUE",t.LongValue="LONG_VALUE",t}({}),Zn=ae.CardStringType=Pt,Oi={"♥":0,"♠":1,"♦":2,"♣":3,h:0,s:1,d:2,c:3},Ei={A:1,T:10,J:11,Q:12,K:13},Ai=function(e){var n=/^([2-9ATJQK]{1}|10)([♥♠♦♣hsdc]{1})$/,r=e.match(n);if(!r)throw new Error('Could not parse card from "'.concat(e,'". Input should match ').concat(n,"."));var i=Si(r,3);i[0];var o=i[1],l=i[2],a=Number(o),s=(Number.isNaN(a)?Ei[o]:a)-1;return Oi[l]*13+s},Di=function(e){var n=/^_[a-z]+$/i;if(e.match(n)){var r=Array.from(e.slice(1));return r.map(function(i){var o=i.charCodeAt(0);return o<91?o-65:o-97+26})}return e.split(/[\s,]+/)},Pi=function(t){bi(n,t);var e=yi(n);function n(r){var i;if(qn(this,n),typeof r=="number")i=e.call(this,r);else{i=e.call(this);var o=Array.isArray(r)?r:Di(r);o.forEach(function(l){return i.push(new se(l))})}return Gn(i)}return Wn(n,[{key:"toString",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:se.StringType.Short;return i===Pt.Char?"_"+this.map(function(o){return o.toString(i)}).join(""):this.map(function(o){return o.toString(i)}).join(", ")}}]),n}(wt(Array));_t=ae.Cards=Pi;var $i=function(e){return typeof e=="string"?Ai(e):e instanceof se?e.num:e},se=function(){function t(e){qn(this,t),ge(this,"num",void 0),this.num=$i(e)}return Wn(t,[{key:"suit",get:function(){return t.getSuit(this.num)}},{key:"value",get:function(){return t.getValue(this.num)}},{key:"toString",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.StringType.Long;switch(n){case t.StringType.Short:return this.toString(t.StringType.ShortValue)+this.toString(t.StringType.ShortSuit);case t.StringType.ShortEmoji:return this.toString(t.StringType.ShortValue)+this.toString(t.StringType.EmojiSuit);case t.StringType.Long:return this.toString(t.StringType.LongValue)+" of "+this.toString(t.StringType.LongSuit);case t.StringType.Char:return t.chars[this.num];case t.StringType.ShortSuit:return t.shortSuits[this.suit];case t.StringType.LongSuit:return t.longSuits[this.suit];case t.StringType.EmojiSuit:return t.emojiSuits[this.suit];case t.StringType.ShortValue:return t.shortValues[this.value===13?0:this.value];case t.StringType.LongValue:return t.longValues[this.value===13?0:this.value]}throw new Error("Unsupported output type")}}],[{key:"fromJSON",value:function(n){var r=n.num;return new t(r)}},{key:"getSuit",value:function(n){return Math.floor(n/13)%4}},{key:"getValue",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return n%13||r?n%13:13}},{key:"compare",value:function(n,r){return r.value-n.value}}]),t}();ae.Card=se;ge(se,"Suits",Yn);ge(se,"StringType",Pt);ge(se,"chars","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz");ge(se,"emojiSuits",["♥","♠","♦","♣"]);ge(se,"shortSuits",["h","s","d","c"]);ge(se,"longSuits",["hearts","spades","diamonds","clubs"]);ge(se,"shortValues",["A","2","3","4","5","6","7","8","9","T","J","Q","K"]);ge(se,"longValues",["ace","two","three","four","five","six","seven","eight","nine","ten","jack","queen","king"]);var st={},ne={};Object.defineProperty(ne,"__esModule",{value:!0});ne.uniqueFilter=ne.shuffle=ne.last=ne.isSorted=ne.getCombinationsHelper=ne.getCombinations=ne.arraySubtraction=void 0;var Fi=function(e,n){return e.filter(function(r){return!n.includes(r)})};ne.arraySubtraction=Fi;var Xn=function t(e,n,r,i,o){if(i.length>=n)o.push(i);else for(var l=r;l<e.length;l++)t(e,n,l+1,i.concat(e[l]),o)};ne.getCombinationsHelper=Xn;var Li=function(e,n){var r=[];return Xn(e,n,0,[],r),r};ne.getCombinations=Li;var Mi=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=r?-1:1;try{return e.reduce(function(o,l){if(i*n(o,l)<=0)return l;throw new Error}),!0}catch{return!1}};ne.isSorted=Mi;var Ri=function(e){return e[e.length-1]};ne.last=Ri;var Ii=function(e){for(var n=e.length-1;n>0;n--){var r=Math.floor(Math.random()*(n+1)),i=[e[r],e[n]];e[n]=i[0],e[r]=i[1]}return e};ne.shuffle=Ii;var ji=function(e,n,r){return r.indexOf(e)===n};ne.uniqueFilter=ji;Object.defineProperty(st,"__esModule",{value:!0});st.Deck=void 0;var tn=ne,Ie=ae;function He(t){"@babel/helpers - typeof";return He=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(t)}function Ui(t){return Vi(t)||Bi(t)||zi(t)||Ki()}function Ki(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zi(t,e){if(t){if(typeof t=="string")return St(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return St(t,e)}}function Bi(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Vi(t){if(Array.isArray(t))return St(t)}function St(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xn(r.key),r)}}function qi(t,e,n){return e&&nn(t.prototype,e),n&&nn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Wi(t,e,n){return e=xn(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xn(t){var e=Ji(t,"string");return He(e)==="symbol"?e:String(e)}function Ji(t,e){if(He(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(He(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Gi=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;Hi(this,t),Wi(this,"cards",void 0),this.cards=Ui(Array(52*n).keys()).map(function(r){return new Ie.Card(r)}),e&&this.shuffle()}return qi(t,[{key:"shuffle",value:function(){(0,tn.shuffle)(this.cards)}},{key:"isShuffled",value:function(){return!(0,tn.isSorted)(this.cards,function(n,r){return n.num-r.num})}},{key:"cardsRemaining",get:function(){return this.cards.length}},{key:"pop",value:function(){return this.cards.pop()}},{key:"popN",value:function(n){for(var r=[],i,o=0;o<n&&(i=this.pop());o++)r.push(i);return r}},{key:"toString",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ie.Card.StringType.Char;return new Ie.Cards(this.cards).toString(n)}}],[{key:"fromJSON",value:function(n){var r=n.cards,i=new t(!1,0);return i.cards=r.map(function(o){return Ie.Card.fromJSON(o)}),i}},{key:"fromString",value:function(n){var r=new t(!1,0);return r.cards=new Ie.Cards(n),r}}]),t}();st.Deck=Gi;var Me={},ut={};Object.defineProperty(ut,"__esModule",{value:!0});ut.uuid4=void 0;var Qi=function(e){var n;do n=Math.random().toString(16).slice(2,e+2);while(n.length<e&&e<=12);return n},Yi=function(){var e=[8,4,4,4,12],n=e.map(Qi).join("-").split("");return n[14]="4",n[19]=(Math.floor(Math.random()*64)%4+8).toString(16),n.join("")};ut.uuid4=Yi;Object.defineProperty(Me,"__esModule",{value:!0});Me.HandRank=Me.Hand=void 0;var Oe=ne,he=ae,Zi=ut;function ve(t){"@babel/helpers - typeof";return ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(t)}function _e(t){return to(t)||eo(t)||xi(t)||Xi()}function Xi(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xi(t,e){if(t){if(typeof t=="string")return kt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kt(t,e)}}function eo(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function to(t){if(Array.isArray(t))return kt(t)}function kt(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function no(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,er(r.key),r)}}function ro(t,e,n){return e&&rn(t.prototype,e),n&&rn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ze(t,e,n){return e=er(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function er(t){var e=io(t,"string");return ve(e)==="symbol"?e:String(e)}function io(t,e){if(ve(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ve(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tr=function(t){return t[t.High=0]="High",t[t.Pair=5]="Pair",t[t.TwoPairs=10]="TwoPairs",t[t.ThreeOfAKind=15]="ThreeOfAKind",t[t.Straight=20]="Straight",t[t.Flush=25]="Flush",t[t.FullHouse=30]="FullHouse",t[t.FourOfAKind=35]="FourOfAKind",t[t.StraightFlush=40]="StraightFlush",t[t.FiveOfAKind=45]="FiveOfAKind",t}({});Me.HandRank=tr;var nr=function(){function t(e,n,r){no(this,t),Ze(this,"uuid",void 0),Ze(this,"rank",void 0),Ze(this,"cards",void 0),this.rank=e,this.cards=n,this.uuid=r||(0,Zi.uuid4)()}return ro(t,[{key:"getCardsString",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:he.Card.StringType.Short;return new he.Cards(this.cards).toString(n)}},{key:"toString",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:he.Card.StringType.Short,i=he.Card.StringType.LongValue,o=function(s){return n.cards[s].toString(i)},l=this.getCardsString(r);switch(this.rank){case t.Rank.FiveOfAKind:return"Five of a kind, ".concat(o(0),"s (").concat(l,")");case t.Rank.StraightFlush:return"Straigth flush, ".concat(o(0)," high (").concat(l,")");case t.Rank.FourOfAKind:return"Four of a kind, ".concat(o(0),"s (").concat(l,")");case t.Rank.FullHouse:return"Full house, ".concat(o(0),"s over ").concat(o(3),"s (").concat(l,")");case t.Rank.Flush:return"Flush, ".concat(o(0)," high (").concat(l,")");case t.Rank.Straight:return"Straigth, ".concat(o(0)," high (").concat(l,")");case t.Rank.ThreeOfAKind:return"Three of a kind, ".concat(o(0),"s (").concat(l,")");case t.Rank.TwoPairs:return"Two pairs, ".concat(o(0),"s and ").concat(o(2),"s (").concat(l,")");case t.Rank.Pair:return"Pair, ".concat(o(0),"s (").concat(l,")");case t.Rank.High:return"".concat(o(0).replace(/^\w/,function(a){return a.toUpperCase()})," high (").concat(l,")")}throw new Error("Unsupported rank value")}}],[{key:"fromJSON",value:function(n){var r=n.rank,i=n.cards,o=n.uuid;return new t(r,i.map(he.Card.fromJSON),o)}},{key:"solve",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,i,o;return(i=t.isNumOfAKind(5,n))?o=t.Rank.FiveOfAKind:(i=t.isStraightFlush(n,r))?o=t.Rank.StraightFlush:(i=t.isNumOfAKind(4,n))?o=t.Rank.FourOfAKind:(i=t.isFullHouse(n))?o=t.Rank.FullHouse:(i=t.isFlush(n,r))?o=t.Rank.Flush:(i=t.isStraight(n,r))?o=t.Rank.Straight:(i=t.isNumOfAKind(3,n))?o=t.Rank.ThreeOfAKind:(i=t.isTwoPairs(n))?o=t.Rank.TwoPairs:(i=t.isNumOfAKind(2,n))?o=t.Rank.Pair:(i=[],o=t.Rank.High),i=t.fillWithKickers(i,n),new t(o,i)}},{key:"solveHoldEm",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(i===0)return t.solve([].concat(_e(n),_e(r)));for(var o=(0,Oe.getCombinations)(n,n.length-i),l=(0,Oe.getCombinations)(r,Math.min(r.length,i)),a=[],s=0;s<o.length;s++)for(var u=0;u<l.length;u++)a.push(t.solve([].concat(_e(o[s]),_e(l[u]))));return t.max.apply(t,a)}},{key:"compare",value:function(n,r){var i;if(n.cards.length!==r.cards.length)throw new Error("Comparing hands with different number of cards");if((i=r.rank-n.rank)!==0)return i;for(var o=0;o<n.cards.length;o++)if((i=he.Card.compare(n.cards[o],r.cards[o]))!==0)return i;return 0}},{key:"winners",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=t.max.apply(t,r);return r.filter(function(l){return!t.compare(l,o)})}},{key:"max",value:function(){for(var n=function(a,s){return t.compare(a,s)<0?a:s},r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return i.reduce(function(l,a){return n(l,a)})}},{key:"fillWithKickers",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5;return r=(0,Oe.arraySubtraction)(r,n).sort(he.Card.compare),[].concat(_e(n),_e(r)).slice(0,i)}},{key:"getUniqueValues",value:function(n){return n.map(function(r){return r.value}).filter(Oe.uniqueFilter).sort(function(r,i){return i-r})}},{key:"isNumOfAKind",value:function(n,r){for(var i=t.getUniqueValues(r),o,l=function(f){if(o=r.filter(function(d){return d.value==i[f]}),o.length>=n)return{v:o}},a=0;a<i.length;a++){var s=l(a);if(ve(s)==="object")return s.v}return!1}},{key:"isNumOfAKindCombination",value:function(n,r){for(var i=[],o=0;o<n.length;o++){var l=t.isNumOfAKind(n[o],(0,Oe.arraySubtraction)(r,i));if(l===!1)return!1;l=l,i.push.apply(i,_e(l))}return i}},{key:"isStraightFlush",value:function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,i=[],o=function(u){if(i=n.filter(function(d){return d.suit===u}),i.length<r)return"continue";var f=t.isStraight(i,r);if(f)return{v:f}},l=0;l<4;l++){var a=o(l);if(a!=="continue"&&ve(a)==="object")return a.v}return!1}},{key:"isFullHouse",value:function(n){return t.isNumOfAKindCombination([3,2],n)}},{key:"isFlush",value:function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,i=function(s){var u=n.filter(function(f){return f.suit==s});if(u.length>=r)return{v:u.sort(he.Card.compare).slice(0,r)}},o=0;o<4;o++){var l=i(o);if(ve(l)==="object")return l.v}return!1}},{key:"isStraight",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,i=t.getUniqueValues(n);if(i.length<r)return!1;i.includes(13)&&i.push(0);for(var o=[i[0]],l=1;l<i.length&&o.length<r;l++)(0,Oe.last)(o)-i[l]===1?o.push(i[l]):o=[i[l]];return o.length==r?o.map(function(a){return n.find(function(s){return s.value===(a||13)})}):!1}},{key:"isTwoPairs",value:function(n){return t.isNumOfAKindCombination([2,2],n)}}]),t}();Me.Hand=nr;Ze(nr,"Rank",tr);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Card",{enumerable:!0,get:function(){return e.Card}}),Object.defineProperty(t,"CardStringType",{enumerable:!0,get:function(){return e.CardStringType}}),Object.defineProperty(t,"Cards",{enumerable:!0,get:function(){return e.Cards}}),Object.defineProperty(t,"Deck",{enumerable:!0,get:function(){return n.Deck}}),Object.defineProperty(t,"Hand",{enumerable:!0,get:function(){return r.Hand}});var e=ae,n=st,r=Me})(ie);const oo=4.5,lo=5,ao=3,on=7,so=5,rr=t=>{switch(t){case"bridge":return{height:on,width:oo};case"poker":return{height:on,width:lo};case"small":return{height:so,width:ao}}},$t="card-appearance",uo={size:"bridge",fourColor:!1},fo=({size:t,colors:e})=>({size:t==="default"?"poker":t,fourColor:e==="four-color"}),ir=t=>{const e=Dt(uo,n=>($e.subscribe(r=>n(t(r))),()=>{}));return br($t,e),e},Ft=()=>Mn($t),co=t=>{const e=Mn($t);if(e){const n=gr($e);e.set(t(n))}},Ct=(t,e,n={})=>r=>{(Array.isArray(t)?t:[t]).includes(r.code)&&e!==void 0&&(n.preventDefault&&r.preventDefault(),e())};function go(t){let e,n;return{c(){e=Xe("svg"),n=Xe("path"),b(n,"d",t[1]),b(n,"fill","CurrentColor"),b(e,"viewBox","0 0 16 20"),b(e,"class","svelte-1jimf84"),H(e,"flip",t[0])},m(r,i){P(r,e,i),w(e,n)},p(r,[i]){i&2&&b(n,"d",r[1]),i&1&&H(e,"flip",r[0])},i:Y,o:Y,d(r){r&&D(e)}}}function mo(t,e,n){let r,{suit:i=null}=e,{flip:o=!1}=e;const l=a=>{switch(a){case"hearts":return"M 8 2 C 9 0 11 0 12 0 C 13 0 16 1 16 6 C 16 8 15.5 10 14 12 L 8 20 L 2 12 C 0.5 10 0 8 0 6 C 0 1 3 0 4 0 C 5 0 7 0 8 2";case"spades":return"M 8 0 L 13 5 C 16 8 16 10 16 12 C 16 14 14 16 12 16 C 11 16 9 16 8 14 L 12 20 L 4 20 L 8 14 C 7 16 5 16 4 16 C 2 16 0 14 0 12 C 0 10 0 8 3 5 L 8 0";case"diamonds":return"M 8 0 L 16 10 L 8 20 L 0 10 L 8 0";case"clubs":return"M 8 0 C 10 0 12 2 12 4 C 12 6 11 8 8 10 C 9 8 10 7 12 7 C 14 7 16 9 16 12 C 16 14 14 16 12 16 C 11 16 9 16 8 14 L 12 20 L 4 20 L 8 14 C 7 16 5 16 4 16 C 2 16 0 14 0 12 C 0 9 2 7 4 7 C 6 7 7 8 8 10 C 5 8 4 6 4 4 C 4 2 6 0 8 0";default:return null}};return t.$$set=a=>{"suit"in a&&n(2,i=a.suit),"flip"in a&&n(0,o=a.flip)},t.$$.update=()=>{t.$$.dirty&4&&n(1,r=l(i))},[o,r,i]}class or extends te{constructor(e){super(),ee(this,e,mo,go,Z,{suit:2,flip:0})}}function ln(t,e,n){const r=t.slice();return r[5]=e[n],r}function an(t,e,n){const r=t.slice();return r[8]=e[n],r}function sn(t){let e,n,r;return n=new or({props:{suit:t[0],flip:t[8].toLowerCase()==="d"}}),{c(){e=C("span"),K(n.$$.fragment),b(e,"class","svelte-1sm49dl")},m(i,o){P(i,e,o),j(n,e,null),r=!0},p(i,o){const l={};o&1&&(l.suit=i[0]),o&2&&(l.flip=i[8].toLowerCase()==="d"),n.$set(l)},i(i){r||(_(n.$$.fragment,i),r=!0)},o(i){S(n.$$.fragment,i),r=!1},d(i){i&&D(e),U(n)}}}function un(t){let e,n,r,i,o=le(t[5].split("")),l=[];for(let s=0;s<o.length;s+=1)l[s]=sn(an(t,o,s));const a=s=>S(l[s],1,1,()=>{l[s]=null});return{c(){e=C("div");for(let s=0;s<l.length;s+=1)l[s].c();n=M(),b(e,"class",r="row "+t[3](t[5])+" svelte-1sm49dl")},m(s,u){P(s,e,u);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(e,null);w(e,n),i=!0},p(s,u){if(u&7){o=le(s[5].split(""));let f;for(f=0;f<o.length;f+=1){const d=an(s,o,f);l[f]?(l[f].p(d,u),_(l[f],1)):(l[f]=sn(d),l[f].c(),_(l[f],1),l[f].m(e,n))}for(X(),f=o.length;f<l.length;f+=1)a(f);x()}(!i||u&2&&r!==(r="row "+s[3](s[5])+" svelte-1sm49dl"))&&b(e,"class",r)},i(s){if(!i){for(let u=0;u<o.length;u+=1)_(l[u]);i=!0}},o(s){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)S(l[u]);i=!1},d(s){s&&D(e),Pe(l,s)}}}function ho(t){let e,n,r=le(t[2](t[1])),i=[];for(let l=0;l<r.length;l+=1)i[l]=un(ln(t,r,l));const o=l=>S(i[l],1,1,()=>{i[l]=null});return{c(){e=C("div");for(let l=0;l<i.length;l+=1)i[l].c();b(e,"class","center-pattern svelte-1sm49dl")},m(l,a){P(l,e,a);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(e,null);n=!0},p(l,[a]){if(a&15){r=le(l[2](l[1]));let s;for(s=0;s<r.length;s+=1){const u=ln(l,r,s);i[s]?(i[s].p(u,a),_(i[s],1)):(i[s]=un(u),i[s].c(),_(i[s],1),i[s].m(e,null))}for(X(),s=r.length;s<i.length;s+=1)o(s);x()}},i(l){if(!n){for(let a=0;a<r.length;a+=1)_(i[a]);n=!0}},o(l){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)S(i[a]);n=!1},d(l){l&&D(e),Pe(i,l)}}}function vo(t,e,n){let{suit:r}=e,{rank:i}=e;const o={A:["U"],2:["U","D"],3:["U","U","D"],4:["UU","DD"],5:["UU","U","DD"],6:["UU","UU","DD"],7:["UU","u","UU","DD"],8:["UU","UU","DD","DD"],9:["UU","u","UU","DD","DD"],10:["UU","u","UU","DD","d","DD"]},l=s=>o[s]??[],a=s=>s.toUpperCase()===s?"grow":"";return t.$$set=s=>{"suit"in s&&n(0,r=s.suit),"rank"in s&&n(1,i=s.rank)},[r,i,l,a]}class po extends te{constructor(e){super(),ee(this,e,vo,ho,Z,{suit:0,rank:1})}}function bo(t){let e,n;const r=t[1].default,i=Tt(r,t,t[0],null);return{c(){e=C("span"),i&&i.c(),b(e,"class","screen-reader-only svelte-3uotpv")},m(o,l){P(o,e,l),i&&i.m(e,null),n=!0},p(o,[l]){i&&i.p&&(!n||l&1)&&Ot(i,r,o,o[0],n?Nt(r,o[0],l,null):Et(o[0]),null)},i(o){n||(_(i,o),n=!0)},o(o){S(i,o),n=!1},d(o){o&&D(e),i&&i.d(o)}}}function yo(t,e,n){let{$$slots:r={},$$scope:i}=e;return t.$$set=o=>{"$$scope"in o&&n(0,i=o.$$scope)},[i,r]}class _o extends te{constructor(e){super(),ee(this,e,yo,bo,Z,{})}}function fn(t,e,n){const r=t.slice();return r[16]=e[n],r}function cn(t){let e,n;return e=new _o({props:{$$slots:{default:[wo]},$$scope:{ctx:t}}}),{c(){K(e.$$.fragment)},m(r,i){j(e,r,i),n=!0},p(r,i){const o={};i&524320&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(_(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function wo(t){let e;return{c(){e=Q(t[5])},m(n,r){P(n,e,r)},p(n,r){r&32&&fe(e,n[5])},d(n){n&&D(e)}}}function dn(t){let e,n;return e=new po({props:{suit:t[7],rank:t[8]}}),{c(){K(e.$$.fragment)},m(r,i){j(e,r,i),n=!0},p(r,i){const o={};i&128&&(o.suit=r[7]),i&256&&(o.rank=r[8]),e.$set(o)},i(r){n||(_(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function gn(t){let e,n,r,i,o,l,a,s,u,f,d;a=new or({props:{suit:t[7]}});let c=!t[10]&&dn(t);return{c(){e=C("div"),n=C("div"),r=Q(t[8]),o=M(),l=C("div"),K(a.$$.fragment),s=M(),u=C("div"),c&&c.c(),f=M(),b(n,"class",i="rank rank-"+t[8]+" svelte-hurvu3"),b(l,"class","suit svelte-hurvu3"),b(e,"aria-hidden","true"),b(e,"class",t[16]+" label svelte-hurvu3"),b(u,"class","center svelte-hurvu3"),H(u,"face",t[6])},m(g,m){P(g,e,m),w(e,n),w(n,r),w(e,o),w(e,l),j(a,l,null),P(g,s,m),P(g,u,m),c&&c.m(u,null),w(u,f),d=!0},p(g,m){(!d||m&256)&&fe(r,g[8]),(!d||m&256&&i!==(i="rank rank-"+g[8]+" svelte-hurvu3"))&&b(n,"class",i);const y={};m&128&&(y.suit=g[7]),a.$set(y),g[10]?c&&(X(),S(c,1,1,()=>{c=null}),x()):c?(c.p(g,m),m&1024&&_(c,1)):(c=dn(g),c.c(),_(c,1),c.m(u,f)),(!d||m&64)&&H(u,"face",g[6])},i(g){d||(_(a.$$.fragment,g),_(c),d=!0)},o(g){S(a.$$.fragment,g),S(c),d=!1},d(g){g&&(D(e),D(s),D(u)),U(a),c&&c.d()}}}function So(t){let e,n,r,i,o=t[3]&&cn(t),l=le(t[13]),a=[];for(let u=0;u<l.length;u+=1)a[u]=gn(fn(t,l,u));const s=u=>S(a[u],1,1,()=>{a[u]=null});return{c(){e=C("div"),o&&o.c(),n=M();for(let u=0;u<a.length;u+=1)a[u].c();b(e,"class",r="card "+t[7]+" stack-"+t[2]+" svelte-hurvu3"),H(e,"bridge",t[11]),H(e,"small",t[10]),H(e,"fourColor",t[9]),H(e,"empty",t[0]),H(e,"hidden",t[4]),H(e,"shadow",t[1]),H(e,"visible",t[3])},m(u,f){P(u,e,f),o&&o.m(e,null),w(e,n);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(e,null);i=!0},p(u,[f]){if(u[3]?o?(o.p(u,f),f&8&&_(o,1)):(o=cn(u),o.c(),_(o,1),o.m(e,n)):o&&(X(),S(o,1,1,()=>{o=null}),x()),f&9664){l=le(u[13]);let d;for(d=0;d<l.length;d+=1){const c=fn(u,l,d);a[d]?(a[d].p(c,f),_(a[d],1)):(a[d]=gn(c),a[d].c(),_(a[d],1),a[d].m(e,null))}for(X(),d=l.length;d<a.length;d+=1)s(d);x()}(!i||f&132&&r!==(r="card "+u[7]+" stack-"+u[2]+" svelte-hurvu3"))&&b(e,"class",r),(!i||f&2180)&&H(e,"bridge",u[11]),(!i||f&1156)&&H(e,"small",u[10]),(!i||f&644)&&H(e,"fourColor",u[9]),(!i||f&133)&&H(e,"empty",u[0]),(!i||f&148)&&H(e,"hidden",u[4]),(!i||f&134)&&H(e,"shadow",u[1]),(!i||f&140)&&H(e,"visible",u[3])},i(u){if(!i){_(o);for(let f=0;f<l.length;f+=1)_(a[f]);i=!0}},o(u){S(o),a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)S(a[f]);i=!1},d(u){u&&D(e),o&&o.d(),Pe(a,u)}}}function ko(t,e,n){let r,i,o,l,a,s,u,f,d,c;const g=Ft();pe(t,g,v=>n(15,c=v));let{card:m=null}=e,{empty:y=!1}=e,{shadow:T=!1}=e,{stack:O=void 0}=e;const A=["top","bottom"];return t.$$set=v=>{"card"in v&&n(14,m=v.card),"empty"in v&&n(0,y=v.empty),"shadow"in v&&n(1,T=v.shadow),"stack"in v&&n(2,O=v.stack)},t.$$.update=()=>{t.$$.dirty&32768&&n(11,r=c.size==="bridge"),t.$$.dirty&32768&&n(10,i=c.size==="small"),t.$$.dirty&32768&&n(9,o=c.fourColor),t.$$.dirty&16386&&n(4,l=m===null&&!T),t.$$.dirty&19&&n(3,a=!(y||l||T)),t.$$.dirty&16392&&n(8,s=a&&m.toString(ie.Card.StringType.ShortValue).replace("T","10")),t.$$.dirty&16392&&n(7,u=a&&m.toString(ie.Card.StringType.LongSuit)),t.$$.dirty&16392&&n(6,f=a&&m.num%13>9),t.$$.dirty&16392&&n(5,d=a&&m.toString(ie.Card.StringType.Long))},[y,T,O,a,l,d,f,u,s,o,i,r,g,A,m,c]}class ft extends te{constructor(e){super(),ee(this,e,ko,So,Z,{card:14,empty:0,shadow:1,stack:2})}}function mn(t,e,n){const r=t.slice();return r[19]=e[n].card,r[20]=e[n].shadow,r[21]=e[n].transform,r}function hn(t){let e,n;return e=new ft({props:{card:t[0],empty:t[0]===void 0}}),{c(){K(e.$$.fragment)},m(r,i){j(e,r,i),n=!0},p(r,i){const o={};i&1&&(o.card=r[0]),i&1&&(o.empty=r[0]===void 0),e.$set(o)},i(r){n||(_(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function vn(t){let e,n,r,i;return n=new ft({props:{card:t[19],shadow:t[20]}}),{c(){e=C("div"),K(n.$$.fragment),r=M(),b(e,"class","shadow-container svelte-1ns87h6"),Ae(e,"transform",t[21])},m(o,l){P(o,e,l),j(n,e,null),w(e,r),i=!0},p(o,l){const a={};l&8&&(a.card=o[19]),l&8&&(a.shadow=o[20]),n.$set(a),(!i||l&8)&&Ae(e,"transform",o[21])},i(o){i||(_(n.$$.fragment,o),i=!0)},o(o){S(n.$$.fragment,o),i=!1},d(o){o&&D(e),U(n)}}}function Co(t){let e,n,r,i,o,l,a=!t[1]&&hn(t),s=le(t[3]),u=[];for(let d=0;d<s.length;d+=1)u[d]=vn(mn(t,s,d));const f=d=>S(u[d],1,1,()=>{u[d]=null});return{c(){e=C("div"),n=C("div"),a&&a.c(),r=M();for(let d=0;d<u.length;d+=1)u[d].c();b(n,"aria-atomic","true"),b(n,"aria-live","polite"),b(e,"aria-label",t[2]),b(e,"aria-disabled",t[1]),b(e,"class","deck svelte-1ns87h6"),b(e,"role","button"),b(e,"tabindex","0"),H(e,"bridge",t[5]),H(e,"small",t[4]),H(e,"shuffling",t[1])},m(d,c){P(d,e,c),w(e,n),a&&a.m(n,null),w(n,r);for(let g=0;g<u.length;g+=1)u[g]&&u[g].m(n,null);i=!0,o||(l=[re(e,"keydown",Ct(["Space","Enter"],t[7],{preventDefault:!0})),re(e,"click",t[7])],o=!0)},p(d,[c]){if(d[1]?a&&(X(),S(a,1,1,()=>{a=null}),x()):a?(a.p(d,c),c&2&&_(a,1)):(a=hn(d),a.c(),_(a,1),a.m(n,r)),c&8){s=le(d[3]);let g;for(g=0;g<s.length;g+=1){const m=mn(d,s,g);u[g]?(u[g].p(m,c),_(u[g],1)):(u[g]=vn(m),u[g].c(),_(u[g],1),u[g].m(n,null))}for(X(),g=s.length;g<u.length;g+=1)f(g);x()}(!i||c&4)&&b(e,"aria-label",d[2]),(!i||c&2)&&b(e,"aria-disabled",d[1]),(!i||c&32)&&H(e,"bridge",d[5]),(!i||c&16)&&H(e,"small",d[4]),(!i||c&2)&&H(e,"shuffling",d[1])},i(d){if(!i){_(a);for(let c=0;c<s.length;c+=1)_(u[c]);i=!0}},o(d){S(a),u=u.filter(Boolean);for(let c=0;c<u.length;c+=1)S(u[c]);i=!1},d(d){d&&D(e),a&&a.d(),Pe(u,d),o=!1,ye(l)}}}function To(t,e,n,r){const i=t/r*e,o=.5*i/(n*52),l=1*i/(n*52);return`translate(${o}em , ${l}em)`}function No(t,e,n){let r,i,o,l,a,s;const u=Ft();pe(t,u,$=>n(16,s=$));let{numCards:f=52}=e,{numDecks:d=1}=e,{topCard:c=null}=e,{numShadows:g=10}=e,{shuffleAnimationSteps:m=4}=e,{shuffleAnimationMaxDistanceEm:y=.8}=e,{shuffleAnimationMaxRotateDeg:T=7}=e,{onClick:O=()=>{}}=e,A=0;function v($,I){const q=h=>[1,I+2].includes($)?0:(Math.random()*2-1)*h,R=q(y),B=q(y),p=q(T);return`translate(${R}em, ${B}em) rotate(${p}deg)`}function N(){A>0&&setTimeout(()=>{n(15,A-=1),N()},250)}function E(){if(!l)return O()}return t.$$set=$=>{"numCards"in $&&n(8,f=$.numCards),"numDecks"in $&&n(9,d=$.numDecks),"topCard"in $&&n(0,c=$.topCard),"numShadows"in $&&n(10,g=$.numShadows),"shuffleAnimationSteps"in $&&n(11,m=$.shuffleAnimationSteps),"shuffleAnimationMaxDistanceEm"in $&&n(12,y=$.shuffleAnimationMaxDistanceEm),"shuffleAnimationMaxRotateDeg"in $&&n(13,T=$.shuffleAnimationMaxRotateDeg),"onClick"in $&&n(14,O=$.onClick)},t.$$.update=()=>{t.$$.dirty&65536&&n(5,r=(s==null?void 0:s.size)==="bridge"),t.$$.dirty&65536&&n(4,i=(s==null?void 0:s.size)==="small"),t.$$.dirty&2817&&c===null&&f===52*d&&m>0&&(n(15,A=m+2),N()),t.$$.dirty&32768&&n(1,l=A>0),t.$$.dirty&36611&&n(3,o=c===void 0?[]:l?[...Array(g)].map(()=>({card:null,shadow:!1,transform:v(A,m)})):[...Array(g)].map(($,I)=>({card:void 0,shadow:!0,transform:To(I,f,d,g)}))),t.$$.dirty&1&&n(2,a=c===void 0?"Shuffle the deck":"Draw a card")},[c,l,a,o,i,r,u,E,f,d,g,m,y,T,O,A,s]}class Oo extends te{constructor(e){super(),ee(this,e,No,Co,Z,{numCards:8,numDecks:9,topCard:0,numShadows:10,shuffleAnimationSteps:11,shuffleAnimationMaxDistanceEm:12,shuffleAnimationMaxRotateDeg:13,onClick:14})}}function Eo(t){let e,n,r;return n=new Oo({props:{onClick:t[2],topCard:t[1],numCards:t[0]}}),{c(){e=C("main"),K(n.$$.fragment),b(e,"class","svelte-1tag1lj")},m(i,o){P(i,e,o),j(n,e,null),r=!0},p(i,[o]){const l={};o&2&&(l.topCard=i[1]),o&1&&(l.numCards=i[0]),n.$set(l)},i(i){r||(_(n.$$.fragment,i),r=!0)},o(i){S(n.$$.fragment,i),r=!1},d(i){i&&D(e),U(n)}}}function Ao(t,e,n){ir(fo);let r=new ie.Deck,i=r.cardsRemaining,o=null;function l(){o!==void 0?n(1,o=r.pop()):(r=new ie.Deck,n(1,o=null)),n(0,i=r.cardsRemaining)}const a=s=>{s.stopPropagation(),r=new ie.Deck,n(1,o=null),n(0,i=r.cardsRemaining)};return ot(()=>{Fe.update(s=>({...s,shuffle:a}))}),Ln(()=>{Fe.update(s=>({...s,shuffle:void 0}))}),[i,o,l]}class Do extends te{constructor(e){super(),ee(this,e,Ao,Eo,Z,{})}}const it=(t,e)=>rr(e).width+(t-1)*1.125,Po=(t,e,n)=>t.length===0?"empty":e?`closed${n==="rank"?`, ${t[0].toString(ie.CardStringType.LongValue)}s`:""}`:t.toString(ie.CardStringType.Long),$o=(t,e,n,r,i=!1)=>{const o=Po(new ie.Cards(e),r,i),l=n>0?` ${n} cards selected: ${new ie.Cards(e.slice(e.length-n)).toString(ie.CardStringType.Long)}`:"";return`${t}: ${o}.${l}`},Fo=(t,e,n)=>{const r={sourceStack:e,cards:n};t.dataTransfer.setData("application/json",JSON.stringify(r)),t.dataTransfer.effectAllowed="move"},Lo=t=>{const{sourceStack:e,cards:n}=JSON.parse(t.dataTransfer.getData("application/json"));return{sourceStack:e,cards:n.map(ie.Card.fromJSON)}};function Mo(t){let e,n;return e=new ft({props:{card:t[11]?null:t[0][0],stack:"left"}}),{c(){K(e.$$.fragment)},m(r,i){j(e,r,i),n=!0},p(r,i){const o={};i&2049&&(o.card=r[11]?null:r[0][0]),e.$set(o)},i(r){n||(_(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function Ro(t){let e,n;return e=new ft({props:{empty:!0}}),{c(){K(e.$$.fragment)},m(r,i){j(e,r,i),n=!0},p:Y,i(r){n||(_(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function pn(t){let e,n,r;return n=new lr({props:{cards:t[0].slice(1),capacity:t[1]-1,nested:!0,closed:t[2],index:t[3],isDraggableFn:t[4],selectedCardsN:t[5]}}),{c(){e=C("div"),K(n.$$.fragment),b(e,"class","nested svelte-o50ay1")},m(i,o){P(i,e,o),j(n,e,null),r=!0},p(i,o){const l={};o&1&&(l.cards=i[0].slice(1)),o&2&&(l.capacity=i[1]-1),o&4&&(l.closed=i[2]),o&8&&(l.index=i[3]),o&16&&(l.isDraggableFn=i[4]),o&32&&(l.selectedCardsN=i[5]),n.$set(l)},i(i){r||(_(n.$$.fragment,i),r=!0)},o(i){S(n.$$.fragment,i),r=!1},d(i){i&&D(e),U(n)}}}function Io(t){let e,n,r,i,o,l,a,s,u,f;const d=[Ro,Mo],c=[];function g(y,T){return y[0].length===0?0:1}r=g(t),i=c[r]=d[r](t);let m=t[0].length>1&&pn(t);return{c(){e=C("div"),n=C("div"),i.c(),o=M(),m&&m.c(),b(n,"aria-hidden",l=t[6]?void 0:"true"),b(e,"aria-label",t[7]),b(e,"class","stack svelte-o50ay1"),b(e,"style",t[14]),b(e,"draggable",t[13]),b(e,"role","button"),b(e,"tabindex",a=t[6]?void 0:0),H(e,"selected",t[12])},m(y,T){P(y,e,T),w(e,n),c[r].m(n,null),w(n,o),m&&m.m(n,null),s=!0,u||(f=[re(e,"dblclick",t[19]),re(e,"dragstart",function(){de(t[10])&&t[10].apply(this,arguments)}),re(e,"dragover",function(){de(t[9])&&t[9].apply(this,arguments)}),re(e,"drop",t[20]),re(e,"click",function(){de(t[8])&&t[8].apply(this,arguments)}),re(e,"keydown",function(){de(Ct(["Enter","Space"],t[8],{preventDefault:!0}))&&Ct(["Enter","Space"],t[8],{preventDefault:!0}).apply(this,arguments)})],u=!0)},p(y,[T]){t=y;let O=r;r=g(t),r===O?c[r].p(t,T):(X(),S(c[O],1,1,()=>{c[O]=null}),x(),i=c[r],i?i.p(t,T):(i=c[r]=d[r](t),i.c()),_(i,1),i.m(n,o)),t[0].length>1?m?(m.p(t,T),T&1&&_(m,1)):(m=pn(t),m.c(),_(m,1),m.m(n,null)):m&&(X(),S(m,1,1,()=>{m=null}),x()),(!s||T&64&&l!==(l=t[6]?void 0:"true"))&&b(n,"aria-hidden",l),(!s||T&128)&&b(e,"aria-label",t[7]),(!s||T&16384)&&b(e,"style",t[14]),(!s||T&8192)&&b(e,"draggable",t[13]),(!s||T&64&&a!==(a=t[6]?void 0:0))&&b(e,"tabindex",a),(!s||T&4096)&&H(e,"selected",t[12])},i(y){s||(_(i),_(m),s=!0)},o(y){S(i),S(m),s=!1},d(y){y&&D(e),c[r].d(),m&&m.d(),u=!1,ye(f)}}}function jo(t,e,n){let r,i,o,l,a,s,u,f,d,c;const g=Ft();pe(t,g,R=>n(18,c=R));let{cards:m=[]}=e,{capacity:y=4}=e,{closed:T=!1}=e,{index:O=0}=e,{isDraggableFn:A=()=>!1}=e,{selectedCardsN:v=0}=e,{labelOptions:N={title:"Stack"}}=e,{nested:E=!1}=e;const $=lt();function I(R){vt.call(this,t,R)}function q(R){vt.call(this,t,R)}return t.$$set=R=>{"cards"in R&&n(0,m=R.cards),"capacity"in R&&n(1,y=R.capacity),"closed"in R&&n(2,T=R.closed),"index"in R&&n(3,O=R.index),"isDraggableFn"in R&&n(4,A=R.isDraggableFn),"selectedCardsN"in R&&n(5,v=R.selectedCardsN),"labelOptions"in R&&n(16,N=R.labelOptions),"nested"in R&&n(6,E=R.nested)},t.$$.update=()=>{t.$$.dirty&262144&&n(17,r=c.size),t.$$.dirty&131074&&n(14,i=`width: ${it(y,r)}em`),t.$$.dirty&21&&n(13,o=!T&&A(m)),t.$$.dirty&33&&n(12,l=v>0&&v===m.length),t.$$.dirty&5&&n(11,a=T&&m.length===1),t.$$.dirty&9&&n(10,s=R=>{R.stopPropagation(),Fo(R,O,m)}),t.$$.dirty&72&&n(8,f=()=>{E||$("select",{index:O})}),t.$$.dirty&65637&&n(7,d=E?void 0:$o(N.title,m,v,T,N.closed))},n(9,u=R=>{R.preventDefault()}),[m,y,T,O,A,v,E,d,f,u,s,a,l,o,i,g,N,r,c,I,q]}class lr extends te{constructor(e){super(),ee(this,e,jo,Io,Z,{cards:0,capacity:1,closed:2,index:3,isDraggableFn:4,selectedCardsN:5,labelOptions:16,nested:6})}}const Uo=(t,e)=>{const n=t/e;return n<3/4?[3,5]:n<4/3?[4,4]:[5,3]},bn=(t,e)=>({length:t*e-15}),ar=(t,e,n)=>{const r=it(4,t)*e+.5*(e-1),i=rr(t).height*n+.5*(n-1);return[r,i]},Ko=(t,e,n)=>{const r=Math.min(e,n*2.3333333333333335),[i,o]=Uo(r,n),[l,a]=ar(t,i,o),s=r*.95/l,u=n*.95/a;return{fontSize:Math.max(Math.min(s,u),10),columns:i,rows:o,tableWidthEm:l,tableHeightEm:a}},yn=()=>{const t=new ie.Deck;return[...Array(13)].map(()=>t.popN(4)).concat([[],[]])},Lt=t=>{const[e,...n]=t;return n.every(r=>r.value===e.value)},zo=t=>t.length===0?!1:t.length===1?!0:Lt(t),Mt=(t,e)=>t.length+e.length>4?!1:e.length===0||e[e.length-1].value===t[0].value,Rt=(t,e,n,r)=>{const i=t.map(o=>[...o]);if(!Mt(r,i[n]))throw new Error(`Can not move cards ${r.map(o=>o.toString(Zn.ShortEmoji))} from pile ${e} to pile ${n}`);return i[e]=i[e].slice(0,i[e].length-r.length),i[n]=[...i[n],...r],i},It=t=>t.length===1||Lt(t)?t:It(t.slice(1)),Bo=(t,e)=>{if(t[e].length===0)throw new Error("Cannot move cards from an empty pile.");if(jt(t[e]))throw new Error("Cannot move cards from a completed pile.");const n=It(t[e]),r=t.reduce((l,a,s)=>s!==e&&Mt(n,a)?[...l,s]:l,[]);if(r.length===0)throw new Error(`Cannot move cards from pile ${e} to any other pile`);const i=r.filter(l=>t[l].length>0),o=i.length>0?i[0]:r[0];return Rt(t,e,o,n)},Vo=(t,e)=>{const n=t[e].slice(-1);return n.length===0?[[],n]:[t.reduce((i,o,l)=>l!==e&&Mt(n,o)?[...i,l]:i,[]),n]},sr=t=>t.reduce((e,n,r)=>{const[i,o]=Vo(t,r);return i.length===0?e:[...e,[r,i,o]]},[]),Ho=(t,e)=>{if(t[0]!==e[0]||t[1].length!==e[1].length)return!1;for(let n=0;n<t[1].length;n++)if(t[1][n]!==e[1][n])return!1;return new _t(t[2]).toString()===new _t(e[2]).toString()},qo=t=>(e,n,r)=>{var c;const[i,o,l]=e,a=[...l];if(o.length>1)return[!1,[]];const s=o[0],u=Rt(t,i,s,l),f=sr(u),d=r.filter(([g])=>g!==s).map(g=>g[0]===i?[s,[i],l]:g).sort((g,m)=>g[0]-m[0]);if(f.length-d.length===1){const g=u[i].slice(-2);if(((c=u[s][0])==null?void 0:c.value)!==l[0].value&&g.length===2&&g.every(m=>m.value===l[0].value))d.push([i,o,[g[1]]]),d.sort((m,y)=>m[0]-y[0]),a.push(g[1]);else return[!1,[]]}return f.length!==d.length?[!1,[]]:[d.every((g,m)=>Ho(g,f[m])),a]},Wo=t=>{const e=sr(t);if(e.length===0)return["dead-end",[]];const n=e.map(qo(t));return n.every(([r])=>r)&&n.length>0?["infinite-loop",n.reduce((i,o)=>[...i,...o[1]],[])]:[!1,[]]},jt=t=>t.length===4&&Lt(t),Jo=t=>t.every(e=>jt(e)||e.length===0),Go=t=>t.reduce((e,n,r)=>jt(n)?[...e,r]:e,[]),je=t=>({type:t,timestamp:Date.now()}),Qo=t=>{const e={};return t.forEach(({type:n})=>e[n]=(e[n]??0)+1),e},_n=t=>t.reduce((e,n)=>e+n,0),Yo=t=>{const e=t.filter(i=>i.type==="start").map(i=>i.timestamp),n=t.filter(i=>i.type==="stop").map(i=>i.timestamp);if(e.length===0)return[null,null];const r=(n[n.length-1]??Date.now())-e[0];return e.length!==n.length?[null,r]:[_n(n)-_n(e),r]},Ge=(t,e)=>t>0?`${t} ${e}`:"",wn=t=>{if(t<1e3)return Ge(t,"ms");const e=Math.floor(t/36e5),n=Math.floor(t/6e4-e*60),r=Math.floor(t/1e3-n*60-e*3600);return[Ge(e,"h"),Ge(n,"min"),Ge(r,"s")].join(" ").trim()};function Zo(t){let e,n,r,i,o,l,a,s=wn(t[0])+"",u,f,d,c,g,m,y=(t[1].move??0)-(t[1].undo??0)+"",T,O,A,v,N,E,$=(t[1].move??0)+(t[1].undo??0)+"",I,q,R,B,p,h,k=(t[1].undo??0)+"",L;return{c(){e=C("p"),e.innerHTML=`Here are statistics about the completed game. Undo and undone moves are
  excluded from <i>Significant moves</i> but included in <i>Total moves</i>.`,n=M(),r=C("table"),i=C("tr"),o=C("th"),o.textContent="Elapsed time:",l=M(),a=C("td"),u=Q(s),f=M(),d=C("tr"),c=C("th"),c.textContent="Significant moves:",g=M(),m=C("td"),T=Q(y),O=M(),A=C("tr"),v=C("th"),v.textContent="Total moves:",N=M(),E=C("td"),I=Q($),q=M(),R=C("tr"),B=C("th"),B.textContent="Undone moves:",p=M(),h=C("td"),L=Q(k),b(o,"class","svelte-5tdcck"),b(a,"class","svelte-5tdcck"),b(c,"class","svelte-5tdcck"),b(m,"class","svelte-5tdcck"),b(v,"class","svelte-5tdcck"),b(E,"class","svelte-5tdcck"),b(B,"class","svelte-5tdcck"),b(h,"class","svelte-5tdcck"),b(r,"class","svelte-5tdcck")},m(F,z){P(F,e,z),P(F,n,z),P(F,r,z),w(r,i),w(i,o),w(i,l),w(i,a),w(a,u),w(r,f),w(r,d),w(d,c),w(d,g),w(d,m),w(m,T),w(r,O),w(r,A),w(A,v),w(A,N),w(A,E),w(E,I),w(r,q),w(r,R),w(R,B),w(R,p),w(R,h),w(h,L)},p(F,[z]){z&1&&s!==(s=wn(F[0])+"")&&fe(u,s),z&2&&y!==(y=(F[1].move??0)-(F[1].undo??0)+"")&&fe(T,y),z&2&&$!==($=(F[1].move??0)+(F[1].undo??0)+"")&&fe(I,$),z&2&&k!==(k=(F[1].undo??0)+"")&&fe(L,k)},i:Y,o:Y,d(F){F&&(D(e),D(n),D(r))}}}function Xo(t,e,n){let r,i,o,{events:l}=e;return t.$$set=a=>{"events"in a&&n(2,l=a.events)},t.$$.update=()=>{t.$$.dirty&4&&n(1,r=Qo(l)),t.$$.dirty&4&&n(0,[i,o]=Yo(l),o)},[o,r,l]}class xo extends te{constructor(e){super(),ee(this,e,Xo,Zo,Z,{events:2})}}function Sn(t){let e,n;return e=new at({props:{title:"Completed",$$slots:{default:[el]},$$scope:{ctx:t}}}),e.$on("close",t[6]),{c(){K(e.$$.fragment)},m(r,i){j(e,r,i),n=!0},p(r,i){const o={};i&129&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(_(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function el(t){let e,n,r,i,o;return e=new xo({props:{events:t[0]}}),i=new be({props:{icon:"Shuffle",label:"Shuffle",onClick:t[5]}}),{c(){K(e.$$.fragment),n=M(),r=C("div"),K(i.$$.fragment),b(r,"class","actions svelte-16kom67")},m(l,a){j(e,l,a),P(l,n,a),P(l,r,a),j(i,r,null),o=!0},p(l,a){const s={};a&1&&(s.events=l[0]),e.$set(s)},i(l){o||(_(e.$$.fragment,l),_(i.$$.fragment,l),o=!0)},o(l){S(e.$$.fragment,l),S(i.$$.fragment,l),o=!1},d(l){l&&(D(n),D(r)),U(e,l),U(i)}}}function tl(t){let e,n,r=t[2]&&t[1]&&Sn(t);return{c(){r&&r.c(),e=At()},m(i,o){r&&r.m(i,o),P(i,e,o),n=!0},p(i,[o]){i[2]&&i[1]?r?(r.p(i,o),o&6&&_(r,1)):(r=Sn(i),r.c(),_(r,1),r.m(e.parentNode,e)):r&&(X(),S(r,1,1,()=>{r=null}),x())},i(i){n||(_(r),n=!0)},o(i){S(r),n=!1},d(i){i&&D(e),r&&r.d(i)}}}function nl(t,e,n){let r,{events:i}=e,{piles:o}=e,l=!0;const a=lt(),s=()=>a("shuffle"),u=()=>{n(1,l=!1)};return t.$$set=f=>{"events"in f&&n(0,i=f.events),"piles"in f&&n(4,o=f.piles)},t.$$.update=()=>{t.$$.dirty&16&&n(2,r=Jo(o)),t.$$.dirty&1&&n(1,l=!0)},[i,l,r,a,o,s,u]}class rl extends te{constructor(e){super(),ee(this,e,nl,tl,Z,{events:0,piles:4})}}const il=(t,e=ie.CardStringType.Long)=>{const n=t.map(i=>i.toString(e)),r=[n.slice(0,-1).join(", "),...n.slice(-1)].filter(i=>i).join(" and ");return r.charAt(0).toUpperCase()+r.slice(1)};function kn(t){let e,n;return e=new at({props:{title:"Dead end",$$slots:{default:[ol]},$$scope:{ctx:t}}}),e.$on("close",t[8]),{c(){K(e.$$.fragment)},m(r,i){j(e,r,i),n=!0},p(r,i){const o={};i&518&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(_(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function Cn(t){let e;return{c(){e=C("p"),e.textContent="No more possible moves. Undo the last move or start a new game."},m(n,r){P(n,e,r)},d(n){n&&D(e)}}}function Tn(t){let e,n,r;return{c(){e=C("p"),n=Q(t[1]),r=Q(` can be moved back and forth between two piles. There are no
        other possible moves. Undo the last move or start a new game.`)},m(i,o){P(i,e,o),w(e,n),w(e,r)},p(i,o){o&2&&fe(n,i[1])},d(i){i&&D(e)}}}function ol(t){let e,n,r,i,o,l,a,s=t[2]==="dead-end"&&Cn(),u=t[2]==="infinite-loop"&&Tn(t);return i=new be({props:{icon:"Shuffle",label:"Shuffle",onClick:t[6]}}),l=new be({props:{icon:"Undo",label:"Undo",onClick:t[7]}}),{c(){s&&s.c(),e=M(),u&&u.c(),n=M(),r=C("div"),K(i.$$.fragment),o=M(),K(l.$$.fragment),b(r,"class","actions svelte-16kom67")},m(f,d){s&&s.m(f,d),P(f,e,d),u&&u.m(f,d),P(f,n,d),P(f,r,d),j(i,r,null),w(r,o),j(l,r,null),a=!0},p(f,d){f[2]==="dead-end"?s||(s=Cn(),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),f[2]==="infinite-loop"?u?u.p(f,d):(u=Tn(f),u.c(),u.m(n.parentNode,n)):u&&(u.d(1),u=null)},i(f){a||(_(i.$$.fragment,f),_(l.$$.fragment,f),a=!0)},o(f){S(i.$$.fragment,f),S(l.$$.fragment,f),a=!1},d(f){f&&(D(e),D(n),D(r)),s&&s.d(f),u&&u.d(f),U(i),U(l)}}}function ll(t){let e,n,r=t[2]&&t[0]&&kn(t);return{c(){r&&r.c(),e=At()},m(i,o){r&&r.m(i,o),P(i,e,o),n=!0},p(i,[o]){i[2]&&i[0]?r?(r.p(i,o),o&5&&_(r,1)):(r=kn(i),r.c(),_(r,1),r.m(e.parentNode,e)):r&&(X(),S(r,1,1,()=>{r=null}),x())},i(i){n||(_(r),n=!0)},o(i){S(r),n=!1},d(i){i&&D(e),r&&r.d(i)}}}function al(t,e,n){let r,i,o,{piles:l}=e,a=!0;const s=lt(),u=()=>s("shuffle"),f=()=>s("undo"),d=()=>{n(0,a=!1)};return t.$$set=c=>{"piles"in c&&n(4,l=c.piles)},t.$$.update=()=>{t.$$.dirty&16&&n(2,[r,i]=Wo(l),r,(n(5,i),n(4,l))),t.$$.dirty&32&&n(1,o=il(i)),t.$$.dirty&16&&n(0,a=!0)},[a,o,r,s,l,i,u,f,d]}class sl extends te{constructor(e){super(),ee(this,e,al,ll,Z,{piles:4})}}function ul(t){let e,n,r,i,o,l,a,s,u,f,d;return{c(){e=C("p"),e.textContent=`The goal of the pileon solitaire is to rearrange a deck of cards into piles
    of equal ranks from thirteen random piles of four using fifteen piles.`,n=M(),r=C("h3"),r.textContent="Rules",i=M(),o=C("ul"),o.innerHTML=`<li>Each pile can contain up to four cards.</li> <li>Cards can be moved from top of the pile into a pile where the top card is
      of the same rank as the card that is moved.</li> <li>Cards of any rank can be moved into an empty pile.</li> <li>Multiple cards with the same rank can be moved at once.</li> <li>Pile is complete when it contains all four cards with the same rank.</li>`,l=M(),a=C("h3"),a.textContent="Moving cards",s=M(),u=C("ol"),u.innerHTML=`<li>Select the source pile by clicking a pile. Cards to be moved are
      highlighted. Click the source pile again to reduce the amount of selected
      cards.</li> <li>Move cards by clicking the target pile. If the move is valid, the cards
      are moved from the source pile into the target pile.</li>`,f=M(),d=C("p"),d.textContent=`If your device supports drag-and-drop, you can also drag the cards you want
    to move from the source pile into the target pile. Double-clicking the
    source pile automatically moves cards from the pile to an available target
    pile.`},m(c,g){P(c,e,g),P(c,n,g),P(c,r,g),P(c,i,g),P(c,o,g),P(c,l,g),P(c,a,g),P(c,s,g),P(c,u,g),P(c,f,g),P(c,d,g)},p:Y,d(c){c&&(D(e),D(n),D(r),D(i),D(o),D(l),D(a),D(s),D(u),D(f),D(d))}}}function fl(t){let e,n;return e=new at({props:{title:"How to play?",$$slots:{default:[ul]},$$scope:{ctx:t}}}),e.$on("close",t[0]),{c(){K(e.$$.fragment)},m(r,i){j(e,r,i),n=!0},p(r,[i]){const o={};i&2&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(_(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function cl(t){function e(n){vt.call(this,t,n)}return[e]}class dl extends te{constructor(e){super(),ee(this,e,cl,fl,Z,{})}}function Nn(t,e,n){const r=t.slice();return r[22]=e[n],r}function On(t,e,n){const r=t.slice();return r[27]=e[n],r[29]=n,r}function En(t){let e,n,r;return n=new lr({props:{cards:t[27],closed:t[10].includes(t[29]),selectedCardsN:t[9]===t[29]?t[8].length:0,labelOptions:{title:`Stack ${t[29]+1}`,closed:"rank"},index:t[29],isDraggableFn:zo}}),n.$on("drop",t[15](t[29])),n.$on("dblclick",t[16](t[29])),n.$on("select",t[14]),{c(){e=C("div"),K(n.$$.fragment),b(e,"class","pile svelte-tv3zd4")},m(i,o){P(i,e,o),j(n,e,null),r=!0},p(i,o){const l={};o&8&&(l.cards=i[27]),o&1024&&(l.closed=i[10].includes(i[29])),o&768&&(l.selectedCardsN=i[9]===i[29]?i[8].length:0),n.$set(l)},i(i){r||(_(n.$$.fragment,i),r=!0)},o(i){S(n.$$.fragment,i),r=!1},d(i){i&&D(e),U(n)}}}function An(t){let e,n;return{c(){e=C("div"),b(e,"class","pile svelte-tv3zd4"),b(e,"style",n=`min-width: ${it(4,t[2])}em`)},m(r,i){P(r,e,i)},p(r,i){i&4&&n!==(n=`min-width: ${it(4,r[2])}em`)&&b(e,"style",n)},d(r){r&&D(e)}}}function Dn(t){let e,n;return e=new dl({}),e.$on("close",t[21]),{c(){K(e.$$.fragment)},m(r,i){j(e,r,i),n=!0},p:Y,i(r){n||(_(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function gl(t){let e,n,r,i,o=`${t[7].fontSize}px`,l=`${t[6]*1.25}em`,a,s,u,f,d,c,g=le(t[3]),m=[];for(let v=0;v<g.length;v+=1)m[v]=En(On(t,g,v));const y=v=>S(m[v],1,1,()=>{m[v]=null});let T=le(bn(t[7].columns,t[7].rows)),O=[];for(let v=0;v<T.length;v+=1)O[v]=An(Nn(t,T,v));let A=t[5]&&Dn(t);return u=new rl({props:{events:t[4],piles:t[3]}}),u.$on("shuffle",t[12]),d=new sl({props:{piles:t[3]}}),d.$on("shuffle",t[12]),d.$on("undo",t[13]),{c(){e=C("main");for(let v=0;v<m.length;v+=1)m[v].c();n=M();for(let v=0;v<O.length;v+=1)O[v].c();a=M(),A&&A.c(),s=M(),K(u.$$.fragment),f=M(),K(d.$$.fragment),b(e,"class",r="pileon deal-"+t[7].columns+"x"+t[7].rows+" svelte-tv3zd4"),xe(()=>t[20].call(e)),Ae(e,"font-size",o),Ae(e,"max-width",l)},m(v,N){P(v,e,N);for(let E=0;E<m.length;E+=1)m[E]&&m[E].m(e,null);w(e,n);for(let E=0;E<O.length;E+=1)O[E]&&O[E].m(e,null);i=vr(e,t[20].bind(e)),P(v,a,N),A&&A.m(v,N),P(v,s,N),j(u,v,N),P(v,f,N),j(d,v,N),c=!0},p(v,[N]){if(N&116488){g=le(v[3]);let I;for(I=0;I<g.length;I+=1){const q=On(v,g,I);m[I]?(m[I].p(q,N),_(m[I],1)):(m[I]=En(q),m[I].c(),_(m[I],1),m[I].m(e,n))}for(X(),I=g.length;I<m.length;I+=1)y(I);x()}if(N&132){T=le(bn(v[7].columns,v[7].rows));let I;for(I=0;I<T.length;I+=1){const q=Nn(v,T,I);O[I]?O[I].p(q,N):(O[I]=An(q),O[I].c(),O[I].m(e,null))}for(;I<O.length;I+=1)O[I].d(1);O.length=T.length}(!c||N&128&&r!==(r="pileon deal-"+v[7].columns+"x"+v[7].rows+" svelte-tv3zd4"))&&b(e,"class",r),N&128&&o!==(o=`${v[7].fontSize}px`)&&Ae(e,"font-size",o),N&64&&l!==(l=`${v[6]*1.25}em`)&&Ae(e,"max-width",l),v[5]?A?(A.p(v,N),N&32&&_(A,1)):(A=Dn(v),A.c(),_(A,1),A.m(s.parentNode,s)):A&&(X(),S(A,1,1,()=>{A=null}),x());const E={};N&16&&(E.events=v[4]),N&8&&(E.piles=v[3]),u.$set(E);const $={};N&8&&($.piles=v[3]),d.$set($)},i(v){if(!c){for(let N=0;N<g.length;N+=1)_(m[N]);_(A),_(u.$$.fragment,v),_(d.$$.fragment,v),c=!0}},o(v){m=m.filter(Boolean);for(let N=0;N<m.length;N+=1)S(m[N]);S(A),S(u.$$.fragment,v),S(d.$$.fragment,v),c=!1},d(v){v&&(D(e),D(a),D(s),D(f)),Pe(m,v),Pe(O,v),i(),A&&A.d(v),U(u,v),U(d,v)}}}function ml(t,e,n){let r,i,o,l,a,s,u,f,d,c,g,m=ir(h=>({size:h.size==="default"?"bridge":h.size,fourColor:h.colors==="four-color"}));pe(t,m,h=>n(19,d=h));let y=[yn()],T=[je("start")],O=!1;const A=h=>{h.stopPropagation(),n(5,O=!0)},v=h=>{h.stopPropagation(),n(18,E=[void 0,[]]),n(17,y=[yn()]),n(4,T=[je("start")])},N=h=>{h.stopPropagation(),y.length>1&&(n(18,E=[void 0,[]]),n(17,y=y.slice(0,y.length-1)),n(4,T=[...T,je("undo")]))};let E=[void 0,[]];const $=(h,k,L)=>{try{n(18,E=[void 0,[]]);const F=Rt(y[y.length-1],h,k,L);n(17,y=[...y,F]),n(4,T=[...T,je("move")])}catch{}},I=h=>{const[k,L]=E,F=h.detail.index;i.includes(F)||(k===void 0||L.length===0?n(18,E=[F,It(r[F])]):k===F?n(18,E=[F,L.slice(1)]):k!==F&&($(k,F,L),n(18,E=[void 0,[]])))},q=h=>k=>{k.preventDefault();const{sourceStack:L,cards:F}=Lo(k);L!==h&&$(L,h,F)},R=h=>k=>{k.preventDefault();try{n(18,E=[void 0,[]]);const L=Bo(y[y.length-1],h);n(17,y=[...y,L]),n(4,T=[...T,je("move")])}catch{}};ot(()=>{Fe.update(h=>({...h,help:A,shuffle:v,undo:N}))}),Ln(()=>{Fe.update(h=>({...h,help:void 0,shuffle:void 0,undo:void 0}))});function B(){g=this.clientHeight,c=this.clientWidth,n(1,g),n(0,c)}const p=()=>{n(5,O=!1)};return t.$$.update=()=>{if(t.$$.dirty&3){const h=c<800||g<400?"small":"bridge";co(k=>({size:k.size==="default"?h:k.size,fourColor:k.colors==="four-color"}))}t.$$.dirty&131072&&n(3,r=y[y.length-1]),t.$$.dirty&8&&n(10,i=Go(r)),t.$$.dirty&262144&&n(9,o=E[0]),t.$$.dirty&262144&&n(8,l=E[1]),t.$$.dirty&524288&&n(2,a=d.size),t.$$.dirty&7&&n(7,s=Ko(a,c,g)),t.$$.dirty&4&&n(6,[u,f]=ar(a,5,3),u)},[c,g,a,r,T,O,u,s,l,o,i,m,v,N,I,q,R,y,E,d,B,p]}class hl extends te{constructor(e){super(),ee(this,e,ml,gl,Z,{})}}function vl(t){let e,n,r,i,o,l,a,s,u;e=new vi({});var f=t[0];function d(c,g){return{}}return f&&(r=zt(f,d())),l=new Er({}),{c(){K(e.$$.fragment),n=M(),r&&K(r.$$.fragment),i=M(),o=M(),K(l.$$.fragment)},m(c,g){j(e,c,g),P(c,n,g),r&&j(r,c,g),P(c,i,g),P(c,o,g),j(l,c,g),a=!0,s||(u=re(document.body,"keydown",t[1]),s=!0)},p(c,[g]){if(g&1&&f!==(f=c[0])){if(r){X();const m=r;S(m.$$.fragment,1,0,()=>{U(m,1)}),x()}f?(r=zt(f,d()),K(r.$$.fragment),_(r.$$.fragment,1),j(r,i.parentNode,i)):r=null}},i(c){a||(_(e.$$.fragment,c),r&&_(r.$$.fragment,c),_(l.$$.fragment,c),a=!0)},o(c){S(e.$$.fragment,c),r&&S(r.$$.fragment,c),S(l.$$.fragment,c),a=!1},d(c){c&&(D(n),D(i),D(o)),U(e,c),r&&U(r,c),U(l,c),s=!1,u()}}}function pl(t,e,n){let r,i,o;pe(t,Fe,a=>n(3,i=a)),pe(t,$e,a=>n(2,o=a));const l=a=>{a.key==="z"&&(a.ctrlKey||a.metaKey)&&i.undo!==void 0&&i.undo(a),a.key==="F1"&&i.help!==void 0&&i.help(a)};return t.$$.update=()=>{t.$$.dirty&4&&n(0,r=o.game==="deck"?Do:hl)},[r,l,o]}class bl extends te{constructor(e){super(),ee(this,e,pl,vl,Z,{})}}new bl({target:document.body});
